<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Project: /home/travis/build/AliceO2Group/AliceO2/Framework/DebugGUI/src/sokol_gfx.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d3/da9/sokol__gfx_8h_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">sokol_gfx.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d3/da9/sokol__gfx_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#pragma once</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">    sokol_gfx.h -- simple 3D API wrapper</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    Do this:</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">        #define SOKOL_IMPL</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    before you include this file in *one* C or C++ file to create the</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">    implementation.</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    In the same place define one of the following to select the rendering</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">    backend:</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">        #define SOKOL_GLCORE33</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">        #define SOKOL_GLES2</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">        #define SOKOL_GLES3</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">        #define SOKOL_D3D11</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">        #define SOKOL_METAL</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">    I.e. for the GL 3.3 Core Profile it should look like this:</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">    #include ...</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment">    #include ...</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">    #define SOKOL_IMPL</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">    #define SOKOL_GLCORE33</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">    #include &quot;sokol_gfx.h&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">    To enable shader compilation support in the D3D11 backend:</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">        #define SOKOL_D3D11_SHADER_COMPILER</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">    If SOKOL_D3D11_SHADER_COMPILER is enabled, the executable will link against</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">    d3dcompiler.lib (d3dcompiler_47.dll).</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">    Optionally provide the following defines with your own implementations:</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment">    SOKOL_ASSERT(c)     - your own assert macro (default: assert(c))</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment">    SOKOL_MALLOC(s)     - your own malloc function (default: malloc(s))</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">    SOKOL_FREE(p)       - your own free function (default: free(p))</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">    SOKOL_LOG(msg)      - your own logging function (default: puts(msg))</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">    SOKOL_UNREACHABLE() - a guard macro for unreachable code (default: assert(false))</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">    SOKOL_API_DECL      - public function declaration prefix (default: extern)</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">    SOKOL_API_IMPL      - public function implementation prefix (default: -)</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">    API usage validation macros:</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">    SOKOL_VALIDATE_BEGIN()      - begin a validation block (default:_sg_validate_begin())</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">    SOKOL_VALIDATE(cond, err)   - like assert but for API validation (default: _sg_validate(cond, err))</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">    SOKOL_VALIDATE_END()        - end a validation block, return true if all checks in block passed (default: bool _sg_validate())</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">    If you don&#39;t want validation errors to be fatal, define SOKOL_VALIDATE_NON_FATAL,</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">    be aware though that this may spam SOKOL_LOG messages.</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">    Optionally define the following to force debug checks and validations</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">    even in release mode:</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">    SOKOL_DEBUG         - by default this is defined if _DEBUG is defined</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">    sokol_gfx DOES NOT:</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">    ===================</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">    - create a window or the 3D-API context/device, you must do this</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">      before sokol_gfx is initialized, and pass any required information</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">      (like 3D device pointers) to the sokol_gfx initialization call</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">    - present the rendered frame, how this is done exactly usually depends</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">      on how the window and 3D-API context/device was created</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">    - provide a unified shader language, instead 3D-API-specific shader</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">      source-code or shader-bytecode must be provided</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">    For complete code examples using the various backend 3D-APIs, see:</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">        https://github.com/floooh/sokol-samples</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">    STEP BY STEP</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">    ============</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">    --- to initialize sokol_gfx, after creating a window and a 3D-API</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">        context/device, call:</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">            sg_setup(const sg_desc*)</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">    --- create resource objects (at least buffers, shaders and pipelines,</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">        and optionally images and passes):</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">            sg_buffer sg_make_buffer(const sg_buffer_desc*)</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">            sg_image sg_make_image(const sg_image_desc*)</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">            sg_shader sg_make_shader(const sg_shader_desc*)</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">            sg_pipeline sg_make_pipeline(const sg_pipeline_desc*)</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">            sg_pass sg_make_pass(const sg_pass_desc*)</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">    --- start rendering to the default frame buffer with:</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">            sg_begin_default_pass(const sg_pass_action* actions, int width, int height)</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">    --- or start rendering to an offscreen framebuffer with:</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">            sg_begin_pass(sg_pass pass, const sg_pass_action* actions)</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">    --- fill an sg_draw_state struct with the resource bindings for the next</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">        draw call (one pipeline object, 1..N vertex buffers, 0 or 1</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">        index buffer, 0..N image objects to use as textures each on</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">        the vertex-shader- and fragment-shader-stage and then call</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">            sg_apply_draw_state(const sg_draw_state* draw_state)</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">        to update the resource bindings</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">    --- optionally update shader uniform data with:</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">            sg_apply_uniform_block(sg_shader_stage stage, int ub_index, const void* data, int num_bytes)</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">    --- kick off a draw call with:</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">            sg_draw(int base_element, int num_elements, int num_instances)</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">    --- finish the current rendering pass with:</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">            sg_end_pass()</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">    --- when done with the current frame, call</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">            sg_commit()</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">    --- at the end of your program, shutdown sokol_gfx with:</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">            sg_shutdown()</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">    --- if you need to destroy resources before sg_shutdown(), call:</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">            sg_destroy_buffer(sg_buffer buf)</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">            sg_destroy_image(sg_image img)</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">            sg_destroy_shader(sg_shader shd)</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">            sg_destroy_pipeline(sg_pipeline pip)</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">            sg_destroy_pass(sg_pass pass)</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">    --- to set a new viewport rectangle, call</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">            sg_apply_viewport(int x, int y, int width, int height, bool origin_top_left)</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">    --- to set a new scissor rect, call:</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">            sg_apply_scissor_rect(int x, int y, int width, int height, bool origin_top_left)</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">        both sg_apply_viewport() and sg_apply_scissor_rect() must be called</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">        inside a rendering pass</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">        beginning a pass will reset the viewport to the size of the framebuffer used</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">        in the new pass,</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">    --- to update the content of buffer and image resources, call:</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">            sg_update_buffer(sg_buffer buf, const void* ptr, int num_bytes)</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">            sg_update_image(sg_image img, const sg_image_content* content)</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">        buffers and images to be updated must have been created with</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">        SG_USAGE_DYNAMIC or SG_USAGE_STREAM</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">    --- to check for support of optional features:</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">            bool sg_query_feature(sg_feature feature)</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">    --- if you need to call into the underlying 3D-API directly, you must call:</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">            sg_reset_state_cache()</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">        ...before calling sokol_gfx functions again</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">    BACKEND-SPECIFIC TOPICS:</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">    ========================</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">    --- the GL backends need to know about the internal structure of uniform</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">        blocks, and the texture sampler-name and -type:</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">            typedef struct {</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">                float mvp[16];      // model-view-projection matrix</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">                float offset0[2];   // some 2D vectors</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">                float offset1[2];</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">                float offset2[2];</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">            } params_t;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">            // uniform block structure and texture image definition in sg_shader_desc:</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">            sg_shader_desc desc = {</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">                // uniform block description (size and internal structure)</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">                .vs.uniform_blocks[0] = {</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">                    .size = sizeof(params_t),</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">                    .uniforms = {</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">                        [0] = { .name=&quot;mvp&quot;, .type=SG_UNIFORMTYPE_MAT4 },</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">                        [1] = { .name=&quot;offset0&quot;, .type=SG_UNIFORMTYPE_VEC2 },</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">                        ...</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">                    }</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">                },</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">                // one texture on the fragment-shader-stage, GLES2/WebGL needs name and image type</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">                .fs.images[0] = { .name=&quot;tex&quot;, .type=SG_IMAGETYPE_ARRAY }</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">                ...</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">            };</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">    --- the Metal and D3D11 backends only need to know the size of uniform blocks,</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">        not their internal member structure, and they only need to know</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">        the type of a texture sampler, not its name:</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">            sg_shader_desc desc = {</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">                .vs.uniform_blocks[0].size = sizeof(params_t),</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">                .fs.images[0].type = SG_IMAGETYPE_ARRAY,</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">                ...</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">            };</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">    --- when creating a pipeline object, GLES2/WebGL need to know the vertex</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">        attribute names as used in the vertex shader when describing vertex</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">        layouts:</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">            sg_pipeline_desc desc = {</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">                .layout = {</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">                    .attrs = {</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">                        [0] = { .name=&quot;position&quot;, .format=SG_VERTEXFORMAT_FLOAT3 },</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">                        [1] = { .name=&quot;color1&quot;, .format=SG_VERTEXFORMAT_FLOAT4 }</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">                    }</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">                }</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">            };</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">    --- on D3D11 you need to provide a semantic name and semantic index in the</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">        vertex attribute definition instead (see the D3D11 documentation on</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">        D3D11_INPUT_ELEMENT_DESC for details):</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">            sg_pipeline_desc desc = {</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">                .layout = {</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">                    .attrs = {</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">                        [0] = { .sem_name=&quot;POSITION&quot;, .sem_index=0, .format=SG_VERTEXFORMAT_FLOAT3 },</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">                        [1] = { .sem_name=&quot;COLOR&quot;, .sem_index=1, .format=SG_VERTEXFORMAT_FLOAT4 }</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">                    }</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">                }</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">            };</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">    --- on Metal, GL 3.3 or GLES3/WebGL2, you don&#39;t need to provide an attribute</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">        name or semantic name, since vertex attributes can be bound by their slot index</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">        (this is mandatory in Metal, and optional in GL):</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">            sg_pipeline_desc desc = {</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">                .layout = {</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">                    .attrs = {</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">                        [0] = { .format=SG_VERTEXFORMAT_FLOAT3 },</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">                        [1] = { .format=SG_VERTEXFORMAT_FLOAT4 }</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">                    }</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">                }</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">            };</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">    WORKING WITH CONTEXTS</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">    =====================</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">    sokol-gfx allows to switch between different rendering contexts and</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">    associate resource objects with contexts. This is useful to</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">    create GL applications that render into multiple windows.</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">    A rendering context keeps track of all resources created while</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">    the context is active. When the context is destroyed, all resources</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">    &quot;belonging to the context&quot; are destroyed as well.</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">    A default context will be created and activated implicitly in</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">    sg_setup(), and destroyed in sg_shutdown(). So for a typical application</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">    which *doesn&#39;t* use multiple contexts, nothing changes, and calling</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">    the context functions isn&#39;t necessary.</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">    Three functions have been added to work with contexts:</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">    --- sg_context sg_setup_context():</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">        This must be called once after a GL context has been created and</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">        made active.</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">    --- void sg_activate_context(sg_context ctx)</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">        This must be called after making a different GL context active.</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">        Apart from 3D-API-specific actions, the call to sg_activate_context()</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">        will internally call sg_reset_state_cache().</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">    --- void sg_discard_context(sg_context ctx)</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">        This must be called right before a GL context is destroyed and</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">        will destroy all resources associated with the context (that</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">        have been created while the context was active) The GL context must be</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">        active at the time sg_discard_context(sg_context ctx) is called.</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">    Also note that resources (buffers, images, shaders and pipelines) must</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">    only be used or destroyed while the same GL context is active that</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">    was also active while the resource was created (an exception is</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">    resource sharing on GL, such resources can be used while</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">    another context is active, but must still be destroyed under</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">    the same context that was active during creation).</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">    For more information, check out the multiwindow-glfw sample:</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">    https://github.com/floooh/sokol-samples/blob/master/glfw/multiwindow-glfw.c</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">    TODO:</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">    ====</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">    - talk about asynchronous resource creation</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">    zlib/libpng license</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">    Copyright (c) 2018 Andre Weissflog</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">    This software is provided &#39;as-is&#39;, without any express or implied warranty.</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">    In no event will the authors be held liable for any damages arising from the</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">    use of this software.</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">    Permission is granted to anyone to use this software for any purpose,</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">    including commercial applications, and to alter it and redistribute it</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">    freely, subject to the following restrictions:</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">        1. The origin of this software must not be misrepresented; you must not</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">        claim that you wrote the original software. If you use this software in a</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">        product, an acknowledgment in the product documentation would be</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">        appreciated but is not required.</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">        2. Altered source versions must be plainly marked as such, and must not</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">        be misrepresented as being the original software.</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">        3. This notice may not be removed or altered from any source</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">        distribution.</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="preprocessor">#include &lt;cstdint&gt;</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="preprocessor">#include &lt;cstdbool&gt;</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor">#ifndef SOKOL_API_DECL</span></div><div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">  318</a></span>&#160;<span class="preprocessor">#define SOKOL_API_DECL extern</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="preprocessor">#pragma warning(push)</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="preprocessor">#pragma warning(disable : 4201) </span><span class="comment">/* nonstandard extension used: nameless struct/union */</span><span class="preprocessor"></span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">    Resource id typedefs:</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">    sg_buffer:      vertex- and index-buffers</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">    sg_image:       textures and render targets</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">    sg_shader:      vertex- and fragment-shaders, uniform blocks</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">    sg_pipeline:    associated shader and vertex-layouts, and render states</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">    sg_pass:        a bundle of render targets and actions on them</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">    sg_context:     a &#39;context handle&#39; for switching between 3D-API contexts</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">    Instead of pointers, resource creation functions return a 32-bit</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">    number which uniquely identifies the resource object.</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">    The 32-bit resource id is split into a 16-bit pool index in the lower bits,</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">    and a 16-bit &#39;unique counter&#39; in the upper bits. The index allows fast</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">    pool lookups, and combined with the unique-mask it allows to detect</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">    &#39;dangling accesses&#39; (trying to use an object which no longer exists, and</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">    its pool slot has been reused for a new object)</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">    The resource ids are wrapped into a struct so that the compiler</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">    can complain when the wrong resource type is used.</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00352"></a><span class="lineno"><a class="line" href="../../d9/dee/structsg__buffer.html">  352</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00353"></a><span class="lineno"><a class="line" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">  353</a></span>&#160;  uint32_t <a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;} <a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a>;</div><div class="line"><a name="l00355"></a><span class="lineno"><a class="line" href="../../d5/de5/structsg__image.html">  355</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">  356</a></span>&#160;  uint32_t <a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;} <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a>;</div><div class="line"><a name="l00358"></a><span class="lineno"><a class="line" href="../../da/d75/structsg__shader.html">  358</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00359"></a><span class="lineno"><a class="line" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">  359</a></span>&#160;  uint32_t <a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;} <a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a>;</div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="../../d5/d97/structsg__pipeline.html">  361</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">  362</a></span>&#160;  uint32_t <a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;} <a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a>;</div><div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="../../dc/de5/structsg__pass.html">  364</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">  365</a></span>&#160;  uint32_t <a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;} <a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a>;</div><div class="line"><a name="l00367"></a><span class="lineno"><a class="line" href="../../d2/d13/structsg__context.html">  367</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="../../d2/d13/structsg__context.html#a9ea43d1c0d05c84ca8d1bedbb97f17ca">  368</a></span>&#160;  uint32_t <a class="code" href="../../d2/d13/structsg__context.html#a9ea43d1c0d05c84ca8d1bedbb97f17ca">id</a>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;} <a class="code" href="../../d2/d13/structsg__context.html">sg_context</a>;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">    various compile-time constants</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">    FIXME: it may make sense to convert some of those into defines so</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">    that the user code can override them.</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l00378"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">  378</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> = 0,</div><div class="line"><a name="l00379"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">  379</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">SG_NUM_SHADER_STAGES</a> = 2,</div><div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">  380</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a> = 2,</div><div class="line"><a name="l00381"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">  381</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a> = 4,</div><div class="line"><a name="l00382"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">  382</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a> = 4,</div><div class="line"><a name="l00383"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">  383</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a> = 12,</div><div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">  384</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a> = 4,</div><div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca746b50b205e4d09963f11f32b18c6cf9">  385</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca746b50b205e4d09963f11f32b18c6cf9">SG_MAX_UB_MEMBERS</a> = 16,</div><div class="line"><a name="l00386"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">  386</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a> = 16,</div><div class="line"><a name="l00387"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca8a9a7015046cf047f0534dfe86bc7545">  387</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca8a9a7015046cf047f0534dfe86bc7545">SG_MAX_MIPMAPS</a> = 16,</div><div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caaf24e90f94788e5300a2149564f3c5c2">  388</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caaf24e90f94788e5300a2149564f3c5c2">SG_MAX_TEXTUREARRAY_LAYERS</a> = 128</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;};</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">    sg_feature</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">    These are optional features, use the function</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">    sg_query_feature() to check whether the feature is supported.</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00397"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897">  397</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4">  398</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4">SG_FEATURE_INSTANCING</a>,</div><div class="line"><a name="l00399"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a9ca2b37fa43fcd46f8d6e537064e3e9b">  399</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a9ca2b37fa43fcd46f8d6e537064e3e9b">SG_FEATURE_TEXTURE_COMPRESSION_DXT</a>,</div><div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a06f42e3be3662f69b106bba1d47e92ef">  400</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a06f42e3be3662f69b106bba1d47e92ef">SG_FEATURE_TEXTURE_COMPRESSION_PVRTC</a>,</div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a70fd29544a81d7bb37f26af9b263ded6">  401</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a70fd29544a81d7bb37f26af9b263ded6">SG_FEATURE_TEXTURE_COMPRESSION_ATC</a>,</div><div class="line"><a name="l00402"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ab44ce51d78809d456207d70f230d8d7f">  402</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ab44ce51d78809d456207d70f230d8d7f">SG_FEATURE_TEXTURE_COMPRESSION_ETC2</a>,</div><div class="line"><a name="l00403"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897afd60e8098c18e6a67973d66e173742d8">  403</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897afd60e8098c18e6a67973d66e173742d8">SG_FEATURE_TEXTURE_FLOAT</a>,</div><div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a1afe1718136ca6a21672b44eacb70b8e">  404</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a1afe1718136ca6a21672b44eacb70b8e">SG_FEATURE_TEXTURE_HALF_FLOAT</a>,</div><div class="line"><a name="l00405"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a99594e9f1b7e5ca8dfaf37b742abb0aa">  405</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a99594e9f1b7e5ca8dfaf37b742abb0aa">SG_FEATURE_ORIGIN_BOTTOM_LEFT</a>,</div><div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ac7c094127fe7cd4de810406b6a6c9c68">  406</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ac7c094127fe7cd4de810406b6a6c9c68">SG_FEATURE_ORIGIN_TOP_LEFT</a>,</div><div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a900e4644906ceec168a2ce44452e1a31">  407</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a900e4644906ceec168a2ce44452e1a31">SG_FEATURE_MSAA_RENDER_TARGETS</a>,</div><div class="line"><a name="l00408"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad368978a4331e32ddf2715bbc6c6aa10">  408</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad368978a4331e32ddf2715bbc6c6aa10">SG_FEATURE_PACKED_VERTEX_FORMAT_10_2</a>,</div><div class="line"><a name="l00409"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897acd4385efaeceb7f3bb64817dbf0d5acf">  409</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897acd4385efaeceb7f3bb64817dbf0d5acf">SG_FEATURE_MULTIPLE_RENDER_TARGET</a>,</div><div class="line"><a name="l00410"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a8a9131b5aa4d596ee5caaf5c738dd90f">  410</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a8a9131b5aa4d596ee5caaf5c738dd90f">SG_FEATURE_IMAGETYPE_3D</a>,</div><div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a3b2fbf1b80817df6f45664c192aa1183">  411</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a3b2fbf1b80817df6f45664c192aa1183">SG_FEATURE_IMAGETYPE_ARRAY</a>,</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a4ea76b74c925bb54348d8d8d21977e05">  413</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a4ea76b74c925bb54348d8d8d21977e05">SG_NUM_FEATURES</a></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897">sg_feature</a>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">    sg_resource_state</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">    The current state of a resource in its resource pool.</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">    Resources start in the INITIAL state, which means the</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">    pool slot is unoccupied and can be allocated. When a resource is</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">    created, first an id is allocated, and the resource pool slot</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">    is set to state ALLOC. After allocation, the resource is</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">    initialized, which may result in the VALID or FAILED state. The</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">    reason why allocation and initialization are separate is because</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">    some resource types (e.g. buffers and images) might be asynchronously</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">    initialized by the user application. If a resource which is not</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">    in the VALID state is attempted to be used for rendering, rendering</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">    operations will silently be dropped.</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">    The special INVALID state is returned in sg_query_xxx_state() if no</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">    resource object exists for the provided resource id.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">  434</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00435"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ab50103fecd9e58aada2d5a8fccea86f5">  435</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ab50103fecd9e58aada2d5a8fccea86f5">SG_RESOURCESTATE_INITIAL</a>,</div><div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">  436</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>,</div><div class="line"><a name="l00437"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">  437</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>,</div><div class="line"><a name="l00438"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">  438</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>,</div><div class="line"><a name="l00439"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a2438cce88c4df9a035b4b7cd91e18b69">  439</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a2438cce88c4df9a035b4b7cd91e18b69">SG_RESOURCESTATE_INVALID</a>,</div><div class="line"><a name="l00440"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af3c2392017e324458dd06c4ded84c20f">  440</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af3c2392017e324458dd06c4ded84c20f">_SG_RESOURCESTATE_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a>;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">    sg_usage</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">    A resource usage hint describing the update strategy of</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">    buffers and images. This is used in the sg_buffer_desc.usage</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">    and sg_image_desc.usage members when creating buffers</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">    and images:</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">    SG_USAGE_IMMUTABLE:     the resource will never be updated with</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">                            new data, instead the data content of the</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">                            resource must be provided on creation</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">    SG_USAGE_DYNAMIC:       the resource will be updated infrequently</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">                            with new data (this could range from &quot;once</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">                            after creation&quot;, to &quot;quite often but not</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">                            every frame&quot;)</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">    SG_USAGE_STREAM:        the resource will be updated each frame</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">                            with new content</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">    The rendering backends use this hint to prevent that the</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">    CPU needs to wait for the GPU when attempting to update</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">    a resource that might be currently accessed by the GPU.</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">    Resource content is updated with the function sg_update_buffer() for</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">    buffer objects, and sg_update_image() for image objects. Only</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">    one update is allowed per frame and resource object. The</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">    application must update all data required for rendering (this</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">    means that the update data can be smaller than the resource size,</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">    if only a part of the overall resource size is used for rendering,</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">    you only need to make sure that the data that *is* used is valid.</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">    The default usage is SG_USAGE_IMMUTABLE.</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00475"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">  475</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0ccaedbf463e763fb166990baf20427d0952">  476</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0ccaedbf463e763fb166990baf20427d0952">_SG_USAGE_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">  477</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>,</div><div class="line"><a name="l00478"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca38c2a7730739e0e0ed461915d44e2dd8">  478</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca38c2a7730739e0e0ed461915d44e2dd8">SG_USAGE_DYNAMIC</a>,</div><div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0ccafa387c8c45104f25a8e2a68486ae620c">  479</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0ccafa387c8c45104f25a8e2a68486ae620c">SG_USAGE_STREAM</a>,</div><div class="line"><a name="l00480"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca22d36960dc9dde171d91975ba29dc166">  480</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca22d36960dc9dde171d91975ba29dc166">_SG_USAGE_NUM</a>,</div><div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca792a5d7430633327189873e181a1d277">  481</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca792a5d7430633327189873e181a1d277">_SG_USAGE_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a>;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">    sg_buffer_type</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">    This indicates whether a buffer contains vertex- or index-data,</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">    used in the sg_buffer_desc.type member when creating a buffer.</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">    The default value is SG_BUFFERTYPE_VERTEXBUFFER.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8f">  492</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00493"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fad173d15b4c2de18aa2c2dd2b238afb5b">  493</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fad173d15b4c2de18aa2c2dd2b238afb5b">_SG_BUFFERTYPE_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00494"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fa1052a9f00ec6b8a3e914db754c0c64e2">  494</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fa1052a9f00ec6b8a3e914db754c0c64e2">SG_BUFFERTYPE_VERTEXBUFFER</a>,</div><div class="line"><a name="l00495"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8faef8b56cec34dee3ebcb7e6d5810bb8bd">  495</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8faef8b56cec34dee3ebcb7e6d5810bb8bd">SG_BUFFERTYPE_INDEXBUFFER</a>,</div><div class="line"><a name="l00496"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fad7448d503ebf8d39a8c548c8b78e7315">  496</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fad7448d503ebf8d39a8c548c8b78e7315">_SG_BUFFERTYPE_NUM</a>,</div><div class="line"><a name="l00497"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8faf3da405e2b1751288cb78c867fd57371">  497</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8faf3da405e2b1751288cb78c867fd57371">_SG_BUFFERTYPE_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8f">sg_buffer_type</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">    sg_index_type</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">    Indicates whether indexed rendering (fetching vertex-indices from an</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">    index buffer) is used, and if yes, the index data type (16- or 32-bits).</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">    This is used in the sg_pipeline_desc.index_type member when creating a</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">    pipeline object.</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">    The default index type is SG_INDEXTYPE_NONE.</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641">  510</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00511"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641aa1fc6c42a98486bb652164eb9bd3a768">  511</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641aa1fc6c42a98486bb652164eb9bd3a768">_SG_INDEXTYPE_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00512"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">  512</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a>,</div><div class="line"><a name="l00513"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641aa12a337c61bc9a140d5a9ec1db91baae">  513</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641aa12a337c61bc9a140d5a9ec1db91baae">SG_INDEXTYPE_UINT16</a>,</div><div class="line"><a name="l00514"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a351dd7105c6dd3e47dabb9ee6dff643a">  514</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a351dd7105c6dd3e47dabb9ee6dff643a">SG_INDEXTYPE_UINT32</a>,</div><div class="line"><a name="l00515"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641af2db5a51a476ced67a09acbf097bfdaf">  515</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641af2db5a51a476ced67a09acbf097bfdaf">_SG_INDEXTYPE_NUM</a>,</div><div class="line"><a name="l00516"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a403d944131bfa46d2866033e183d481b">  516</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a403d944131bfa46d2866033e183d481b">_SG_INDEXTYPE_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641">sg_index_type</a>;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">    sg_image_type</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">    Indicates the basic image type (2D-texture, cubemap, 3D-texture</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">    or 2D-array-texture). 3D- and array-textures are not supported</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">    on the GLES2/WebGL backend. The image type is used in the</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">    sg_image_desc.type member when creating an image.</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">    The default image type when creating an image is SG_IMAGETYPE_2D.</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00529"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">  529</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00530"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dae006b5445cb0f3b9c939d8074980805e">  530</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dae006b5445cb0f3b9c939d8074980805e">_SG_IMAGETYPE_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00531"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">  531</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a>,</div><div class="line"><a name="l00532"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">  532</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>,</div><div class="line"><a name="l00533"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">  533</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>,</div><div class="line"><a name="l00534"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">  534</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>,</div><div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daab668543469e69649f4c7b711b294041">  535</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daab668543469e69649f4c7b711b294041">_SG_IMAGETYPE_NUM</a>,</div><div class="line"><a name="l00536"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da4ae5b415ba25c02189dc6b2aa6bcb10f">  536</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da4ae5b415ba25c02189dc6b2aa6bcb10f">_SG_IMAGETYPE_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">sg_image_type</a>;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">    sg_cube_face</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">    The cubemap faces. Use these as indices in the sg_image_desc.content</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">    array.</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00545"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522">  545</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00546"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522ae607f2481dc9fb802d9045f235fa0a29">  546</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522ae607f2481dc9fb802d9045f235fa0a29">SG_CUBEFACE_POS_X</a>,</div><div class="line"><a name="l00547"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522ab2ace91f8cd0c0b7880c8328c312335b">  547</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522ab2ace91f8cd0c0b7880c8328c312335b">SG_CUBEFACE_NEG_X</a>,</div><div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522a5e6838ff680c0fc1ec2931b35f004d20">  548</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522a5e6838ff680c0fc1ec2931b35f004d20">SG_CUBEFACE_POS_Y</a>,</div><div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522afc65fb7f825bbf195d84411c14d5bdda">  549</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522afc65fb7f825bbf195d84411c14d5bdda">SG_CUBEFACE_NEG_Y</a>,</div><div class="line"><a name="l00550"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522afc52f7da6686bb7a4c1f2087bffbfd26">  550</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522afc52f7da6686bb7a4c1f2087bffbfd26">SG_CUBEFACE_POS_Z</a>,</div><div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522ada2da8e90f019778053c7307b6d9d118">  551</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522ada2da8e90f019778053c7307b6d9d118">SG_CUBEFACE_NEG_Z</a>,</div><div class="line"><a name="l00552"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522aeb579c50d806e02e56139d56e0e41728">  552</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522aeb579c50d806e02e56139d56e0e41728">SG_CUBEFACE_NUM</a>,</div><div class="line"><a name="l00553"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522a1520a69f073b2ce64d0c01fe94a9be45">  553</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522a1520a69f073b2ce64d0c01fe94a9be45">_SG_CUBEFACE_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522">sg_cube_face</a>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">    sg_shader_stage</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">    There are 2 shader stages: vertex- and fragment-shader-stage.</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">    Each shader stage consists of:</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">    - one slot for a shader function (provided as source- or byte-code)</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">    - SG_MAX_SHADERSTAGE_UBS slots for uniform blocks</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">    - SG_MAX_SHADERSTAGE_IMAGES slots for images used as textures by</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">      the shader function</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00567"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343">  567</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00568"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">  568</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>,</div><div class="line"><a name="l00569"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">  569</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>,</div><div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343acde507fdac18e2759ba06db131ec1d14">  570</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343acde507fdac18e2759ba06db131ec1d14">_SG_SHADERSTAGE_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343">sg_shader_stage</a>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">    sg_pixel_format</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">    This is a common subset of useful and widely supported pixel formats. The</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">    pixel format enum is mainly used when creating an image object in the</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">    sg_image_desc.pixel_format member.</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">    The default pixel format when creating an image is SG_PIXELFORMAT_RGBA8.</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00582"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">  582</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00583"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a1a089f083f252031ab280db020f5a841">  583</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a1a089f083f252031ab280db020f5a841">_SG_PIXELFORMAT_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00584"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abd35ac81800ef42e025231cf6e10956c">  584</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abd35ac81800ef42e025231cf6e10956c">SG_PIXELFORMAT_NONE</a>,</div><div class="line"><a name="l00585"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">  585</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>,</div><div class="line"><a name="l00586"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abbb0a172c1df88c75823f220f076ea1e">  586</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abbb0a172c1df88c75823f220f076ea1e">SG_PIXELFORMAT_RGB8</a>,</div><div class="line"><a name="l00587"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a617cd5e827095cba86efa54435e3ec3f">  587</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a617cd5e827095cba86efa54435e3ec3f">SG_PIXELFORMAT_RGBA4</a>,</div><div class="line"><a name="l00588"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4af7bc0102f3facd2246ad04aa42236dc6">  588</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4af7bc0102f3facd2246ad04aa42236dc6">SG_PIXELFORMAT_R5G6B5</a>,</div><div class="line"><a name="l00589"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a45b92fce386fe7eab13bcdfea7bc6c55">  589</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a45b92fce386fe7eab13bcdfea7bc6c55">SG_PIXELFORMAT_R5G5B5A1</a>,</div><div class="line"><a name="l00590"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aee9de87145ed1e5f8129bd39501a164b">  590</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aee9de87145ed1e5f8129bd39501a164b">SG_PIXELFORMAT_R10G10B10A2</a>,</div><div class="line"><a name="l00591"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288">  591</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288">SG_PIXELFORMAT_RGBA32F</a>,</div><div class="line"><a name="l00592"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9">  592</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9">SG_PIXELFORMAT_RGBA16F</a>,</div><div class="line"><a name="l00593"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7aebdb1f89ab56d5ac3e4101326ad5a7">  593</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7aebdb1f89ab56d5ac3e4101326ad5a7">SG_PIXELFORMAT_R32F</a>,</div><div class="line"><a name="l00594"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4acd416b883c484b0a30194f1a06f18f9d">  594</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4acd416b883c484b0a30194f1a06f18f9d">SG_PIXELFORMAT_R16F</a>,</div><div class="line"><a name="l00595"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ac09ec30fb99ef631fe1afd23b8ebbc56">  595</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ac09ec30fb99ef631fe1afd23b8ebbc56">SG_PIXELFORMAT_L8</a>,</div><div class="line"><a name="l00596"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab16b5755ede91f6c2d9ac0b95b939755">  596</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab16b5755ede91f6c2d9ac0b95b939755">SG_PIXELFORMAT_DXT1</a>,</div><div class="line"><a name="l00597"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abc58007c8b3aea5d1d4f8003e1ebd015">  597</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abc58007c8b3aea5d1d4f8003e1ebd015">SG_PIXELFORMAT_DXT3</a>,</div><div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5707e92aad083b7e905f1cef363a736a">  598</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5707e92aad083b7e905f1cef363a736a">SG_PIXELFORMAT_DXT5</a>,</div><div class="line"><a name="l00599"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ad9b9e06c0f4c4576ddaa64de29903aa8">  599</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ad9b9e06c0f4c4576ddaa64de29903aa8">SG_PIXELFORMAT_DEPTH</a>,</div><div class="line"><a name="l00600"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">  600</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>,</div><div class="line"><a name="l00601"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5c1d86e7259c30e71a0345564ce133e5">  601</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5c1d86e7259c30e71a0345564ce133e5">SG_PIXELFORMAT_PVRTC2_RGB</a>,</div><div class="line"><a name="l00602"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aff9e597d6ba26ce24ee763c57de6b20c">  602</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aff9e597d6ba26ce24ee763c57de6b20c">SG_PIXELFORMAT_PVRTC4_RGB</a>,</div><div class="line"><a name="l00603"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7a18fff9a92408dc0b1b472e188a7293">  603</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7a18fff9a92408dc0b1b472e188a7293">SG_PIXELFORMAT_PVRTC2_RGBA</a>,</div><div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a3f7140ec7c333f21243ab73a1591c3b4">  604</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a3f7140ec7c333f21243ab73a1591c3b4">SG_PIXELFORMAT_PVRTC4_RGBA</a>,</div><div class="line"><a name="l00605"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab178a54fe3afec07062f05138608e559">  605</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab178a54fe3afec07062f05138608e559">SG_PIXELFORMAT_ETC2_RGB8</a>,</div><div class="line"><a name="l00606"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a24fd6df84f189657c672835f616e9c21">  606</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a24fd6df84f189657c672835f616e9c21">SG_PIXELFORMAT_ETC2_SRGB8</a>,</div><div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a2575e80dffb63df73b18f044342a74e8">  607</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a2575e80dffb63df73b18f044342a74e8">_SG_PIXELFORMAT_NUM</a>,</div><div class="line"><a name="l00608"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5cb2828a02272406f980c520016d6eba">  608</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5cb2828a02272406f980c520016d6eba">_SG_PIXELFORMAT_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a>;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">    sg_primitive_type</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">    This is the common subset of 3D primitive types supported across all 3D</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">    APIs. This is used in the sg_pipeline_desc.primitive_type member when</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">    creating a pipeline object.</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">    The default primitive type is SG_PRIMITIVETYPE_TRIANGLES.</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00620"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4">  620</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00621"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ae87cf63c21d11fdf752e7c91d0f46a3a">  621</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ae87cf63c21d11fdf752e7c91d0f46a3a">_SG_PRIMITIVETYPE_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00622"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a56f0068a3381a2f910b646b15bbdad7c">  622</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a56f0068a3381a2f910b646b15bbdad7c">SG_PRIMITIVETYPE_POINTS</a>,</div><div class="line"><a name="l00623"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a64763b2f58505f8353981fa3a7d33b3d">  623</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a64763b2f58505f8353981fa3a7d33b3d">SG_PRIMITIVETYPE_LINES</a>,</div><div class="line"><a name="l00624"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ac6adf96be338781a927207580110a0b6">  624</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ac6adf96be338781a927207580110a0b6">SG_PRIMITIVETYPE_LINE_STRIP</a>,</div><div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4aa8d428001b2200f78af617997a3be81b">  625</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4aa8d428001b2200f78af617997a3be81b">SG_PRIMITIVETYPE_TRIANGLES</a>,</div><div class="line"><a name="l00626"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ab0b91b82494a494db2f5e57c8b7356a7">  626</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ab0b91b82494a494db2f5e57c8b7356a7">SG_PRIMITIVETYPE_TRIANGLE_STRIP</a>,</div><div class="line"><a name="l00627"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a7d0491c852c2a8488f0e5e42b3f82223">  627</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a7d0491c852c2a8488f0e5e42b3f82223">_SG_PRIMITIVETYPE_NUM</a>,</div><div class="line"><a name="l00628"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ad1f85b8ca0a8c1eaaa850e35076511dc">  628</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ad1f85b8ca0a8c1eaaa850e35076511dc">_SG_PRIMITIVETYPE_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4">sg_primitive_type</a>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">    sg_filter</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">    The filtering mode when sampling a texture image. This is</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">    used in the sg_image_desc.min_filter and sg_image_desc.mag_filter</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">    members when creating an image object.</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">    The default filter mode is SG_FILTER_NEAREST.</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00640"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">  640</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00641"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a43ee1544f89472122571d8a4dcbb3224">  641</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a43ee1544f89472122571d8a4dcbb3224">_SG_FILTER_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">  642</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>,</div><div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a71e72d5047072e13ecbe4717d7cb4f32">  643</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a71e72d5047072e13ecbe4717d7cb4f32">SG_FILTER_LINEAR</a>,</div><div class="line"><a name="l00644"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a84115e146ee19b60c763d0dfb1cd347a">  644</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a84115e146ee19b60c763d0dfb1cd347a">SG_FILTER_NEAREST_MIPMAP_NEAREST</a>,</div><div class="line"><a name="l00645"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a21116fc969ac2da818c6f70ce6f04f01">  645</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a21116fc969ac2da818c6f70ce6f04f01">SG_FILTER_NEAREST_MIPMAP_LINEAR</a>,</div><div class="line"><a name="l00646"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a48f5bd6ec5073d2eec58e7af5b07375f">  646</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a48f5bd6ec5073d2eec58e7af5b07375f">SG_FILTER_LINEAR_MIPMAP_NEAREST</a>,</div><div class="line"><a name="l00647"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a7f78c11a24799bfc6115afff391bc864">  647</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a7f78c11a24799bfc6115afff391bc864">SG_FILTER_LINEAR_MIPMAP_LINEAR</a>,</div><div class="line"><a name="l00648"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a930130deba471dcd078125a193cdf96b">  648</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a930130deba471dcd078125a193cdf96b">_SG_FILTER_NUM</a>,</div><div class="line"><a name="l00649"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42ae140126edd40b41a54abfaeac4cd4e29">  649</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42ae140126edd40b41a54abfaeac4cd4e29">_SG_FILTER_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;<span class="comment">    sg_wrap</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;<span class="comment">    The texture coordinates wrapping mode when sampling a texture</span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">    image. This is used in the sg_image_desc.wrap_u, .wrap_v</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">    and .wrap_w members when creating an image.</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;<span class="comment">    The default wrap mode is SG_WRAP_REPEAT.</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00661"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">  661</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00662"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da56ee8cb85a823d979d9759180679a079">  662</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da56ee8cb85a823d979d9759180679a079">_SG_WRAP_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00663"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">  663</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>,</div><div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654daa970e343704dddd57115f2d834241b78">  664</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654daa970e343704dddd57115f2d834241b78">SG_WRAP_CLAMP_TO_EDGE</a>,</div><div class="line"><a name="l00665"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da2d6a059f14a7330186f072c1d30d0a1c">  665</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da2d6a059f14a7330186f072c1d30d0a1c">SG_WRAP_MIRRORED_REPEAT</a>,</div><div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da329d3d18c57ad9a3dfa881d77f77cbd3">  666</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da329d3d18c57ad9a3dfa881d77f77cbd3">_SG_WRAP_NUM</a>,</div><div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654dabe2a7753eb676cf598a48bc4da2af03c">  667</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654dabe2a7753eb676cf598a48bc4da2af03c">_SG_WRAP_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a>;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;<span class="comment">    sg_vertex_format</span></div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;<span class="comment">    The data type of a vertex component. This is used to describe</span></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment">    the layout of vertex data when creating a pipeline object.</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00676"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08f">  676</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa2537db7b2956137a3fbe5a8929c01f5">  677</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa2537db7b2956137a3fbe5a8929c01f5">SG_VERTEXFORMAT_INVALID</a>,</div><div class="line"><a name="l00678"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa29b1e94ae9985fe1463d36e301916d29">  678</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa29b1e94ae9985fe1463d36e301916d29">SG_VERTEXFORMAT_FLOAT</a>,</div><div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa498741f607f4f10e6b9672dcb9a9c6ac">  679</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa498741f607f4f10e6b9672dcb9a9c6ac">SG_VERTEXFORMAT_FLOAT2</a>,</div><div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6ba93ce02391f49c626baa5e6f7234b2">  680</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6ba93ce02391f49c626baa5e6f7234b2">SG_VERTEXFORMAT_FLOAT3</a>,</div><div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6115bbd19f17c016a55102c485b7658c">  681</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6115bbd19f17c016a55102c485b7658c">SG_VERTEXFORMAT_FLOAT4</a>,</div><div class="line"><a name="l00682"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5c3facf45a0c01162b348286571e4cbc">  682</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5c3facf45a0c01162b348286571e4cbc">SG_VERTEXFORMAT_BYTE4</a>,</div><div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5bb6681394fe029a0ca1fa0e00e85da9">  683</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5bb6681394fe029a0ca1fa0e00e85da9">SG_VERTEXFORMAT_BYTE4N</a>,</div><div class="line"><a name="l00684"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa1eac19f3f2048bed0f6b71f844e9bdb">  684</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa1eac19f3f2048bed0f6b71f844e9bdb">SG_VERTEXFORMAT_UBYTE4</a>,</div><div class="line"><a name="l00685"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa598e60ae2c550a825145e20e377d7f19">  685</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa598e60ae2c550a825145e20e377d7f19">SG_VERTEXFORMAT_UBYTE4N</a>,</div><div class="line"><a name="l00686"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa742f7d751f8dff04449a03428372810a">  686</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa742f7d751f8dff04449a03428372810a">SG_VERTEXFORMAT_SHORT2</a>,</div><div class="line"><a name="l00687"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fafec5d9fb7cb12489ea4be3637c746efa">  687</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fafec5d9fb7cb12489ea4be3637c746efa">SG_VERTEXFORMAT_SHORT2N</a>,</div><div class="line"><a name="l00688"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faf321d1eb262dfb3db56fb43f76d9898a">  688</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faf321d1eb262dfb3db56fb43f76d9898a">SG_VERTEXFORMAT_SHORT4</a>,</div><div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6bfcbcd3a001760711189465343bd4e8">  689</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6bfcbcd3a001760711189465343bd4e8">SG_VERTEXFORMAT_SHORT4N</a>,</div><div class="line"><a name="l00690"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faafa9a30c6992cc63134b5e14cdd3162b">  690</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faafa9a30c6992cc63134b5e14cdd3162b">SG_VERTEXFORMAT_UINT10_N2</a>,</div><div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fad322d7d119c90fe3a711d3782a381047">  691</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fad322d7d119c90fe3a711d3782a381047">_SG_VERTEXFORMAT_NUM</a>,</div><div class="line"><a name="l00692"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fab7cb79d6441e89b46f35bd113febdb44">  692</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fab7cb79d6441e89b46f35bd113febdb44">_SG_VERTEXFORMAT_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08f">sg_vertex_format</a>;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">    sg_vertex_step</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">    Defines whether the input pointer of a vertex input stream is advanced</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">    &#39;per vertex&#39; or &#39;per instance&#39;. The default step-func is</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">    SG_VERTEXSTEP_PER_VERTEX. SG_VERTEXSTEP_PER_INSTANCE is used with</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">    instanced-rendering.</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">    The vertex-step is part of the vertex-layout definition</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="comment">    when creating pipeline objects.</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6">  706</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00707"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a8e72cce7d5c127dff3cc94dd6a6ceef5">  707</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a8e72cce7d5c127dff3cc94dd6a6ceef5">_SG_VERTEXSTEP_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a84ea40a12ba85ca0542460d0624b88b5">  708</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a84ea40a12ba85ca0542460d0624b88b5">SG_VERTEXSTEP_PER_VERTEX</a>,</div><div class="line"><a name="l00709"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a20f6cf1a89efe9c3129cf71910e71709">  709</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a20f6cf1a89efe9c3129cf71910e71709">SG_VERTEXSTEP_PER_INSTANCE</a>,</div><div class="line"><a name="l00710"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a2fde2841a93c42a631ed4d5a428e9599">  710</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a2fde2841a93c42a631ed4d5a428e9599">_SG_VERTEXSTEP_NUM</a>,</div><div class="line"><a name="l00711"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a95ce69e2693e9f3abdd1af8b657d907b">  711</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a95ce69e2693e9f3abdd1af8b657d907b">_SG_VERTEXSTEP_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6">sg_vertex_step</a>;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">    sg_uniform_type</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">    The data type of a uniform block member. This is used to</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">    describe the internal layout of uniform blocks when creating</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">    a shader object.</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2">  721</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2aebd4e667ec034abd1b1b5f935113fdad">  722</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2aebd4e667ec034abd1b1b5f935113fdad">SG_UNIFORMTYPE_INVALID</a>,</div><div class="line"><a name="l00723"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2afebe7f7c92eea0a9d1886eb30566f87c">  723</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2afebe7f7c92eea0a9d1886eb30566f87c">SG_UNIFORMTYPE_FLOAT</a>,</div><div class="line"><a name="l00724"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2a2ac46d5ec84b41e58a2ab09257a01129">  724</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2a2ac46d5ec84b41e58a2ab09257a01129">SG_UNIFORMTYPE_FLOAT2</a>,</div><div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2adf763c6ae4deffca464f45c3401761f6">  725</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2adf763c6ae4deffca464f45c3401761f6">SG_UNIFORMTYPE_FLOAT3</a>,</div><div class="line"><a name="l00726"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2ac0a6c0647e323a639609490981b963fc">  726</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2ac0a6c0647e323a639609490981b963fc">SG_UNIFORMTYPE_FLOAT4</a>,</div><div class="line"><a name="l00727"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2af0f0af9d38739d489a7422d6417fa958">  727</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2af0f0af9d38739d489a7422d6417fa958">SG_UNIFORMTYPE_MAT4</a>,</div><div class="line"><a name="l00728"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2afef650993104605060041d526b983e43">  728</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2afef650993104605060041d526b983e43">_SG_UNIFORMTYPE_NUM</a>,</div><div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2af8aebe8a309e634eee586278af628f8f">  729</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2af8aebe8a309e634eee586278af628f8f">_SG_UNIFORMTYPE_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2">sg_uniform_type</a>;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">    sg_cull_mode</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">    The face-culling mode, this is used in the</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment">    sg_pipeline_desc.rasterizer.cull_mode member when creating a</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">    pipeline object.</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">    The default cull mode is SG_CULLMODE_NONE</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00741"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4">  741</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00742"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a9648b550562f21fc68296c769d0bf289">  742</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a9648b550562f21fc68296c769d0bf289">_SG_CULLMODE_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00743"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a131d819b6c0fe42072f7db0677941b5d">  743</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a131d819b6c0fe42072f7db0677941b5d">SG_CULLMODE_NONE</a>,</div><div class="line"><a name="l00744"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a384e2c1d24c7c03468f93419cc48971c">  744</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a384e2c1d24c7c03468f93419cc48971c">SG_CULLMODE_FRONT</a>,</div><div class="line"><a name="l00745"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4af645d117b0ec8517b04bc827ae0e4baf">  745</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4af645d117b0ec8517b04bc827ae0e4baf">SG_CULLMODE_BACK</a>,</div><div class="line"><a name="l00746"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a066a84228771706495e956054b11c73d">  746</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a066a84228771706495e956054b11c73d">_SG_CULLMODE_NUM</a>,</div><div class="line"><a name="l00747"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4aeb2fdbf9e21f68dbd21c3e55209d20e2">  747</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4aeb2fdbf9e21f68dbd21c3e55209d20e2">_SG_CULLMODE_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4">sg_cull_mode</a>;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">    sg_face_winding</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="comment">    The vertex-winding rule that determines a front-facing primitive. This</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="comment">    is used in the member sg_pipeline_desc.rasterizer.face_winding</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="comment">    when creating a pipeline object.</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">    The default winding is SG_FACEWINDING_CW (clockwise)</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00759"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331f">  759</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00760"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faa52943c18ba7c0545d647b4bcf4c598b">  760</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faa52943c18ba7c0545d647b4bcf4c598b">_SG_FACEWINDING_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00761"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331fa0c22e6268eb10c1121177a9fbb1856ef">  761</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331fa0c22e6268eb10c1121177a9fbb1856ef">SG_FACEWINDING_CCW</a>,</div><div class="line"><a name="l00762"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faaa4aae35b0695932b261357428ca413c">  762</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faaa4aae35b0695932b261357428ca413c">SG_FACEWINDING_CW</a>,</div><div class="line"><a name="l00763"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faf38bc68fe5e9f58617153ec303ff207c">  763</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faf38bc68fe5e9f58617153ec303ff207c">_SG_FACEWINDING_NUM</a>,</div><div class="line"><a name="l00764"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331fa0194ddbe669a71dffef2f78b0230bbfc">  764</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331fa0194ddbe669a71dffef2f78b0230bbfc">_SG_FACEWINDING_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331f">sg_face_winding</a>;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="comment">    sg_compare_func</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">    The compare-function for depth- and stencil-ref tests.</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">    This is used when creating pipeline objects in the members:</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">    sg_pipeline_desc</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="comment">        .depth_stencil</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="comment">            .depth_compare_func</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="comment">            .stencil_front.compare_func</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="comment">            .stencil_back.compare_func</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">    The default compare func for depth- and stencil-tests is</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="comment">    SG_COMPAREFUNC_ALWAYS.</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00782"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64">  782</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00783"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af7100f1ce552616065bb07bb9b989219">  783</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af7100f1ce552616065bb07bb9b989219">_SG_COMPAREFUNC_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00784"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a3c097f346c501db92d57775e7ab51157">  784</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a3c097f346c501db92d57775e7ab51157">SG_COMPAREFUNC_NEVER</a>,</div><div class="line"><a name="l00785"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a9bc40473fa1a7f1805e04826dcb1cc8f">  785</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a9bc40473fa1a7f1805e04826dcb1cc8f">SG_COMPAREFUNC_LESS</a>,</div><div class="line"><a name="l00786"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af164b871f09d6f7b671a2a611e6d570d">  786</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af164b871f09d6f7b671a2a611e6d570d">SG_COMPAREFUNC_EQUAL</a>,</div><div class="line"><a name="l00787"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a1a8096a774c667c26ccde72d9ef4bd7a">  787</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a1a8096a774c667c26ccde72d9ef4bd7a">SG_COMPAREFUNC_LESS_EQUAL</a>,</div><div class="line"><a name="l00788"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a508dd2aada97b6358f31c4425fe84c82">  788</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a508dd2aada97b6358f31c4425fe84c82">SG_COMPAREFUNC_GREATER</a>,</div><div class="line"><a name="l00789"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a8394ed7a0362acafc13fce791f9d7344">  789</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a8394ed7a0362acafc13fce791f9d7344">SG_COMPAREFUNC_NOT_EQUAL</a>,</div><div class="line"><a name="l00790"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af86c478058edd323bd609ff4bf2e848d">  790</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af86c478058edd323bd609ff4bf2e848d">SG_COMPAREFUNC_GREATER_EQUAL</a>,</div><div class="line"><a name="l00791"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">  791</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>,</div><div class="line"><a name="l00792"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a09cc7ce2105a69548dc807425c9f662d">  792</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a09cc7ce2105a69548dc807425c9f662d">_SG_COMPAREFUNC_NUM</a>,</div><div class="line"><a name="l00793"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a84c50a9a2ed60d733f149440eb55fb78">  793</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a84c50a9a2ed60d733f149440eb55fb78">_SG_COMPAREFUNC_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64">sg_compare_func</a>;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;<span class="comment">    sg_stencil_op</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;<span class="comment">    The operation performed on a currently stored stencil-value when a</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;<span class="comment">    comparison test passes or fails. This is used when creating a pipeline</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;<span class="comment">    object in the members:</span></div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;<span class="comment">    sg_pipeline_desc</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;<span class="comment">        .depth_stencil</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;<span class="comment">            .stencil_front</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">                .fail_op</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="comment">                .depth_fail_op</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;<span class="comment">                .pass_op</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">            .stencil_back</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">                .fail_op</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="comment">                .depth_fail_op</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="comment">                .pass_op</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="comment">    The default value is SG_STENCILOP_KEEP.</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00816"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488a">  816</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00817"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa9402760295c8c6212305175d5f24b50d">  817</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa9402760295c8c6212305175d5f24b50d">_SG_STENCILOP_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00818"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">  818</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>,</div><div class="line"><a name="l00819"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa703bf305ed3f7826dab340a3b42f58e0">  819</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa703bf305ed3f7826dab340a3b42f58e0">SG_STENCILOP_ZERO</a>,</div><div class="line"><a name="l00820"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aad5adc3a401f0ebcc100fe91f45e7b628">  820</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aad5adc3a401f0ebcc100fe91f45e7b628">SG_STENCILOP_REPLACE</a>,</div><div class="line"><a name="l00821"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aacd444f9c15d8563e1dda2fc913bfe349">  821</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aacd444f9c15d8563e1dda2fc913bfe349">SG_STENCILOP_INCR_CLAMP</a>,</div><div class="line"><a name="l00822"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa5833cf06326cae250c675cfb227d7783">  822</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa5833cf06326cae250c675cfb227d7783">SG_STENCILOP_DECR_CLAMP</a>,</div><div class="line"><a name="l00823"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa02f24dee22dfe00513a57620bef88e10">  823</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa02f24dee22dfe00513a57620bef88e10">SG_STENCILOP_INVERT</a>,</div><div class="line"><a name="l00824"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aac7f2b2dfb1c5340579c27f255a320569">  824</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aac7f2b2dfb1c5340579c27f255a320569">SG_STENCILOP_INCR_WRAP</a>,</div><div class="line"><a name="l00825"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa546103a62234093824399823dba02002">  825</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa546103a62234093824399823dba02002">SG_STENCILOP_DECR_WRAP</a>,</div><div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa2aafda06dbb6c5f6436d9f89d28a9cd7">  826</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa2aafda06dbb6c5f6436d9f89d28a9cd7">_SG_STENCILOP_NUM</a>,</div><div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa7e637920879b45544dbb742adc74b277">  827</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa7e637920879b45544dbb742adc74b277">_SG_STENCILOP_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488a">sg_stencil_op</a>;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;<span class="comment">    sg_blend_factor</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;<span class="comment">    The source and destination factors in blending operations.</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;<span class="comment">    This is used in the following members when creating a pipeline object:</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="comment">    sg_pipeline_desc</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment">        .blend</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">            .src_factor_rgb</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment">            .dst_factor_rgb</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment">            .src_factor_alpha</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">            .dst_factor_alpha</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment">    The default value is SG_BLENDFACTOR_ONE for source</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment">    factors, and SG_BLENDFACTOR_ZERO for destination factors.</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98">  846</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a69fa29d8ee4acdcf5e77c1c997ce2190">  847</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a69fa29d8ee4acdcf5e77c1c997ce2190">_SG_BLENDFACTOR_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00848"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">  848</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a>,</div><div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">  849</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a>,</div><div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a8c69759d579abc2330763accf53e22c6">  850</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a8c69759d579abc2330763accf53e22c6">SG_BLENDFACTOR_SRC_COLOR</a>,</div><div class="line"><a name="l00851"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a641887d49c50dcaadab00c5457074894">  851</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a641887d49c50dcaadab00c5457074894">SG_BLENDFACTOR_ONE_MINUS_SRC_COLOR</a>,</div><div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ac4a882a9f00214238fbb2d0e354ccdb1">  852</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ac4a882a9f00214238fbb2d0e354ccdb1">SG_BLENDFACTOR_SRC_ALPHA</a>,</div><div class="line"><a name="l00853"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a057316e7b0eb4cf1b36f8dd1f13cb01b">  853</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a057316e7b0eb4cf1b36f8dd1f13cb01b">SG_BLENDFACTOR_ONE_MINUS_SRC_ALPHA</a>,</div><div class="line"><a name="l00854"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a31651696629d4ccdb8e684c3ba02366b">  854</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a31651696629d4ccdb8e684c3ba02366b">SG_BLENDFACTOR_DST_COLOR</a>,</div><div class="line"><a name="l00855"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a72b1df3612951c57703d3cf0279f750e">  855</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a72b1df3612951c57703d3cf0279f750e">SG_BLENDFACTOR_ONE_MINUS_DST_COLOR</a>,</div><div class="line"><a name="l00856"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a1f10da138f1962007019feb50c37ba7f">  856</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a1f10da138f1962007019feb50c37ba7f">SG_BLENDFACTOR_DST_ALPHA</a>,</div><div class="line"><a name="l00857"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ad219a9d23d6b3b19d2539ece4a0a71d3">  857</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ad219a9d23d6b3b19d2539ece4a0a71d3">SG_BLENDFACTOR_ONE_MINUS_DST_ALPHA</a>,</div><div class="line"><a name="l00858"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98aad544ad360157642c7fa8ab7ba22e48d">  858</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98aad544ad360157642c7fa8ab7ba22e48d">SG_BLENDFACTOR_SRC_ALPHA_SATURATED</a>,</div><div class="line"><a name="l00859"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a62d9efdddbce46e11664b6daf160fff6">  859</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a62d9efdddbce46e11664b6daf160fff6">SG_BLENDFACTOR_BLEND_COLOR</a>,</div><div class="line"><a name="l00860"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ac29f07005f4e09d33012c2ab1aa41ed4">  860</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ac29f07005f4e09d33012c2ab1aa41ed4">SG_BLENDFACTOR_ONE_MINUS_BLEND_COLOR</a>,</div><div class="line"><a name="l00861"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98aeb1ae23d2d8136f7fc0a453dc48ce3a0">  861</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98aeb1ae23d2d8136f7fc0a453dc48ce3a0">SG_BLENDFACTOR_BLEND_ALPHA</a>,</div><div class="line"><a name="l00862"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af56378a9ce157db3a999f590489bb0f9">  862</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af56378a9ce157db3a999f590489bb0f9">SG_BLENDFACTOR_ONE_MINUS_BLEND_ALPHA</a>,</div><div class="line"><a name="l00863"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a21090202218e6bfd6cd4e32857771d5d">  863</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a21090202218e6bfd6cd4e32857771d5d">_SG_BLENDFACTOR_NUM</a>,</div><div class="line"><a name="l00864"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98afc45559f439a13f45979be73e994f17c">  864</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98afc45559f439a13f45979be73e994f17c">_SG_BLENDFACTOR_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98">sg_blend_factor</a>;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">    sg_blend_op</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">    Describes how the source and destination values are combined in the</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">    fragment blending operation. It is used in the following members when</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">    creating a pipeline object:</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">    sg_pipeline_desc</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;<span class="comment">        .blend</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;<span class="comment">            .op_rgb</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">            .op_alpha</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">    The default value is SG_BLENDOP_ADD.</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007b">  881</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00882"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba93d9e180184164cc5ec6d42cb5eda6bb">  882</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba93d9e180184164cc5ec6d42cb5eda6bb">_SG_BLENDOP_DEFAULT</a>, <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">  883</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a>,</div><div class="line"><a name="l00884"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba39bb8326504a0479b26cd513622425de">  884</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba39bb8326504a0479b26cd513622425de">SG_BLENDOP_SUBTRACT</a>,</div><div class="line"><a name="l00885"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007bafe44c904a6db19f96766c815ff903e93">  885</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007bafe44c904a6db19f96766c815ff903e93">SG_BLENDOP_REVERSE_SUBTRACT</a>,</div><div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba3d6aa8c0ae2c6d38d7a0de2f9df35c27">  886</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba3d6aa8c0ae2c6d38d7a0de2f9df35c27">_SG_BLENDOP_NUM</a>,</div><div class="line"><a name="l00887"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba2855b1c2fdd50951764f3d89f225ee00">  887</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba2855b1c2fdd50951764f3d89f225ee00">_SG_BLENDOP_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007b">sg_blend_op</a>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;<span class="comment">    sg_color_mask</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;<span class="comment">    Selects the color channels when writing a fragment color to the</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment">    framebuffer. This is used in the members</span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">    sg_pipeline_desc.blend.color_write_mask when creating a pipeline object.</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;<span class="comment">    The default colormask is SG_COLORMASK_RGBA (write all colors channels)</span></div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00899"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2">  899</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00900"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2afe48bf8d45364cbe94ba7e3de50696e1">  900</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2afe48bf8d45364cbe94ba7e3de50696e1">_SG_COLORMASK_DEFAULT</a> = 0,  <span class="comment">/* value 0 reserved for default-init */</span></div><div class="line"><a name="l00901"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a3ede6e8ea8b3558000ccf7ee0e261692">  901</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a3ede6e8ea8b3558000ccf7ee0e261692">SG_COLORMASK_NONE</a> = (0x10), <span class="comment">/* special value for &#39;all channels disabled */</span></div><div class="line"><a name="l00902"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a1c86758e08ef3870ba966a2f83289407">  902</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a1c86758e08ef3870ba966a2f83289407">SG_COLORMASK_R</a> = (1 &lt;&lt; 0),</div><div class="line"><a name="l00903"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2af61dc51ca3ada44f11e59503180a47c6">  903</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2af61dc51ca3ada44f11e59503180a47c6">SG_COLORMASK_G</a> = (1 &lt;&lt; 1),</div><div class="line"><a name="l00904"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a072e65e21856ed2801874122723ab20d">  904</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a072e65e21856ed2801874122723ab20d">SG_COLORMASK_B</a> = (1 &lt;&lt; 2),</div><div class="line"><a name="l00905"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2adfb66631b5ff6d359c7cdc659b4f8e33">  905</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2adfb66631b5ff6d359c7cdc659b4f8e33">SG_COLORMASK_A</a> = (1 &lt;&lt; 3),</div><div class="line"><a name="l00906"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2aad6d3c02e809981298ad53caef933bcd">  906</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2aad6d3c02e809981298ad53caef933bcd">SG_COLORMASK_RGB</a> = 0x7,</div><div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a6e762320d94f45741939d705166a17a2">  907</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a6e762320d94f45741939d705166a17a2">SG_COLORMASK_RGBA</a> = 0xF,</div><div class="line"><a name="l00908"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a4cc7a0eddd983514fe77db21569264d4">  908</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a4cc7a0eddd983514fe77db21569264d4">_SG_COLORMASK_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2">sg_color_mask</a>;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">    sg_action</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">    Defines what action should be performed at the start of a render pass:</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">    SG_ACTION_CLEAR:    clear the render target image</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">    SG_ACTION_LOAD:     load the previous content of the render target image</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">    SG_ACTION_DONTCARE: leave the render target image content undefined</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">    This is used in the sg_pass_action structure.</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">    The default action for all pass attachments is SG_ACTION_CLEAR, with the</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">    clear color rgba = {0.5f, 0.5f, 0.5f, 1.0f], depth=1.0 and stencil=0.</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">    If you want to override the default behaviour, it is important to not</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">    only set the clear color, but the &#39;action&#39; field as well (as long as this</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="comment">    is in its _SG_ACTION_DEFAULT, the value fields will be ignored).</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00929"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6">  929</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l00930"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a300a4cbdf62c8a2936fbeea5349f3581">  930</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a300a4cbdf62c8a2936fbeea5349f3581">_SG_ACTION_DEFAULT</a>,</div><div class="line"><a name="l00931"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">  931</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>,</div><div class="line"><a name="l00932"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6ae58d280dda29d0b3f7120937fe9c6742">  932</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6ae58d280dda29d0b3f7120937fe9c6742">SG_ACTION_LOAD</a>,</div><div class="line"><a name="l00933"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a975d1f5f4f58d6c75e9c2ee6ee9767e3">  933</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a975d1f5f4f58d6c75e9c2ee6ee9767e3">SG_ACTION_DONTCARE</a>,</div><div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6afb228a696b37599bb35cc176bdd8a48e">  934</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6afb228a696b37599bb35cc176bdd8a48e">_SG_ACTION_NUM</a>,</div><div class="line"><a name="l00935"></a><span class="lineno"><a class="line" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a92f57692b49d7ccdd51f70b546cea601">  935</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a92f57692b49d7ccdd51f70b546cea601">_SG_ACTION_FORCE_U32</a> = 0x7FFFFFFF</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;} <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6">sg_action</a>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">    sg_pass_action</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="comment">    The sg_pass_action struct defines the actions to be performed</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="comment">    at the start of a rendering pass in the functions sg_begin_pass()</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="comment">    and sg_begin_default_pass().</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="comment">    A separate action and clear values can be defined for each</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="comment">    color attachment, and for the depth-stencil attachment.</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;<span class="comment">    The default clear values are defined by the macros:</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">    - SG_DEFAULT_CLEAR_RED:     0.5f</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">    - SG_DEFAULT_CLEAR_GREEN:   0.5f</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">    - SG_DEFAULT_CLEAR_BLUE:    0.5f</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">    - SG_DEFAULT_CLEAR_ALPHA:   1.0f</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">    - SG_DEFAULT_CLEAR_DEPTH:   1.0f</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">    - SG_DEFAULT_CLEAR_STENCIL: 0</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00957"></a><span class="lineno"><a class="line" href="../../db/dc9/structsg__color__attachment__action.html">  957</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00958"></a><span class="lineno"><a class="line" href="../../db/dc9/structsg__color__attachment__action.html#ae5313aebc0025fd61a3f22c4acdcf3fd">  958</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6">sg_action</a> <a class="code" href="../../db/dc9/structsg__color__attachment__action.html#ae5313aebc0025fd61a3f22c4acdcf3fd">action</a>;</div><div class="line"><a name="l00959"></a><span class="lineno"><a class="line" href="../../db/dc9/structsg__color__attachment__action.html#af2c2a030aa781f28b469a109d60c5db7">  959</a></span>&#160;  <span class="keywordtype">float</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa857b95cc76669c2a9109239ef40a47c">val</a>[4];</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;} <a class="code" href="../../db/dc9/structsg__color__attachment__action.html">sg_color_attachment_action</a>;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno"><a class="line" href="../../d3/dd4/structsg__depth__attachment__action.html">  962</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00963"></a><span class="lineno"><a class="line" href="../../d3/dd4/structsg__depth__attachment__action.html#afd874c73b9eeb2251453c66f88d620f9">  963</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6">sg_action</a> <a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#afd874c73b9eeb2251453c66f88d620f9">action</a>;</div><div class="line"><a name="l00964"></a><span class="lineno"><a class="line" href="../../d3/dd4/structsg__depth__attachment__action.html#ae78551ad85b038b6431f32d1c1916ccb">  964</a></span>&#160;  <span class="keywordtype">float</span> <a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#ae78551ad85b038b6431f32d1c1916ccb">val</a>;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;} <a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html">sg_depth_attachment_action</a>;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00967"></a><span class="lineno"><a class="line" href="../../d3/d48/structsg__stencil__attachment__action.html">  967</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00968"></a><span class="lineno"><a class="line" href="../../d3/d48/structsg__stencil__attachment__action.html#a322952eff6dc16d2ac27d6f98973a579">  968</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6">sg_action</a> <a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a322952eff6dc16d2ac27d6f98973a579">action</a>;</div><div class="line"><a name="l00969"></a><span class="lineno"><a class="line" href="../../d3/d48/structsg__stencil__attachment__action.html#a5d4b67c71980cd17fb1ac7f0978b222f">  969</a></span>&#160;  uint8_t <a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a5d4b67c71980cd17fb1ac7f0978b222f">val</a>;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;} <a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html">sg_stencil_attachment_action</a>;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno"><a class="line" href="../../d3/dbc/structsg__pass__action.html">  972</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l00973"></a><span class="lineno"><a class="line" href="../../d3/dbc/structsg__pass__action.html#ae001a0dd4c3e5fcf699f325963997ec5">  973</a></span>&#160;  uint32_t <a class="code" href="../../d3/dbc/structsg__pass__action.html#ae001a0dd4c3e5fcf699f325963997ec5">_start_canary</a>;</div><div class="line"><a name="l00974"></a><span class="lineno"><a class="line" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">  974</a></span>&#160;  <a class="code" href="../../db/dc9/structsg__color__attachment__action.html">sg_color_attachment_action</a> colors[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>];</div><div class="line"><a name="l00975"></a><span class="lineno"><a class="line" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">  975</a></span>&#160;  <a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html">sg_depth_attachment_action</a> <a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>;</div><div class="line"><a name="l00976"></a><span class="lineno"><a class="line" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">  976</a></span>&#160;  <a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html">sg_stencil_attachment_action</a> <a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>;</div><div class="line"><a name="l00977"></a><span class="lineno"><a class="line" href="../../d3/dbc/structsg__pass__action.html#acf2549f347b865e76f6138b0dd8e7a9a">  977</a></span>&#160;  uint32_t <a class="code" href="../../d3/dbc/structsg__pass__action.html#acf2549f347b865e76f6138b0dd8e7a9a">_end_canary</a>;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;} <a class="code" href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a>;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">    sg_draw_state</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">    The sg_draw_state structure defines the resource binding slots</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment">    of the sokol_gfx render pipeline, used as argument to the</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment">    sg_apply_draw_state() function.</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;<span class="comment">    A draw state contains:</span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;<span class="comment">    - 1 pipeline object</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">    - 1..N vertex buffers</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;<span class="comment">    - 0..N vertex buffer offsets</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">    - 0..1 index buffers</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;<span class="comment">    - 0..1 index buffer offsets</span></div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;<span class="comment">    - 0..N vertex shader stage images</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;<span class="comment">    - 0..N fragment shader stage images</span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment">    The max number of vertex buffer and shader stage images</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">    are defined by the SG_MAX_SHADERSTAGE_BUFFERS and</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">    SG_MAX_SHADERSTAGE_IMAGES configuration constants.</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">    The optional buffer offsets can be used to group different chunks</span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">    of vertex- and/or index-data into the same buffer objects.</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01004"></a><span class="lineno"><a class="line" href="../../d5/d1e/structsg__draw__state.html"> 1004</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01005"></a><span class="lineno"><a class="line" href="../../d5/d1e/structsg__draw__state.html#abe01088c56c8be7250b5cf3c3aa147b0"> 1005</a></span>&#160;  uint32_t <a class="code" href="../../d5/d1e/structsg__draw__state.html#abe01088c56c8be7250b5cf3c3aa147b0">_start_canary</a>;</div><div class="line"><a name="l01006"></a><span class="lineno"><a class="line" href="../../d5/d1e/structsg__draw__state.html#af1a5b81461b7f6774b90d5718d255ae9"> 1006</a></span>&#160;  <a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> <a class="code" href="../../d5/d1e/structsg__draw__state.html#af1a5b81461b7f6774b90d5718d255ae9">pipeline</a>;</div><div class="line"><a name="l01007"></a><span class="lineno"><a class="line" href="../../d5/d1e/structsg__draw__state.html#a494e67aed78b918eb5be3e9bffdc29d0"> 1007</a></span>&#160;  <a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> vertex_buffers[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l01008"></a><span class="lineno"><a class="line" href="../../d5/d1e/structsg__draw__state.html#a7beb92cc4c87779d43a98e68e25806e9"> 1008</a></span>&#160;  uint32_t vertex_buffer_offsets[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l01009"></a><span class="lineno"><a class="line" href="../../d5/d1e/structsg__draw__state.html#a312bc4ad2e0fb34b0d4ee9c9517b713e"> 1009</a></span>&#160;  <a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> <a class="code" href="../../d5/d1e/structsg__draw__state.html#a312bc4ad2e0fb34b0d4ee9c9517b713e">index_buffer</a>;</div><div class="line"><a name="l01010"></a><span class="lineno"><a class="line" href="../../d5/d1e/structsg__draw__state.html#a95f9400336ccf0b4cbccfeaa10e635c5"> 1010</a></span>&#160;  uint32_t <a class="code" href="../../d5/d1e/structsg__draw__state.html#a95f9400336ccf0b4cbccfeaa10e635c5">index_buffer_offset</a>;</div><div class="line"><a name="l01011"></a><span class="lineno"><a class="line" href="../../d5/d1e/structsg__draw__state.html#a9f49930ca8ebd54ff4eb88cf8c5c7bb6"> 1011</a></span>&#160;  <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> vs_images[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l01012"></a><span class="lineno"><a class="line" href="../../d5/d1e/structsg__draw__state.html#a0e306492a3df075c8a3231651b0c004d"> 1012</a></span>&#160;  <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> fs_images[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l01013"></a><span class="lineno"><a class="line" href="../../d5/d1e/structsg__draw__state.html#a5fb9cce7b6c84e94102ba0f4a6a387b2"> 1013</a></span>&#160;  uint32_t <a class="code" href="../../d5/d1e/structsg__draw__state.html#a5fb9cce7b6c84e94102ba0f4a6a387b2">_end_canary</a>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;} <a class="code" href="../../d5/d1e/structsg__draw__state.html">sg_draw_state</a>;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;<span class="comment">    sg_desc</span></div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="comment">    The sg_desc struct contains configuration values for sokol_gfx,</span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">    it is used as parameter to the sg_setup() call.</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">    The default configuration is:</span></div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">    .buffer_pool_size:      128</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">    .image_pool_size:       128</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">    .shader_pool_size:      32</span></div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment">    .pipeline_pool_size:    64</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">    .pass_pool_size:        16</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">    .context_pool_size:     16</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;<span class="comment">    GL specific:</span></div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="comment">    .gl_force_gles2</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;<span class="comment">        if this is true the GL backend will act in &quot;GLES2 fallback mode&quot; even</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;<span class="comment">        when compiled with SOKOL_GLES3, this is useful to fall back</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;<span class="comment">        to traditional WebGL if a browser doesn&#39;t support a WebGL2 context</span></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment">    Metal specific:</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">        (NOTE: All Objective-C object references are transferred through</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">        a bridged (const void*) to sokol_gfx, which will use a unretained</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">        bridged cast (__bridged id&lt;xxx&gt;) to retrieve the Objective-C</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">        references back. Since the bridge cast is unretained, the caller</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;<span class="comment">        must hold a strong reference to the Objective-C object for the</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment">        duration of the sokol_gfx call!</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment">    .mtl_device</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">        a pointer to the MTLDevice object</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">    .mtl_renderpass_descriptor_cb</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment">        a C callback function to obtain the MTLRenderPassDescriptor for the</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">        current frame when rendering to the default framebuffer, will be called</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment">        in sg_begin_default_pass()</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;<span class="comment">    .mtl_drawable_cb</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;<span class="comment">        a C callback function to obtain a MTLDrawable for the current</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment">        frame when rendering to the default framebuffer, will be called in</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">        sg_end_pass() of the default pass</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">    .mtl_global_uniform_buffer_size</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">        the size of the global uniform buffer in bytes, this must be big</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment">        enough to hold all uniform block updates for a single frame,</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">        the default value is 4 MByte (4 * 1024 * 1024)</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;<span class="comment">    .mtl_sampler_cache_size</span></div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment">        the number of slots in the sampler cache, the Metal backend</span></div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment">        will share texture samplers with the same state in this</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">        cache, the default value is 64</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;<span class="comment">    D3D11 specific:</span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">    .d3d11_device</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment">        a pointer to the ID3D11Device object, this must have been created</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">        before sg_setup() is called</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">    .d3d11_device_context</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;<span class="comment">        a pointer to the ID3D11DeviceContext object</span></div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;<span class="comment">    .d3d11_render_target_view_cb</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment">        a C callback function to obtain a pointer to the current</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">        ID3D11RenderTargetView object of the default framebuffer,</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">        this function will be called in sg_begin_pass() when rendering</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">        to the default framebuffer</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment">    .d3d11_depth_stencil_view_cb</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">        a C callback function to obtain a pointer to the current</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">        ID3D11DepthStencilView object of the default framebuffer,</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">        this function will be called in sg_begin_pass() when rendering</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">        to the default framebuffer</span></div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01081"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html"> 1081</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01082"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#a0fc23e80acc387fa0248c4af0edae780"> 1082</a></span>&#160;  uint32_t <a class="code" href="../../dc/d0e/structsg__desc.html#a0fc23e80acc387fa0248c4af0edae780">_start_canary</a>;</div><div class="line"><a name="l01083"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#a04b19d54bf3b446715faac7ee895a6ad"> 1083</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/d0e/structsg__desc.html#a04b19d54bf3b446715faac7ee895a6ad">buffer_pool_size</a>;</div><div class="line"><a name="l01084"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#aae8ba84b9097e6321647193b2cf6e82a"> 1084</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/d0e/structsg__desc.html#aae8ba84b9097e6321647193b2cf6e82a">image_pool_size</a>;</div><div class="line"><a name="l01085"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#a73bccc3454c2baa27e5ff9b1941c654d"> 1085</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/d0e/structsg__desc.html#a73bccc3454c2baa27e5ff9b1941c654d">shader_pool_size</a>;</div><div class="line"><a name="l01086"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#a15b47daeb207aa0fb560b043904e33e1"> 1086</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/d0e/structsg__desc.html#a15b47daeb207aa0fb560b043904e33e1">pipeline_pool_size</a>;</div><div class="line"><a name="l01087"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#ab56f235f260ba5c0a5f0d2bd470e854d"> 1087</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/d0e/structsg__desc.html#ab56f235f260ba5c0a5f0d2bd470e854d">pass_pool_size</a>;</div><div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#ae8900a940c09b074efd6afc4cd87dc4f"> 1088</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/d0e/structsg__desc.html#ae8900a940c09b074efd6afc4cd87dc4f">context_pool_size</a>;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;  <span class="comment">/* GL specific */</span></div><div class="line"><a name="l01090"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#a6614c9bb4dbfa0c9583c59aa9d8735d1"> 1090</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../dc/d0e/structsg__desc.html#a6614c9bb4dbfa0c9583c59aa9d8735d1">gl_force_gles2</a>;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;  <span class="comment">/* Metal-specific */</span></div><div class="line"><a name="l01092"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#aae61c7e1c17c10737bf286b98fdbcb6d"> 1092</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="../../dc/d0e/structsg__desc.html#aae61c7e1c17c10737bf286b98fdbcb6d">mtl_device</a>;</div><div class="line"><a name="l01093"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#a5d30d3fe2a70a0133fde16461d53fb39"> 1093</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* (*mtl_renderpass_descriptor_cb)();</div><div class="line"><a name="l01094"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#a3b9a260dd404099b2ed9c8f697fe8599"> 1094</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* (*mtl_drawable_cb)();</div><div class="line"><a name="l01095"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#aeccf0b76760ad2fb16dd73cbfe880870"> 1095</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/d0e/structsg__desc.html#aeccf0b76760ad2fb16dd73cbfe880870">mtl_global_uniform_buffer_size</a>;</div><div class="line"><a name="l01096"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#ae0a2df5024eb8857323b7d30d465f546"> 1096</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/d0e/structsg__desc.html#ae0a2df5024eb8857323b7d30d465f546">mtl_sampler_cache_size</a>;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;  <span class="comment">/* D3D11-specific */</span></div><div class="line"><a name="l01098"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#a388a3edd562774d081a32e0a88b4ee1f"> 1098</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="../../dc/d0e/structsg__desc.html#a388a3edd562774d081a32e0a88b4ee1f">d3d11_device</a>;</div><div class="line"><a name="l01099"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#a811ae5a1b522ea26a6c06318273fc6bc"> 1099</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="../../dc/d0e/structsg__desc.html#a811ae5a1b522ea26a6c06318273fc6bc">d3d11_device_context</a>;</div><div class="line"><a name="l01100"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#a11079fb6fa66d884e04819998b1eb3f4"> 1100</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* (*d3d11_render_target_view_cb)();</div><div class="line"><a name="l01101"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#a5fa12c0b28ca943f898f8a0d6f1978fc"> 1101</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* (*d3d11_depth_stencil_view_cb)();</div><div class="line"><a name="l01102"></a><span class="lineno"><a class="line" href="../../dc/d0e/structsg__desc.html#a3842693617938076fff77ee1a99a67b9"> 1102</a></span>&#160;  uint32_t <a class="code" href="../../dc/d0e/structsg__desc.html#a3842693617938076fff77ee1a99a67b9">_end_canary</a>;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;} <a class="code" href="../../dc/d0e/structsg__desc.html">sg_desc</a>;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">    sg_buffer_desc</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">    Creation parameters for sg_buffer objects, used in the</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment">    sg_make_buffer() call.</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment">    The default configuration is:</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment">    .size:      0       (this *must* be set to a valid size in bytes)</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment">    .type:      SG_BUFFERTYPE_VERTEXBUFFER</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">    .usage:     SG_USAGE_IMMUTABLE</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">    .content    0</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">    Buffers with the SG_USAGE_IMMUTABLE usage *must* fill the buffer</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment">    with initial data (.content must point to a data chunk with</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment">    exactly .size bytes).</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="comment">    ADVANCED TOPIC: Injecting native 3D-API buffers:</span></div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;<span class="comment">    The following struct members allow to inject your own GL, Metal</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;<span class="comment">    or D3D11 buffers into sokol_gfx:</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">    .gl_buffers[SG_NUM_INFLIGHT_FRAMES]</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">    .mtl_buffers[SG_NUM_INFLIGHT_FRAMES]</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">    .d3d11_buffer</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;<span class="comment">    You must still provide all other members except the .content member, and</span></div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<span class="comment">    these must match the creation parameters of the native buffers you</span></div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">    provide. For SG_USAGE_IMMUTABLE, only provide a single native 3D-API</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="comment">    buffer, otherwise you need to provide SG_NUM_INFLIGHT_FRAMES buffers</span></div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="comment">    (only for GL and Metal, not D3D11). Providing multiple buffers for GL and</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="comment">    Metal is necessary because sokol_gfx will rotate through them when</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="comment">    calling sg_update_buffer() to prevent lock-stalls.</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">    Note that it is expected that immutable injected buffer have already been</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="comment">    initialized with content, and the .content member must be 0!</span></div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="comment">    Also you need to call sg_reset_state_cache() after calling native 3D-API</span></div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;<span class="comment">    functions, and before calling any sokol_gfx function.</span></div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01145"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__buffer__desc.html"> 1145</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01146"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__buffer__desc.html#aba112cb79e353714cdac9aa411db481b"> 1146</a></span>&#160;  uint32_t <a class="code" href="../../d6/d2c/structsg__buffer__desc.html#aba112cb79e353714cdac9aa411db481b">_start_canary</a>;</div><div class="line"><a name="l01147"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__buffer__desc.html#a73cd8286ef49470f30f83c2118d2136d"> 1147</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a73cd8286ef49470f30f83c2118d2136d">size</a>;</div><div class="line"><a name="l01148"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__buffer__desc.html#aed03d70712027dc18902bfab4a6559f3"> 1148</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8f">sg_buffer_type</a> <a class="code" href="../../d6/d2c/structsg__buffer__desc.html#aed03d70712027dc18902bfab4a6559f3">type</a>;</div><div class="line"><a name="l01149"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__buffer__desc.html#a3fa569faec49b1252c05dd1210a85b10"> 1149</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> <a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a3fa569faec49b1252c05dd1210a85b10">usage</a>;</div><div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__buffer__desc.html#a409e6cb69174e210981627d0a356bf65"> 1150</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a409e6cb69174e210981627d0a356bf65">content</a>;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;  <span class="comment">/* GL specific */</span></div><div class="line"><a name="l01152"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__buffer__desc.html#aaaa91111849a07716f2d9e840fa17c6e"> 1152</a></span>&#160;  uint32_t gl_buffers[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>];</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;  <span class="comment">/* Metal specific */</span></div><div class="line"><a name="l01154"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__buffer__desc.html#ad4f2b240c65b7ee8d8b2fa39208cb9a5"> 1154</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* mtl_buffers[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>];</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;  <span class="comment">/* D3D11 specific */</span></div><div class="line"><a name="l01156"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__buffer__desc.html#a1b3954477f336313d9a5a1c989cabce4"> 1156</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a1b3954477f336313d9a5a1c989cabce4">d3d11_buffer</a>;</div><div class="line"><a name="l01157"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__buffer__desc.html#ae9fc3e2cb0fc7c169ef3fdde5ef66c80"> 1157</a></span>&#160;  uint32_t <a class="code" href="../../d6/d2c/structsg__buffer__desc.html#ae9fc3e2cb0fc7c169ef3fdde5ef66c80">_end_canary</a>;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;} <a class="code" href="../../d6/d2c/structsg__buffer__desc.html">sg_buffer_desc</a>;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;<span class="comment">    sg_subimage_content</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;<span class="comment">    Pointer to and size of a subimage-surface data, this is</span></div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment">    used to describe the initial content of immutable-usage images,</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment">    or for updating a dynamic- or stream-usage images.</span></div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;<span class="comment">    For 3D- or array-textures, one sg_subimage_content item</span></div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;<span class="comment">    describes an entire mipmap level consisting of all array- or</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;<span class="comment">    3D-slices of the mipmap level. It is only possible to update</span></div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;<span class="comment">    an entire mipmap level, not parts of it.</span></div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01172"></a><span class="lineno"><a class="line" href="../../d1/d35/structsg__subimage__content.html"> 1172</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01173"></a><span class="lineno"><a class="line" href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c"> 1173</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c">ptr</a>; <span class="comment">/* pointer to subimage data */</span></div><div class="line"><a name="l01174"></a><span class="lineno"><a class="line" href="../../d1/d35/structsg__subimage__content.html#ad5cf41c09de0390218aaa479aa2e58db"> 1174</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d1/d35/structsg__subimage__content.html#ad5cf41c09de0390218aaa479aa2e58db">size</a>;        <span class="comment">/* size in bytes of pointed-to subimage data */</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;} <a class="code" href="../../d1/d35/structsg__subimage__content.html">sg_subimage_content</a>;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;<span class="comment">    sg_image_content</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;<span class="comment">    Defines the content of an image through a 2D array</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<span class="comment">    of sg_subimage_content structs. The first array dimension</span></div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;<span class="comment">    is the cubemap face, and the second array dimension the</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;<span class="comment">    mipmap level.</span></div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01185"></a><span class="lineno"><a class="line" href="../../dd/d44/structsg__image__content.html"> 1185</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01186"></a><span class="lineno"><a class="line" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3"> 1186</a></span>&#160;  <a class="code" href="../../d1/d35/structsg__subimage__content.html">sg_subimage_content</a> subimage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522aeb579c50d806e02e56139d56e0e41728">SG_CUBEFACE_NUM</a>][<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca8a9a7015046cf047f0534dfe86bc7545">SG_MAX_MIPMAPS</a>];</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;} <a class="code" href="../../dd/d44/structsg__image__content.html">sg_image_content</a>;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="comment">    sg_image_desc</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="comment">    Creation parameters for sg_image objects, used in the</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="comment">    sg_make_image() call.</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;<span class="comment">    The default configuration is:</span></div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment">    .type:              SG_IMAGETYPE_2D</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="comment">    .render_target:     false</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="comment">    .width              0 (must be set to &gt;0)</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="comment">    .height             0 (must be set to &gt;0)</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="comment">    .depth/.layers:     1</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="comment">    .num_mipmaps:       1</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="comment">    .usage:             SG_USAGE_IMMUTABLE</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="comment">    .pixel_format:      SG_PIXELFORMAT_RGBA8</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment">    .sample_count:      1 (only used in render_targets)</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="comment">    .min_filter:        SG_FILTER_NEAREST</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment">    .mag_filter:        SG_FILTER_NEAREST</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="comment">    .wrap_u:            SG_WRAP_REPEAT</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;<span class="comment">    .wrap_v:            SG_WRAP_REPEAT</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;<span class="comment">    .wrap_w:            SG_WRAP_REPEAT (only SG_IMAGETYPE_3D)</span></div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;<span class="comment">    .max_anisotropy     1 (must be 1..16)</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;<span class="comment">    .min_lod            0.0f</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;<span class="comment">    .max_lod            FLT_MAX</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;<span class="comment">    .content            an sg_image_content struct to define the initial content</span></div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="comment">    SG_IMAGETYPE_ARRAY and SG_IMAGETYPE_3D are not supported on</span></div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;<span class="comment">    WebGL/GLES2, use sg_query_feature(SG_FEATURE_IMAGETYPE_ARRAY) and</span></div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;<span class="comment">    sg_query_feature(SG_FEATURE_IMAGETYPE_3D) at runtime to check</span></div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;<span class="comment">    if array- and 3D-textures are supported.</span></div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;<span class="comment">    Images with usage SG_USAGE_IMMUTABLE must be fully initialized by</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="comment">    providing a valid .content member which points to</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="comment">    initialization data.</span></div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;<span class="comment">    ADVANCED TOPIC: Injecting native 3D-API textures:</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<span class="comment">    The following struct members allow to inject your own GL, Metal</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;<span class="comment">    or D3D11 textures into sokol_gfx:</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">    .gl_textures[SG_NUM_INFLIGHT_FRAMES]</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;<span class="comment">    .mtl_textures[SG_NUM_INFLIGHT_FRAMES]</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;<span class="comment">    .d3d11_texture</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;<span class="comment">    The same rules apply as for injecting native buffers</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;<span class="comment">    (see sg_buffer_desc documentation for more details).</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01237"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html"> 1237</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01238"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a7710b99d8f762ca5d3427aec45476ac8"> 1238</a></span>&#160;  uint32_t <a class="code" href="../../d4/d94/structsg__image__desc.html#a7710b99d8f762ca5d3427aec45476ac8">_start_canary</a>;</div><div class="line"><a name="l01239"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a206bf908ad986430c63d819f06c4a91a"> 1239</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">sg_image_type</a> <a class="code" href="../../d4/d94/structsg__image__desc.html#a206bf908ad986430c63d819f06c4a91a">type</a>;</div><div class="line"><a name="l01240"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#aeb5ea1efacf1fcbe702491bd6417df70"> 1240</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d4/d94/structsg__image__desc.html#aeb5ea1efacf1fcbe702491bd6417df70">render_target</a>;</div><div class="line"><a name="l01241"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a2852616fac46bf1d405b822ac612e94a"> 1241</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d4/d94/structsg__image__desc.html#a2852616fac46bf1d405b822ac612e94a">width</a>;</div><div class="line"><a name="l01242"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a80175365c540f912492e50a5a8b362e7"> 1242</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d4/d94/structsg__image__desc.html#a80175365c540f912492e50a5a8b362e7">height</a>;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;  <span class="keyword">union </span>{</div><div class="line"><a name="l01244"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a205fafb8e91cc1249e481378b7bac888"> 1244</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d4/d94/structsg__image__desc.html#a205fafb8e91cc1249e481378b7bac888">depth</a>;</div><div class="line"><a name="l01245"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#aed8145e728a2593423ab83d28efceb49"> 1245</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d4/d94/structsg__image__desc.html#aed8145e728a2593423ab83d28efceb49">layers</a>;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;  };</div><div class="line"><a name="l01247"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a0653e80837f6ffa9477a62e627fad170"> 1247</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d4/d94/structsg__image__desc.html#a0653e80837f6ffa9477a62e627fad170">num_mipmaps</a>;</div><div class="line"><a name="l01248"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a4610a2c95a3f97c99390ec4e08caa1ca"> 1248</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> <a class="code" href="../../d4/d94/structsg__image__desc.html#a4610a2c95a3f97c99390ec4e08caa1ca">usage</a>;</div><div class="line"><a name="l01249"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a07ce05ddf423b45fb74375b384dc1f14"> 1249</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> <a class="code" href="../../d4/d94/structsg__image__desc.html#a07ce05ddf423b45fb74375b384dc1f14">pixel_format</a>;</div><div class="line"><a name="l01250"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a7e0d5c7130c32b489e509a6bcfd9904a"> 1250</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d4/d94/structsg__image__desc.html#a7e0d5c7130c32b489e509a6bcfd9904a">sample_count</a>;</div><div class="line"><a name="l01251"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a09eb7207f75e8ad1a8e49335b5da0a0f"> 1251</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> <a class="code" href="../../d4/d94/structsg__image__desc.html#a09eb7207f75e8ad1a8e49335b5da0a0f">min_filter</a>;</div><div class="line"><a name="l01252"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a7cc28a336de67a2fee6a39c0a4cb3eb6"> 1252</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> <a class="code" href="../../d4/d94/structsg__image__desc.html#a7cc28a336de67a2fee6a39c0a4cb3eb6">mag_filter</a>;</div><div class="line"><a name="l01253"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#af56aa1ad4802c4377f32a3656cc00540"> 1253</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> <a class="code" href="../../d4/d94/structsg__image__desc.html#af56aa1ad4802c4377f32a3656cc00540">wrap_u</a>;</div><div class="line"><a name="l01254"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#ad92e8d7c8fc89dea7db54d569982f57d"> 1254</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> <a class="code" href="../../d4/d94/structsg__image__desc.html#ad92e8d7c8fc89dea7db54d569982f57d">wrap_v</a>;</div><div class="line"><a name="l01255"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a457ed7b98ffce90d5cb6b70e2cc4027d"> 1255</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> <a class="code" href="../../d4/d94/structsg__image__desc.html#a457ed7b98ffce90d5cb6b70e2cc4027d">wrap_w</a>;</div><div class="line"><a name="l01256"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a1db73b1b6b31ac8dc14f0c2358057f87"> 1256</a></span>&#160;  uint32_t <a class="code" href="../../d4/d94/structsg__image__desc.html#a1db73b1b6b31ac8dc14f0c2358057f87">max_anisotropy</a>;</div><div class="line"><a name="l01257"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a65deea510785efb62849e55b84193263"> 1257</a></span>&#160;  <span class="keywordtype">float</span> <a class="code" href="../../d4/d94/structsg__image__desc.html#a65deea510785efb62849e55b84193263">min_lod</a>;</div><div class="line"><a name="l01258"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a435a6e2e71f190b00ef4666c83173572"> 1258</a></span>&#160;  <span class="keywordtype">float</span> <a class="code" href="../../d4/d94/structsg__image__desc.html#a435a6e2e71f190b00ef4666c83173572">max_lod</a>;</div><div class="line"><a name="l01259"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#ada2a41a3d05f322bc67e6441dbeb64d3"> 1259</a></span>&#160;  <a class="code" href="../../dd/d44/structsg__image__content.html">sg_image_content</a> <a class="code" href="../../d4/d94/structsg__image__desc.html#ada2a41a3d05f322bc67e6441dbeb64d3">content</a>;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;  <span class="comment">/* GL specific */</span></div><div class="line"><a name="l01261"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a099e099707ea148ef97aa81c526086bf"> 1261</a></span>&#160;  uint32_t gl_textures[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>];</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;  <span class="comment">/* Metal specific */</span></div><div class="line"><a name="l01263"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#acaa521ee4257b203252d89c0f4d299a9"> 1263</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* mtl_textures[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>];</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;  <span class="comment">/* D3D11 specific */</span></div><div class="line"><a name="l01265"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a47068f539f908275b14356da7666c869"> 1265</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="../../d4/d94/structsg__image__desc.html#a47068f539f908275b14356da7666c869">d3d11_texture</a>;</div><div class="line"><a name="l01266"></a><span class="lineno"><a class="line" href="../../d4/d94/structsg__image__desc.html#a228daac3459d79ef70db9c3f77b1d987"> 1266</a></span>&#160;  uint32_t <a class="code" href="../../d4/d94/structsg__image__desc.html#a228daac3459d79ef70db9c3f77b1d987">_end_canary</a>;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;} <a class="code" href="../../d4/d94/structsg__image__desc.html">sg_image_desc</a>;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">    sg_shader_desc</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment">    The structure sg_shader_desc describes the shaders, uniform blocks</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment">    and texture images on the vertex- and fragment-shader stage.</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;<span class="comment">    TODO: source code vs byte code, 3D backend API specifics.</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01277"></a><span class="lineno"><a class="line" href="../../d2/d67/structsg__shader__uniform__desc.html"> 1277</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01278"></a><span class="lineno"><a class="line" href="../../d2/d67/structsg__shader__uniform__desc.html#ae5acb2f7605843de918b252ce4db5d26"> 1278</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#ae5acb2f7605843de918b252ce4db5d26">name</a>;</div><div class="line"><a name="l01279"></a><span class="lineno"><a class="line" href="../../d2/d67/structsg__shader__uniform__desc.html#a09493618d985e76c5160c8611624da4e"> 1279</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2">sg_uniform_type</a> <a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#a09493618d985e76c5160c8611624da4e">type</a>;</div><div class="line"><a name="l01280"></a><span class="lineno"><a class="line" href="../../d2/d67/structsg__shader__uniform__desc.html#a13e9085423f4faf73f68ca2567a168ea"> 1280</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#a13e9085423f4faf73f68ca2567a168ea">array_count</a>;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;} <a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html">sg_shader_uniform_desc</a>;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"><a class="line" href="../../dd/d14/structsg__shader__uniform__block__desc.html"> 1283</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01284"></a><span class="lineno"><a class="line" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483"> 1284</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a>;</div><div class="line"><a name="l01285"></a><span class="lineno"><a class="line" href="../../dd/d14/structsg__shader__uniform__block__desc.html#a995bb1ddede542251b268a3457ff89d1"> 1285</a></span>&#160;  <a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html">sg_shader_uniform_desc</a> uniforms[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca746b50b205e4d09963f11f32b18c6cf9">SG_MAX_UB_MEMBERS</a>];</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;} <a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html">sg_shader_uniform_block_desc</a>;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;</div><div class="line"><a name="l01288"></a><span class="lineno"><a class="line" href="../../dd/d8f/structsg__shader__image__desc.html"> 1288</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01289"></a><span class="lineno"><a class="line" href="../../dd/d8f/structsg__shader__image__desc.html#ada7a7a8884528b37079f4c7055e15df0"> 1289</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#ada7a7a8884528b37079f4c7055e15df0">name</a>;</div><div class="line"><a name="l01290"></a><span class="lineno"><a class="line" href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4"> 1290</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">sg_image_type</a> <a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4">type</a>;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;} <a class="code" href="../../dd/d8f/structsg__shader__image__desc.html">sg_shader_image_desc</a>;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;</div><div class="line"><a name="l01293"></a><span class="lineno"><a class="line" href="../../d9/d32/structsg__shader__stage__desc.html"> 1293</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01294"></a><span class="lineno"><a class="line" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367"> 1294</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a>;</div><div class="line"><a name="l01295"></a><span class="lineno"><a class="line" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a"> 1295</a></span>&#160;  <span class="keyword">const</span> uint8_t* <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>;</div><div class="line"><a name="l01296"></a><span class="lineno"><a class="line" href="../../d9/d32/structsg__shader__stage__desc.html#ab4a4c8aacc932d2bcd3c174a8178249b"> 1296</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#ab4a4c8aacc932d2bcd3c174a8178249b">byte_code_size</a>;</div><div class="line"><a name="l01297"></a><span class="lineno"><a class="line" href="../../d9/d32/structsg__shader__stage__desc.html#a27b2cc1c0ca15c1696f2f0de7798ff1b"> 1297</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a27b2cc1c0ca15c1696f2f0de7798ff1b">entry</a>;</div><div class="line"><a name="l01298"></a><span class="lineno"><a class="line" href="../../d9/d32/structsg__shader__stage__desc.html#a62b1801dc0c45820abd59ac49504a318"> 1298</a></span>&#160;  <a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html">sg_shader_uniform_block_desc</a> uniform_blocks[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>];</div><div class="line"><a name="l01299"></a><span class="lineno"><a class="line" href="../../d9/d32/structsg__shader__stage__desc.html#aa5ad88030a0aa4a7c8aedc31729c6c3c"> 1299</a></span>&#160;  <a class="code" href="../../dd/d8f/structsg__shader__image__desc.html">sg_shader_image_desc</a> images[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;} <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html">sg_shader_stage_desc</a>;</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"><a class="line" href="../../df/d17/structsg__shader__desc.html"> 1302</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01303"></a><span class="lineno"><a class="line" href="../../df/d17/structsg__shader__desc.html#aa7f3617850909bec39ac109c92c98c3d"> 1303</a></span>&#160;  uint32_t <a class="code" href="../../df/d17/structsg__shader__desc.html#aa7f3617850909bec39ac109c92c98c3d">_start_canary</a>;</div><div class="line"><a name="l01304"></a><span class="lineno"><a class="line" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b"> 1304</a></span>&#160;  <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html">sg_shader_stage_desc</a> <a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>;</div><div class="line"><a name="l01305"></a><span class="lineno"><a class="line" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a"> 1305</a></span>&#160;  <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html">sg_shader_stage_desc</a> <a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>;</div><div class="line"><a name="l01306"></a><span class="lineno"><a class="line" href="../../df/d17/structsg__shader__desc.html#a87386b33905c8aefc6eccd477af43f99"> 1306</a></span>&#160;  uint32_t <a class="code" href="../../df/d17/structsg__shader__desc.html#a87386b33905c8aefc6eccd477af43f99">_end_canary</a>;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;} <a class="code" href="../../df/d17/structsg__shader__desc.html">sg_shader_desc</a>;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment">    sg_pipeline_desc</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="comment">    The sg_pipeline_desc struct defines all creation parameters</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment">    for an sg_pipeline object, used as argument to the</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="comment">    sg_make_pipeline() function:</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment">    - the complete vertex layout for all input vertex buffers</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment">    - a shader object</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">    - the 3D primitive type (points, lines, triangles, ...)</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment">    - the index type (none, 16- or 32-bit)</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment">    - depth-stencil state</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment">    - alpha-blending state</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment">    - rasterizer state</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;<span class="comment">    If the vertex data has no gaps between vertex components, you can omit</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;<span class="comment">    the .layout.buffers[].stride and layout.attrs[].offset items (leave them</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;<span class="comment">    default-initialized to 0), sokol will then compute the offsets and strides</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;<span class="comment">    from the vertex component formats (.layout.attrs[].offset). Please note</span></div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;<span class="comment">    that ALL vertex attribute offsets must be 0 in order for the the</span></div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<span class="comment">    automatic offset computation to kick in.</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment">    The default configuration is as follows:</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment">    .layout:</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">        .buffers[]:         vertex buffer layouts</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment">            .stride:        0 (if no stride is given it will be computed)</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">            .step_func      SG_VERTEXSTEP_PER_VERTEX</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment">            .step_rate      1</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment">        .attrs[]:           vertex attribute declarations</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="comment">            .buffer_index   0 the vertex buffer bind slot</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment">            .offset         0 (offsets can be omitted if the vertex layout has no gaps)</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment">            .format         SG_VERTEXFORMAT_INVALID (must be initialized!)</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment">            .name           0 (GLES2 requires an attribute name here)</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;<span class="comment">            .sem_name       0 (D3D11 requires a semantic name here)</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;<span class="comment">            .sem_index      0 (D3D11 requires a semantic index here)</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;<span class="comment">    .shader:            0 (must be intilized with a valid sg_shader id!)</span></div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;<span class="comment">    .primitive_type:    SG_PRIMITIVETYPE_TRIANGLES</span></div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;<span class="comment">    .index_type:        SG_INDEXTYPE_NONE</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;<span class="comment">    .depth_stencil:</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;<span class="comment">        .stencil_front, .stencil_back:</span></div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;<span class="comment">            .fail_op:               SG_STENCILOP_KEEP</span></div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;<span class="comment">            .depth_fail_op:         SG_STENCILOP_KEEP</span></div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;<span class="comment">            .pass_op:               SG_STENCILOP_KEEP</span></div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;<span class="comment">            .compare_func           SG_COMPAREFUNC_ALWAYS</span></div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;<span class="comment">        .depth_compare_func:    SG_COMPAREFUNC_ALWAYS</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">        .depth_write_enabled:   false</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment">        .stencil_enabled:       false</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;<span class="comment">        .stencil_read_mask:     0</span></div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;<span class="comment">        .stencil_write_mask:    0</span></div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;<span class="comment">        .stencil_ref:           0</span></div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;<span class="comment">    .blend:</span></div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;<span class="comment">        .enabled:               false</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;<span class="comment">        .src_factor_rgb:        SG_BLENDFACTOR_ONE</span></div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;<span class="comment">        .dst_factor_rgb:        SG_BLENDFACTOR_ZERO</span></div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;<span class="comment">        .op_rgb:                SG_BLENDOP_ADD</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;<span class="comment">        .src_factor_alpha:      SG_BLENDFACTOR_ONE</span></div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;<span class="comment">        .dst_factor_alpha:      SG_BLENDFACTOR_ZERO</span></div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;<span class="comment">        .op_alpha:              SG_BLENDOP_ADD</span></div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;<span class="comment">        .color_write_mask:      SG_COLORMASK_RGBA</span></div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="comment">        .color_attachment_count 1</span></div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="comment">        .color_format           SG_PIXELFORMAT_RGBA8</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="comment">        .depth_format           SG_PIXELFORMAT_DEPTHSTENCIL</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="comment">        .blend_color:           { 0.0f, 0.0f, 0.0f, 0.0f }</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="comment">    .rasterizer:</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="comment">        .alpha_to_coverage_enabled:     false</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="comment">        .cull_mode:                     SG_CULLMODE_NONE</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="comment">        .face_winding:                  SG_FACEWINDING_CW</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;<span class="comment">        .sample_count:                  1</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="comment">        .depth_bias:                    0.0f</span></div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;<span class="comment">        .depth_bias_slope_scale:        0.0f</span></div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;<span class="comment">        .depth_bias_clamp:              0.0f</span></div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01382"></a><span class="lineno"><a class="line" href="../../dc/da3/structsg__buffer__layout__desc.html"> 1382</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01383"></a><span class="lineno"><a class="line" href="../../dc/da3/structsg__buffer__layout__desc.html#aab7f169abb46eecbecaec8e9d0d2f6f5"> 1383</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#aab7f169abb46eecbecaec8e9d0d2f6f5">stride</a>;</div><div class="line"><a name="l01384"></a><span class="lineno"><a class="line" href="../../dc/da3/structsg__buffer__layout__desc.html#a31db96a851271a5c840fbd63ba461577"> 1384</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6">sg_vertex_step</a> <a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#a31db96a851271a5c840fbd63ba461577">step_func</a>;</div><div class="line"><a name="l01385"></a><span class="lineno"><a class="line" href="../../dc/da3/structsg__buffer__layout__desc.html#a459ba52adfdcd699fdf29ecd13a702b4"> 1385</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#a459ba52adfdcd699fdf29ecd13a702b4">step_rate</a>;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;} <a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html">sg_buffer_layout_desc</a>;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div><div class="line"><a name="l01388"></a><span class="lineno"><a class="line" href="../../d5/d83/structsg__vertex__attr__desc.html"> 1388</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01389"></a><span class="lineno"><a class="line" href="../../d5/d83/structsg__vertex__attr__desc.html#a357b733993ec8e744fe6dc6bd2a3d060"> 1389</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a357b733993ec8e744fe6dc6bd2a3d060">name</a>;</div><div class="line"><a name="l01390"></a><span class="lineno"><a class="line" href="../../d5/d83/structsg__vertex__attr__desc.html#a300495aa1542131ca1376536d28b7ad5"> 1390</a></span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a300495aa1542131ca1376536d28b7ad5">sem_name</a>;</div><div class="line"><a name="l01391"></a><span class="lineno"><a class="line" href="../../d5/d83/structsg__vertex__attr__desc.html#a8d1f1db110d27b2bc17b1d625f04894d"> 1391</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a8d1f1db110d27b2bc17b1d625f04894d">sem_index</a>;</div><div class="line"><a name="l01392"></a><span class="lineno"><a class="line" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068"> 1392</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>;</div><div class="line"><a name="l01393"></a><span class="lineno"><a class="line" href="../../d5/d83/structsg__vertex__attr__desc.html#a987b32666e62b0aa825701c0ac03484e"> 1393</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a987b32666e62b0aa825701c0ac03484e">offset</a>;</div><div class="line"><a name="l01394"></a><span class="lineno"><a class="line" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558"> 1394</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08f">sg_vertex_format</a> <a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a>;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;} <a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html">sg_vertex_attr_desc</a>;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div><div class="line"><a name="l01397"></a><span class="lineno"><a class="line" href="../../d1/d64/structsg__layout__desc.html"> 1397</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01398"></a><span class="lineno"><a class="line" href="../../d1/d64/structsg__layout__desc.html#a956d4bf59180e48cdfb5bcc00b0c7012"> 1398</a></span>&#160;  <a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html">sg_buffer_layout_desc</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#af545b4458d07f53f6ffebc73b38814cb">buffers</a>[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l01399"></a><span class="lineno"><a class="line" href="../../d1/d64/structsg__layout__desc.html#a19f830b45bc4289d997fd51604a5e4f1"> 1399</a></span>&#160;  <a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html">sg_vertex_attr_desc</a> attrs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>];</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;} <a class="code" href="../../d1/d64/structsg__layout__desc.html">sg_layout_desc</a>;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01402"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__stencil__state.html"> 1402</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01403"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034"> 1403</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488a">sg_stencil_op</a> <a class="code" href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034">fail_op</a>;</div><div class="line"><a name="l01404"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f"> 1404</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488a">sg_stencil_op</a> <a class="code" href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f">depth_fail_op</a>;</div><div class="line"><a name="l01405"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20"> 1405</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488a">sg_stencil_op</a> <a class="code" href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20">pass_op</a>;</div><div class="line"><a name="l01406"></a><span class="lineno"><a class="line" href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88"> 1406</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64">sg_compare_func</a> <a class="code" href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88">compare_func</a>;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;} <a class="code" href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a>;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"><a class="line" href="../../d5/d6c/structsg__depth__stencil__state.html"> 1409</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01410"></a><span class="lineno"><a class="line" href="../../d5/d6c/structsg__depth__stencil__state.html#ad698879849d1e77dcbbda963cd45ef79"> 1410</a></span>&#160;  <a class="code" href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a> <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#ad698879849d1e77dcbbda963cd45ef79">stencil_front</a>;</div><div class="line"><a name="l01411"></a><span class="lineno"><a class="line" href="../../d5/d6c/structsg__depth__stencil__state.html#a28ce155156b38f16e894aa724ece3091"> 1411</a></span>&#160;  <a class="code" href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a> <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a28ce155156b38f16e894aa724ece3091">stencil_back</a>;</div><div class="line"><a name="l01412"></a><span class="lineno"><a class="line" href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74"> 1412</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64">sg_compare_func</a> <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74">depth_compare_func</a>;</div><div class="line"><a name="l01413"></a><span class="lineno"><a class="line" href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292"> 1413</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292">depth_write_enabled</a>;</div><div class="line"><a name="l01414"></a><span class="lineno"><a class="line" href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3"> 1414</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3">stencil_enabled</a>;</div><div class="line"><a name="l01415"></a><span class="lineno"><a class="line" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420"> 1415</a></span>&#160;  uint8_t <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">stencil_read_mask</a>;</div><div class="line"><a name="l01416"></a><span class="lineno"><a class="line" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805"> 1416</a></span>&#160;  uint8_t <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">stencil_write_mask</a>;</div><div class="line"><a name="l01417"></a><span class="lineno"><a class="line" href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f"> 1417</a></span>&#160;  uint8_t <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f">stencil_ref</a>;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;} <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html">sg_depth_stencil_state</a>;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div><div class="line"><a name="l01420"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html"> 1420</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01421"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d"> 1421</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d">enabled</a>;</div><div class="line"><a name="l01422"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2"> 1422</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98">sg_blend_factor</a> <a class="code" href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2">src_factor_rgb</a>;</div><div class="line"><a name="l01423"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3"> 1423</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98">sg_blend_factor</a> <a class="code" href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3">dst_factor_rgb</a>;</div><div class="line"><a name="l01424"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884"> 1424</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007b">sg_blend_op</a> <a class="code" href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884">op_rgb</a>;</div><div class="line"><a name="l01425"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f"> 1425</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98">sg_blend_factor</a> <a class="code" href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f">src_factor_alpha</a>;</div><div class="line"><a name="l01426"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec"> 1426</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98">sg_blend_factor</a> <a class="code" href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec">dst_factor_alpha</a>;</div><div class="line"><a name="l01427"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c"> 1427</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007b">sg_blend_op</a> <a class="code" href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c">op_alpha</a>;</div><div class="line"><a name="l01428"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446"> 1428</a></span>&#160;  uint8_t <a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a>;</div><div class="line"><a name="l01429"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html#a4e583154ea74b802d760f3df0c4f429a"> 1429</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d9/dd6/structsg__blend__state.html#a4e583154ea74b802d760f3df0c4f429a">color_attachment_count</a>;</div><div class="line"><a name="l01430"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html#aef4624a1a4ef6da70a6ec6af5b285d36"> 1430</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> <a class="code" href="../../d9/dd6/structsg__blend__state.html#aef4624a1a4ef6da70a6ec6af5b285d36">color_format</a>;</div><div class="line"><a name="l01431"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html#aad5418b27eace35bda553a2b371f81e3"> 1431</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> <a class="code" href="../../d9/dd6/structsg__blend__state.html#aad5418b27eace35bda553a2b371f81e3">depth_format</a>;</div><div class="line"><a name="l01432"></a><span class="lineno"><a class="line" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25"> 1432</a></span>&#160;  <span class="keywordtype">float</span> blend_color[4];</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;} <a class="code" href="../../d9/dd6/structsg__blend__state.html">sg_blend_state</a>;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div><div class="line"><a name="l01435"></a><span class="lineno"><a class="line" href="../../d9/dbf/structsg__rasterizer__state.html"> 1435</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01436"></a><span class="lineno"><a class="line" href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148"> 1436</a></span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148">alpha_to_coverage_enabled</a>;</div><div class="line"><a name="l01437"></a><span class="lineno"><a class="line" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012"> 1437</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4">sg_cull_mode</a> <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">cull_mode</a>;</div><div class="line"><a name="l01438"></a><span class="lineno"><a class="line" href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0"> 1438</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331f">sg_face_winding</a> <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0">face_winding</a>;</div><div class="line"><a name="l01439"></a><span class="lineno"><a class="line" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802"> 1439</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a>;</div><div class="line"><a name="l01440"></a><span class="lineno"><a class="line" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3"> 1440</a></span>&#160;  <span class="keywordtype">float</span> <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">depth_bias</a>;</div><div class="line"><a name="l01441"></a><span class="lineno"><a class="line" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1"> 1441</a></span>&#160;  <span class="keywordtype">float</span> <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">depth_bias_slope_scale</a>;</div><div class="line"><a name="l01442"></a><span class="lineno"><a class="line" href="../../d9/dbf/structsg__rasterizer__state.html#a15a60b827b6583f861bb79ff86a8383b"> 1442</a></span>&#160;  <span class="keywordtype">float</span> <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a15a60b827b6583f861bb79ff86a8383b">depth_bias_clamp</a>;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;} <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html">sg_rasterizer_state</a>;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div><div class="line"><a name="l01445"></a><span class="lineno"><a class="line" href="../../d5/db3/structsg__pipeline__desc.html"> 1445</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01446"></a><span class="lineno"><a class="line" href="../../d5/db3/structsg__pipeline__desc.html#a1422173396d3a421d7bf7170a410f775"> 1446</a></span>&#160;  uint32_t <a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a1422173396d3a421d7bf7170a410f775">_start_canary</a>;</div><div class="line"><a name="l01447"></a><span class="lineno"><a class="line" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436"> 1447</a></span>&#160;  <a class="code" href="../../d1/d64/structsg__layout__desc.html">sg_layout_desc</a> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>;</div><div class="line"><a name="l01448"></a><span class="lineno"><a class="line" href="../../d5/db3/structsg__pipeline__desc.html#ae193421a3ac922d89a9cbf55788ede65"> 1448</a></span>&#160;  <a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae193421a3ac922d89a9cbf55788ede65">shader</a>;</div><div class="line"><a name="l01449"></a><span class="lineno"><a class="line" href="../../d5/db3/structsg__pipeline__desc.html#a79b4b5aec590c5cbc1c1472661419bb5"> 1449</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4">sg_primitive_type</a> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a79b4b5aec590c5cbc1c1472661419bb5">primitive_type</a>;</div><div class="line"><a name="l01450"></a><span class="lineno"><a class="line" href="../../d5/db3/structsg__pipeline__desc.html#a7762d108e4ad271336c3006c84606a9f"> 1450</a></span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641">sg_index_type</a> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a7762d108e4ad271336c3006c84606a9f">index_type</a>;</div><div class="line"><a name="l01451"></a><span class="lineno"><a class="line" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394"> 1451</a></span>&#160;  <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html">sg_depth_stencil_state</a> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>;</div><div class="line"><a name="l01452"></a><span class="lineno"><a class="line" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f"> 1452</a></span>&#160;  <a class="code" href="../../d9/dd6/structsg__blend__state.html">sg_blend_state</a> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>;</div><div class="line"><a name="l01453"></a><span class="lineno"><a class="line" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840"> 1453</a></span>&#160;  <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html">sg_rasterizer_state</a> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>;</div><div class="line"><a name="l01454"></a><span class="lineno"><a class="line" href="../../d5/db3/structsg__pipeline__desc.html#ad9ee6ba045cb445d556d64baa93ae6bf"> 1454</a></span>&#160;  uint32_t <a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ad9ee6ba045cb445d556d64baa93ae6bf">_end_canary</a>;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;} <a class="code" href="../../d5/db3/structsg__pipeline__desc.html">sg_pipeline_desc</a>;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;<span class="comment">    sg_pass_desc</span></div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="comment">    Creation parameters for an sg_pass object, used as argument</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment">    to the sg_make_pass() function.</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">    A pass object contains 1..4 color-attachments and none, or one,</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">    depth-stencil-attachment. Each attachment consists of</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment">    an image, and two additional indices describing</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="comment">    which subimage the pass will render: one mipmap index, and</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="comment">    if the image is a cubemap, array-texture or 3D-texture, the</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="comment">    face-index, array-layer or depth-slice.</span></div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment">    Pass images must fulfill the following requirements:</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="comment">    All images must have:</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="comment">    - been created as render target (sg_image_desc.render_target = true)</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;<span class="comment">    - the same size</span></div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<span class="comment">    - the same sample count</span></div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="comment">    In addition, all color-attachment images must have the same</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;<span class="comment">    pixel format.</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01480"></a><span class="lineno"><a class="line" href="../../d1/da2/structsg__attachment__desc.html"> 1480</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01481"></a><span class="lineno"><a class="line" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec"> 1481</a></span>&#160;  <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> <a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>;</div><div class="line"><a name="l01482"></a><span class="lineno"><a class="line" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34"> 1482</a></span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;  <span class="keyword">union </span>{</div><div class="line"><a name="l01484"></a><span class="lineno"><a class="line" href="../../d1/da2/structsg__attachment__desc.html#ad0208f4dba2779f88c66139199f467ca"> 1484</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d1/da2/structsg__attachment__desc.html#ad0208f4dba2779f88c66139199f467ca">face</a>;</div><div class="line"><a name="l01485"></a><span class="lineno"><a class="line" href="../../d1/da2/structsg__attachment__desc.html#a75e122aeb68f7e8e2ab0665643730638"> 1485</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d1/da2/structsg__attachment__desc.html#a75e122aeb68f7e8e2ab0665643730638">layer</a>;</div><div class="line"><a name="l01486"></a><span class="lineno"><a class="line" href="../../d1/da2/structsg__attachment__desc.html#a91d437e248352612f03c15cf47b2dd35"> 1486</a></span>&#160;    <span class="keywordtype">int</span> <a class="code" href="../../d1/da2/structsg__attachment__desc.html#a91d437e248352612f03c15cf47b2dd35">slice</a>;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;  };</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;} <a class="code" href="../../d1/da2/structsg__attachment__desc.html">sg_attachment_desc</a>;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;</div><div class="line"><a name="l01490"></a><span class="lineno"><a class="line" href="../../d4/d2b/structsg__pass__desc.html"> 1490</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01491"></a><span class="lineno"><a class="line" href="../../d4/d2b/structsg__pass__desc.html#ac2620e3d5c3b7b8a122bacdf7408e424"> 1491</a></span>&#160;  uint32_t <a class="code" href="../../d4/d2b/structsg__pass__desc.html#ac2620e3d5c3b7b8a122bacdf7408e424">_start_canary</a>;</div><div class="line"><a name="l01492"></a><span class="lineno"><a class="line" href="../../d4/d2b/structsg__pass__desc.html#a0671a1bca34513d50f88c551408643d5"> 1492</a></span>&#160;  <a class="code" href="../../d1/da2/structsg__attachment__desc.html">sg_attachment_desc</a> color_attachments[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>];</div><div class="line"><a name="l01493"></a><span class="lineno"><a class="line" href="../../d4/d2b/structsg__pass__desc.html#a75a23624c5d16d675a70e62f6ce9ba70"> 1493</a></span>&#160;  <a class="code" href="../../d1/da2/structsg__attachment__desc.html">sg_attachment_desc</a> <a class="code" href="../../d4/d2b/structsg__pass__desc.html#a75a23624c5d16d675a70e62f6ce9ba70">depth_stencil_attachment</a>;</div><div class="line"><a name="l01494"></a><span class="lineno"><a class="line" href="../../d4/d2b/structsg__pass__desc.html#a60895ff91f318d528793dd786b5c9aa0"> 1494</a></span>&#160;  uint32_t <a class="code" href="../../d4/d2b/structsg__pass__desc.html#a60895ff91f318d528793dd786b5c9aa0">_end_canary</a>;</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;} <a class="code" href="../../d4/d2b/structsg__pass__desc.html">sg_pass_desc</a>;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment">/* setup and misc functions */</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ad56b640c0528e80c782edcf7a0af6dec">sg_setup</a>(<span class="keyword">const</span> <a class="code" href="../../dc/d0e/structsg__desc.html">sg_desc</a>* desc);</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a87d2df69dbdf4769f5897dc74a6112e3">sg_shutdown</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">bool</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a3624f0a3b097e7fd4c78feeee7673616">sg_isvalid</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">bool</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af74608f3ba41af079b7757da79c4ddb5">sg_query_feature</a>(sg_feature feature);</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab33e587bf39ff061f302ead66918a8a4">sg_reset_state_cache</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;<span class="comment">/* resource creation, destruction and updating */</span></div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab2c0f2d30c0de344f2c437b0eccfec12">sg_make_buffer</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__buffer__desc.html">sg_buffer_desc</a>* desc);</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a75e522049ecbe2ae946e2433f655fc6e">sg_make_image</a>(<span class="keyword">const</span> <a class="code" href="../../d4/d94/structsg__image__desc.html">sg_image_desc</a>* desc);</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ad803c79a54b89b33f27b9717b1a817a3">sg_make_shader</a>(<span class="keyword">const</span> <a class="code" href="../../df/d17/structsg__shader__desc.html">sg_shader_desc</a>* desc);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2e25513d07365f01407f6da163e56400">sg_make_pipeline</a>(<span class="keyword">const</span> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html">sg_pipeline_desc</a>* desc);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503739fcb046dbd4cce8e2902b9ef9b">sg_make_pass</a>(<span class="keyword">const</span> <a class="code" href="../../d4/d2b/structsg__pass__desc.html">sg_pass_desc</a>* desc);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7a89080b6721517f05551debfec2ea8">sg_destroy_buffer</a>(<a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#ad8a8baf08bc0399738960c9259571911">buf</a>);</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af4654d2759a13c49ffa3cf9378cab61b">sg_destroy_image</a>(<a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3455aaa12cecc35ac4a42a9bf1273da8">img</a>);</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a4a00caaf242917010341f4022fbb3b8f">sg_destroy_shader</a>(<a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> shd);</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a04c754eb981c690bb66677cbedd5ec4b">sg_destroy_pipeline</a>(<a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> pip);</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af0e5c18f1f5649a4641562d91254181a">sg_destroy_pass</a>(<a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> pass);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#adc374778695c2259489197c501ee1f29">sg_update_buffer</a>(<a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#ad8a8baf08bc0399738960c9259571911">buf</a>, <span class="keyword">const</span> <span class="keywordtype">void</span>* data_ptr, <span class="keywordtype">int</span> data_size);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8d0364be84a366bb82d39ffefda1a9a9">sg_update_image</a>(<a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3455aaa12cecc35ac4a42a9bf1273da8">img</a>, <span class="keyword">const</span> <a class="code" href="../../dd/d44/structsg__image__content.html">sg_image_content</a>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a41a8247b39e9cdb744299c3331ca3453">data</a>);</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;<span class="comment">/* get resource state (initial, alloc, valid, failed) */</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2490c2fd9d80a2abe82cfb6d7a3c0498">sg_query_buffer_state</a>(<a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#ad8a8baf08bc0399738960c9259571911">buf</a>);</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a951bf62df0f17f0bdc819d3377595a80">sg_query_image_state</a>(<a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3455aaa12cecc35ac4a42a9bf1273da8">img</a>);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a09de967fe30a0761245cdbd8e23ece9e">sg_query_shader_state</a>(<a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> shd);</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#acfc58ab7b45d663c8ea09b16160e8868">sg_query_pipeline_state</a>(<a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> pip);</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac8c013f199cef85c5b296cfd8440ad96">sg_query_pass_state</a>(<a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> pass);</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="comment">/* rendering functions */</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a9cef9ed3715d583330d7445daa25f1bf">sg_begin_default_pass</a>(<span class="keyword">const</span> <a class="code" href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a>* pass_action, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a76aaa5c50746272e7d2de9aece921757">width</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae23e72c69f79d0aa647aa7929ef3f232">height</a>);</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af30b7eacdf6fe6765e24d64a78acc7f0">sg_begin_pass</a>(<a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> pass, <span class="keyword">const</span> <a class="code" href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a>* pass_action);</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8579dfd47dae6c05ccf4699eeb88e26a">sg_apply_viewport</a>(<span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a76aaa5c50746272e7d2de9aece921757">width</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae23e72c69f79d0aa647aa7929ef3f232">height</a>, <span class="keywordtype">bool</span> origin_top_left);</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa3431cc18622492f90ce688f42f6b40a">sg_apply_scissor_rect</a>(<span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a76aaa5c50746272e7d2de9aece921757">width</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae23e72c69f79d0aa647aa7929ef3f232">height</a>, <span class="keywordtype">bool</span> origin_top_left);</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a646e4856f8bdf0774941aa3e478ab89a">sg_apply_draw_state</a>(<span class="keyword">const</span> <a class="code" href="../../d5/d1e/structsg__draw__state.html">sg_draw_state</a>* ds);</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0c473ed991f6ac9c3e6f158d9e978341">sg_apply_uniform_block</a>(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343">sg_shader_stage</a> stage, <span class="keywordtype">int</span> ub_index, <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a41a8247b39e9cdb744299c3331ca3453">data</a>, <span class="keywordtype">int</span> num_bytes);</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7a6bed991e8cd50486c8b11e827a21ca">sg_draw</a>(<span class="keywordtype">int</span> base_element, <span class="keywordtype">int</span> num_elements, <span class="keywordtype">int</span> num_instances);</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a4b2c9e5f83582336dbdf850cf2bb6c46">sg_end_pass</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a6c8d2e5abcd1c1f0edda555382cd269a">sg_commit</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;<span class="comment">/* separate resource allocation and initialization (for async setup) */</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#adcbc29769a4f9abfc06235a16902a07e">sg_alloc_buffer</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a282ef9adee0ba6c7c44fb2eb30d2cb42">sg_alloc_image</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ad25f2a76b929e2f2d609c0eda9e925f9">sg_alloc_shader</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a9a4eca382eeb05642ef2d63d16b20a22">sg_alloc_pipeline</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0190a413736517d46f7d0a126dfb674c">sg_alloc_pass</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7ae692e7a55659e9c78839484831d999">sg_init_buffer</a>(<a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> buf_id, <span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__buffer__desc.html">sg_buffer_desc</a>* desc);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7a4124dfd55240178e380c17cce7fcd9">sg_init_image</a>(<a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> img_id, <span class="keyword">const</span> <a class="code" href="../../d4/d94/structsg__image__desc.html">sg_image_desc</a>* desc);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a45da2d6b2b42e34771f6ac3748eb5945">sg_init_shader</a>(<a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> shd_id, <span class="keyword">const</span> <a class="code" href="../../df/d17/structsg__shader__desc.html">sg_shader_desc</a>* desc);</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a61cf21a700ef8c1535a3400a0ed0439d">sg_init_pipeline</a>(<a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> pip_id, <span class="keyword">const</span> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html">sg_pipeline_desc</a>* desc);</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae1495ec8896a5f48f769a59fdbaeb022">sg_init_pass</a>(<a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> pass_id, <span class="keyword">const</span> <a class="code" href="../../d4/d2b/structsg__pass__desc.html">sg_pass_desc</a>* desc);</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a38dcbb45dd8697d8fe43e1ab549a591a">sg_fail_buffer</a>(<a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> buf_id);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af3724d6a8207077435d3052f3142c3c5">sg_fail_image</a>(<a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> img_id);</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ad2057c7d8e728715f2a819d82cf29440">sg_fail_shader</a>(<a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> shd_id);</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a9909edd371cdb8cbf6b5580843a06643">sg_fail_pipeline</a>(<a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> pip_id);</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a64063d3c15a6b0420ce8849e28cab4e8">sg_fail_pass</a>(<a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> pass_id);</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="comment">/* rendering contexts (optional) */</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <a class="code" href="../../d2/d13/structsg__context.html">sg_context</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a87b7df71baeaadbe638496d16ebe8776">sg_setup_context</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a4f814c06a8a5de60ced94301615d629a">sg_activate_context</a>(<a class="code" href="../../d2/d13/structsg__context.html">sg_context</a> ctx_id);</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aaf9c04cd7687218cb7fcc091f0a81e20">sg_discard_context</a>(<a class="code" href="../../d2/d13/structsg__context.html">sg_context</a> ctx_id);</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;<span class="preprocessor">#pragma warning(pop)</span></div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;} <span class="comment">/* extern &quot;C&quot; */</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;<span class="comment">/*--- IMPLEMENTATION ---------------------------------------------------------*/</span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;<span class="preprocessor">#ifdef SOKOL_IMPL</span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;<span class="preprocessor">#pragma warning(push)</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;<span class="preprocessor">#pragma warning(disable : 4201) </span><span class="comment">/* nonstandard extension used: nameless struct/union */</span><span class="preprocessor"></span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;<span class="preprocessor">#pragma warning(disable : 4115) </span><span class="comment">/* named type definition in parentheses */</span><span class="preprocessor"></span></div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="preprocessor">#pragma warning(disable : 4505) </span><span class="comment">/* unreferenced local function has been removed */</span><span class="preprocessor"></span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;<span class="preprocessor">#ifndef SOKOL_API_IMPL</span></div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;<span class="preprocessor">#define SOKOL_API_IMPL</span></div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;<span class="preprocessor">#ifndef SOKOL_DEBUG</span></div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;<span class="preprocessor">#ifdef _DEBUG</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;<span class="preprocessor">#define SOKOL_DEBUG (1)</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;<span class="preprocessor">#ifndef SOKOL_ASSERT</span></div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;<span class="preprocessor">#define SOKOL_ASSERT(c) assert(c)</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;<span class="preprocessor">#ifndef SOKOL_VALIDATE_BEGIN</span></div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;<span class="preprocessor">#define SOKOL_VALIDATE_BEGIN() _sg_validate_begin()</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="preprocessor">#ifndef SOKOL_VALIDATE</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="preprocessor">#define SOKOL_VALIDATE(cond, err) _sg_validate((cond), err)</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="preprocessor">#ifndef SOKOL_VALIDATE_END</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="preprocessor">#define SOKOL_VALIDATE_END() _sg_validate_end()</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="preprocessor">#ifndef SOKOL_UNREACHABLE</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="preprocessor">#define SOKOL_UNREACHABLE SOKOL_ASSERT(false)</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="preprocessor">#ifndef SOKOL_MALLOC</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="preprocessor">#include &lt;cstdlib&gt;</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="preprocessor">#define SOKOL_MALLOC(s) malloc(s)</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="preprocessor">#define SOKOL_FREE(p) free(p)</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="preprocessor">#ifndef SOKOL_LOG</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="preprocessor">#ifdef SOKOL_DEBUG</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="preprocessor">#define SOKOL_LOG(s) \</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="preprocessor">  {                  \</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;<span class="preprocessor">    SOKOL_ASSERT(s); \</span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="preprocessor">    puts(s);         \</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;<span class="preprocessor">  }</span></div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;<span class="preprocessor">#define SOKOL_LOG(s)</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;<span class="preprocessor">#if !(defined(SOKOL_GLCORE33) || defined(SOKOL_GLES2) || defined(SOKOL_GLES3) || defined(SOKOL_D3D11) || defined(SOKOL_METAL))</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;<span class="preprocessor">#error &quot;Please select a backend with SOKOL_GLCORE33, SOKOL_GLES2, SOKOL_GLES3, SOKOL_D3D11 or SOKOL_METAL&quot;</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;<span class="preprocessor">#ifndef _SOKOL_PRIVATE</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;<span class="preprocessor">#if defined(__GNUC__)</span></div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;<span class="preprocessor">#define _SOKOL_PRIVATE __attribute__((unused)) static</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;<span class="preprocessor">#define _SOKOL_PRIVATE static</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;<span class="preprocessor">#ifndef _SOKOL_UNUSED</span></div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;<span class="preprocessor">#define _SOKOL_UNUSED(x) (void)(x)</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment">/* default clear values */</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="preprocessor">#ifndef SG_DEFAULT_CLEAR_RED</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="preprocessor">#define SG_DEFAULT_CLEAR_RED (0.5f)</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;<span class="preprocessor">#ifndef SG_DEFAULT_CLEAR_GREEN</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;<span class="preprocessor">#define SG_DEFAULT_CLEAR_GREEN (0.5f)</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;<span class="preprocessor">#ifndef SG_DEFAULT_CLEAR_BLUE</span></div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;<span class="preprocessor">#define SG_DEFAULT_CLEAR_BLUE (0.5f)</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;<span class="preprocessor">#ifndef SG_DEFAULT_CLEAR_ALPHA</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="preprocessor">#define SG_DEFAULT_CLEAR_ALPHA (1.0f)</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;<span class="preprocessor">#ifndef SG_DEFAULT_CLEAR_DEPTH</span></div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;<span class="preprocessor">#define SG_DEFAULT_CLEAR_DEPTH (1.0f)</span></div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;<span class="preprocessor">#ifndef SG_DEFAULT_CLEAR_STENCIL</span></div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;<span class="preprocessor">#define SG_DEFAULT_CLEAR_STENCIL (0)</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;  _SG_SLOT_SHIFT = 16,</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;  _SG_SLOT_MASK = (1 &lt;&lt; _SG_SLOT_SHIFT) - 1,</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;  _SG_MAX_POOL_SIZE = (1 &lt;&lt; _SG_SLOT_SHIFT),</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;  _SG_DEFAULT_BUFFER_POOL_SIZE = 128,</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;  _SG_DEFAULT_IMAGE_POOL_SIZE = 128,</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;  _SG_DEFAULT_SHADER_POOL_SIZE = 32,</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;  _SG_DEFAULT_PIPELINE_POOL_SIZE = 64,</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;  _SG_DEFAULT_PASS_POOL_SIZE = 16,</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;  _SG_DEFAULT_CONTEXT_POOL_SIZE = 16</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;};</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment">/* helper macros */</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="preprocessor">#define _sg_def(val, def) (((val) == 0) ? (def) : (val))</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="preprocessor">#define _sg_def_flt(val, def) (((val) == 0.0f) ? (def) : (val))</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;<span class="preprocessor">#define _sg_min(a, b) ((a &lt; b) ? a : b)</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;<span class="preprocessor">#define _sg_max(a, b) ((a &gt; b) ? a : b)</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;<span class="preprocessor">#define _sg_clamp(v, v0, v1) ((v &lt; v0) ? (v0) : ((v &gt; v1) ? (v1) : (v)))</span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;<span class="preprocessor">#define _sg_fequal(val, cmp, delta) (((val - cmp) &gt; -delta) &amp;&amp; ((val - cmp) &lt; delta))</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;<span class="comment">/*-- helper functions --------------------------------------------------------*/</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;<span class="comment">/* return byte size of a vertex format */</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">int</span> _sg_vertexformat_bytesize(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08f">sg_vertex_format</a> fmt)</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;{</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa29b1e94ae9985fe1463d36e301916d29">SG_VERTEXFORMAT_FLOAT</a>:</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa498741f607f4f10e6b9672dcb9a9c6ac">SG_VERTEXFORMAT_FLOAT2</a>:</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <span class="keywordflow">return</span> 8;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6ba93ce02391f49c626baa5e6f7234b2">SG_VERTEXFORMAT_FLOAT3</a>:</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      <span class="keywordflow">return</span> 12;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6115bbd19f17c016a55102c485b7658c">SG_VERTEXFORMAT_FLOAT4</a>:</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;      <span class="keywordflow">return</span> 16;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5c3facf45a0c01162b348286571e4cbc">SG_VERTEXFORMAT_BYTE4</a>:</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5bb6681394fe029a0ca1fa0e00e85da9">SG_VERTEXFORMAT_BYTE4N</a>:</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa1eac19f3f2048bed0f6b71f844e9bdb">SG_VERTEXFORMAT_UBYTE4</a>:</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa598e60ae2c550a825145e20e377d7f19">SG_VERTEXFORMAT_UBYTE4N</a>:</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa742f7d751f8dff04449a03428372810a">SG_VERTEXFORMAT_SHORT2</a>:</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fafec5d9fb7cb12489ea4be3637c746efa">SG_VERTEXFORMAT_SHORT2N</a>:</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faf321d1eb262dfb3db56fb43f76d9898a">SG_VERTEXFORMAT_SHORT4</a>:</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;      <span class="keywordflow">return</span> 8;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6bfcbcd3a001760711189465343bd4e8">SG_VERTEXFORMAT_SHORT4N</a>:</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      <span class="keywordflow">return</span> 8;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faafa9a30c6992cc63134b5e14cdd3162b">SG_VERTEXFORMAT_UINT10_N2</a>:</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa2537db7b2956137a3fbe5a8929c01f5">SG_VERTEXFORMAT_INVALID</a>:</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;  }</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;}</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;<span class="comment">/* return the byte size of a shader uniform */</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">int</span> _sg_uniform_size(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2">sg_uniform_type</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5b40aca7a9682963dd00a8f5aef0a901">count</a>)</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;{</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;  <span class="keywordflow">switch</span> (type) {</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2aebd4e667ec034abd1b1b5f935113fdad">SG_UNIFORMTYPE_INVALID</a>:</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2afebe7f7c92eea0a9d1886eb30566f87c">SG_UNIFORMTYPE_FLOAT</a>:</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <span class="keywordflow">return</span> 4 * <a class="code" href="../../dc/da3/glcorearb_8h.html#a5b40aca7a9682963dd00a8f5aef0a901">count</a>;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2a2ac46d5ec84b41e58a2ab09257a01129">SG_UNIFORMTYPE_FLOAT2</a>:</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      <span class="keywordflow">return</span> 8 * <a class="code" href="../../dc/da3/glcorearb_8h.html#a5b40aca7a9682963dd00a8f5aef0a901">count</a>;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2adf763c6ae4deffca464f45c3401761f6">SG_UNIFORMTYPE_FLOAT3</a>:</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      <span class="keywordflow">return</span> 12 * <a class="code" href="../../dc/da3/glcorearb_8h.html#a5b40aca7a9682963dd00a8f5aef0a901">count</a>; <span class="comment">/* FIXME: std140??? */</span></div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2ac0a6c0647e323a639609490981b963fc">SG_UNIFORMTYPE_FLOAT4</a>:</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <span class="keywordflow">return</span> 16 * <a class="code" href="../../dc/da3/glcorearb_8h.html#a5b40aca7a9682963dd00a8f5aef0a901">count</a>;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2af0f0af9d38739d489a7422d6417fa958">SG_UNIFORMTYPE_MAT4</a>:</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      <span class="keywordflow">return</span> 64 * <a class="code" href="../../dc/da3/glcorearb_8h.html#a5b40aca7a9682963dd00a8f5aef0a901">count</a>;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;  }</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;}</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;<span class="comment">/* return true if pixel format is a compressed format */</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_is_compressed_pixel_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;{</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab16b5755ede91f6c2d9ac0b95b939755">SG_PIXELFORMAT_DXT1</a>:</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abc58007c8b3aea5d1d4f8003e1ebd015">SG_PIXELFORMAT_DXT3</a>:</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5707e92aad083b7e905f1cef363a736a">SG_PIXELFORMAT_DXT5</a>:</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5c1d86e7259c30e71a0345564ce133e5">SG_PIXELFORMAT_PVRTC2_RGB</a>:</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aff9e597d6ba26ce24ee763c57de6b20c">SG_PIXELFORMAT_PVRTC4_RGB</a>:</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7a18fff9a92408dc0b1b472e188a7293">SG_PIXELFORMAT_PVRTC2_RGBA</a>:</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a3f7140ec7c333f21243ab73a1591c3b4">SG_PIXELFORMAT_PVRTC4_RGBA</a>:</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab178a54fe3afec07062f05138608e559">SG_PIXELFORMAT_ETC2_RGB8</a>:</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a24fd6df84f189657c672835f616e9c21">SG_PIXELFORMAT_ETC2_SRGB8</a>:</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;  }</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;}</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;<span class="comment">/* return true if pixel format is a valid render target format */</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_is_valid_rendertarget_color_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;{</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>:</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aee9de87145ed1e5f8129bd39501a164b">SG_PIXELFORMAT_R10G10B10A2</a>:</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288">SG_PIXELFORMAT_RGBA32F</a>:</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9">SG_PIXELFORMAT_RGBA16F</a>:</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;  }</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;}</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="comment">/* return true if pixel format is a valid depth format */</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_is_valid_rendertarget_depth_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;{</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ad9b9e06c0f4c4576ddaa64de29903aa8">SG_PIXELFORMAT_DEPTH</a>:</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>:</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;  }</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;}</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;<span class="comment">/* return true if pixel format is a depth-stencil format */</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_is_depth_stencil_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;{</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;  <span class="comment">/* FIXME: more depth stencil formats? */</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;  <span class="keywordflow">return</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a> == fmt);</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;}</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;<span class="comment">/* return the bytes-per-pixel for a pixel format */</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">int</span> _sg_pixelformat_bytesize(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;{</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288">SG_PIXELFORMAT_RGBA32F</a>:</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;      <span class="keywordflow">return</span> 16;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9">SG_PIXELFORMAT_RGBA16F</a>:</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      <span class="keywordflow">return</span> 8;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>:</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aee9de87145ed1e5f8129bd39501a164b">SG_PIXELFORMAT_R10G10B10A2</a>:</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7aebdb1f89ab56d5ac3e4101326ad5a7">SG_PIXELFORMAT_R32F</a>:</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abbb0a172c1df88c75823f220f076ea1e">SG_PIXELFORMAT_RGB8</a>:</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <span class="keywordflow">return</span> 3;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a45b92fce386fe7eab13bcdfea7bc6c55">SG_PIXELFORMAT_R5G5B5A1</a>:</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4af7bc0102f3facd2246ad04aa42236dc6">SG_PIXELFORMAT_R5G6B5</a>:</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a617cd5e827095cba86efa54435e3ec3f">SG_PIXELFORMAT_RGBA4</a>:</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4acd416b883c484b0a30194f1a06f18f9d">SG_PIXELFORMAT_R16F</a>:</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ac09ec30fb99ef631fe1afd23b8ebbc56">SG_PIXELFORMAT_L8</a>:</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;  }</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;}</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="comment">/* return row pitch for an image */</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">int</span> _sg_row_pitch(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a76aaa5c50746272e7d2de9aece921757">width</a>)</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;{</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;  <span class="keywordtype">int</span> pitch;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab16b5755ede91f6c2d9ac0b95b939755">SG_PIXELFORMAT_DXT1</a>:</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab178a54fe3afec07062f05138608e559">SG_PIXELFORMAT_ETC2_RGB8</a>:</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a24fd6df84f189657c672835f616e9c21">SG_PIXELFORMAT_ETC2_SRGB8</a>:</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      pitch = ((width + 3) / 4) * 8;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      pitch = pitch &lt; 8 ? 8 : pitch;</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abc58007c8b3aea5d1d4f8003e1ebd015">SG_PIXELFORMAT_DXT3</a>:</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5707e92aad083b7e905f1cef363a736a">SG_PIXELFORMAT_DXT5</a>:</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;      pitch = ((width + 3) / 4) * 16;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;      pitch = pitch &lt; 16 ? 16 : pitch;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aff9e597d6ba26ce24ee763c57de6b20c">SG_PIXELFORMAT_PVRTC4_RGB</a>:</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a3f7140ec7c333f21243ab73a1591c3b4">SG_PIXELFORMAT_PVRTC4_RGBA</a>: {</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> block_size = 4 * 4;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> bpp = 4;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;      <span class="keywordtype">int</span> width_blocks = width / 4;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      width_blocks = width_blocks &lt; 2 ? 2 : width_blocks;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      pitch = width_blocks * ((block_size * bpp) / 8);</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;    } <span class="keywordflow">break</span>;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5c1d86e7259c30e71a0345564ce133e5">SG_PIXELFORMAT_PVRTC2_RGB</a>:</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7a18fff9a92408dc0b1b472e188a7293">SG_PIXELFORMAT_PVRTC2_RGBA</a>: {</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> block_size = 8 * 4;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> bpp = 2;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      <span class="keywordtype">int</span> width_blocks = width / 4;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;      width_blocks = width_blocks &lt; 2 ? 2 : width_blocks;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      pitch = width_blocks * ((block_size * bpp) / 8);</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;    } <span class="keywordflow">break</span>;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      pitch = width * _sg_pixelformat_bytesize(fmt);</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;  }</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;  <span class="keywordflow">return</span> pitch;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;}</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;<span class="comment">/* return pitch of a 2D subimage / texture slice */</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">int</span> _sg_surface_pitch(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a76aaa5c50746272e7d2de9aece921757">width</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae23e72c69f79d0aa647aa7929ef3f232">height</a>)</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;{</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;  <span class="keywordtype">int</span> num_rows = 0;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab16b5755ede91f6c2d9ac0b95b939755">SG_PIXELFORMAT_DXT1</a>:</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abc58007c8b3aea5d1d4f8003e1ebd015">SG_PIXELFORMAT_DXT3</a>:</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5707e92aad083b7e905f1cef363a736a">SG_PIXELFORMAT_DXT5</a>:</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab178a54fe3afec07062f05138608e559">SG_PIXELFORMAT_ETC2_RGB8</a>:</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a24fd6df84f189657c672835f616e9c21">SG_PIXELFORMAT_ETC2_SRGB8</a>:</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5c1d86e7259c30e71a0345564ce133e5">SG_PIXELFORMAT_PVRTC2_RGB</a>:</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7a18fff9a92408dc0b1b472e188a7293">SG_PIXELFORMAT_PVRTC2_RGBA</a>:</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aff9e597d6ba26ce24ee763c57de6b20c">SG_PIXELFORMAT_PVRTC4_RGB</a>:</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a3f7140ec7c333f21243ab73a1591c3b4">SG_PIXELFORMAT_PVRTC4_RGBA</a>:</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      num_rows = ((height + 3) / 4);</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      num_rows = <a class="code" href="../../dc/da3/glcorearb_8h.html#ae23e72c69f79d0aa647aa7929ef3f232">height</a>;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;  }</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;  <span class="keywordflow">if</span> (num_rows &lt; 1) {</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    num_rows = 1;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;  }</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;  <span class="keywordflow">return</span> num_rows * _sg_row_pitch(fmt, width);</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;}</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment">/* resolve pass action defaults into a new pass action struct */</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_resolve_default_pass_action(<span class="keyword">const</span> <a class="code" href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a>* from, <a class="code" href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a>* to)</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;{</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;  SOKOL_ASSERT(from &amp;&amp; to);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;  *to = *from;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;    <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#ae5313aebc0025fd61a3f22c4acdcf3fd">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a300a4cbdf62c8a2936fbeea5349f3581">_SG_ACTION_DEFAULT</a>) {</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      to-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#ae5313aebc0025fd61a3f22c4acdcf3fd">action</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;      to-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#af2c2a030aa781f28b469a109d60c5db7">val</a>[0] = SG_DEFAULT_CLEAR_RED;</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;      to-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#af2c2a030aa781f28b469a109d60c5db7">val</a>[1] = SG_DEFAULT_CLEAR_GREEN;</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      to-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#af2c2a030aa781f28b469a109d60c5db7">val</a>[2] = SG_DEFAULT_CLEAR_BLUE;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      to-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#af2c2a030aa781f28b469a109d60c5db7">val</a>[3] = SG_DEFAULT_CLEAR_ALPHA;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;    }</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;  }</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;  <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#afd874c73b9eeb2251453c66f88d620f9">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a300a4cbdf62c8a2936fbeea5349f3581">_SG_ACTION_DEFAULT</a>) {</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;    to-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#afd874c73b9eeb2251453c66f88d620f9">action</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;    to-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#ae78551ad85b038b6431f32d1c1916ccb">val</a> = SG_DEFAULT_CLEAR_DEPTH;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;  }</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;  <span class="keywordflow">if</span> (to-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a322952eff6dc16d2ac27d6f98973a579">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a300a4cbdf62c8a2936fbeea5349f3581">_SG_ACTION_DEFAULT</a>) {</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    to-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a322952eff6dc16d2ac27d6f98973a579">action</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;    to-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a5d4b67c71980cd17fb1ac7f0978b222f">val</a> = SG_DEFAULT_CLEAR_STENCIL;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;  }</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;}</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;<span class="comment">/*-- resource pool slots (must be defined before rendering backend) ----------*/</span></div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;  uint32_t <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id</a>;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;  uint32_t ctx_id;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a> <a class="code" href="../../d8/df7/BenchCathodeSegmentation_8cxx.html#a7ff4fc3bbf305206c6f2b97d4e6681a0">state</a>;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;} _sg_slot;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">int</span> _sg_slot_index(uint32_t <span class="keywordtype">id</span>)</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;{</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <span class="keywordflow">return</span> <span class="keywordtype">id</span> &amp; _SG_SLOT_MASK;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;}</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;<span class="comment">/*== GL BACKEND ==============================================================*/</span></div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLCORE33) || defined(SOKOL_GLES2) || defined(SOKOL_GLES3)</span></div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;<span class="comment">/* strstr(), memset() */</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;<span class="preprocessor">#include &lt;cstring&gt;</span></div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;<span class="preprocessor">#ifndef GL_UNSIGNED_INT_2_10_10_10_REV</span></div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;<span class="preprocessor">#define GL_UNSIGNED_INT_2_10_10_10_REV 0x8368</span></div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<span class="preprocessor">#ifndef GL_UNSIGNED_INT_24_8</span></div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;<span class="preprocessor">#define GL_UNSIGNED_INT_24_8 0x84FA</span></div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="preprocessor">#ifndef GL_TEXTURE_MAX_ANISOTROPY_EXT</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="preprocessor">#define GL_TEXTURE_MAX_ANISOTROPY_EXT 0x84FE</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;<span class="preprocessor">#ifndef GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;<span class="preprocessor">#define GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT 0x84FF</span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<span class="preprocessor">#ifndef GL_COMPRESSED_RGBA_S3TC_DXT1_EXT</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;<span class="preprocessor">#define GL_COMPRESSED_RGBA_S3TC_DXT1_EXT 0x83F1</span></div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;<span class="preprocessor">#ifndef GL_COMPRESSED_RGBA_S3TC_DXT3_EXT</span></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;<span class="preprocessor">#define GL_COMPRESSED_RGBA_S3TC_DXT3_EXT 0x83F2</span></div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;<span class="preprocessor">#ifndef GL_COMPRESSED_RGBA_S3TC_DXT5_EXT</span></div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;<span class="preprocessor">#define GL_COMPRESSED_RGBA_S3TC_DXT5_EXT 0x83F3</span></div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;<span class="preprocessor">#ifndef GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG</span></div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;<span class="preprocessor">#define GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG 0x8C01</span></div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;<span class="preprocessor">#ifndef GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;<span class="preprocessor">#define GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG 0x8C00</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;<span class="preprocessor">#ifndef GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG</span></div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;<span class="preprocessor">#define GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG 0x8C03</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;<span class="preprocessor">#ifndef GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG</span></div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;<span class="preprocessor">#define GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG 0x8C02</span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;<span class="preprocessor">#ifndef GL_COMPRESSED_RGB8_ETC2</span></div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;<span class="preprocessor">#define GL_COMPRESSED_RGB8_ETC2 0x9274</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;<span class="preprocessor">#ifndef GL_COMPRESSED_SRGB8_ETC2</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;<span class="preprocessor">#define GL_COMPRESSED_SRGB8_ETC2 0x9275</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;<span class="preprocessor">#ifndef GL_DEPTH24_STENCIL8</span></div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;<span class="preprocessor">#define GL_DEPTH24_STENCIL8 0x88F0</span></div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;<span class="preprocessor">#ifndef GL_HALF_FLOAT</span></div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;<span class="preprocessor">#define GL_HALF_FLOAT 0x140B</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;<span class="preprocessor">#ifndef GL_DEPTH_STENCIL</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="preprocessor">#define GL_DEPTH_STENCIL 0x84F9</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;<span class="preprocessor">#ifndef GL_LUMINANCE</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;<span class="preprocessor">#define GL_LUMINANCE 0x1909</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;<span class="preprocessor">#ifdef SOKOL_GLES2</span></div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;<span class="preprocessor">#ifdef GL_ANGLE_instanced_arrays</span></div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;<span class="preprocessor">#define SOKOL_INSTANCING_ENABLED 1</span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;<span class="preprocessor">#define glDrawArraysInstanced(mode, first, count, instancecount) glDrawArraysInstancedANGLE(mode, first, count, instancecount)</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;<span class="preprocessor">#define glDrawElementsInstanced(mode, count, type, indices, instancecount) glDrawElementsInstancedANGLE(mode, count, type, indices, instancecount)</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;<span class="preprocessor">#define glVertexAttribDivisor(index, divisor) glVertexAttribDivisorANGLE(index, divisor)</span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;<span class="preprocessor">#elif defined(GL_EXT_draw_instanced) &amp;&amp; defined(GL_EXT_instanced_arrays)</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;<span class="preprocessor">#define SOKOL_INSTANCING_ENABLED 1</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;<span class="preprocessor">#define glDrawArraysInstanced(mode, first, count, instancecount) glDrawArraysInstancedEXT(mode, first, count, instancecount)</span></div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;<span class="preprocessor">#define glDrawElementsInstanced(mode, count, type, indices, instancecount) glDrawElementsInstancedEXT(mode, count, type, indices, instancecount)</span></div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="preprocessor">#define glVertexAttribDivisor(index, divisor) glVertexAttribDivisorEXT(index, divisor)</span></div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;<span class="preprocessor">#define SOKOL_GLES2_INSTANCING_ERROR &quot;Select GL_ANGLE_instanced_arrays or (GL_EXT_draw_instanced &amp; GL_EXT_instanced_arrays) to enable instancing in GLES2&quot;</span></div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;<span class="preprocessor">#define glDrawArraysInstanced(mode, first, count, instancecount) SOKOL_ASSERT(0 &amp;&amp; SOKOL_GLES2_INSTANCING_ERROR)</span></div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;<span class="preprocessor">#define glDrawElementsInstanced(mode, count, type, indices, instancecount) SOKOL_ASSERT(0 &amp;&amp; SOKOL_GLES2_INSTANCING_ERROR)</span></div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;<span class="preprocessor">#define glVertexAttribDivisor(index, divisor) SOKOL_ASSERT(0 &amp;&amp; SOKOL_GLES2_INSTANCING_ERROR)</span></div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;<span class="preprocessor">#define SOKOL_INSTANCING_ENABLED 1</span></div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;<span class="preprocessor">#define _SG_GL_CHECK_ERROR()                   \</span></div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;<span class="preprocessor">  {                                            \</span></div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;<span class="preprocessor">    SOKOL_ASSERT(glGetError() == GL_NO_ERROR); \</span></div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;<span class="preprocessor">  }</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;<span class="comment">/* true if runnin in GLES2-fallback mode */</span></div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> _sg_gl_gles2;</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;<span class="comment">/*-- type translation --------------------------------------------------------*/</span></div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_buffer_target(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8f">sg_buffer_type</a> <a class="code" href="../../d8/de9/qconfigoptions_8h.html#aa4c73b6416f57a94408b0334e6fc1ff0">t</a>)</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;{</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;  <span class="keywordflow">switch</span> (t) {</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fa1052a9f00ec6b8a3e914db754c0c64e2">SG_BUFFERTYPE_VERTEXBUFFER</a>:</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7180045dcb52b22af2cd0366026bc3ed">GL_ARRAY_BUFFER</a>;</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8faef8b56cec34dee3ebcb7e6d5810bb8bd">SG_BUFFERTYPE_INDEXBUFFER</a>:</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ad26c63125c72cbf0347b589d51676e6a">GL_ELEMENT_ARRAY_BUFFER</a>;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;  }</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;}</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_texture_target(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">sg_image_type</a> t)</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;{</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;  <span class="keywordflow">switch</span> (t) {</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a>:</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ad4de17abefa73fa2ef53379f73b734be">GL_TEXTURE_2D</a>;</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>:</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a26e189fe84285eb8fae26721662dbe8c">GL_TEXTURE_CUBE_MAP</a>;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>:</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a6c865f303c89ec764158e0016e50d4a8">GL_TEXTURE_3D</a>;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>:</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ad2b4c60c1e4d3d18801478cf7a7ad2b7">GL_TEXTURE_2D_ARRAY</a>;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;  }</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;}</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_usage(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> u)</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;{</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;  <span class="keywordflow">switch</span> (u) {</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>:</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ab7dffdc215fbbe75b6ccacfecfc14648">GL_STATIC_DRAW</a>;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca38c2a7730739e0e0ed461915d44e2dd8">SG_USAGE_DYNAMIC</a>:</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ac1915ebc9c952b9e7140f4bcc78319a6">GL_DYNAMIC_DRAW</a>;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0ccafa387c8c45104f25a8e2a68486ae620c">SG_USAGE_STREAM</a>:</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aaab0960233739efbd5d1ae2b2fb919cd">GL_STREAM_DRAW</a>;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;  }</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;}</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_shader_stage(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343">sg_shader_stage</a> stage)</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;{</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;  <span class="keywordflow">switch</span> (stage) {</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>:</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aceb29bc16e885f956eb9e351a7dd6276">GL_VERTEX_SHADER</a>;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>:</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a1a0294662b50921555cae95fb20740d4">GL_FRAGMENT_SHADER</a>;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  }</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;}</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> _sg_gl_vertexformat_size(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08f">sg_vertex_format</a> fmt)</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;{</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa29b1e94ae9985fe1463d36e301916d29">SG_VERTEXFORMAT_FLOAT</a>:</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa498741f607f4f10e6b9672dcb9a9c6ac">SG_VERTEXFORMAT_FLOAT2</a>:</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6ba93ce02391f49c626baa5e6f7234b2">SG_VERTEXFORMAT_FLOAT3</a>:</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;      <span class="keywordflow">return</span> 3;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6115bbd19f17c016a55102c485b7658c">SG_VERTEXFORMAT_FLOAT4</a>:</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5c3facf45a0c01162b348286571e4cbc">SG_VERTEXFORMAT_BYTE4</a>:</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5bb6681394fe029a0ca1fa0e00e85da9">SG_VERTEXFORMAT_BYTE4N</a>:</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa1eac19f3f2048bed0f6b71f844e9bdb">SG_VERTEXFORMAT_UBYTE4</a>:</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa598e60ae2c550a825145e20e377d7f19">SG_VERTEXFORMAT_UBYTE4N</a>:</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa742f7d751f8dff04449a03428372810a">SG_VERTEXFORMAT_SHORT2</a>:</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fafec5d9fb7cb12489ea4be3637c746efa">SG_VERTEXFORMAT_SHORT2N</a>:</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faf321d1eb262dfb3db56fb43f76d9898a">SG_VERTEXFORMAT_SHORT4</a>:</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6bfcbcd3a001760711189465343bd4e8">SG_VERTEXFORMAT_SHORT4N</a>:</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faafa9a30c6992cc63134b5e14cdd3162b">SG_VERTEXFORMAT_UINT10_N2</a>:</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;  }</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;}</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_vertexformat_type(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08f">sg_vertex_format</a> fmt)</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;{</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa29b1e94ae9985fe1463d36e301916d29">SG_VERTEXFORMAT_FLOAT</a>:</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa498741f607f4f10e6b9672dcb9a9c6ac">SG_VERTEXFORMAT_FLOAT2</a>:</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6ba93ce02391f49c626baa5e6f7234b2">SG_VERTEXFORMAT_FLOAT3</a>:</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6115bbd19f17c016a55102c485b7658c">SG_VERTEXFORMAT_FLOAT4</a>:</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a6d19915d4237cb559505bd3e5dcfcf3c">GL_FLOAT</a>;</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5c3facf45a0c01162b348286571e4cbc">SG_VERTEXFORMAT_BYTE4</a>:</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5bb6681394fe029a0ca1fa0e00e85da9">SG_VERTEXFORMAT_BYTE4N</a>:</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a66f452ef2a3d3a1f92e38d9fd6e3f8ec">GL_BYTE</a>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa1eac19f3f2048bed0f6b71f844e9bdb">SG_VERTEXFORMAT_UBYTE4</a>:</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa598e60ae2c550a825145e20e377d7f19">SG_VERTEXFORMAT_UBYTE4N</a>:</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a80a33c79f69417372d65d2a65ca36d49">GL_UNSIGNED_BYTE</a>;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa742f7d751f8dff04449a03428372810a">SG_VERTEXFORMAT_SHORT2</a>:</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fafec5d9fb7cb12489ea4be3637c746efa">SG_VERTEXFORMAT_SHORT2N</a>:</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faf321d1eb262dfb3db56fb43f76d9898a">SG_VERTEXFORMAT_SHORT4</a>:</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6bfcbcd3a001760711189465343bd4e8">SG_VERTEXFORMAT_SHORT4N</a>:</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7a2b436e565363c81b22611b8392a341">GL_SHORT</a>;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faafa9a30c6992cc63134b5e14cdd3162b">SG_VERTEXFORMAT_UINT10_N2</a>:</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aefaf553edc188af69b624b40bbecc380">GL_UNSIGNED_INT_2_10_10_10_REV</a>;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;  }</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;}</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#aea1419aa8aec5854bd9807b45171029d">GLboolean</a> _sg_gl_vertexformat_normalized(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08f">sg_vertex_format</a> fmt)</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;{</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5bb6681394fe029a0ca1fa0e00e85da9">SG_VERTEXFORMAT_BYTE4N</a>:</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa598e60ae2c550a825145e20e377d7f19">SG_VERTEXFORMAT_UBYTE4N</a>:</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fafec5d9fb7cb12489ea4be3637c746efa">SG_VERTEXFORMAT_SHORT2N</a>:</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6bfcbcd3a001760711189465343bd4e8">SG_VERTEXFORMAT_SHORT4N</a>:</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faafa9a30c6992cc63134b5e14cdd3162b">SG_VERTEXFORMAT_UINT10_N2</a>:</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a06316bc3c17db78ce93419fb208945ba">GL_TRUE</a>;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#abca6d43f43fae31f49dcb883b2f301f6">GL_FALSE</a>;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;  }</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;}</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_primitive_type(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4">sg_primitive_type</a> t)</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;{</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;  <span class="keywordflow">switch</span> (t) {</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a56f0068a3381a2f910b646b15bbdad7c">SG_PRIMITIVETYPE_POINTS</a>:</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a>;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a64763b2f58505f8353981fa3a7d33b3d">SG_PRIMITIVETYPE_LINES</a>:</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a532ed3612eae8eaed8a7a53ecd7a28f3">GL_LINES</a>;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ac6adf96be338781a927207580110a0b6">SG_PRIMITIVETYPE_LINE_STRIP</a>:</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a4ecc64682046ef517e86a18d9acbed1e">GL_LINE_STRIP</a>;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4aa8d428001b2200f78af617997a3be81b">SG_PRIMITIVETYPE_TRIANGLES</a>:</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a6079e7a02a59adad65eb953d9482b1ed">GL_TRIANGLES</a>;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ab0b91b82494a494db2f5e57c8b7356a7">SG_PRIMITIVETYPE_TRIANGLE_STRIP</a>:</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ad38e94a1120d6688fce6fc805a5b998d">GL_TRIANGLE_STRIP</a>;</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;  }</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;}</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_index_type(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641">sg_index_type</a> t)</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;{</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;  <span class="keywordflow">switch</span> (t) {</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a>:</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641aa12a337c61bc9a140d5a9ec1db91baae">SG_INDEXTYPE_UINT16</a>:</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a36c3f955599ab92217a70cce8a22e11f">GL_UNSIGNED_SHORT</a>;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a351dd7105c6dd3e47dabb9ee6dff643a">SG_INDEXTYPE_UINT32</a>:</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a69b1c02ba0bd93c643c6d82e0c16eb99">GL_UNSIGNED_INT</a>;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;  }</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;}</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_compare_func(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64">sg_compare_func</a> cmp)</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;{</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;  <span class="keywordflow">switch</span> (cmp) {</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a3c097f346c501db92d57775e7ab51157">SG_COMPAREFUNC_NEVER</a>:</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a04850ba275b382d256d9a66c44f4cf8a">GL_NEVER</a>;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a9bc40473fa1a7f1805e04826dcb1cc8f">SG_COMPAREFUNC_LESS</a>:</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a19d83affd8f0b06c09940cff7da428d2">GL_LESS</a>;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af164b871f09d6f7b671a2a611e6d570d">SG_COMPAREFUNC_EQUAL</a>:</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ac71bf5145721bbb6c3286c70834f4394">GL_EQUAL</a>;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a1a8096a774c667c26ccde72d9ef4bd7a">SG_COMPAREFUNC_LESS_EQUAL</a>:</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a8b778a06f153b4d59ebc6aa1d0996191">GL_LEQUAL</a>;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a508dd2aada97b6358f31c4425fe84c82">SG_COMPAREFUNC_GREATER</a>:</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa3bfa1f454ff5072bc1b64e7d30e9584">GL_GREATER</a>;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a8394ed7a0362acafc13fce791f9d7344">SG_COMPAREFUNC_NOT_EQUAL</a>:</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3f1e1951ac224b0f42929facb17e983f">GL_NOTEQUAL</a>;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af86c478058edd323bd609ff4bf2e848d">SG_COMPAREFUNC_GREATER_EQUAL</a>:</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a8d2e8004bbf5d91de9c0e3184a665d1c">GL_GEQUAL</a>;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>:</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a065314e6648fa794d9cf5872ebb9d776">GL_ALWAYS</a>;</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;  }</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;}</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_stencil_op(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488a">sg_stencil_op</a> op)</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;{</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;  <span class="keywordflow">switch</span> (op) {</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>:</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#af5f2970e5b32df02694116f821264893">GL_KEEP</a>;</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa703bf305ed3f7826dab340a3b42f58e0">SG_STENCILOP_ZERO</a>:</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aad5adc3a401f0ebcc100fe91f45e7b628">SG_STENCILOP_REPLACE</a>:</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae91bd1b84257c4be0f6255e2be107acf">GL_REPLACE</a>;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aacd444f9c15d8563e1dda2fc913bfe349">SG_STENCILOP_INCR_CLAMP</a>:</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aad590dd79075659a5625dcad04e13331">GL_INCR</a>;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa5833cf06326cae250c675cfb227d7783">SG_STENCILOP_DECR_CLAMP</a>:</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a4f6d54698e61290f310b55ce3505dcb1">GL_DECR</a>;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa02f24dee22dfe00513a57620bef88e10">SG_STENCILOP_INVERT</a>:</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#af152705dd1f6504e96a2cdec832eb4e9">GL_INVERT</a>;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aac7f2b2dfb1c5340579c27f255a320569">SG_STENCILOP_INCR_WRAP</a>:</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae9efa4d7622ad01999c4c29081218943">GL_INCR_WRAP</a>;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa546103a62234093824399823dba02002">SG_STENCILOP_DECR_WRAP</a>:</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae394492c09563af8f82764c864d77864">GL_DECR_WRAP</a>;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;  }</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;}</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_blend_factor(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98">sg_blend_factor</a> <a class="code" href="../../d4/dc3/classfloat.html">f</a>)</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;{</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;  <span class="keywordflow">switch</span> (f) {</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a>:</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a>:</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>;</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a8c69759d579abc2330763accf53e22c6">SG_BLENDFACTOR_SRC_COLOR</a>:</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a6adf6cffd6e7fc49298982128155b8dd">GL_SRC_COLOR</a>;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a641887d49c50dcaadab00c5457074894">SG_BLENDFACTOR_ONE_MINUS_SRC_COLOR</a>:</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#afae62364eab2dc69c95b17363ba687f4">GL_ONE_MINUS_SRC_COLOR</a>;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ac4a882a9f00214238fbb2d0e354ccdb1">SG_BLENDFACTOR_SRC_ALPHA</a>:</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a>;</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a057316e7b0eb4cf1b36f8dd1f13cb01b">SG_BLENDFACTOR_ONE_MINUS_SRC_ALPHA</a>:</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa3926eb5e008f14829baa8d72435215f">GL_ONE_MINUS_SRC_ALPHA</a>;</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a31651696629d4ccdb8e684c3ba02366b">SG_BLENDFACTOR_DST_COLOR</a>:</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#acd2abef6afceea16ef19a117ae7fc3eb">GL_DST_COLOR</a>;</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a72b1df3612951c57703d3cf0279f750e">SG_BLENDFACTOR_ONE_MINUS_DST_COLOR</a>:</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a4af4fbff7e4f93998f5bf914b19bd1dc">GL_ONE_MINUS_DST_COLOR</a>;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a1f10da138f1962007019feb50c37ba7f">SG_BLENDFACTOR_DST_ALPHA</a>:</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ab4dcc8a1804d164d5f4dbba427b5672c">GL_DST_ALPHA</a>;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ad219a9d23d6b3b19d2539ece4a0a71d3">SG_BLENDFACTOR_ONE_MINUS_DST_ALPHA</a>:</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a41dd3137d362319dcf68b387b2eb9866">GL_ONE_MINUS_DST_ALPHA</a>;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98aad544ad360157642c7fa8ab7ba22e48d">SG_BLENDFACTOR_SRC_ALPHA_SATURATED</a>:</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3ed9d2a2bb8daffceaecad60241cbd93">GL_SRC_ALPHA_SATURATE</a>;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a62d9efdddbce46e11664b6daf160fff6">SG_BLENDFACTOR_BLEND_COLOR</a>:</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a44a85282cd9022542edd9b29b44b4221">GL_CONSTANT_COLOR</a>;</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ac29f07005f4e09d33012c2ab1aa41ed4">SG_BLENDFACTOR_ONE_MINUS_BLEND_COLOR</a>:</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa9fd0672b1352e0a68a7cf268df3734e">GL_ONE_MINUS_CONSTANT_COLOR</a>;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98aeb1ae23d2d8136f7fc0a453dc48ce3a0">SG_BLENDFACTOR_BLEND_ALPHA</a>:</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa8e645785d8215f658c2576d90df1e5d">GL_CONSTANT_ALPHA</a>;</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af56378a9ce157db3a999f590489bb0f9">SG_BLENDFACTOR_ONE_MINUS_BLEND_ALPHA</a>:</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a316d4feb613d04854aba437a278add28">GL_ONE_MINUS_CONSTANT_ALPHA</a>;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;  }</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;}</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_blend_op(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007b">sg_blend_op</a> op)</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;{</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;  <span class="keywordflow">switch</span> (op) {</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a>:</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#af477e4fa3e741406c0c3532cc5062758">GL_FUNC_ADD</a>;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba39bb8326504a0479b26cd513622425de">SG_BLENDOP_SUBTRACT</a>:</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ad0017e5c11a6be44b705d87053607fca">GL_FUNC_SUBTRACT</a>;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007bafe44c904a6db19f96766c815ff903e93">SG_BLENDOP_REVERSE_SUBTRACT</a>:</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a8439350af7b66d0115f23d27a6511917">GL_FUNC_REVERSE_SUBTRACT</a>;</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;  }</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;}</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_filter(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> f)</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;{</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;  <span class="keywordflow">switch</span> (f) {</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>:</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7ec02582a9b1c390908a2230c8e26c0b">GL_NEAREST</a>;</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a71e72d5047072e13ecbe4717d7cb4f32">SG_FILTER_LINEAR</a>:</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a>;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a84115e146ee19b60c763d0dfb1cd347a">SG_FILTER_NEAREST_MIPMAP_NEAREST</a>:</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a318a0c53e89e0bc5fdd162a405f77a9d">GL_NEAREST_MIPMAP_NEAREST</a>;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a21116fc969ac2da818c6f70ce6f04f01">SG_FILTER_NEAREST_MIPMAP_LINEAR</a>:</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5665daac108402324f1db7b89006c0b6">GL_NEAREST_MIPMAP_LINEAR</a>;</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a48f5bd6ec5073d2eec58e7af5b07375f">SG_FILTER_LINEAR_MIPMAP_NEAREST</a>:</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a9fba5da0aafd194b7eb2fcd359511622">GL_LINEAR_MIPMAP_NEAREST</a>;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a7f78c11a24799bfc6115afff391bc864">SG_FILTER_LINEAR_MIPMAP_LINEAR</a>:</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a724edc4d9d6f3c1770ff3688f0747acb">GL_LINEAR_MIPMAP_LINEAR</a>;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;  }</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;}</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_wrap(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a>)</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;{</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;  <span class="keywordflow">switch</span> (w) {</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654daa970e343704dddd57115f2d834241b78">SG_WRAP_CLAMP_TO_EDGE</a>:</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae90f81f48642444b4ba7fa5cacf40569">GL_CLAMP_TO_EDGE</a>;</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>:</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa402fcab9f814ff88b2b19ca2823a594">GL_REPEAT</a>;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da2d6a059f14a7330186f072c1d30d0a1c">SG_WRAP_MIRRORED_REPEAT</a>:</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a05bc3a1fdd98251d126a8946a10f9dc8">GL_MIRRORED_REPEAT</a>;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;  }</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;}</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_teximage_type(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;{</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288">SG_PIXELFORMAT_RGBA32F</a>:</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7aebdb1f89ab56d5ac3e4101326ad5a7">SG_PIXELFORMAT_R32F</a>:</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a6d19915d4237cb559505bd3e5dcfcf3c">GL_FLOAT</a>;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9">SG_PIXELFORMAT_RGBA16F</a>:</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4acd416b883c484b0a30194f1a06f18f9d">SG_PIXELFORMAT_R16F</a>:</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa3d4d84d7e1458e03145d5db96bde045">GL_HALF_FLOAT</a>;</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>:</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abbb0a172c1df88c75823f220f076ea1e">SG_PIXELFORMAT_RGB8</a>:</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ac09ec30fb99ef631fe1afd23b8ebbc56">SG_PIXELFORMAT_L8</a>:</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a80a33c79f69417372d65d2a65ca36d49">GL_UNSIGNED_BYTE</a>;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aee9de87145ed1e5f8129bd39501a164b">SG_PIXELFORMAT_R10G10B10A2</a>:</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aefaf553edc188af69b624b40bbecc380">GL_UNSIGNED_INT_2_10_10_10_REV</a>;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a45b92fce386fe7eab13bcdfea7bc6c55">SG_PIXELFORMAT_R5G5B5A1</a>:</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a654599021b9e26bd6feb4c7cd001ef7f">GL_UNSIGNED_SHORT_5_5_5_1</a>;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4af7bc0102f3facd2246ad04aa42236dc6">SG_PIXELFORMAT_R5G6B5</a>:</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aecec622a15619219f88d13271b5fd581">GL_UNSIGNED_SHORT_5_6_5</a>;</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a617cd5e827095cba86efa54435e3ec3f">SG_PIXELFORMAT_RGBA4</a>:</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ada3c99cc89e14622e4c62b911fda24fd">GL_UNSIGNED_SHORT_4_4_4_4</a>;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ad9b9e06c0f4c4576ddaa64de29903aa8">SG_PIXELFORMAT_DEPTH</a>:</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;      <span class="comment">/* FIXME */</span></div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a36c3f955599ab92217a70cce8a22e11f">GL_UNSIGNED_SHORT</a>;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>:</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;      <span class="comment">/* FIXME */</span></div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a6e9e9f45468754a0b59bf3406d3b5009">GL_UNSIGNED_INT_24_8</a>;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;  }</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;}</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_teximage_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;{</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abd35ac81800ef42e025231cf6e10956c">SG_PIXELFORMAT_NONE</a>:</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>:</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a45b92fce386fe7eab13bcdfea7bc6c55">SG_PIXELFORMAT_R5G5B5A1</a>:</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a617cd5e827095cba86efa54435e3ec3f">SG_PIXELFORMAT_RGBA4</a>:</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288">SG_PIXELFORMAT_RGBA32F</a>:</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9">SG_PIXELFORMAT_RGBA16F</a>:</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aee9de87145ed1e5f8129bd39501a164b">SG_PIXELFORMAT_R10G10B10A2</a>:</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a9f2854f4a91a0d83d2d54cb8110bfca4">GL_RGBA</a>;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abbb0a172c1df88c75823f220f076ea1e">SG_PIXELFORMAT_RGB8</a>:</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4af7bc0102f3facd2246ad04aa42236dc6">SG_PIXELFORMAT_R5G6B5</a>:</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a69f1c49996aca30177171c7b086cfb34">GL_RGB</a>;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ac09ec30fb99ef631fe1afd23b8ebbc56">SG_PIXELFORMAT_L8</a>:</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7aebdb1f89ab56d5ac3e4101326ad5a7">SG_PIXELFORMAT_R32F</a>:</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4acd416b883c484b0a30194f1a06f18f9d">SG_PIXELFORMAT_R16F</a>:</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLES2)</span></div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      <span class="keywordflow">return</span> GL_LUMINANCE;</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;      <span class="keywordflow">if</span> (_sg_gl_gles2) {</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;        <span class="keywordflow">return</span> GL_LUMINANCE;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7eb77863e36c241e7fa96f05f933da18">GL_RED</a>;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;      }</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ad9b9e06c0f4c4576ddaa64de29903aa8">SG_PIXELFORMAT_DEPTH</a>:</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aac16527902deb1ddf6b84a9ce3da6e84">GL_DEPTH_COMPONENT</a>;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>:</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aaec6f87dc3b72b3175f3e127062cfc5b">GL_DEPTH_STENCIL</a>;</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab16b5755ede91f6c2d9ac0b95b939755">SG_PIXELFORMAT_DXT1</a>:</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aaeed69f7c55e377901d9ff6d00463efa">GL_COMPRESSED_RGBA_S3TC_DXT1_EXT</a>;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abc58007c8b3aea5d1d4f8003e1ebd015">SG_PIXELFORMAT_DXT3</a>:</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aababc4e27a4845063f8d1b7b91c20b2e">GL_COMPRESSED_RGBA_S3TC_DXT3_EXT</a>;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5707e92aad083b7e905f1cef363a736a">SG_PIXELFORMAT_DXT5</a>:</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5f6e032bc5f877d09491c9a8ed191571">GL_COMPRESSED_RGBA_S3TC_DXT5_EXT</a>;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5c1d86e7259c30e71a0345564ce133e5">SG_PIXELFORMAT_PVRTC2_RGB</a>:</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;      <span class="keywordflow">return</span> GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aff9e597d6ba26ce24ee763c57de6b20c">SG_PIXELFORMAT_PVRTC4_RGB</a>:</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      <span class="keywordflow">return</span> GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7a18fff9a92408dc0b1b472e188a7293">SG_PIXELFORMAT_PVRTC2_RGBA</a>:</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      <span class="keywordflow">return</span> GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a3f7140ec7c333f21243ab73a1591c3b4">SG_PIXELFORMAT_PVRTC4_RGBA</a>:</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      <span class="keywordflow">return</span> GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab178a54fe3afec07062f05138608e559">SG_PIXELFORMAT_ETC2_RGB8</a>:</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a11dbae33206841b3d524ae88b622fda6">GL_COMPRESSED_RGB8_ETC2</a>;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a24fd6df84f189657c672835f616e9c21">SG_PIXELFORMAT_ETC2_SRGB8</a>:</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d1dc8f875b466f348a189f9befae920">GL_COMPRESSED_SRGB8_ETC2</a>;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;  }</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;}</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_teximage_internal_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;{</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLES2)</span></div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;  <span class="keywordflow">return</span> _sg_gl_teximage_format(fmt);</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;  <span class="keywordflow">if</span> (_sg_gl_gles2) {</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;    <span class="keywordflow">return</span> _sg_gl_teximage_format(fmt);</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abd35ac81800ef42e025231cf6e10956c">SG_PIXELFORMAT_NONE</a>:</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>:</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a335877d7ab34f0272e089159fc5833bc">GL_RGBA8</a>;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abbb0a172c1df88c75823f220f076ea1e">SG_PIXELFORMAT_RGB8</a>:</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5df9ef909394266c939ee408f172b169">GL_RGB8</a>;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a617cd5e827095cba86efa54435e3ec3f">SG_PIXELFORMAT_RGBA4</a>:</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#afb17f37d44cc79ab4d5ef6ff51c3a2e0">GL_RGBA4</a>;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4af7bc0102f3facd2246ad04aa42236dc6">SG_PIXELFORMAT_R5G6B5</a>:</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLES3)</span></div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7175b4e16310c573ebd6d4c278815b1a">GL_RGB565</a>;</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a47e61275e3ceb70db43107ff8074f025">GL_RGB5</a>;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a45b92fce386fe7eab13bcdfea7bc6c55">SG_PIXELFORMAT_R5G5B5A1</a>:</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a57ec87baf4c081042b8cdac17c26ce93">GL_RGB5_A1</a>;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aee9de87145ed1e5f8129bd39501a164b">SG_PIXELFORMAT_R10G10B10A2</a>:</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a9879296e103b9180a4ad0369d859da1a">GL_RGB10_A2</a>;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288">SG_PIXELFORMAT_RGBA32F</a>:</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ace8155682f86789a9af13e7026df4615">GL_RGBA32F</a>;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9">SG_PIXELFORMAT_RGBA16F</a>:</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a38fc920bede90cc2821cfde675ce10e2">GL_RGBA16F</a>;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7aebdb1f89ab56d5ac3e4101326ad5a7">SG_PIXELFORMAT_R32F</a>:</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a67a335dbe0283343395cac2700042a1b">GL_R32F</a>;</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4acd416b883c484b0a30194f1a06f18f9d">SG_PIXELFORMAT_R16F</a>:</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a8f5475f6f7d0a74fdf1a2391422dfcdb">GL_R16F</a>;</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ac09ec30fb99ef631fe1afd23b8ebbc56">SG_PIXELFORMAT_L8</a>:</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3080489638f9a721982dbc926f6fca88">GL_R8</a>;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ad9b9e06c0f4c4576ddaa64de29903aa8">SG_PIXELFORMAT_DEPTH</a>:</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;        <span class="comment">/* FIXME */</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a26b057c4fa415d8de41d43990828b0da">GL_DEPTH_COMPONENT16</a>;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>:</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a2308c4ffa71335adb12ba6db2d937c7f">GL_DEPTH24_STENCIL8</a>;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab16b5755ede91f6c2d9ac0b95b939755">SG_PIXELFORMAT_DXT1</a>:</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aaeed69f7c55e377901d9ff6d00463efa">GL_COMPRESSED_RGBA_S3TC_DXT1_EXT</a>;</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abc58007c8b3aea5d1d4f8003e1ebd015">SG_PIXELFORMAT_DXT3</a>:</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aababc4e27a4845063f8d1b7b91c20b2e">GL_COMPRESSED_RGBA_S3TC_DXT3_EXT</a>;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5707e92aad083b7e905f1cef363a736a">SG_PIXELFORMAT_DXT5</a>:</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5f6e032bc5f877d09491c9a8ed191571">GL_COMPRESSED_RGBA_S3TC_DXT5_EXT</a>;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5c1d86e7259c30e71a0345564ce133e5">SG_PIXELFORMAT_PVRTC2_RGB</a>:</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;        <span class="keywordflow">return</span> GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aff9e597d6ba26ce24ee763c57de6b20c">SG_PIXELFORMAT_PVRTC4_RGB</a>:</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        <span class="keywordflow">return</span> GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7a18fff9a92408dc0b1b472e188a7293">SG_PIXELFORMAT_PVRTC2_RGBA</a>:</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;        <span class="keywordflow">return</span> GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a3f7140ec7c333f21243ab73a1591c3b4">SG_PIXELFORMAT_PVRTC4_RGBA</a>:</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;        <span class="keywordflow">return</span> GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab178a54fe3afec07062f05138608e559">SG_PIXELFORMAT_ETC2_RGB8</a>:</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a11dbae33206841b3d524ae88b622fda6">GL_COMPRESSED_RGB8_ETC2</a>;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a24fd6df84f189657c672835f616e9c21">SG_PIXELFORMAT_ETC2_SRGB8</a>:</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d1dc8f875b466f348a189f9befae920">GL_COMPRESSED_SRGB8_ETC2</a>;</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;        SOKOL_UNREACHABLE;</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;    }</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;  }</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;}</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_cubeface_target(<span class="keywordtype">int</span> face_index)</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;{</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;  <span class="keywordflow">switch</span> (face_index) {</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;    <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ab83eb56dce8e1f7900585d35016abf39">GL_TEXTURE_CUBE_MAP_POSITIVE_X</a>;</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae642ad8e3baa2512e2e27be2cf17373d">GL_TEXTURE_CUBE_MAP_NEGATIVE_X</a>;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a0605d5ef41613665b34391f9ba398997">GL_TEXTURE_CUBE_MAP_POSITIVE_Y</a>;</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;    <span class="keywordflow">case</span> 3:</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a8d31f977b3490eb05832ecc261313462">GL_TEXTURE_CUBE_MAP_NEGATIVE_Y</a>;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <span class="keywordflow">case</span> 4:</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a9c63e51b23baa3e2abc01cc0c892a111">GL_TEXTURE_CUBE_MAP_POSITIVE_Z</a>;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;    <span class="keywordflow">case</span> 5:</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a2d568ba9541df33fb21dc5bacbe7b4a3">GL_TEXTURE_CUBE_MAP_NEGATIVE_Z</a>;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;  }</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;}</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> _sg_gl_depth_attachment_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;{</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ad9b9e06c0f4c4576ddaa64de29903aa8">SG_PIXELFORMAT_DEPTH</a>:</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a26b057c4fa415d8de41d43990828b0da">GL_DEPTH_COMPONENT16</a>;</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>:</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a2308c4ffa71335adb12ba6db2d937c7f">GL_DEPTH24_STENCIL8</a>;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;  }</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;}</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;<span class="comment">/*-- GL backend resource declarations ----------------------------------------*/</span></div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8f">sg_buffer_type</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#afb85c5d9b1bce96aa3b530d581194d1a">usage</a>;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;  uint32_t upd_frame_index;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;  <span class="keywordtype">int</span> num_slots;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;  <span class="keywordtype">int</span> active_slot;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_buf[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>];</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;  <span class="keywordtype">bool</span> ext_buffers; <span class="comment">/* if true, external buffers were injected with sg_buffer_desc.gl_buffers */</span></div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;} _sg_buffer;</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_buffer_slot(_sg_buffer* <a class="code" href="../../dc/da3/glcorearb_8h.html#ad8a8baf08bc0399738960c9259571911">buf</a>)</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;{</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;  SOKOL_ASSERT(buf);</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;  memset(buf, 0, <span class="keyword">sizeof</span>(_sg_buffer));</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;}</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">sg_image_type</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;  <span class="keywordtype">bool</span> render_target;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a76aaa5c50746272e7d2de9aece921757">width</a>;</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae23e72c69f79d0aa647aa7929ef3f232">height</a>;</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa8bd8cf1eef34712fdb6ad58b540a2ee">depth</a>;</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;  <span class="keywordtype">int</span> num_mipmaps;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#afb85c5d9b1bce96aa3b530d581194d1a">usage</a>;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> pixel_format;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;  <span class="keywordtype">int</span> sample_count;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> min_filter;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> mag_filter;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_u;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_v;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_w;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;  uint32_t max_anisotropy;</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_target;</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_depth_render_buffer;</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_msaa_render_buffer;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;  uint32_t upd_frame_index;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;  <span class="keywordtype">int</span> num_slots;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;  <span class="keywordtype">int</span> active_slot;</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_tex[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>];</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;  <span class="keywordtype">bool</span> ext_textures; <span class="comment">/* if true, external textures were injected with sg_image_desc.gl_textures */</span></div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;} _sg_image;</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_image_slot(_sg_image* <a class="code" href="../../dc/da3/glcorearb_8h.html#a3455aaa12cecc35ac4a42a9bf1273da8">img</a>)</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;{</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;  SOKOL_ASSERT(img);</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;  memset(img, 0, <span class="keyword">sizeof</span>(_sg_image));</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;}</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> gl_loc;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2">sg_uniform_type</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>;</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;  uint8_t <a class="code" href="../../dc/da3/glcorearb_8h.html#a5b40aca7a9682963dd00a8f5aef0a901">count</a>;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;  uint16_t <a class="code" href="../../dc/da3/glcorearb_8h.html#ab81054a092f44d2ce010b3c46e3a7ff3">offset</a>;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;} _sg_uniform;</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>;</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;  <span class="keywordtype">int</span> num_uniforms;</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;  _sg_uniform uniforms[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca746b50b205e4d09963f11f32b18c6cf9">SG_MAX_UB_MEMBERS</a>];</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;} _sg_uniform_block;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">sg_image_type</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>;</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> gl_loc;</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;  <span class="keywordtype">int</span> gl_tex_slot;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;} _sg_shader_image;</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;  <span class="keywordtype">int</span> num_uniform_blocks;</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;  <span class="keywordtype">int</span> num_images;</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;  _sg_uniform_block uniform_blocks[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>];</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;  _sg_shader_image images[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;} _sg_shader_stage;</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_prog;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;  _sg_shader_stage stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">SG_NUM_SHADER_STAGES</a>];</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;} _sg_shader;</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_shader_slot(_sg_shader* shd)</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;{</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;  SOKOL_ASSERT(shd);</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;  memset(shd, 0, <span class="keyword">sizeof</span>(_sg_shader));</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;}</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;  int8_t vb_index; <span class="comment">/* -1 if attr is not enabled */</span></div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;  int8_t <a class="code" href="../../dc/da3/glcorearb_8h.html#a374c5732738277aa4ed2d4c2e526c602">divisor</a>;  <span class="comment">/* -1 if not initialized */</span></div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;  uint8_t <a class="code" href="../../dc/da3/glcorearb_8h.html#a9d21c1b0530d07b637b5b71b969d7921">stride</a>;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;  uint8_t <a class="code" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;  uint8_t <a class="code" href="../../dc/da3/glcorearb_8h.html#a991495bc19f64c176dd83a350b8b1c88">normalized</a>;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;  uint32_t <a class="code" href="../../dc/da3/glcorearb_8h.html#ab81054a092f44d2ce010b3c46e3a7ff3">offset</a>;</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>;</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;} _sg_gl_attr;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_gl_init_attr(_sg_gl_attr* attr)</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;{</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;  attr-&gt;vb_index = -1;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;  attr-&gt;divisor = -1;</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;  attr-&gt;stride = 0;</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;  attr-&gt;size = 0;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;  attr-&gt;normalized = 0;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;  attr-&gt;offset = 0;</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;  attr-&gt;type = 0;</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;}</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;  _sg_shader* <a class="code" href="../../dc/da3/glcorearb_8h.html#a57b2a96adb1d51204909a82d861e395e">shader</a>;</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;  <a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> shader_id;</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4">sg_primitive_type</a> primitive_type;</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641">sg_index_type</a> index_type;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;  <span class="keywordtype">bool</span> vertex_layout_valid[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;  <span class="keywordtype">int</span> color_attachment_count;</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> color_format;</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> depth_format;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;  <span class="keywordtype">int</span> sample_count;</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;  _sg_gl_attr gl_attrs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>];</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;  <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html">sg_depth_stencil_state</a> depth_stencil;</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;  <a class="code" href="../../d9/dd6/structsg__blend__state.html">sg_blend_state</a> blend;</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;  <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html">sg_rasterizer_state</a> rast;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;} _sg_pipeline;</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_pipeline_slot(_sg_pipeline* pip)</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;{</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;  SOKOL_ASSERT(pip);</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;  memset(pip, 0, <span class="keyword">sizeof</span>(_sg_pipeline));</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;}</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;  _sg_image* image;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;  <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> image_id;</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;  <span class="keywordtype">int</span> mip_level;</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;  <span class="keywordtype">int</span> slice;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_msaa_resolve_buffer;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;} _sg_attachment;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_fb;</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;  <span class="keywordtype">int</span> num_color_atts;</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;  _sg_attachment color_atts[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>];</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;  _sg_attachment ds_att;</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;} _sg_pass;</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_pass_slot(_sg_pass* pass)</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;{</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;  SOKOL_ASSERT(pass);</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;  memset(pass, 0, <span class="keyword">sizeof</span>(_sg_pass));</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;}</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> vao;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> default_framebuffer;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;} _sg_context;</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_context_slot(_sg_context* ctx)</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;{</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;  SOKOL_ASSERT(ctx);</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;  memset(ctx, 0, <span class="keyword">sizeof</span>(_sg_context));</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;}</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_gl_init_stencil_state(<a class="code" href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a>* <a class="code" href="../../d8/de9/qconfigoptions_8h.html#adb1f4e88682fac0faac902578cad8b6c">s</a>)</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;{</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;  SOKOL_ASSERT(s);</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;  s-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034">fail_op</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>;</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;  s-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f">depth_fail_op</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;  s-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20">pass_op</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;  s-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88">compare_func</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>;</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;}</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_gl_init_depth_stencil_state(<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html">sg_depth_stencil_state</a>* <a class="code" href="../../d8/de9/qconfigoptions_8h.html#adb1f4e88682fac0faac902578cad8b6c">s</a>)</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;{</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;  SOKOL_ASSERT(s);</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;  _sg_gl_init_stencil_state(&amp;s-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#ad698879849d1e77dcbbda963cd45ef79">stencil_front</a>);</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;  _sg_gl_init_stencil_state(&amp;s-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a28ce155156b38f16e894aa724ece3091">stencil_back</a>);</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;  s-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74">depth_compare_func</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>;</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;  s-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292">depth_write_enabled</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;  s-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3">stencil_enabled</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;  s-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">stencil_read_mask</a> = 0;</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;  s-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">stencil_write_mask</a> = 0;</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;  s-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f">stencil_ref</a> = 0;</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;}</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_gl_init_blend_state(<a class="code" href="../../d9/dd6/structsg__blend__state.html">sg_blend_state</a>* <a class="code" href="../../d8/de9/qconfigoptions_8h.html#adb1f4e88682fac0faac902578cad8b6c">s</a>)</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;{</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;  SOKOL_ASSERT(s);</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;  s-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d">enabled</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;  s-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2">src_factor_rgb</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a>;</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;  s-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3">dst_factor_rgb</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a>;</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;  s-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884">op_rgb</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a>;</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;  s-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f">src_factor_alpha</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a>;</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;  s-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec">dst_factor_alpha</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a>;</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;  s-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c">op_alpha</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a>;</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;  s-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a6e762320d94f45741939d705166a17a2">SG_COLORMASK_RGBA</a>;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;    s-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0.0f;</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;  }</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;}</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_gl_init_rasterizer_state(<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html">sg_rasterizer_state</a>* s)</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;{</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;  SOKOL_ASSERT(s);</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;  s-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148">alpha_to_coverage_enabled</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;  s-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">cull_mode</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a131d819b6c0fe42072f7db0677941b5d">SG_CULLMODE_NONE</a>;</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;  s-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0">face_winding</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faaa4aae35b0695932b261357428ca413c">SG_FACEWINDING_CW</a>;</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;  s-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a> = 1;</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;  s-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">depth_bias</a> = 0.0f;</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;  s-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">depth_bias_slope_scale</a> = 0.0f;</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;  s-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a15a60b827b6583f861bb79ff86a8383b">depth_bias_clamp</a> = 0.0f;</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;}</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;<span class="comment">/*-- state cache implementation ----------------------------------------------*/</span></div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;  _sg_gl_attr gl_attr;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_vbuf;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;} _sg_gl_cache_attr;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;  <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html">sg_depth_stencil_state</a> ds;</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;  <a class="code" href="../../d9/dd6/structsg__blend__state.html">sg_blend_state</a> blend;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;  <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html">sg_rasterizer_state</a> rast;</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;  <span class="keywordtype">bool</span> polygon_offset_enabled;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;  _sg_gl_cache_attr attrs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>];</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> cur_gl_ib;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;  uint32_t cur_ib_offset;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> cur_primitive_type;</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> cur_index_type;</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;  _sg_pipeline* cur_pipeline;</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;  <a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> cur_pipeline_id;</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;} _sg_state_cache;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_gl_reset_state_cache(_sg_state_cache* cache)</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;{</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;  SOKOL_ASSERT(cache);</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a3b3a3f8200f094b781e9f61e2f19fc50">glBindBuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a7180045dcb52b22af2cd0366026bc3ed">GL_ARRAY_BUFFER</a>, 0);</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a3b3a3f8200f094b781e9f61e2f19fc50">glBindBuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad26c63125c72cbf0347b589d51676e6a">GL_ELEMENT_ARRAY_BUFFER</a>, 0);</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    _sg_gl_init_attr(&amp;cache-&gt;attrs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].gl_attr);</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;    cache-&gt;attrs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].gl_vbuf = 0;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a0903ee19d8321a1e456bebb54a65ee2a">glDisableVertexAttribArray</a>(<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;    _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;  }</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;  cache-&gt;cur_gl_ib = 0;</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;  cache-&gt;cur_ib_offset = 0;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;  cache-&gt;cur_primitive_type = <a class="code" href="../../dc/da3/glcorearb_8h.html#a6079e7a02a59adad65eb953d9482b1ed">GL_TRIANGLES</a>;</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;  cache-&gt;cur_index_type = 0;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;  <span class="comment">/* resource bindings */</span></div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;  cache-&gt;cur_pipeline = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;  cache-&gt;cur_pipeline_id.id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;  <span class="comment">/* depth-stencil state */</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;  _sg_gl_init_depth_stencil_state(&amp;cache-&gt;ds);</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4ccf1dc093190cc3798b9abea3655f98">GL_DEPTH_TEST</a>);</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a5489df792b3263170eea381093ee6111">glDepthFunc</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a065314e6648fa794d9cf5872ebb9d776">GL_ALWAYS</a>);</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a93d8da71f9a009043f304be589ed00db">glDepthMask</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#abca6d43f43fae31f49dcb883b2f301f6">GL_FALSE</a>);</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4f0fd22afde7215e4412dafa5e522097">GL_STENCIL_TEST</a>);</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a8871ec64aa386201d6f1d054c763d064">glStencilFunc</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a065314e6648fa794d9cf5872ebb9d776">GL_ALWAYS</a>, 0, 0);</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a6c44d3915453f83f6ac83c10ea82303d">glStencilOp</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#af5f2970e5b32df02694116f821264893">GL_KEEP</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#af5f2970e5b32df02694116f821264893">GL_KEEP</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#af5f2970e5b32df02694116f821264893">GL_KEEP</a>);</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#acd5fc46c59e53fdab78011888f7b1d8f">glStencilMask</a>(0);</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;  <span class="comment">/* blend state */</span></div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;  _sg_gl_init_blend_state(&amp;cache-&gt;blend);</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa290e8f9ee6f6862778355aa22bb0b13">GL_BLEND</a>);</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a21f7fd667bd8822adaf1a45cc1c1a116">glBlendFuncSeparate</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a>);</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#af07e9596f4c8bb748c5e64d1cff6ca35">glBlendEquationSeparate</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#af477e4fa3e741406c0c3532cc5062758">GL_FUNC_ADD</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#af477e4fa3e741406c0c3532cc5062758">GL_FUNC_ADD</a>);</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a7a28e4c732415129acb357af17c469f6">glColorMask</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a06316bc3c17db78ce93419fb208945ba">GL_TRUE</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a06316bc3c17db78ce93419fb208945ba">GL_TRUE</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a06316bc3c17db78ce93419fb208945ba">GL_TRUE</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a06316bc3c17db78ce93419fb208945ba">GL_TRUE</a>);</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a07307444475d1fa7124466278618ed55">glBlendColor</a>(0.0f, 0.0f, 0.0f, 0.0f);</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;  <span class="comment">/* rasterizer state */</span></div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;  _sg_gl_init_rasterizer_state(&amp;cache-&gt;rast);</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;  cache-&gt;polygon_offset_enabled = <span class="keyword">false</span>;</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a3fb384e4fb282514a8c20afe6ecdb612">glPolygonOffset</a>(0.0f, 0.0f);</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a3ee631814361db6d24e7ebc5988877ab">GL_POLYGON_OFFSET_FILL</a>);</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a8c4f153ed20a741aaae952650fec46f0">GL_CULL_FACE</a>);</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#aa19401138cf27b24bb610dea3ef633ec">glFrontFace</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4c5d89dc1a4ba5669af56d43ad6d26e8">GL_CW</a>);</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a20d4a8491c6ca041d21096f7567fed20">glCullFace</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a688ad6fbf908a39f7197da6d4e4dd083">GL_BACK</a>);</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#abe1c2e1876841bc483127fd45d7ca3b1">GL_SCISSOR_TEST</a>);</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a974e3d03b26a60757018116abc99455f">GL_SAMPLE_ALPHA_TO_COVERAGE</a>);</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a7a806235dc2a717e813e92583ad99b34">GL_DITHER</a>);</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a3ee631814361db6d24e7ebc5988877ab">GL_POLYGON_OFFSET_FILL</a>);</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLCORE33)</span></div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa2b6486ff7ecee8bf04e3371f197527a">GL_MULTISAMPLE</a>);</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a370d423f9ed51188d2bffdad4f5f8230">GL_PROGRAM_POINT_SIZE</a>);</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;}</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;<span class="comment">/*-- main GL backend state and functions -------------------------------------*/</span></div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;  <span class="keywordtype">bool</span> valid;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;  <span class="keywordtype">bool</span> in_pass;</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;  <span class="keywordtype">int</span> cur_pass_width;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;  <span class="keywordtype">int</span> cur_pass_height;</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;  _sg_context* cur_context;</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;  _sg_pass* cur_pass;</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;  <a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> cur_pass_id;</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;  _sg_state_cache cache;</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;  <span class="keywordtype">bool</span> <a class="code" href="../../dd/d6e/feature__tests_8cxx.html#a1582568e32f689337602a16bf8a5bff0">features</a>[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a4ea76b74c925bb54348d8d8d21977e05">SG_NUM_FEATURES</a>];</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;  <span class="keywordtype">bool</span> ext_anisotropic;</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> max_anisotropy;</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;} _sg_backend;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;<span class="keyword">static</span> _sg_backend _sg_gl;</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_setup_backend(<span class="keyword">const</span> <a class="code" href="../../dc/d0e/structsg__desc.html">sg_desc</a>* desc)</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;{</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLES2) || defined(SOKOL_GLES3)</span></div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;  _sg_gl_gles2 = desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a6614c9bb4dbfa0c9583c59aa9d8735d1">gl_force_gles2</a>;</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;  _sg_gl_gles2 = <span class="keyword">false</span>;</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;  memset(&amp;_sg_gl, 0, <span class="keyword">sizeof</span>(_sg_gl));</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;  _sg_gl.valid = <span class="keyword">true</span>;</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;  _sg_gl.in_pass = <span class="keyword">false</span>;</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;  _sg_gl.cur_pass_width = 0;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;  _sg_gl.cur_pass_height = 0;</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;  _sg_gl.cur_pass = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;  _sg_gl.cur_pass_id.id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;<span class="comment">/* clear initial GL error state */</span></div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;<span class="preprocessor">#if defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;  <span class="keywordflow">while</span> (<a class="code" href="../../db/d2b/gl3w_8h.html#a0aac05c6a9cb27add42d6e1e4970d9cb">glGetError</a>() != <a class="code" href="../../dc/da3/glcorearb_8h.html#a8868c96a8632a9a5b2af712c62dfd36a">GL_NO_ERROR</a>)</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;    ;</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;  <span class="comment">/* initialize feature flags */</span></div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a4ea76b74c925bb54348d8d8d21977e05">SG_NUM_FEATURES</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;    _sg_gl.features[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <span class="keyword">false</span>;</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;  }</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;  _sg_gl.ext_anisotropic = <span class="keyword">false</span>;</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a99594e9f1b7e5ca8dfaf37b742abb0aa">SG_FEATURE_ORIGIN_BOTTOM_LEFT</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLCORE33)</span></div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4">SG_FEATURE_INSTANCING</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897afd60e8098c18e6a67973d66e173742d8">SG_FEATURE_TEXTURE_FLOAT</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a1afe1718136ca6a21672b44eacb70b8e">SG_FEATURE_TEXTURE_HALF_FLOAT</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a900e4644906ceec168a2ce44452e1a31">SG_FEATURE_MSAA_RENDER_TARGETS</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad368978a4331e32ddf2715bbc6c6aa10">SG_FEATURE_PACKED_VERTEX_FORMAT_10_2</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897acd4385efaeceb7f3bb64817dbf0d5acf">SG_FEATURE_MULTIPLE_RENDER_TARGET</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a8a9131b5aa4d596ee5caaf5c738dd90f">SG_FEATURE_IMAGETYPE_3D</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a3b2fbf1b80817df6f45664c192aa1183">SG_FEATURE_IMAGETYPE_ARRAY</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> num_ext = 0;</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a70ad6a21033347a0478dad517dd2bb83">glGetIntegerv</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#af541c15d841e8064600dec789ab4727e">GL_NUM_EXTENSIONS</a>, &amp;num_ext);</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; num_ext; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* ext = (<span class="keyword">const</span> <span class="keywordtype">char</span>*)<a class="code" href="../../db/d2b/gl3w_8h.html#a66a9a84822c245ee216264f5f31f7afb">glGetStringi</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa7be33062263597ec5446b302febb2d8">GL_EXTENSIONS</a>, <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;    <span class="keywordflow">if</span> (strstr(ext, <span class="stringliteral">&quot;_texture_compression_s3tc&quot;</span>)) {</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;      _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a9ca2b37fa43fcd46f8d6e537064e3e9b">SG_FEATURE_TEXTURE_COMPRESSION_DXT</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strstr(ext, <span class="stringliteral">&quot;_texture_filter_anisotropic&quot;</span>)) {</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;      _sg_gl.ext_anisotropic = <span class="keyword">true</span>;</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;    }</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;  }</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="preprocessor">#elif defined(SOKOL_GLES3)</span></div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* ext = (<span class="keyword">const</span> <span class="keywordtype">char</span>*)<a class="code" href="../../db/d2b/gl3w_8h.html#a766db4e4de8f98981e53ea03bd47a004">glGetString</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa7be33062263597ec5446b302febb2d8">GL_EXTENSIONS</a>);</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;  <span class="keywordflow">if</span> (!_sg_gl_gles2) {</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;    _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4">SG_FEATURE_INSTANCING</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897afd60e8098c18e6a67973d66e173742d8">SG_FEATURE_TEXTURE_FLOAT</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;    _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a1afe1718136ca6a21672b44eacb70b8e">SG_FEATURE_TEXTURE_HALF_FLOAT</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;    _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a8a9131b5aa4d596ee5caaf5c738dd90f">SG_FEATURE_IMAGETYPE_3D</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a3b2fbf1b80817df6f45664c192aa1183">SG_FEATURE_IMAGETYPE_ARRAY</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;    _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a900e4644906ceec168a2ce44452e1a31">SG_FEATURE_MSAA_RENDER_TARGETS</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;    _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad368978a4331e32ddf2715bbc6c6aa10">SG_FEATURE_PACKED_VERTEX_FORMAT_10_2</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;    _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897acd4385efaeceb7f3bb64817dbf0d5acf">SG_FEATURE_MULTIPLE_RENDER_TARGET</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;    _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4">SG_FEATURE_INSTANCING</a>] = strstr(ext, <span class="stringliteral">&quot;_instanced_arrays&quot;</span>);</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;    _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897afd60e8098c18e6a67973d66e173742d8">SG_FEATURE_TEXTURE_FLOAT</a>] = strstr(ext, <span class="stringliteral">&quot;_texture_float&quot;</span>);</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a1afe1718136ca6a21672b44eacb70b8e">SG_FEATURE_TEXTURE_HALF_FLOAT</a>] = strstr(ext, <span class="stringliteral">&quot;_texture_half_float&quot;</span>);</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;  }</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a9ca2b37fa43fcd46f8d6e537064e3e9b">SG_FEATURE_TEXTURE_COMPRESSION_DXT</a>] =</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_texture_compression_s3tc&quot;</span>) ||</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_compressed_texture_s3tc&quot;</span>) ||</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;    strstr(ext, <span class="stringliteral">&quot;texture_compression_dxt1&quot;</span>);</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a06f42e3be3662f69b106bba1d47e92ef">SG_FEATURE_TEXTURE_COMPRESSION_PVRTC</a>] =</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_texture_compression_pvrtc&quot;</span>) ||</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_compressed_texture_pvrtc&quot;</span>);</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a70fd29544a81d7bb37f26af9b263ded6">SG_FEATURE_TEXTURE_COMPRESSION_ATC</a>] =</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_compressed_texture_atc&quot;</span>);</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;  _sg_gl.ext_anisotropic =</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_texture_filter_anisotropic&quot;</span>);</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;<span class="preprocessor">#elif defined(SOKOL_GLES2)</span></div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* ext = (<span class="keyword">const</span> <span class="keywordtype">char</span>*)<a class="code" href="../../db/d2b/gl3w_8h.html#a766db4e4de8f98981e53ea03bd47a004">glGetString</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa7be33062263597ec5446b302febb2d8">GL_EXTENSIONS</a>);</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4">SG_FEATURE_INSTANCING</a>] =</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_instanced_arrays&quot;</span>);</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897afd60e8098c18e6a67973d66e173742d8">SG_FEATURE_TEXTURE_FLOAT</a>] =</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_texture_float&quot;</span>);</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a1afe1718136ca6a21672b44eacb70b8e">SG_FEATURE_TEXTURE_HALF_FLOAT</a>] =</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_texture_half_float&quot;</span>);</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a9ca2b37fa43fcd46f8d6e537064e3e9b">SG_FEATURE_TEXTURE_COMPRESSION_DXT</a>] =</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_texture_compression_s3tc&quot;</span>) ||</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_compressed_texture_s3tc&quot;</span>) ||</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    strstr(ext, <span class="stringliteral">&quot;texture_compression_dxt1&quot;</span>);</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a06f42e3be3662f69b106bba1d47e92ef">SG_FEATURE_TEXTURE_COMPRESSION_PVRTC</a>] =</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_texture_compression_pvrtc&quot;</span>) ||</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_compressed_texture_pvrtc&quot;</span>);</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;  _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a70fd29544a81d7bb37f26af9b263ded6">SG_FEATURE_TEXTURE_COMPRESSION_ATC</a>] =</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_compressed_texture_atc&quot;</span>);</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;  _sg_gl.ext_anisotropic =</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;    strstr(ext, <span class="stringliteral">&quot;_texture_filter_anisotropic&quot;</span>);</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;  _sg_gl.max_anisotropy = 1;</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;  <span class="keywordflow">if</span> (_sg_gl.ext_anisotropic) {</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a70ad6a21033347a0478dad517dd2bb83">glGetIntegerv</a>(GL_MAX_TEXTURE_MAX_ANISOTROPY_EXT, &amp;_sg_gl.max_anisotropy);</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;  }</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;}</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_discard_backend()</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;{</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;  SOKOL_ASSERT(_sg_gl.valid);</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;  _sg_gl.valid = <span class="keyword">false</span>;</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;}</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_reset_state_cache()</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;{</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;  <span class="keywordflow">if</span> (_sg_gl.cur_context) {</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    <span class="keywordflow">if</span> (!_sg_gl_gles2) {</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;      _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a4c13098a615d32e7f04aa4105149564f">glBindVertexArray</a>(_sg_gl.cur_context-&gt;vao);</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;      _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;    }</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;    _sg_gl_reset_state_cache(&amp;_sg_gl.cache);</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;  }</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;}</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_query_feature(sg_feature f)</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;{</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;  SOKOL_ASSERT((f &gt;= 0) &amp;&amp; (f &lt; SG_NUM_FEATURES));</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;  <span class="keywordflow">return</span> _sg_gl.features[<a class="code" href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a>];</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;}</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_activate_context(_sg_context* ctx)</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;{</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;  SOKOL_ASSERT(_sg_gl.valid);</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;  <span class="comment">/* NOTE: ctx can be 0 to unset the current context */</span></div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;  _sg_gl.cur_context = ctx;</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;  _sg_reset_state_cache();</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;}</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;<span class="comment">/*-- GL backend resource creation and destruction ----------------------------*/</span></div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_context(_sg_context* ctx)</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;{</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;  SOKOL_ASSERT(ctx);</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;  SOKOL_ASSERT(ctx-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;  SOKOL_ASSERT(0 == ctx-&gt;default_framebuffer);</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a70ad6a21033347a0478dad517dd2bb83">glGetIntegerv</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ab2fc7d11690bc1e7a8800aef2a175a6c">GL_FRAMEBUFFER_BINDING</a>, (<a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a>*)&amp;ctx-&gt;default_framebuffer);</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;  <span class="keywordflow">if</span> (!_sg_gl_gles2) {</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;    SOKOL_ASSERT(0 == ctx-&gt;vao);</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a71a2d01a12606fc26c1a28dba23dfce2">glGenVertexArrays</a>(1, &amp;ctx-&gt;vao);</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a4c13098a615d32e7f04aa4105149564f">glBindVertexArray</a>(ctx-&gt;vao);</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;    _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;  }</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;  ctx-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;}</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_context(_sg_context* ctx)</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;{</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;  SOKOL_ASSERT(ctx);</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;  <span class="keywordflow">if</span> (!_sg_gl_gles2) {</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;vao) {</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a214386aefdc30034088a21a6bccfbcbd">glDeleteVertexArrays</a>(1, &amp;ctx-&gt;vao);</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;    }</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;    _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;  }</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;  _sg_init_context_slot(ctx);</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;}</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_buffer(_sg_buffer* buf, <span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__buffer__desc.html">sg_buffer_desc</a>* desc)</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;{</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;  SOKOL_ASSERT(buf &amp;&amp; desc);</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;  SOKOL_ASSERT(buf-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;  buf-&gt;size = desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a73cd8286ef49470f30f83c2118d2136d">size</a>;</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;  buf-&gt;type = _sg_def(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#aed03d70712027dc18902bfab4a6559f3">type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fa1052a9f00ec6b8a3e914db754c0c64e2">SG_BUFFERTYPE_VERTEXBUFFER</a>);</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;  buf-&gt;usage = _sg_def(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a3fa569faec49b1252c05dd1210a85b10">usage</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>);</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;  buf-&gt;upd_frame_index = 0;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;  buf-&gt;num_slots = (buf-&gt;usage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>) ? 1 : <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>;</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;  buf-&gt;active_slot = 0;</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;  buf-&gt;ext_buffers = (0 != desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#aaaa91111849a07716f2d9e840fa17c6e">gl_buffers</a>[0]);</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_target = _sg_gl_buffer_target(buf-&gt;type);</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_usage = _sg_gl_usage(buf-&gt;usage);</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slot = 0; slot &lt; buf-&gt;num_slots; slot++) {</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;    <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_buf = 0;</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;    <span class="keywordflow">if</span> (buf-&gt;ext_buffers) {</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;      SOKOL_ASSERT(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#aaaa91111849a07716f2d9e840fa17c6e">gl_buffers</a>[slot]);</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;      gl_buf = desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#aaaa91111849a07716f2d9e840fa17c6e">gl_buffers</a>[slot];</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a1b33d322b89d94ad4938461db0a0424a">glGenBuffers</a>(1, &amp;gl_buf);</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a3b3a3f8200f094b781e9f61e2f19fc50">glBindBuffer</a>(gl_target, gl_buf);</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a9419a03f5c46e2758f884e9c56d92b6a">glBufferData</a>(gl_target, buf-&gt;size, <span class="keyword">nullptr</span>, gl_usage);</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;      <span class="keywordflow">if</span> (buf-&gt;usage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>) {</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;        SOKOL_ASSERT(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a409e6cb69174e210981627d0a356bf65">content</a>);</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#ab275ed802ac5db3e6b97973aab9d48e2">glBufferSubData</a>(gl_target, 0, buf-&gt;size, desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a409e6cb69174e210981627d0a356bf65">content</a>);</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;      }</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;    }</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;    buf-&gt;gl_buf[slot] = gl_buf;</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;  }</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;  buf-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;}</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_buffer(_sg_buffer* buf)</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;{</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;  SOKOL_ASSERT(buf);</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;  <span class="keywordflow">if</span> (!buf-&gt;ext_buffers) {</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slot = 0; slot &lt; buf-&gt;num_slots; slot++) {</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;      <span class="keywordflow">if</span> (buf-&gt;gl_buf[slot]) {</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a55652a3f087bb13267a5481b6ff1fe19">glDeleteBuffers</a>(1, &amp;buf-&gt;gl_buf[slot]);</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;      }</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    }</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;    _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;  }</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;  _sg_init_buffer_slot(buf);</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;}</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_gl_supported_texture_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;{</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab16b5755ede91f6c2d9ac0b95b939755">SG_PIXELFORMAT_DXT1</a>:</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abc58007c8b3aea5d1d4f8003e1ebd015">SG_PIXELFORMAT_DXT3</a>:</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5707e92aad083b7e905f1cef363a736a">SG_PIXELFORMAT_DXT5</a>:</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;      <span class="keywordflow">return</span> _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a9ca2b37fa43fcd46f8d6e537064e3e9b">SG_FEATURE_TEXTURE_COMPRESSION_DXT</a>];</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5c1d86e7259c30e71a0345564ce133e5">SG_PIXELFORMAT_PVRTC2_RGB</a>:</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aff9e597d6ba26ce24ee763c57de6b20c">SG_PIXELFORMAT_PVRTC4_RGB</a>:</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7a18fff9a92408dc0b1b472e188a7293">SG_PIXELFORMAT_PVRTC2_RGBA</a>:</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a3f7140ec7c333f21243ab73a1591c3b4">SG_PIXELFORMAT_PVRTC4_RGBA</a>:</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;      <span class="keywordflow">return</span> _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a06f42e3be3662f69b106bba1d47e92ef">SG_FEATURE_TEXTURE_COMPRESSION_PVRTC</a>];</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab178a54fe3afec07062f05138608e559">SG_PIXELFORMAT_ETC2_RGB8</a>:</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a24fd6df84f189657c672835f616e9c21">SG_PIXELFORMAT_ETC2_SRGB8</a>:</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;      <span class="keywordflow">return</span> _sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ab44ce51d78809d456207d70f230d8d7f">SG_FEATURE_TEXTURE_COMPRESSION_ETC2</a>];</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;  }</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;}</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_image(_sg_image* img, <span class="keyword">const</span> <a class="code" href="../../d4/d94/structsg__image__desc.html">sg_image_desc</a>* desc)</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;{</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;  SOKOL_ASSERT(img &amp;&amp; desc);</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;  SOKOL_ASSERT(img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;  img-&gt;type = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a206bf908ad986430c63d819f06c4a91a">type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a>);</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;  img-&gt;render_target = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#aeb5ea1efacf1fcbe702491bd6417df70">render_target</a>;</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;  img-&gt;width = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a2852616fac46bf1d405b822ac612e94a">width</a>;</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;  img-&gt;height = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a80175365c540f912492e50a5a8b362e7">height</a>;</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;  img-&gt;depth = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a205fafb8e91cc1249e481378b7bac888">depth</a>, 1);</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;  img-&gt;num_mipmaps = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a0653e80837f6ffa9477a62e627fad170">num_mipmaps</a>, 1);</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;  img-&gt;usage = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a4610a2c95a3f97c99390ec4e08caa1ca">usage</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>);</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;  img-&gt;pixel_format = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a07ce05ddf423b45fb74375b384dc1f14">pixel_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>);</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;  img-&gt;sample_count = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a7e0d5c7130c32b489e509a6bcfd9904a">sample_count</a>, 1);</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;  img-&gt;min_filter = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a09eb7207f75e8ad1a8e49335b5da0a0f">min_filter</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>);</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;  img-&gt;mag_filter = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a7cc28a336de67a2fee6a39c0a4cb3eb6">mag_filter</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>);</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;  img-&gt;wrap_u = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#af56aa1ad4802c4377f32a3656cc00540">wrap_u</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>);</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;  img-&gt;wrap_v = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ad92e8d7c8fc89dea7db54d569982f57d">wrap_v</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>);</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;  img-&gt;wrap_w = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a457ed7b98ffce90d5cb6b70e2cc4027d">wrap_w</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>);</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;  img-&gt;max_anisotropy = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a1db73b1b6b31ac8dc14f0c2358057f87">max_anisotropy</a>, 1);</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;  img-&gt;upd_frame_index = 0;</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;  <span class="comment">/* check if texture format is support */</span></div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;  <span class="keywordflow">if</span> (!_sg_gl_supported_texture_format(img-&gt;pixel_format)) {</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;compressed texture format not supported by GL context\n&quot;</span>);</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;    img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;  }</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;  <span class="comment">/* check for optional texture types */</span></div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;  <span class="keywordflow">if</span> ((img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>) &amp;&amp; !_sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a8a9131b5aa4d596ee5caaf5c738dd90f">SG_FEATURE_IMAGETYPE_3D</a>]) {</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;3D textures not supported by GL context\n&quot;</span>);</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;    img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;  }</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;  <span class="keywordflow">if</span> ((img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>) &amp;&amp; !_sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a3b2fbf1b80817df6f45664c192aa1183">SG_FEATURE_IMAGETYPE_ARRAY</a>]) {</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;array textures not supported by GL context\n&quot;</span>);</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;  }</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;  <span class="comment">/* create 1 or 2 GL textures, depending on requested update strategy */</span></div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;  img-&gt;num_slots = (img-&gt;usage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>) ? 1 : <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>;</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;  img-&gt;active_slot = 0;</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;  img-&gt;ext_textures = (0 != desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a099e099707ea148ef97aa81c526086bf">gl_textures</a>[0]);</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;  <span class="keywordtype">bool</span> msaa = <span class="keyword">false</span>;</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;  <span class="keywordflow">if</span> (!_sg_gl_gles2) {</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;    msaa = (img-&gt;sample_count &gt; 1) &amp;&amp; (_sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a900e4644906ceec168a2ce44452e1a31">SG_FEATURE_MSAA_RENDER_TARGETS</a>]);</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;  }</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;  <span class="keywordflow">if</span> (_sg_is_valid_rendertarget_depth_format(img-&gt;pixel_format)) {</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;    <span class="comment">/* special case depth-stencil-buffer? */</span></div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;    SOKOL_ASSERT((img-&gt;usage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>) &amp;&amp; (img-&gt;num_slots == 1));</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;    SOKOL_ASSERT(!img-&gt;ext_textures); <span class="comment">/* cannot provide external texture for depth images */</span></div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a8b800cc6117d08d5ec34b32421563799">glGenRenderbuffers</a>(1, &amp;img-&gt;gl_depth_render_buffer);</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#aa25172732c3d88c7c23d93f9e7d672be">glBindRenderbuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a>, img-&gt;gl_depth_render_buffer);</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;    <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_depth_format = _sg_gl_depth_attachment_format(img-&gt;pixel_format);</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;    <span class="keywordflow">if</span> (!_sg_gl_gles2 &amp;&amp; msaa) {</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a514c77ac5c52216d1318b2afc72df793">glRenderbufferStorageMultisample</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a>, img-&gt;sample_count, gl_depth_format, img-&gt;width, img-&gt;height);</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;    } <span class="keywordflow">else</span></div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;    {</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#ad9d72969a26069958dea3598cfecb687">glRenderbufferStorage</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a>, gl_depth_format, img-&gt;width, img-&gt;height);</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;    }</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;    <span class="comment">/* regular color texture */</span></div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;    img-&gt;gl_target = _sg_gl_texture_target(img-&gt;type);</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_internal_format = _sg_gl_teximage_internal_format(img-&gt;pixel_format);</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;<span class="comment">/* if this is a MSAA render target, need to create a separate render buffer */</span></div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    <span class="keywordflow">if</span> (!_sg_gl_gles2 &amp;&amp; img-&gt;render_target &amp;&amp; msaa) {</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a8b800cc6117d08d5ec34b32421563799">glGenRenderbuffers</a>(1, &amp;img-&gt;gl_msaa_render_buffer);</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#aa25172732c3d88c7c23d93f9e7d672be">glBindRenderbuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a>, img-&gt;gl_msaa_render_buffer);</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a514c77ac5c52216d1318b2afc72df793">glRenderbufferStorageMultisample</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a>, img-&gt;sample_count, gl_internal_format, img-&gt;width, img-&gt;height);</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;    }</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    <span class="keywordflow">if</span> (img-&gt;ext_textures) {</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;      <span class="comment">/* inject externally GL textures */</span></div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slot = 0; slot &lt; img-&gt;num_slots; slot++) {</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;        SOKOL_ASSERT(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a099e099707ea148ef97aa81c526086bf">gl_textures</a>[slot]);</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        img-&gt;gl_tex[slot] = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a099e099707ea148ef97aa81c526086bf">gl_textures</a>[slot];</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;      }</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;      <span class="comment">/* create our own GL texture(s) */</span></div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_format = _sg_gl_teximage_format(img-&gt;pixel_format);</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> is_compressed = _sg_is_compressed_pixel_format(img-&gt;pixel_format);</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slot = 0; slot &lt; img-&gt;num_slots; slot++) {</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a82ac4415f852b8b5bfe7356202ca934e">glGenTextures</a>(1, &amp;img-&gt;gl_tex[slot]);</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#af15266b67de988f5ddf442bbbdd1b3fc">glActiveTexture</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a16cc91096144fc7048b45e2add14915b">GL_TEXTURE0</a>);</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a987aecafceffb9afaef11412d42e605b">glBindTexture</a>(img-&gt;gl_target, img-&gt;gl_tex[slot]);</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;        <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_min_filter = _sg_gl_filter(img-&gt;min_filter);</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;        <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_mag_filter = _sg_gl_filter(img-&gt;mag_filter);</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a5817fa85137822142b4951eacd0154e7">glTexParameteri</a>(img-&gt;gl_target, <a class="code" href="../../dc/da3/glcorearb_8h.html#a173a2b2453322dd8d613df6cf2e72480">GL_TEXTURE_MIN_FILTER</a>, gl_min_filter);</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a5817fa85137822142b4951eacd0154e7">glTexParameteri</a>(img-&gt;gl_target, <a class="code" href="../../dc/da3/glcorearb_8h.html#acb47a41b5963d44826f44b7370bccc26">GL_TEXTURE_MAG_FILTER</a>, gl_mag_filter);</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;        <span class="keywordflow">if</span> (_sg_gl.ext_anisotropic &amp;&amp; (img-&gt;max_anisotropy &gt; 1)) {</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;          <a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> max_aniso = (<a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a>)img-&gt;max_anisotropy;</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;          <a class="code" href="../../df/d18/namespaceo2_1_1mid.html#ace6b84ba8e24525ead602cbda42f1bfb">if</a> (max_aniso &gt; _sg_gl.max_anisotropy) {</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;            max_aniso = _sg_gl.max_anisotropy;</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;          }</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a5817fa85137822142b4951eacd0154e7">glTexParameteri</a>(img-&gt;gl_target, GL_TEXTURE_MAX_ANISOTROPY_EXT, max_aniso);</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;        }</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;        <span class="keywordflow">if</span> (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>) {</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a5817fa85137822142b4951eacd0154e7">glTexParameteri</a>(img-&gt;gl_target, <a class="code" href="../../dc/da3/glcorearb_8h.html#a23a0bc2909cc2f79fe7287aaa044e880">GL_TEXTURE_WRAP_S</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#ae90f81f48642444b4ba7fa5cacf40569">GL_CLAMP_TO_EDGE</a>);</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a5817fa85137822142b4951eacd0154e7">glTexParameteri</a>(img-&gt;gl_target, <a class="code" href="../../dc/da3/glcorearb_8h.html#ac307a4772e1d3decd5b6f36192113ab6">GL_TEXTURE_WRAP_T</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#ae90f81f48642444b4ba7fa5cacf40569">GL_CLAMP_TO_EDGE</a>);</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a5817fa85137822142b4951eacd0154e7">glTexParameteri</a>(img-&gt;gl_target, <a class="code" href="../../dc/da3/glcorearb_8h.html#a23a0bc2909cc2f79fe7287aaa044e880">GL_TEXTURE_WRAP_S</a>, _sg_gl_wrap(img-&gt;wrap_u));</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a5817fa85137822142b4951eacd0154e7">glTexParameteri</a>(img-&gt;gl_target, <a class="code" href="../../dc/da3/glcorearb_8h.html#ac307a4772e1d3decd5b6f36192113ab6">GL_TEXTURE_WRAP_T</a>, _sg_gl_wrap(img-&gt;wrap_v));</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;          <span class="keywordflow">if</span> (!_sg_gl_gles2 &amp;&amp; (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>)) {</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;            <a class="code" href="../../db/d2b/gl3w_8h.html#a5817fa85137822142b4951eacd0154e7">glTexParameteri</a>(img-&gt;gl_target, <a class="code" href="../../dc/da3/glcorearb_8h.html#a1b69ad7ea841f21165a25e58411b6bab">GL_TEXTURE_WRAP_R</a>, _sg_gl_wrap(img-&gt;wrap_w));</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;          }</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;        }</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;        <span class="keywordflow">if</span> (!_sg_gl_gles2) {</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;          <span class="comment">/* GL spec has strange defaults for mipmap min/max lod: -1000 to +1000 */</span></div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">float</span> min_lod = _sg_clamp(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a65deea510785efb62849e55b84193263">min_lod</a>, 0.0f, 1000.0f);</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">float</span> max_lod = _sg_clamp(_sg_def_flt(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a435a6e2e71f190b00ef4666c83173572">max_lod</a>, 1000.0f), 0.0f, 1000.0f);</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a6ec921647b99c0224fc78d54f1798b2f">glTexParameterf</a>(img-&gt;gl_target, <a class="code" href="../../dc/da3/glcorearb_8h.html#ae3c158c6a713b4faa2e8616292368f36">GL_TEXTURE_MIN_LOD</a>, min_lod);</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a6ec921647b99c0224fc78d54f1798b2f">glTexParameterf</a>(img-&gt;gl_target, <a class="code" href="../../dc/da3/glcorearb_8h.html#aaa37f45604d20d8984672d908e608c5e">GL_TEXTURE_MAX_LOD</a>, max_lod);</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;        }</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> num_faces = img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a> ? 6 : 1;</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;        <span class="keywordtype">int</span> data_index = 0;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face_index = 0; face_index &lt; num_faces; face_index++) {</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mip_index = 0; mip_index &lt; img-&gt;num_mipmaps; mip_index++, data_index++) {</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;            <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_img_target = img-&gt;gl_target;</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a> == img-&gt;type) {</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;              gl_img_target = _sg_gl_cubeface_target(face_index);</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;            }</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;            <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a1e5eb1ac5e47603cc80ab58338b92393">GLvoid</a>* data_ptr = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ada2a41a3d05f322bc67e6441dbeb64d3">content</a>.<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c">ptr</a>;</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> data_size = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ada2a41a3d05f322bc67e6441dbeb64d3">content</a>.<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#ad5cf41c09de0390218aaa479aa2e58db">size</a>;</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;            <span class="keywordtype">int</span> mip_width = img-&gt;width &gt;&gt; mip_index;</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;            <span class="keywordflow">if</span> (mip_width == 0) {</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;              mip_width = 1;</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;            }</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;            <span class="keywordtype">int</span> mip_height = img-&gt;height &gt;&gt; mip_index;</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;            <span class="keywordflow">if</span> (mip_height == 0) {</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;              mip_height = 1;</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;            }</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a> == img-&gt;type) || (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a> == img-&gt;type)) {</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;              <span class="keywordflow">if</span> (is_compressed) {</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;                <a class="code" href="../../db/d2b/gl3w_8h.html#afa6bde0b30e12701fb47e1de1615ff52">glCompressedTexImage2D</a>(gl_img_target, mip_index, gl_internal_format,</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;                                       mip_width, mip_height, 0, data_size, data_ptr);</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;              } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;                <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_type = _sg_gl_teximage_type(img-&gt;pixel_format);</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;                <a class="code" href="../../db/d2b/gl3w_8h.html#a7da97095b562f67f161b50104776a66d">glTexImage2D</a>(gl_img_target, mip_index, gl_internal_format,</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;                             mip_width, mip_height, 0, gl_format, gl_type, data_ptr);</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;              }</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;            }</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!_sg_gl_gles2 &amp;&amp; ((<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a> == img-&gt;type) || (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a> == img-&gt;type))) {</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;              <span class="keywordtype">int</span> mip_depth = img-&gt;depth;</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a> == img-&gt;type) {</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;                mip_depth &gt;&gt;= mip_index;</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;              }</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;              <span class="keywordflow">if</span> (mip_depth == 0) {</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;                mip_depth = 1;</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;              }</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;              <span class="keywordflow">if</span> (is_compressed) {</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;                <a class="code" href="../../db/d2b/gl3w_8h.html#a3d06b4b71bb393baee984ac2d81001a4">glCompressedTexImage3D</a>(gl_img_target, mip_index, gl_internal_format,</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;                                       mip_width, mip_height, mip_depth, 0, data_size, data_ptr);</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;              } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;                <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_type = _sg_gl_teximage_type(img-&gt;pixel_format);</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;                <a class="code" href="../../db/d2b/gl3w_8h.html#ae17ed43d9958b23226176a98e992fc04">glTexImage3D</a>(gl_img_target, mip_index, gl_internal_format,</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;                             mip_width, mip_height, mip_depth, 0, gl_format, gl_type, data_ptr);</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;              }</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;            }</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;          }</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;        }</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;      }</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    }</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;  }</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;  img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;}</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_image(_sg_image* img)</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;{</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;  SOKOL_ASSERT(img);</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;  <span class="keywordflow">if</span> (!img-&gt;ext_textures) {</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slot = 0; slot &lt; img-&gt;num_slots; slot++) {</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;      <span class="keywordflow">if</span> (img-&gt;gl_tex[slot]) {</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#aedf2546140e2c0f0e8d6f62e9998ae73">glDeleteTextures</a>(1, &amp;img-&gt;gl_tex[slot]);</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;      }</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    }</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;  }</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;  <span class="keywordflow">if</span> (img-&gt;gl_depth_render_buffer) {</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#ad2c7045354de0b7817406b1590f69efd">glDeleteRenderbuffers</a>(1, &amp;img-&gt;gl_depth_render_buffer);</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;  }</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;  <span class="keywordflow">if</span> (img-&gt;gl_msaa_render_buffer) {</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#ad2c7045354de0b7817406b1590f69efd">glDeleteRenderbuffers</a>(1, &amp;img-&gt;gl_msaa_render_buffer);</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;  }</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;  _sg_init_image_slot(img);</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;}</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> _sg_gl_compile_shader(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343">sg_shader_stage</a> stage, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>)</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;{</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;  SOKOL_ASSERT(src);</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_shd = <a class="code" href="../../db/d2b/gl3w_8h.html#a4d3447ff3caf454bc686968fbe5f04bf">glCreateShader</a>(_sg_gl_shader_stage(stage));</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a369ec108462c247e3028edc9070117a0">glShaderSource</a>(gl_shd, 1, &amp;src, <span class="keyword">nullptr</span>);</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#acf7a528ef1ef237d2a7676dcb0f22473">glCompileShader</a>(gl_shd);</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> compile_status = 0;</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#ae7002efbed794728b79205427b3ccc66">glGetShaderiv</a>(gl_shd, <a class="code" href="../../dc/da3/glcorearb_8h.html#a8b14cf3c9445c50aabe5c7d21b31d215">GL_COMPILE_STATUS</a>, &amp;compile_status);</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;  <span class="keywordflow">if</span> (!compile_status) {</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;    <span class="comment">/* compilation failed, log error and delete shader */</span></div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;    <a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> log_len = 0;</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#ae7002efbed794728b79205427b3ccc66">glGetShaderiv</a>(gl_shd, <a class="code" href="../../dc/da3/glcorearb_8h.html#ae77c1e831fd164e9ac6c1a9cdb697ce5">GL_INFO_LOG_LENGTH</a>, &amp;log_len);</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;    <span class="keywordflow">if</span> (log_len &gt; 0) {</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;      <a class="code" href="../../dc/da3/glcorearb_8h.html#af7575655ac056b187ea385966b95a22d">GLchar</a>* log_buf = (<a class="code" href="../../dc/da3/glcorearb_8h.html#af7575655ac056b187ea385966b95a22d">GLchar</a>*)SOKOL_MALLOC(log_len);</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a3058fd84744eb41e33773ad2b1a8c184">glGetShaderInfoLog</a>(gl_shd, log_len, &amp;log_len, log_buf);</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;      SOKOL_LOG(log_buf);</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;      SOKOL_FREE(log_buf);</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;    }</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#ac012d7614801ed69d643ad388dcfc768">glDeleteShader</a>(gl_shd);</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;    gl_shd = 0;</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;  }</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;  <span class="keywordflow">return</span> gl_shd;</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;}</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_shader(_sg_shader* shd, <span class="keyword">const</span> <a class="code" href="../../df/d17/structsg__shader__desc.html">sg_shader_desc</a>* desc)</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;{</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;  SOKOL_ASSERT(shd &amp;&amp; desc);</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;  SOKOL_ASSERT(shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;  SOKOL_ASSERT(!shd-&gt;gl_prog);</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_vs = _sg_gl_compile_shader(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>, desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a>);</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_fs = _sg_gl_compile_shader(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>, desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a>);</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;  <span class="keywordflow">if</span> (!(gl_vs &amp;&amp; gl_fs)) {</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;    shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;  }</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_prog = <a class="code" href="../../db/d2b/gl3w_8h.html#acf9d728f2b2be42fbc2fe6dada8bcd2b">glCreateProgram</a>();</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a0cb06d612b3358bfaadbbefd7c51f1cc">glAttachShader</a>(gl_prog, gl_vs);</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a0cb06d612b3358bfaadbbefd7c51f1cc">glAttachShader</a>(gl_prog, gl_fs);</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#ad241352c6eee6e79f09942ef0771db47">glLinkProgram</a>(gl_prog);</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#ac012d7614801ed69d643ad388dcfc768">glDeleteShader</a>(gl_vs);</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#ac012d7614801ed69d643ad388dcfc768">glDeleteShader</a>(gl_fs);</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> link_status;</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a511181ed70d9d4cf7463a0ffe39f836d">glGetProgramiv</a>(gl_prog, <a class="code" href="../../dc/da3/glcorearb_8h.html#ae644ef6b281c9378fa49d9b1ccefaf31">GL_LINK_STATUS</a>, &amp;link_status);</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;  <span class="keywordflow">if</span> (!link_status) {</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;    <a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> log_len = 0;</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a511181ed70d9d4cf7463a0ffe39f836d">glGetProgramiv</a>(gl_prog, <a class="code" href="../../dc/da3/glcorearb_8h.html#ae77c1e831fd164e9ac6c1a9cdb697ce5">GL_INFO_LOG_LENGTH</a>, &amp;log_len);</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <span class="keywordflow">if</span> (log_len &gt; 0) {</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;      <a class="code" href="../../dc/da3/glcorearb_8h.html#af7575655ac056b187ea385966b95a22d">GLchar</a>* log_buf = (<a class="code" href="../../dc/da3/glcorearb_8h.html#af7575655ac056b187ea385966b95a22d">GLchar</a>*)SOKOL_MALLOC(log_len);</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#ad0eeab6a26c94a0b78c04aac628e5ab5">glGetProgramInfoLog</a>(gl_prog, log_len, &amp;log_len, log_buf);</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;      SOKOL_LOG(log_buf);</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;      SOKOL_FREE(log_buf);</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;    }</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a94c0e17529ebff9ddffdf7715b2341cc">glDeleteProgram</a>(gl_prog);</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;  }</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;  shd-&gt;gl_prog = gl_prog;</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;  <span class="comment">/* resolve uniforms */</span></div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stage_index = 0; stage_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">SG_NUM_SHADER_STAGES</a>; stage_index++) {</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html">sg_shader_stage_desc</a>* stage_desc = (stage_index == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>) ? &amp;desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a> : &amp;desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>;</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;    _sg_shader_stage* stage = &amp;shd-&gt;stage[stage_index];</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;    SOKOL_ASSERT(stage-&gt;num_uniform_blocks == 0);</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ub_index = 0; ub_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>; ub_index++) {</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html">sg_shader_uniform_block_desc</a>* ub_desc = &amp;stage_desc-&gt;<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a62b1801dc0c45820abd59ac49504a318">uniform_blocks</a>[ub_index];</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;      <span class="keywordflow">if</span> (0 == ub_desc-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a>) {</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;      }</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;      _sg_uniform_block* ub = &amp;stage-&gt;uniform_blocks[ub_index];</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;      ub-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a> = ub_desc-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a>;</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;      SOKOL_ASSERT(ub-&gt;num_uniforms == 0);</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;      <span class="keywordtype">int</span> cur_uniform_offset = 0;</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> u_index = 0; u_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca746b50b205e4d09963f11f32b18c6cf9">SG_MAX_UB_MEMBERS</a>; u_index++) {</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html">sg_shader_uniform_desc</a>* u_desc = &amp;ub_desc-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#a995bb1ddede542251b268a3457ff89d1">uniforms</a>[u_index];</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;        <span class="keywordflow">if</span> (u_desc-&gt;<a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#a09493618d985e76c5160c8611624da4e">type</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2aebd4e667ec034abd1b1b5f935113fdad">SG_UNIFORMTYPE_INVALID</a>) {</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;        }</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;        _sg_uniform* u = &amp;ub-&gt;uniforms[u_index];</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;        u-&gt;<a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#a09493618d985e76c5160c8611624da4e">type</a> = u_desc-&gt;<a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#a09493618d985e76c5160c8611624da4e">type</a>;</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;        u-&gt;count = (uint8_t)_sg_def(u_desc-&gt;<a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#a13e9085423f4faf73f68ca2567a168ea">array_count</a>, 1);</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;        u-&gt;offset = (uint16_t)cur_uniform_offset;</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;        cur_uniform_offset += _sg_uniform_size(u-&gt;type, u-&gt;count);</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;        <span class="keywordflow">if</span> (u_desc-&gt;<a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#ae5acb2f7605843de918b252ce4db5d26">name</a>) {</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;          u-&gt;gl_loc = <a class="code" href="../../db/d2b/gl3w_8h.html#a10106e4be90a66213839645cf12770f9">glGetUniformLocation</a>(gl_prog, u_desc-&gt;<a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#ae5acb2f7605843de918b252ce4db5d26">name</a>);</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;          u-&gt;gl_loc = u_index;</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;        }</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;        ub-&gt;num_uniforms++;</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;      }</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;      SOKOL_ASSERT(ub_desc-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a> == cur_uniform_offset);</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;      stage-&gt;num_uniform_blocks++;</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;    }</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;  }</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;  <span class="comment">/* resolve image locations */</span></div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;  <span class="keywordtype">int</span> gl_tex_slot = 0;</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stage_index = 0; stage_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">SG_NUM_SHADER_STAGES</a>; stage_index++) {</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html">sg_shader_stage_desc</a>* stage_desc = (stage_index == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>) ? &amp;desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a> : &amp;desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>;</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    _sg_shader_stage* stage = &amp;shd-&gt;stage[stage_index];</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;    SOKOL_ASSERT(stage-&gt;num_images == 0);</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> img_index = 0; img_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>; img_index++) {</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dd/d8f/structsg__shader__image__desc.html">sg_shader_image_desc</a>* img_desc = &amp;stage_desc-&gt;<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa5ad88030a0aa4a7c8aedc31729c6c3c">images</a>[img_index];</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      <span class="keywordflow">if</span> (img_desc-&gt;<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4">type</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dae006b5445cb0f3b9c939d8074980805e">_SG_IMAGETYPE_DEFAULT</a>) {</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;      }</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;      _sg_shader_image* img = &amp;stage-&gt;images[img_index];</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;      img-&gt;<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4">type</a> = img_desc-&gt;<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4">type</a>;</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;      img-&gt;gl_loc = img_index;</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;      <span class="keywordflow">if</span> (img_desc-&gt;<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#ada7a7a8884528b37079f4c7055e15df0">name</a>) {</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;        img-&gt;gl_loc = <a class="code" href="../../db/d2b/gl3w_8h.html#a10106e4be90a66213839645cf12770f9">glGetUniformLocation</a>(gl_prog, img_desc-&gt;<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#ada7a7a8884528b37079f4c7055e15df0">name</a>);</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;      }</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;      <span class="keywordflow">if</span> (img-&gt;gl_loc != -1) {</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;        img-&gt;gl_tex_slot = gl_tex_slot++;</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;        img-&gt;gl_tex_slot = -1;</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;      }</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;      stage-&gt;num_images++;</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;    }</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;  }</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;  shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;}</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_shader(_sg_shader* shd)</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;{</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;  SOKOL_ASSERT(shd);</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;  <span class="keywordflow">if</span> (shd-&gt;gl_prog) {</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a94c0e17529ebff9ddffdf7715b2341cc">glDeleteProgram</a>(shd-&gt;gl_prog);</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;  }</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;  _sg_init_shader_slot(shd);</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;}</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_gl_load_stencil(<span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a>* src, <a class="code" href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a85e59cd56e10d0a7f49ab199f277d486">dst</a>)</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;{</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;  dst-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034">fail_op</a> = _sg_def(src-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034">fail_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>);</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;  dst-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f">depth_fail_op</a> = _sg_def(src-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f">depth_fail_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>);</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;  dst-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20">pass_op</a> = _sg_def(src-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20">pass_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>);</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;  dst-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88">compare_func</a> = _sg_def(src-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88">compare_func</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>);</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;}</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_gl_load_depth_stencil(<span class="keyword">const</span> <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html">sg_depth_stencil_state</a>* src, <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html">sg_depth_stencil_state</a>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a85e59cd56e10d0a7f49ab199f277d486">dst</a>)</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;{</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;  _sg_gl_load_stencil(&amp;src-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#ad698879849d1e77dcbbda963cd45ef79">stencil_front</a>, &amp;dst-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#ad698879849d1e77dcbbda963cd45ef79">stencil_front</a>);</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;  _sg_gl_load_stencil(&amp;src-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a28ce155156b38f16e894aa724ece3091">stencil_back</a>, &amp;dst-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a28ce155156b38f16e894aa724ece3091">stencil_back</a>);</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;  dst-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74">depth_compare_func</a> = _sg_def(src-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74">depth_compare_func</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>);</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;  dst-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292">depth_write_enabled</a> = src-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292">depth_write_enabled</a>;</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;  dst-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3">stencil_enabled</a> = src-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3">stencil_enabled</a>;</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;  dst-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">stencil_read_mask</a> = src-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">stencil_read_mask</a>;</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;  dst-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">stencil_write_mask</a> = src-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">stencil_write_mask</a>;</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;  dst-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f">stencil_ref</a> = src-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f">stencil_ref</a>;</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;}</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_gl_load_blend(<span class="keyword">const</span> <a class="code" href="../../d9/dd6/structsg__blend__state.html">sg_blend_state</a>* src, <a class="code" href="../../d9/dd6/structsg__blend__state.html">sg_blend_state</a>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a85e59cd56e10d0a7f49ab199f277d486">dst</a>)</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;{</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;  dst-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d">enabled</a> = src-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d">enabled</a>;</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;  dst-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2">src_factor_rgb</a> = _sg_def(src-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2">src_factor_rgb</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a>);</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;  dst-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3">dst_factor_rgb</a> = _sg_def(src-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3">dst_factor_rgb</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a>);</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;  dst-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884">op_rgb</a> = _sg_def(src-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884">op_rgb</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a>);</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;  dst-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f">src_factor_alpha</a> = _sg_def(src-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f">src_factor_alpha</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a>);</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;  dst-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec">dst_factor_alpha</a> = _sg_def(src-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec">dst_factor_alpha</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a>);</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;  dst-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c">op_alpha</a> = _sg_def(src-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c">op_alpha</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a>);</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;  <span class="keywordflow">if</span> (src-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a3ede6e8ea8b3558000ccf7ee0e261692">SG_COLORMASK_NONE</a>) {</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;    dst-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a> = 0;</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;    dst-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a> = (uint8_t)_sg_def((<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2">sg_color_mask</a>)src-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a6e762320d94f45741939d705166a17a2">SG_COLORMASK_RGBA</a>);</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;  }</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;    dst-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = src-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;  }</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;}</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_gl_load_rasterizer(<span class="keyword">const</span> <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html">sg_rasterizer_state</a>* src, <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html">sg_rasterizer_state</a>* dst)</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;{</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;  dst-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148">alpha_to_coverage_enabled</a> = src-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148">alpha_to_coverage_enabled</a>;</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;  dst-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">cull_mode</a> = _sg_def(src-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">cull_mode</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a131d819b6c0fe42072f7db0677941b5d">SG_CULLMODE_NONE</a>);</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;  dst-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0">face_winding</a> = _sg_def(src-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0">face_winding</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faaa4aae35b0695932b261357428ca413c">SG_FACEWINDING_CW</a>);</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;  dst-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a> = _sg_def(src-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a>, 1);</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;  dst-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">depth_bias</a> = src-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">depth_bias</a>;</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;  dst-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">depth_bias_slope_scale</a> = src-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">depth_bias_slope_scale</a>;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;  dst-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a15a60b827b6583f861bb79ff86a8383b">depth_bias_clamp</a> = src-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a15a60b827b6583f861bb79ff86a8383b">depth_bias_clamp</a>;</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;}</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_pipeline(_sg_pipeline* pip, _sg_shader* shd, <span class="keyword">const</span> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html">sg_pipeline_desc</a>* desc)</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;{</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;  SOKOL_ASSERT(pip &amp;&amp; shd &amp;&amp; desc);</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;  SOKOL_ASSERT(pip-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;  SOKOL_ASSERT(!pip-&gt;shader &amp;&amp; pip-&gt;shader_id.id == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>);</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;  SOKOL_ASSERT(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae193421a3ac922d89a9cbf55788ede65">shader</a>.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a> == shd-&gt;slot.id);</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;  SOKOL_ASSERT(shd-&gt;gl_prog);</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;  pip-&gt;shader = shd;</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;  pip-&gt;shader_id = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae193421a3ac922d89a9cbf55788ede65">shader</a>;</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;  pip-&gt;primitive_type = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a79b4b5aec590c5cbc1c1472661419bb5">primitive_type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4aa8d428001b2200f78af617997a3be81b">SG_PRIMITIVETYPE_TRIANGLES</a>);</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;  pip-&gt;index_type = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a7762d108e4ad271336c3006c84606a9f">index_type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a>);</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;  pip-&gt;color_attachment_count = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4e583154ea74b802d760f3df0c4f429a">color_attachment_count</a>, 1);</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;  pip-&gt;color_format = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#aef4624a1a4ef6da70a6ec6af5b285d36">color_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>);</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;  pip-&gt;depth_format = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#aad5418b27eace35bda553a2b371f81e3">depth_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>);</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;  pip-&gt;sample_count = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a>, 1);</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;  _sg_gl_load_depth_stencil(&amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>, &amp;pip-&gt;depth_stencil);</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;  _sg_gl_load_blend(&amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>, &amp;pip-&gt;blend);</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;  _sg_gl_load_rasterizer(&amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>, &amp;pip-&gt;rast);</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;  <span class="comment">/* resolve vertex attributes */</span></div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;  <span class="keywordtype">int</span> auto_offset[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> layout_index = 0; layout_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>; layout_index++) {</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;    auto_offset[layout_index] = 0;</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;  }</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;  <span class="keywordtype">bool</span> use_auto_offset = <span class="keyword">true</span>;</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> attr_index = 0; attr_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>; attr_index++) {</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;    pip-&gt;gl_attrs[attr_index].vb_index = -1;</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;    <span class="comment">/* to use computed offsets, *all* attr offsets must be 0 */</span></div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;    <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a19f830b45bc4289d997fd51604a5e4f1">attrs</a>[attr_index].<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a987b32666e62b0aa825701c0ac03484e">offset</a> != 0) {</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;      use_auto_offset = <span class="keyword">false</span>;</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;    }</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;  }</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> attr_index = 0; attr_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>; attr_index++) {</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html">sg_vertex_attr_desc</a>* a_desc = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a19f830b45bc4289d997fd51604a5e4f1">attrs</a>[attr_index];</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;    <span class="keywordflow">if</span> (a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa2537db7b2956137a3fbe5a8929c01f5">SG_VERTEXFORMAT_INVALID</a>) {</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;    }</div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;    SOKOL_ASSERT((a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a> &gt;= 0) &amp;&amp; (a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a> &lt; SG_MAX_SHADERSTAGE_BUFFERS));</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html">sg_buffer_layout_desc</a>* l_desc = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a956d4bf59180e48cdfb5bcc00b0c7012">buffers</a>[a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>];</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6">sg_vertex_step</a> step_func = _sg_def(l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#a31db96a851271a5c840fbd63ba461577">step_func</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a84ea40a12ba85ca0542460d0624b88b5">SG_VERTEXSTEP_PER_VERTEX</a>);</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> step_rate = _sg_def(l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#a459ba52adfdcd699fdf29ecd13a702b4">step_rate</a>, 1);</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;    <a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a> attr_loc = attr_index;</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;    <span class="keywordflow">if</span> (a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a357b733993ec8e744fe6dc6bd2a3d060">name</a>) {</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;      attr_loc = <a class="code" href="../../db/d2b/gl3w_8h.html#a20f33502cbda8885498352fcdbf71fe8">glGetAttribLocation</a>(pip-&gt;shader-&gt;gl_prog, a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a357b733993ec8e744fe6dc6bd2a3d060">name</a>);</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;    }</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;    SOKOL_ASSERT(attr_loc &lt; SG_MAX_VERTEX_ATTRIBUTES);</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;    <span class="keywordflow">if</span> (attr_loc != -1) {</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;      _sg_gl_attr* gl_attr = &amp;pip-&gt;gl_attrs[attr_loc];</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;      SOKOL_ASSERT(gl_attr-&gt;vb_index == -1);</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;      gl_attr-&gt;vb_index = (int8_t)a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>;</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;      <a class="code" href="../../df/d18/namespaceo2_1_1mid.html#ace6b84ba8e24525ead602cbda42f1bfb">if</a> (step_func == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a84ea40a12ba85ca0542460d0624b88b5">SG_VERTEXSTEP_PER_VERTEX</a>) {</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;        gl_attr-&gt;divisor = 0;</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;        gl_attr-&gt;divisor = (int8_t)step_rate;</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;      }</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;      gl_attr-&gt;stride = (uint8_t)l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#aab7f169abb46eecbecaec8e9d0d2f6f5">stride</a>;</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;      gl_attr-&gt;offset = use_auto_offset ? auto_offset[a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>] : a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a987b32666e62b0aa825701c0ac03484e">offset</a>;</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;      gl_attr-&gt;size = (uint8_t)_sg_gl_vertexformat_size(a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a>);</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;      gl_attr-&gt;type = _sg_gl_vertexformat_type(a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a>);</div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;      gl_attr-&gt;normalized = _sg_gl_vertexformat_normalized(a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a>);</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;      pip-&gt;vertex_layout_valid[a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;      SOKOL_LOG(<span class="stringliteral">&quot;Vertex attribute not found in shader: &quot;</span>);</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;      SOKOL_LOG(a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a357b733993ec8e744fe6dc6bd2a3d060">name</a>);</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;    }</div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;    auto_offset[a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>] += _sg_vertexformat_bytesize(a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a>);</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;  }</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;  <span class="comment">/* fill computed vertex strides that haven&#39;t been explicitely provided */</span></div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> attr_index = 0; attr_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>; attr_index++) {</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;    _sg_gl_attr* gl_attr = &amp;pip-&gt;gl_attrs[attr_index];</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;    <span class="keywordflow">if</span> ((gl_attr-&gt;vb_index != -1) &amp;&amp; (0 == gl_attr-&gt;stride)) {</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;      gl_attr-&gt;stride = (uint8_t)auto_offset[gl_attr-&gt;vb_index];</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;    }</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;  }</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;  pip-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;}</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_pipeline(_sg_pipeline* pip)</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;{</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;  SOKOL_ASSERT(pip);</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;  _sg_init_pipeline_slot(pip);</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;}</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;<span class="comment">    _sg_create_pass</span></div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;<span class="comment">    att_imgs must point to a _sg_image* att_imgs[SG_MAX_COLOR_ATTACHMENTS+1] array,</span></div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;<span class="comment">    first entries are the color attachment images (or nullptr), last entry</span></div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;<span class="comment">    is the depth-stencil image (or nullptr).</span></div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_pass(_sg_pass* pass, _sg_image** att_images, <span class="keyword">const</span> <a class="code" href="../../d4/d2b/structsg__pass__desc.html">sg_pass_desc</a>* desc)</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;{</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;  SOKOL_ASSERT(pass &amp;&amp; att_images &amp;&amp; desc);</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;  SOKOL_ASSERT(pass-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;  SOKOL_ASSERT(att_images &amp;&amp; att_images[0]);</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;  <span class="comment">/* copy image pointers and desc attributes */</span></div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d1/da2/structsg__attachment__desc.html">sg_attachment_desc</a>* att_desc;</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;  _sg_attachment* att;</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;    SOKOL_ASSERT(<span class="keyword">nullptr</span> == pass-&gt;color_atts[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].image);</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;    att_desc = &amp;desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a0671a1bca34513d50f88c551408643d5">color_attachments</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;    <span class="keywordflow">if</span> (att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;      pass-&gt;num_color_atts++;</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;      SOKOL_ASSERT(att_images[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] &amp;&amp; (att_images[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;slot.id == att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>));</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;      SOKOL_ASSERT(_sg_is_valid_rendertarget_color_format(att_images[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;pixel_format));</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;      att = &amp;pass-&gt;color_atts[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;      SOKOL_ASSERT((att-&gt;image == <span class="keyword">nullptr</span>) &amp;&amp; (att-&gt;image_id.id == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>));</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;      att-&gt;image = att_images[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;      att-&gt;image_id = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>;</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;      att-&gt;mip_level = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>;</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;      att-&gt;slice = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a91d437e248352612f03c15cf47b2dd35">slice</a>;</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;    }</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;  }</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;  SOKOL_ASSERT(<span class="keyword">nullptr</span> == pass-&gt;ds_att.image);</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;  att_desc = &amp;desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a75a23624c5d16d675a70e62f6ce9ba70">depth_stencil_attachment</a>;</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> ds_img_index = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>;</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;  <span class="keywordflow">if</span> (att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;    SOKOL_ASSERT(att_images[ds_img_index] &amp;&amp; (att_images[ds_img_index]-&gt;slot.id == att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>));</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;    SOKOL_ASSERT(_sg_is_valid_rendertarget_depth_format(att_images[ds_img_index]-&gt;pixel_format));</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;    att = &amp;pass-&gt;ds_att;</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;    SOKOL_ASSERT((att-&gt;image == <span class="keyword">nullptr</span>) &amp;&amp; (att-&gt;image_id.id == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>));</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;    att-&gt;image = att_images[ds_img_index];</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;    att-&gt;image_id = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>;</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;    att-&gt;mip_level = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>;</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;    att-&gt;slice = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a91d437e248352612f03c15cf47b2dd35">slice</a>;</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;  }</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;  <span class="comment">/* store current framebuffer binding (restored at end of function) */</span></div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_orig_fb;</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a70ad6a21033347a0478dad517dd2bb83">glGetIntegerv</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ab2fc7d11690bc1e7a8800aef2a175a6c">GL_FRAMEBUFFER_BINDING</a>, (<a class="code" href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a>*)&amp;gl_orig_fb);</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;  <span class="comment">/* create a framebuffer object */</span></div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#afa884c4d2bb798b2161823f81ad56bce">glGenFramebuffers</a>(1, &amp;pass-&gt;gl_fb);</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, pass-&gt;gl_fb);</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;  <span class="comment">/* attach msaa render buffer or textures */</span></div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> is_msaa = (0 != att_images[0]-&gt;gl_msaa_render_buffer);</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;  <span class="keywordflow">if</span> (is_msaa) {</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;      <span class="keyword">const</span> _sg_image* att_img = pass-&gt;color_atts[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].image;</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;      <span class="keywordflow">if</span> (att_img) {</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_render_buffer = att_img-&gt;gl_msaa_render_buffer;</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;        SOKOL_ASSERT(gl_render_buffer);</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#aa915643d0b21023b01d4dc82f69e5646">glFramebufferRenderbuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a> + <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a>, gl_render_buffer);</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;      }</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;    }</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;      <span class="keyword">const</span> _sg_image* att_img = pass-&gt;color_atts[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].image;</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> mip_level = pass-&gt;color_atts[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].mip_level;</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> slice = pass-&gt;color_atts[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].slice;</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;      <span class="keywordflow">if</span> (att_img) {</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_tex = att_img-&gt;gl_tex[0];</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;        SOKOL_ASSERT(gl_tex);</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_att = <a class="code" href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a> + <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;        <span class="keywordflow">switch</span> (att_img-&gt;type) {</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a>:</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;            <a class="code" href="../../db/d2b/gl3w_8h.html#a3fb0b694bf693bcd13fae76b3213ba92">glFramebufferTexture2D</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, gl_att, <a class="code" href="../../dc/da3/glcorearb_8h.html#ad4de17abefa73fa2ef53379f73b734be">GL_TEXTURE_2D</a>, gl_tex, mip_level);</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>:</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;            <a class="code" href="../../db/d2b/gl3w_8h.html#a3fb0b694bf693bcd13fae76b3213ba92">glFramebufferTexture2D</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, gl_att, _sg_gl_cubeface_target(slice), gl_tex, mip_level);</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;          <span class="keywordflow">default</span>:</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;<span class="comment">/* 3D- or array-texture */</span></div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;            <span class="keywordflow">if</span> (!_sg_gl_gles2) {</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;              <a class="code" href="../../db/d2b/gl3w_8h.html#a65e19bfeb1feac01b9f4df7d5fdb5202">glFramebufferTextureLayer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, gl_att, gl_tex, mip_level, slice);</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;            }</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;        }</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;      }</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;    }</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;  }</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;  <span class="comment">/* attach depth-stencil buffer to framebuffer */</span></div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;  <span class="keywordflow">if</span> (pass-&gt;ds_att.image) {</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_render_buffer = pass-&gt;ds_att.image-&gt;gl_depth_render_buffer;</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;    SOKOL_ASSERT(gl_render_buffer);</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#aa915643d0b21023b01d4dc82f69e5646">glFramebufferRenderbuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#ac4dc812a285640570b56acc55822dffe">GL_DEPTH_ATTACHMENT</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a>, gl_render_buffer);</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;    <span class="keywordflow">if</span> (_sg_is_depth_stencil_format(pass-&gt;ds_att.image-&gt;pixel_format)) {</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#aa915643d0b21023b01d4dc82f69e5646">glFramebufferRenderbuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#aecefebb35dbd5ba89022d6588c42de81">GL_STENCIL_ATTACHMENT</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a>, gl_render_buffer);</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;    }</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;  }</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;  <span class="comment">/* check if framebuffer is complete */</span></div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../db/d2b/gl3w_8h.html#a2097cfa52d11568f886cf6d3cf888f1c">glCheckFramebufferStatus</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>) != <a class="code" href="../../dc/da3/glcorearb_8h.html#a7a5ca562c069ca1294283df0c7d192ad">GL_FRAMEBUFFER_COMPLETE</a>) {</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;Framebuffer completeness check failed!\n&quot;</span>);</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;    pass-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;  }</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;  <span class="comment">/* create MSAA resolve framebuffers if necessary */</span></div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;  <span class="keywordflow">if</span> (is_msaa) {</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;      att = &amp;pass-&gt;color_atts[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;      <span class="keywordflow">if</span> (att-&gt;image) {</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;        SOKOL_ASSERT(0 == att-&gt;gl_msaa_resolve_buffer);</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#afa884c4d2bb798b2161823f81ad56bce">glGenFramebuffers</a>(1, &amp;att-&gt;gl_msaa_resolve_buffer);</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, att-&gt;gl_msaa_resolve_buffer);</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_tex = att-&gt;image-&gt;gl_tex[0];</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;        SOKOL_ASSERT(gl_tex);</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;        <span class="keywordflow">switch</span> (att-&gt;image-&gt;type) {</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a>:</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;            <a class="code" href="../../db/d2b/gl3w_8h.html#a3fb0b694bf693bcd13fae76b3213ba92">glFramebufferTexture2D</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a>,</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;                                   <a class="code" href="../../dc/da3/glcorearb_8h.html#ad4de17abefa73fa2ef53379f73b734be">GL_TEXTURE_2D</a>, gl_tex, att-&gt;mip_level);</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>:</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;            <a class="code" href="../../db/d2b/gl3w_8h.html#a3fb0b694bf693bcd13fae76b3213ba92">glFramebufferTexture2D</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a>,</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;                                   _sg_gl_cubeface_target(att-&gt;slice), gl_tex, att-&gt;mip_level);</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;          <span class="keywordflow">default</span>:</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;            <span class="keywordflow">if</span> (!_sg_gl_gles2) {</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;              <a class="code" href="../../db/d2b/gl3w_8h.html#a65e19bfeb1feac01b9f4df7d5fdb5202">glFramebufferTextureLayer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a>, gl_tex, att-&gt;mip_level, att-&gt;slice);</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;            }</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;        }</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;        <span class="comment">/* check if framebuffer is complete */</span></div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../db/d2b/gl3w_8h.html#a2097cfa52d11568f886cf6d3cf888f1c">glCheckFramebufferStatus</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>) != <a class="code" href="../../dc/da3/glcorearb_8h.html#a7a5ca562c069ca1294283df0c7d192ad">GL_FRAMEBUFFER_COMPLETE</a>) {</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;          SOKOL_LOG(<span class="stringliteral">&quot;Framebuffer completeness check failed (msaa resolve buffer)!\n&quot;</span>);</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;          pass-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;          <span class="keywordflow">return</span>;</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;        }</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;      }</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;    }</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;  }</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;  <span class="comment">/* restore original framebuffer binding */</span></div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, gl_orig_fb);</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;  pass-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;}</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_pass(_sg_pass* pass)</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;{</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;  SOKOL_ASSERT(pass);</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;  <span class="keywordflow">if</span> (0 != pass-&gt;gl_fb) {</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#aa7c5c636d1f609455e73ceee2eed8ba1">glDeleteFramebuffers</a>(1, &amp;pass-&gt;gl_fb);</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;  }</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;    <span class="keywordflow">if</span> (pass-&gt;color_atts[i].gl_msaa_resolve_buffer) {</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#aa7c5c636d1f609455e73ceee2eed8ba1">glDeleteFramebuffers</a>(1, &amp;pass-&gt;color_atts[i].gl_msaa_resolve_buffer);</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;    }</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;  }</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;  <span class="keywordflow">if</span> (pass-&gt;ds_att.gl_msaa_resolve_buffer) {</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#aa7c5c636d1f609455e73ceee2eed8ba1">glDeleteFramebuffers</a>(1, &amp;pass-&gt;ds_att.gl_msaa_resolve_buffer);</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;  }</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;  _sg_init_pass_slot(pass);</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;}</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;<span class="comment">/*-- GL backend rendering functions ------------------------------------------*/</span></div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_begin_pass(_sg_pass* pass, <span class="keyword">const</span> <a class="code" href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a>* action, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#afa0fb1b5e976920c0abeff2dca3ed774">h</a>)</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;{</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;  <span class="comment">/* FIXME: what if a texture used as render target is still bound, should we</span></div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;<span class="comment">       unbind all currently bound textures in begin pass? */</span></div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;  SOKOL_ASSERT(action);</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;  SOKOL_ASSERT(!_sg_gl.in_pass);</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;  _sg_gl.in_pass = <span class="keyword">true</span>;</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;  _sg_gl.cur_pass = pass; <span class="comment">/* can be 0 */</span></div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;  <span class="keywordflow">if</span> (pass) {</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;    _sg_gl.cur_pass_id.id = pass-&gt;slot.id;</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;    _sg_gl.cur_pass_id.id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;  }</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;  _sg_gl.cur_pass_width = <a class="code" href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a>;</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;  _sg_gl.cur_pass_height = <a class="code" href="../../dc/da3/glcorearb_8h.html#afa0fb1b5e976920c0abeff2dca3ed774">h</a>;</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;  <span class="keywordflow">if</span> (pass) {</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;    <span class="comment">/* offscreen pass */</span></div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;    SOKOL_ASSERT(pass-&gt;gl_fb);</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, pass-&gt;gl_fb);</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;    <span class="keywordflow">if</span> (!_sg_gl_gles2) {</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;      <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> att[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>] = {</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;        <a class="code" href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a>,</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;        <a class="code" href="../../dc/da3/glcorearb_8h.html#a6f0a4fa89d82b4517520f643406a2a37">GL_COLOR_ATTACHMENT1</a>,</div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;        <a class="code" href="../../dc/da3/glcorearb_8h.html#a66babbe2e30a6fed6c6c60eae6453391">GL_COLOR_ATTACHMENT2</a>,</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;        <a class="code" href="../../dc/da3/glcorearb_8h.html#a7695a13f8c89798a34cbe627f876cd40">GL_COLOR_ATTACHMENT3</a>};</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;      <span class="keywordtype">int</span> num_attrs = 0;</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;        <span class="keywordflow">if</span> (pass-&gt;color_atts[num_attrs].image) {</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;          num_attrs++;</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;        }</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;      }</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#ae4f8384133dc7f9a68ffde907193ca68">glDrawBuffers</a>(num_attrs, att);</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;    }</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;    <span class="comment">/* default pass */</span></div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;    SOKOL_ASSERT(_sg_gl.cur_context);</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, _sg_gl.cur_context-&gt;default_framebuffer);</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;  }</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#ab54b002beb984f066acd0dd7fff469dc">glViewport</a>(0, 0, w, h);</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a59fda0798af5145c920422ba0bd28bac">glScissor</a>(0, 0, w, h);</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;  <span class="keywordtype">bool</span> need_pip_cache_flush = <span class="keyword">false</span>;</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;  <span class="keywordflow">if</span> (_sg_gl.cache.blend.color_write_mask != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a6e762320d94f45741939d705166a17a2">SG_COLORMASK_RGBA</a>) {</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;    need_pip_cache_flush = <span class="keyword">true</span>;</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;    _sg_gl.cache.blend.color_write_mask = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a6e762320d94f45741939d705166a17a2">SG_COLORMASK_RGBA</a>;</div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a7a28e4c732415129acb357af17c469f6">glColorMask</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a06316bc3c17db78ce93419fb208945ba">GL_TRUE</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a06316bc3c17db78ce93419fb208945ba">GL_TRUE</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a06316bc3c17db78ce93419fb208945ba">GL_TRUE</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a06316bc3c17db78ce93419fb208945ba">GL_TRUE</a>);</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;  }</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;  <span class="keywordflow">if</span> (!_sg_gl.cache.ds.depth_write_enabled) {</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;    need_pip_cache_flush = <span class="keyword">true</span>;</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;    _sg_gl.cache.ds.depth_write_enabled = <span class="keyword">true</span>;</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a93d8da71f9a009043f304be589ed00db">glDepthMask</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a06316bc3c17db78ce93419fb208945ba">GL_TRUE</a>);</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;  }</div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;  <span class="keywordflow">if</span> (_sg_gl.cache.ds.depth_compare_func != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>) {</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;    need_pip_cache_flush = <span class="keyword">true</span>;</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;    _sg_gl.cache.ds.depth_compare_func = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>;</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a5489df792b3263170eea381093ee6111">glDepthFunc</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a065314e6648fa794d9cf5872ebb9d776">GL_ALWAYS</a>);</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;  }</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;  <span class="keywordflow">if</span> (_sg_gl.cache.ds.stencil_write_mask != 0xFF) {</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;    need_pip_cache_flush = <span class="keyword">true</span>;</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;    _sg_gl.cache.ds.stencil_write_mask = 0xFF;</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#acd5fc46c59e53fdab78011888f7b1d8f">glStencilMask</a>(0xFF);</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;  }</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;  <span class="keywordflow">if</span> (need_pip_cache_flush) {</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;    <span class="comment">/* we messed with the state cache directly, need to clear cached</span></div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;<span class="comment">           pipeline to force re-evaluation in next sg_apply_draw_state() */</span></div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    _sg_gl.cache.cur_pipeline = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;    _sg_gl.cache.cur_pipeline_id.id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;  }</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;  <span class="keywordtype">bool</span> use_mrt_clear = (<span class="keyword">nullptr</span> != pass);</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLES2)</span></div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;  use_mrt_clear = <span class="keyword">false</span>;</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;  <span class="keywordflow">if</span> (_sg_gl_gles2) {</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;    use_mrt_clear = <span class="keyword">false</span>;</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;  }</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;  <span class="keywordflow">if</span> (!use_mrt_clear) {</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;    <a class="code" href="../../dc/da3/glcorearb_8h.html#a0fb936f29008789fb46b434319f68cc9">GLbitfield</a> clear_mask = 0;</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;    <span class="keywordflow">if</span> (action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[0].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#ae5313aebc0025fd61a3f22c4acdcf3fd">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>) {</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;      clear_mask |= <a class="code" href="../../dc/da3/glcorearb_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a>;</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span>* <a class="code" href="../../d8/de9/qconfigoptions_8h.html#af50954f6efd5209b2328d33cd185f87e">c</a> = action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[0].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#af2c2a030aa781f28b469a109d60c5db7">val</a>;</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a12060509af7dc9c8353810eb8b7f145c">glClearColor</a>(c[0], c[1], c[2], c[3]);</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;    }</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;    <span class="keywordflow">if</span> (action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#afd874c73b9eeb2251453c66f88d620f9">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>) {</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;      clear_mask |= <a class="code" href="../../dc/da3/glcorearb_8h.html#aef2a9e9a4b130bc4de57514327847b4f">GL_DEPTH_BUFFER_BIT</a>;</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;<span class="preprocessor">#ifdef SOKOL_GLCORE33</span></div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a5e730f2f937dd3ff1acf2cac8671fa39">glClearDepth</a>(action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#ae78551ad85b038b6431f32d1c1916ccb">val</a>);</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a8ddffb52ed169e47b870ae61c079e856">glClearDepthf</a>(action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#ae78551ad85b038b6431f32d1c1916ccb">val</a>);</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;    }</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;    <span class="keywordflow">if</span> (action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a322952eff6dc16d2ac27d6f98973a579">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>) {</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;      clear_mask |= <a class="code" href="../../dc/da3/glcorearb_8h.html#abe3e281237b175db178879e0988f5a78">GL_STENCIL_BUFFER_BIT</a>;</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#aaf5c676d6310526bd8b372ead70237c7">glClearStencil</a>(action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a5d4b67c71980cd17fb1ac7f0978b222f">val</a>);</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;    }</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;    <span class="keywordflow">if</span> (0 != clear_mask) {</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#afc250a2b6bf11f24bb73534a2f053c0d">glClear</a>(clear_mask);</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;    }</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;  }</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;<span class="preprocessor">#if !defined SOKOL_GLES2</span></div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;  <span class="keywordflow">else</span> {</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;    SOKOL_ASSERT(pass);</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;      <span class="keywordflow">if</span> (pass-&gt;color_atts[i].image) {</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;        <span class="keywordflow">if</span> (action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[i].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#ae5313aebc0025fd61a3f22c4acdcf3fd">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>) {</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#adb00133bd8755da072d5af25a006d3b7">glClearBufferfv</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a59bce1439c94ef9da87f83508eabb20a">GL_COLOR</a>, i, action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[i].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#af2c2a030aa781f28b469a109d60c5db7">val</a>);</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;        }</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;      }</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;    }</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;    <span class="keywordflow">if</span> (pass-&gt;ds_att.image) {</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;      <span class="keywordflow">if</span> ((action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#afd874c73b9eeb2251453c66f88d620f9">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>) &amp;&amp; (action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a322952eff6dc16d2ac27d6f98973a579">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>)) {</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#adc37c7810a40666881e50e11cb01d066">glClearBufferfi</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aaec6f87dc3b72b3175f3e127062cfc5b">GL_DEPTH_STENCIL</a>, 0, action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#ae78551ad85b038b6431f32d1c1916ccb">val</a>, action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a5d4b67c71980cd17fb1ac7f0978b222f">val</a>);</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#afd874c73b9eeb2251453c66f88d620f9">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>) {</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#adb00133bd8755da072d5af25a006d3b7">glClearBufferfv</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a982341cb30016caa07a4e46228a71ffa">GL_DEPTH</a>, 0, &amp;action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#ae78551ad85b038b6431f32d1c1916ccb">val</a>);</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a322952eff6dc16d2ac27d6f98973a579">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>) {</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;        <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa857b95cc76669c2a9109239ef40a47c">val</a> = action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a5d4b67c71980cd17fb1ac7f0978b222f">val</a>;</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a0248c7c634420ac6b01adb353da1e35f">glClearBufferuiv</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a5f70831ab0735b4ed4292888578477d4">GL_STENCIL</a>, 0, &amp;val);</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;      }</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;    }</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;  }</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;}</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_end_pass()</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;{</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;  SOKOL_ASSERT(_sg_gl.in_pass);</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;<span class="comment">/* if this was an offscreen pass, and MSAA rendering was used, need</span></div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;<span class="comment">       to resolve into the pass images */</span></div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;  <span class="keywordflow">if</span> (!_sg_gl_gles2 &amp;&amp; _sg_gl.cur_pass) {</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    <span class="comment">/* check if the pass object is still valid */</span></div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;    <span class="keyword">const</span> _sg_pass* pass = _sg_gl.cur_pass;</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;    SOKOL_ASSERT(pass-&gt;slot.id == _sg_gl.cur_pass_id.id);</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;    <span class="keywordtype">bool</span> is_msaa = (0 != _sg_gl.cur_pass-&gt;color_atts[0].gl_msaa_resolve_buffer);</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;    <span class="keywordflow">if</span> (is_msaa) {</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;      SOKOL_ASSERT(pass-&gt;gl_fb);</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ab54b4b110b532b903bf44599fd6a1b2c">GL_READ_FRAMEBUFFER</a>, pass-&gt;gl_fb);</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;      SOKOL_ASSERT(pass-&gt;color_atts[0].image);</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> w = pass-&gt;color_atts[0].image-&gt;width;</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> h = pass-&gt;color_atts[0].image-&gt;height;</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> att_index = 0; att_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; att_index++) {</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;        <span class="keyword">const</span> _sg_attachment* att = &amp;pass-&gt;color_atts[att_index];</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;        <span class="keywordflow">if</span> (att-&gt;image) {</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;          SOKOL_ASSERT(att-&gt;gl_msaa_resolve_buffer);</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a7ebcdfa478fe099b5ab4a5399fe37ddb">GL_DRAW_FRAMEBUFFER</a>, att-&gt;gl_msaa_resolve_buffer);</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a5810aaf501d0a2a090f46a7f2121e4e7">glReadBuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a> + att_index);</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_att = <a class="code" href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a>;</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#ae4f8384133dc7f9a68ffde907193ca68">glDrawBuffers</a>(1, &amp;gl_att);</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a2196ee41f55215dd32571970c7be9a0a">glBlitFramebuffer</a>(0, 0, w, h, 0, 0, w, h, <a class="code" href="../../dc/da3/glcorearb_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a>, <a class="code" href="../../dc/da3/glcorearb_8h.html#a7ec02582a9b1c390908a2230c8e26c0b">GL_NEAREST</a>);</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;        }</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;      }</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;    }</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;  }</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;  _sg_gl.cur_pass = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;  _sg_gl.cur_pass_id.id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;  _sg_gl.cur_pass_width = 0;</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;  _sg_gl.cur_pass_height = 0;</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;  SOKOL_ASSERT(_sg_gl.cur_context);</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a>, _sg_gl.cur_context-&gt;default_framebuffer);</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;  _sg_gl.in_pass = <span class="keyword">false</span>;</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;}</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_apply_viewport(<span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">bool</span> origin_top_left)</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;{</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;  SOKOL_ASSERT(_sg_gl.in_pass);</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;  y = origin_top_left ? (_sg_gl.cur_pass_height - (y + <a class="code" href="../../dc/da3/glcorearb_8h.html#afa0fb1b5e976920c0abeff2dca3ed774">h</a>)) : y;</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#ab54b002beb984f066acd0dd7fff469dc">glViewport</a>(x, y, w, h);</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;}</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_apply_scissor_rect(<span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">bool</span> origin_top_left)</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;{</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;  SOKOL_ASSERT(_sg_gl.in_pass);</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;  y = origin_top_left ? (_sg_gl.cur_pass_height - (y + <a class="code" href="../../dc/da3/glcorearb_8h.html#afa0fb1b5e976920c0abeff2dca3ed774">h</a>)) : y;</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a59fda0798af5145c920422ba0bd28bac">glScissor</a>(x, y, w, h);</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;}</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_apply_draw_state(</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;  _sg_pipeline* pip,</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;  _sg_buffer** vbs, <span class="keyword">const</span> uint32_t* vb_offsets, <span class="keywordtype">int</span> num_vbs,</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;  _sg_buffer* ib, uint32_t ib_offset,</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;  _sg_image** vs_imgs, <span class="keywordtype">int</span> num_vs_imgs,</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;  _sg_image** fs_imgs, <span class="keywordtype">int</span> num_fs_imgs)</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;{</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;  SOKOL_ASSERT(pip);</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;  SOKOL_ASSERT(pip-&gt;shader);</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;  _SOKOL_UNUSED(num_fs_imgs);</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;  _SOKOL_UNUSED(num_vs_imgs);</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;  _SOKOL_UNUSED(num_vbs);</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;  <span class="comment">/* need to apply pipeline state? */</span></div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;  <span class="keywordflow">if</span> ((_sg_gl.cache.cur_pipeline != pip) || (_sg_gl.cache.cur_pipeline_id.id != pip-&gt;slot.id)) {</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;    _sg_gl.cache.cur_pipeline = pip;</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;    _sg_gl.cache.cur_pipeline_id.id = pip-&gt;slot.id;</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;    _sg_gl.cache.cur_primitive_type = _sg_gl_primitive_type(pip-&gt;primitive_type);</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;    _sg_gl.cache.cur_index_type = _sg_gl_index_type(pip-&gt;index_type);</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;    <span class="comment">/* update depth-stencil state */</span></div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html">sg_depth_stencil_state</a>* new_ds = &amp;pip-&gt;depth_stencil;</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;    <a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html">sg_depth_stencil_state</a>* cache_ds = &amp;_sg_gl.cache.ds;</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;    <span class="keywordflow">if</span> (new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74">depth_compare_func</a> != cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74">depth_compare_func</a>) {</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;      cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74">depth_compare_func</a> = new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74">depth_compare_func</a>;</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a5489df792b3263170eea381093ee6111">glDepthFunc</a>(_sg_gl_compare_func(new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74">depth_compare_func</a>));</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;    }</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;    <span class="keywordflow">if</span> (new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292">depth_write_enabled</a> != cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292">depth_write_enabled</a>) {</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;      cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292">depth_write_enabled</a> = new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292">depth_write_enabled</a>;</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a93d8da71f9a009043f304be589ed00db">glDepthMask</a>(new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292">depth_write_enabled</a>);</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;    }</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;    <span class="keywordflow">if</span> (new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3">stencil_enabled</a> != cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3">stencil_enabled</a>) {</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;      cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3">stencil_enabled</a> = new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3">stencil_enabled</a>;</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;      <span class="keywordflow">if</span> (new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3">stencil_enabled</a>)</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4f0fd22afde7215e4412dafa5e522097">GL_STENCIL_TEST</a>);</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a4f0fd22afde7215e4412dafa5e522097">GL_STENCIL_TEST</a>);</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;    }</div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    <span class="keywordflow">if</span> (new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">stencil_write_mask</a> != cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">stencil_write_mask</a>) {</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;      cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">stencil_write_mask</a> = new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">stencil_write_mask</a>;</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#acd5fc46c59e53fdab78011888f7b1d8f">glStencilMask</a>(new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">stencil_write_mask</a>);</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;    }</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; i++) {</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a>* new_ss = (i == 0) ? &amp;new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#ad698879849d1e77dcbbda963cd45ef79">stencil_front</a> : &amp;new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a28ce155156b38f16e894aa724ece3091">stencil_back</a>;</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;      <a class="code" href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a>* cache_ss = (i == 0) ? &amp;cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#ad698879849d1e77dcbbda963cd45ef79">stencil_front</a> : &amp;cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a28ce155156b38f16e894aa724ece3091">stencil_back</a>;</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;      <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_face = (i == 0) ? <a class="code" href="../../dc/da3/glcorearb_8h.html#ad66599a87de5c80f8c174da72080a811">GL_FRONT</a> : <a class="code" href="../../dc/da3/glcorearb_8h.html#a688ad6fbf908a39f7197da6d4e4dd083">GL_BACK</a>;</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;      <span class="keywordflow">if</span> ((new_ss-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88">compare_func</a> != cache_ss-&gt;compare_func) ||</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;          (new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">stencil_read_mask</a> != cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">stencil_read_mask</a>) ||</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;          (new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f">stencil_ref</a> != cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f">stencil_ref</a>)) {</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;        cache_ss-&gt;compare_func = new_ss-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88">compare_func</a>;</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a70008734d7c535e7f41e5283b3c2091b">glStencilFuncSeparate</a>(gl_face,</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;                              _sg_gl_compare_func(new_ss-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88">compare_func</a>),</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;                              new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f">stencil_ref</a>,</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;                              new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">stencil_read_mask</a>);</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;      }</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;      <span class="keywordflow">if</span> ((new_ss-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034">fail_op</a> != cache_ss-&gt;fail_op) ||</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;          (new_ss-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f">depth_fail_op</a> != cache_ss-&gt;depth_fail_op) ||</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;          (new_ss-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20">pass_op</a> != cache_ss-&gt;pass_op)) {</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;        cache_ss-&gt;fail_op = new_ss-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034">fail_op</a>;</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;        cache_ss-&gt;depth_fail_op = new_ss-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f">depth_fail_op</a>;</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;        cache_ss-&gt;pass_op = new_ss-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20">pass_op</a>;</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a24f4f4542ac907e9c4e89e689966890f">glStencilOpSeparate</a>(gl_face,</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;                            _sg_gl_stencil_op(new_ss-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034">fail_op</a>),</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;                            _sg_gl_stencil_op(new_ss-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f">depth_fail_op</a>),</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;                            _sg_gl_stencil_op(new_ss-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20">pass_op</a>));</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;      }</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;    }</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;    cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">stencil_read_mask</a> = new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">stencil_read_mask</a>;</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;    cache_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f">stencil_ref</a> = new_ds-&gt;<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f">stencil_ref</a>;</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;    <span class="comment">/* update blend state */</span></div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/dd6/structsg__blend__state.html">sg_blend_state</a>* new_b = &amp;pip-&gt;blend;</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;    <a class="code" href="../../d9/dd6/structsg__blend__state.html">sg_blend_state</a>* cache_b = &amp;_sg_gl.cache.blend;</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;    <span class="keywordflow">if</span> (new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d">enabled</a> != cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d">enabled</a>) {</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;      cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d">enabled</a> = new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d">enabled</a>;</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;      <span class="keywordflow">if</span> (new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d">enabled</a>)</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa290e8f9ee6f6862778355aa22bb0b13">GL_BLEND</a>);</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa290e8f9ee6f6862778355aa22bb0b13">GL_BLEND</a>);</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;    }</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;    <span class="keywordflow">if</span> ((new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2">src_factor_rgb</a> != cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2">src_factor_rgb</a>) ||</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;        (new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3">dst_factor_rgb</a> != cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3">dst_factor_rgb</a>) ||</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;        (new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f">src_factor_alpha</a> != cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f">src_factor_alpha</a>) ||</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;        (new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec">dst_factor_alpha</a> != cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec">dst_factor_alpha</a>)) {</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;      cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2">src_factor_rgb</a> = new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2">src_factor_rgb</a>;</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;      cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3">dst_factor_rgb</a> = new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3">dst_factor_rgb</a>;</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;      cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f">src_factor_alpha</a> = new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f">src_factor_alpha</a>;</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;      cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec">dst_factor_alpha</a> = new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec">dst_factor_alpha</a>;</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a21f7fd667bd8822adaf1a45cc1c1a116">glBlendFuncSeparate</a>(_sg_gl_blend_factor(new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2">src_factor_rgb</a>),</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;                          _sg_gl_blend_factor(new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3">dst_factor_rgb</a>),</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;                          _sg_gl_blend_factor(new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f">src_factor_alpha</a>),</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;                          _sg_gl_blend_factor(new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec">dst_factor_alpha</a>));</div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;    }</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;    <span class="keywordflow">if</span> ((new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884">op_rgb</a> != cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884">op_rgb</a>) || (new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c">op_alpha</a> != cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c">op_alpha</a>)) {</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;      cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884">op_rgb</a> = new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884">op_rgb</a>;</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;      cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c">op_alpha</a> = new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c">op_alpha</a>;</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#af07e9596f4c8bb748c5e64d1cff6ca35">glBlendEquationSeparate</a>(_sg_gl_blend_op(new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884">op_rgb</a>), _sg_gl_blend_op(new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c">op_alpha</a>));</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;    }</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;    <span class="keywordflow">if</span> (new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a> != cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a>) {</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;      cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a> = new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a>;</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a7a28e4c732415129acb357af17c469f6">glColorMask</a>((new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a> &amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a1c86758e08ef3870ba966a2f83289407">SG_COLORMASK_R</a>) != 0,</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;                  (new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a> &amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2af61dc51ca3ada44f11e59503180a47c6">SG_COLORMASK_G</a>) != 0,</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;                  (new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a> &amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a072e65e21856ed2801874122723ab20d">SG_COLORMASK_B</a>) != 0,</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;                  (new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a> &amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2adfb66631b5ff6d359c7cdc659b4f8e33">SG_COLORMASK_A</a>) != 0);</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;    }</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;    <span class="keywordflow">if</span> (!_sg_fequal(new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[0], cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[0], 0.0001f) ||</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;        !_sg_fequal(new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[1], cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[1], 0.0001f) ||</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;        !_sg_fequal(new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[2], cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[2], 0.0001f) ||</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;        !_sg_fequal(new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[3], cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[3], 0.0001f)) {</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span>* bc = new_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>;</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;        cache_b-&gt;<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = bc[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;      }</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a07307444475d1fa7124466278618ed55">glBlendColor</a>(bc[0], bc[1], bc[2], bc[3]);</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;    }</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;    <span class="comment">/* update rasterizer state */</span></div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html">sg_rasterizer_state</a>* new_r = &amp;pip-&gt;rast;</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;    <a class="code" href="../../d9/dbf/structsg__rasterizer__state.html">sg_rasterizer_state</a>* cache_r = &amp;_sg_gl.cache.rast;</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;    <span class="keywordflow">if</span> (new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">cull_mode</a> != cache_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">cull_mode</a>) {</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;      cache_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">cull_mode</a> = new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">cull_mode</a>;</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a131d819b6c0fe42072f7db0677941b5d">SG_CULLMODE_NONE</a> == new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">cull_mode</a>) {</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a8c4f153ed20a741aaae952650fec46f0">GL_CULL_FACE</a>);</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a8c4f153ed20a741aaae952650fec46f0">GL_CULL_FACE</a>);</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;        <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_mode = (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a384e2c1d24c7c03468f93419cc48971c">SG_CULLMODE_FRONT</a> == new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">cull_mode</a>) ? <a class="code" href="../../dc/da3/glcorearb_8h.html#ad66599a87de5c80f8c174da72080a811">GL_FRONT</a> : <a class="code" href="../../dc/da3/glcorearb_8h.html#a688ad6fbf908a39f7197da6d4e4dd083">GL_BACK</a>;</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a20d4a8491c6ca041d21096f7567fed20">glCullFace</a>(gl_mode);</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;      }</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;    }</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;    <span class="keywordflow">if</span> (new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0">face_winding</a> != cache_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0">face_winding</a>) {</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;      cache_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0">face_winding</a> = new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0">face_winding</a>;</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;      <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_winding = (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faaa4aae35b0695932b261357428ca413c">SG_FACEWINDING_CW</a> == new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0">face_winding</a>) ? <a class="code" href="../../dc/da3/glcorearb_8h.html#a4c5d89dc1a4ba5669af56d43ad6d26e8">GL_CW</a> : <a class="code" href="../../dc/da3/glcorearb_8h.html#a84814ca499dc312708e8aa22324f1d78">GL_CCW</a>;</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#aa19401138cf27b24bb610dea3ef633ec">glFrontFace</a>(gl_winding);</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;    }</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;    <span class="keywordflow">if</span> (new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148">alpha_to_coverage_enabled</a> != cache_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148">alpha_to_coverage_enabled</a>) {</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;      cache_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148">alpha_to_coverage_enabled</a> = new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148">alpha_to_coverage_enabled</a>;</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;      <span class="keywordflow">if</span> (new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148">alpha_to_coverage_enabled</a>)</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a974e3d03b26a60757018116abc99455f">GL_SAMPLE_ALPHA_TO_COVERAGE</a>);</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a974e3d03b26a60757018116abc99455f">GL_SAMPLE_ALPHA_TO_COVERAGE</a>);</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;    }</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;<span class="preprocessor">#ifdef SOKOL_GLCORE33</span></div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;    <span class="keywordflow">if</span> (new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a> != cache_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a>) {</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;      cache_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a> = new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a>;</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;      <span class="keywordflow">if</span> (new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a> &gt; 1)</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa2b6486ff7ecee8bf04e3371f197527a">GL_MULTISAMPLE</a>);</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#aa2b6486ff7ecee8bf04e3371f197527a">GL_MULTISAMPLE</a>);</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;    }</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;    <span class="keywordflow">if</span> (!_sg_fequal(new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">depth_bias</a>, cache_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">depth_bias</a>, 0.000001f) ||</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;        !_sg_fequal(new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">depth_bias_slope_scale</a>, cache_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">depth_bias_slope_scale</a>, 0.000001f)) {</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;      <span class="comment">/* according to ANGLE&#39;s D3D11 backend:</span></div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;<span class="comment">                D3D11 SlopeScaledDepthBias ==&gt; GL polygonOffsetFactor</span></div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;<span class="comment">                D3D11 DepthBias ==&gt; GL polygonOffsetUnits</span></div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;<span class="comment">                DepthBiasClamp has no meaning on GL</span></div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;<span class="comment">            */</span></div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;      cache_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">depth_bias</a> = new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">depth_bias</a>;</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;      cache_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">depth_bias_slope_scale</a> = new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">depth_bias_slope_scale</a>;</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a3fb384e4fb282514a8c20afe6ecdb612">glPolygonOffset</a>(new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">depth_bias_slope_scale</a>, new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">depth_bias</a>);</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;      <span class="keywordtype">bool</span> po_enabled = <span class="keyword">true</span>;</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;      <span class="keywordflow">if</span> (_sg_fequal(new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">depth_bias</a>, 0.0f, 0.000001f) &amp;&amp;</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;          _sg_fequal(new_r-&gt;<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">depth_bias_slope_scale</a>, 0.0f, 0.000001f)) {</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;        po_enabled = <span class="keyword">false</span>;</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;      }</div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;      <span class="keywordflow">if</span> (po_enabled != _sg_gl.cache.polygon_offset_enabled) {</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;        _sg_gl.cache.polygon_offset_enabled = po_enabled;</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;        <span class="keywordflow">if</span> (po_enabled)</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a3ee631814361db6d24e7ebc5988877ab">GL_POLYGON_OFFSET_FILL</a>);</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a3ee631814361db6d24e7ebc5988877ab">GL_POLYGON_OFFSET_FILL</a>);</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;      }</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;    }</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;    <span class="comment">/* bind shader program */</span></div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#ad8e40c882d63c4671dea2ca2dfcf3046">glUseProgram</a>(pip-&gt;shader-&gt;gl_prog);</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;  }</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;  <span class="comment">/* bind textures */</span></div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stage_index = 0; stage_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">SG_NUM_SHADER_STAGES</a>; stage_index++) {</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;    <span class="keyword">const</span> _sg_shader_stage* stage = &amp;pip-&gt;shader-&gt;stage[stage_index];</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;    _sg_image** imgs = (stage_index == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>) ? vs_imgs : fs_imgs;</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;    SOKOL_ASSERT(((stage_index == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>) ? num_vs_imgs : num_fs_imgs) == stage-&gt;num_images);</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> img_index = 0; img_index &lt; stage-&gt;num_images; img_index++) {</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;      <span class="keyword">const</span> _sg_shader_image* shd_img = &amp;stage-&gt;images[img_index];</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;      <span class="keywordflow">if</span> (shd_img-&gt;gl_loc != -1) {</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;        _sg_image* img = imgs[img_index];</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_tex = img-&gt;gl_tex[img-&gt;active_slot];</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;        SOKOL_ASSERT(img &amp;&amp; img-&gt;gl_target);</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;        SOKOL_ASSERT((shd_img-&gt;gl_tex_slot != -1) &amp;&amp; gl_tex);</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#abf9380e68d38f458f86a54870846026e">glUniform1i</a>(shd_img-&gt;gl_loc, shd_img-&gt;gl_tex_slot);</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#af15266b67de988f5ddf442bbbdd1b3fc">glActiveTexture</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a16cc91096144fc7048b45e2add14915b">GL_TEXTURE0</a> + shd_img-&gt;gl_tex_slot);</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a987aecafceffb9afaef11412d42e605b">glBindTexture</a>(img-&gt;gl_target, gl_tex);</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;      }</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;    }</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;  }</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;  <span class="comment">/* index buffer (can be 0) */</span></div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_ib = ib ? ib-&gt;gl_buf[ib-&gt;active_slot] : 0;</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;  <span class="keywordflow">if</span> (gl_ib != _sg_gl.cache.cur_gl_ib) {</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;    _sg_gl.cache.cur_gl_ib = gl_ib;</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;    <a class="code" href="../../db/d2b/gl3w_8h.html#a3b3a3f8200f094b781e9f61e2f19fc50">glBindBuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad26c63125c72cbf0347b589d51676e6a">GL_ELEMENT_ARRAY_BUFFER</a>, gl_ib);</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;  }</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;  _sg_gl.cache.cur_ib_offset = ib_offset;</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;  <span class="comment">/* vertex attributes */</span></div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_vb = 0;</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> attr_index = 0; attr_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>; attr_index++) {</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;    _sg_gl_attr* attr = &amp;pip-&gt;gl_attrs[attr_index];</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;    _sg_gl_cache_attr* cache_attr = &amp;_sg_gl.cache.attrs[attr_index];</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;    <span class="keywordtype">bool</span> cache_attr_dirty = <span class="keyword">false</span>;</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;    uint32_t vb_offset = 0;</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;    <span class="keywordflow">if</span> (attr-&gt;vb_index &gt;= 0) {</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;      <span class="comment">/* attribute is enabled */</span></div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;      SOKOL_ASSERT(attr-&gt;vb_index &lt; num_vbs);</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;      _sg_buffer* vb = vbs[attr-&gt;vb_index];</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;      SOKOL_ASSERT(vb);</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;      vb_offset = vb_offsets[attr-&gt;vb_index] + attr-&gt;offset;</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;      <span class="keywordflow">if</span> ((vb-&gt;gl_buf[vb-&gt;active_slot] != cache_attr-&gt;gl_vbuf) ||</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;          (attr-&gt;size != cache_attr-&gt;gl_attr.size) ||</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;          (attr-&gt;type != cache_attr-&gt;gl_attr.type) ||</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;          (attr-&gt;normalized != cache_attr-&gt;gl_attr.normalized) ||</div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;          (attr-&gt;stride != cache_attr-&gt;gl_attr.stride) ||</div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;          (vb_offset != cache_attr-&gt;gl_attr.offset) ||</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;          (cache_attr-&gt;gl_attr.divisor != attr-&gt;divisor)) {</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;        <span class="keywordflow">if</span> (gl_vb != vb-&gt;gl_buf[vb-&gt;active_slot]) {</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;          gl_vb = vb-&gt;gl_buf[vb-&gt;active_slot];</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a3b3a3f8200f094b781e9f61e2f19fc50">glBindBuffer</a>(<a class="code" href="../../dc/da3/glcorearb_8h.html#a7180045dcb52b22af2cd0366026bc3ed">GL_ARRAY_BUFFER</a>, gl_vb);</div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;        }</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a8afadc1fe36886688a02097cc63a17cb">glVertexAttribPointer</a>(attr_index, attr-&gt;size, attr-&gt;type,</div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;                              attr-&gt;normalized, attr-&gt;stride,</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;                              (<span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a1e5eb1ac5e47603cc80ab58338b92393">GLvoid</a>*)(<a class="code" href="../../dc/da3/glcorearb_8h.html#a0374caf1f25a139da21f84d81f637c23">GLintptr</a>)vb_offset);</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;<span class="preprocessor">#ifdef SOKOL_INSTANCING_ENABLED</span></div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;        <span class="keywordflow">if</span> (_sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4">SG_FEATURE_INSTANCING</a>]) {</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;          <a class="code" href="../../db/d2b/gl3w_8h.html#a54d7419c70c2cec0db1594e23c90e546">glVertexAttribDivisor</a>(attr_index, attr-&gt;divisor);</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;        }</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;        cache_attr_dirty = <span class="keyword">true</span>;</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;      }</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;      <span class="keywordflow">if</span> (cache_attr-&gt;gl_attr.vb_index == -1) {</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a6e8ee482001ee8fb9b3d4851116779b4">glEnableVertexAttribArray</a>(attr_index);</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;        cache_attr_dirty = <span class="keyword">true</span>;</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;      }</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;      <span class="comment">/* attribute is disabled */</span></div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;      <span class="keywordflow">if</span> (cache_attr-&gt;gl_attr.vb_index != -1) {</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a0903ee19d8321a1e456bebb54a65ee2a">glDisableVertexAttribArray</a>(attr_index);</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;        cache_attr_dirty = <span class="keyword">true</span>;</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;      }</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;    }</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;    <span class="keywordflow">if</span> (cache_attr_dirty) {</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;      cache_attr-&gt;gl_attr = *attr;</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;      cache_attr-&gt;gl_attr.offset = vb_offset;</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;      cache_attr-&gt;gl_vbuf = gl_vb;</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;    }</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;  }</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;}</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_apply_uniform_block(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343">sg_shader_stage</a> stage_index, <span class="keywordtype">int</span> ub_index, <span class="keyword">const</span> <span class="keywordtype">void</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a41a8247b39e9cdb744299c3331ca3453">data</a>, <span class="keywordtype">int</span> num_bytes)</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;{</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;  _SOKOL_UNUSED(num_bytes);</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;  SOKOL_ASSERT(data &amp;&amp; (num_bytes &gt; 0));</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;  SOKOL_ASSERT((stage_index &gt;= 0) &amp;&amp; ((<span class="keywordtype">int</span>)stage_index &lt; SG_NUM_SHADER_STAGES));</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;  SOKOL_ASSERT(_sg_gl.cache.cur_pipeline);</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;  SOKOL_ASSERT(_sg_gl.cache.cur_pipeline-&gt;slot.id == _sg_gl.cache.cur_pipeline_id.id);</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;  SOKOL_ASSERT(_sg_gl.cache.cur_pipeline-&gt;shader-&gt;slot.id == _sg_gl.cache.cur_pipeline-&gt;shader_id.id);</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;  _sg_shader_stage* stage = &amp;_sg_gl.cache.cur_pipeline-&gt;shader-&gt;stage[stage_index];</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;  SOKOL_ASSERT(ub_index &lt; stage-&gt;num_uniform_blocks);</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;  _sg_uniform_block* ub = &amp;stage-&gt;uniform_blocks[ub_index];</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;  SOKOL_ASSERT(ub-&gt;size == num_bytes);</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> u_index = 0; u_index &lt; ub-&gt;num_uniforms; u_index++) {</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;    _sg_uniform* u = &amp;ub-&gt;uniforms[u_index];</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;    SOKOL_ASSERT(u-&gt;type != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2aebd4e667ec034abd1b1b5f935113fdad">SG_UNIFORMTYPE_INVALID</a>);</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;    <span class="keywordflow">if</span> (u-&gt;gl_loc == -1) {</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;    }</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;    <a class="code" href="../../dc/da3/glcorearb_8h.html#a31aeedaeef29442c9c015ab355c8f5ab">GLfloat</a>* ptr = (<a class="code" href="../../dc/da3/glcorearb_8h.html#a31aeedaeef29442c9c015ab355c8f5ab">GLfloat</a>*)(((uint8_t*)data) + u-&gt;offset);</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;    <span class="keywordflow">switch</span> (u-&gt;type) {</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2aebd4e667ec034abd1b1b5f935113fdad">SG_UNIFORMTYPE_INVALID</a>:</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2afebe7f7c92eea0a9d1886eb30566f87c">SG_UNIFORMTYPE_FLOAT</a>:</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a7b834ab4b0d141e408001f708e1395ff">glUniform1fv</a>(u-&gt;gl_loc, u-&gt;count, ptr);</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2a2ac46d5ec84b41e58a2ab09257a01129">SG_UNIFORMTYPE_FLOAT2</a>:</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a8f68825b5857a0eab9387a49ba2cae3c">glUniform2fv</a>(u-&gt;gl_loc, u-&gt;count, ptr);</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2adf763c6ae4deffca464f45c3401761f6">SG_UNIFORMTYPE_FLOAT3</a>:</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a264e119325884947733141031ec9ff68">glUniform3fv</a>(u-&gt;gl_loc, u-&gt;count, ptr);</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2ac0a6c0647e323a639609490981b963fc">SG_UNIFORMTYPE_FLOAT4</a>:</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a2f24b3425eec94391cbfbb638466c65b">glUniform4fv</a>(u-&gt;gl_loc, u-&gt;count, ptr);</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2af0f0af9d38739d489a7422d6417fa958">SG_UNIFORMTYPE_MAT4</a>:</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a1cd4c6b9e1fb6b4eb927ab0997de48ef">glUniformMatrix4fv</a>(u-&gt;gl_loc, u-&gt;count, <a class="code" href="../../dc/da3/glcorearb_8h.html#abca6d43f43fae31f49dcb883b2f301f6">GL_FALSE</a>, ptr);</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;        SOKOL_UNREACHABLE;</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;    }</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;  }</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;}</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_draw(<span class="keywordtype">int</span> base_element, <span class="keywordtype">int</span> num_elements, <span class="keywordtype">int</span> num_instances)</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;{</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> i_type = _sg_gl.cache.cur_index_type;</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> p_type = _sg_gl.cache.cur_primitive_type;</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;  <span class="keywordflow">if</span> (0 != i_type) {</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;    <span class="comment">/* indexed rendering */</span></div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> i_size = (i_type == <a class="code" href="../../dc/da3/glcorearb_8h.html#a36c3f955599ab92217a70cce8a22e11f">GL_UNSIGNED_SHORT</a>) ? 2 : 4;</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;    <span class="keyword">const</span> uint32_t ib_offset = _sg_gl.cache.cur_ib_offset;</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a1e5eb1ac5e47603cc80ab58338b92393">GLvoid</a>* <a class="code" href="../../dc/da3/glcorearb_8h.html#a94ae715eebfc1eb65456c0ab9b97f1e9">indices</a> = (<span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a1e5eb1ac5e47603cc80ab58338b92393">GLvoid</a>*)(<a class="code" href="../../dc/da3/glcorearb_8h.html#a0374caf1f25a139da21f84d81f637c23">GLintptr</a>)(base_element * i_size + ib_offset);</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;    <span class="keywordflow">if</span> (num_instances == 1) {</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a81cf4a101af4a4dba6544c8017b5f75e">glDrawElements</a>(p_type, num_elements, i_type, indices);</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;      <span class="keywordflow">if</span> (_sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4">SG_FEATURE_INSTANCING</a>]) {</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#aa0c1477a0e3a1833f625029c628ad0e0">glDrawElementsInstanced</a>(p_type, num_elements, i_type, indices, num_instances);</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;      }</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;    }</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;    <span class="comment">/* non-indexed rendering */</span></div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;    <span class="keywordflow">if</span> (num_instances == 1) {</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;      <a class="code" href="../../db/d2b/gl3w_8h.html#a89377449aceadc060b577926b5413bd2">glDrawArrays</a>(p_type, base_element, num_elements);</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;      <span class="keywordflow">if</span> (_sg_gl.features[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4">SG_FEATURE_INSTANCING</a>]) {</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a30e6afc4637e2ed6beaae367851c03d1">glDrawArraysInstanced</a>(p_type, base_element, num_elements, num_instances);</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;      }</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;    }</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;  }</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;}</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_commit()</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;{</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;  SOKOL_ASSERT(!_sg_gl.in_pass);</div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;}</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_update_buffer(_sg_buffer* buf, <span class="keyword">const</span> <span class="keywordtype">void</span>* data_ptr, <span class="keywordtype">int</span> data_size)</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;{</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;  SOKOL_ASSERT(buf &amp;&amp; data_ptr &amp;&amp; (data_size &gt; 0));</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;  <span class="comment">/* only one update per buffer per frame allowed */</span></div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;  <span class="keywordflow">if</span> (++buf-&gt;active_slot &gt;= buf-&gt;num_slots) {</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;    buf-&gt;active_slot = 0;</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;  }</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_tgt = _sg_gl_buffer_target(buf-&gt;type);</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;  SOKOL_ASSERT(buf-&gt;active_slot &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>);</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a> gl_buf = buf-&gt;gl_buf[buf-&gt;active_slot];</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;  SOKOL_ASSERT(gl_buf);</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a3b3a3f8200f094b781e9f61e2f19fc50">glBindBuffer</a>(gl_tgt, gl_buf);</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#ab275ed802ac5db3e6b97973aab9d48e2">glBufferSubData</a>(gl_tgt, 0, data_size, data_ptr);</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;  _SG_GL_CHECK_ERROR();</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;}</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_update_image(_sg_image* img, <span class="keyword">const</span> <a class="code" href="../../dd/d44/structsg__image__content.html">sg_image_content</a>* data)</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;{</div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;  SOKOL_ASSERT(img &amp;&amp; data);</div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;  <span class="comment">/* only one update per image per frame allowed */</span></div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;  <span class="keywordflow">if</span> (++img-&gt;active_slot &gt;= img-&gt;num_slots) {</div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;    img-&gt;active_slot = 0;</div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;  }</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;  SOKOL_ASSERT(img-&gt;active_slot &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>);</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;  SOKOL_ASSERT(0 != img-&gt;gl_tex[img-&gt;active_slot]);</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;  <a class="code" href="../../db/d2b/gl3w_8h.html#a987aecafceffb9afaef11412d42e605b">glBindTexture</a>(img-&gt;gl_target, img-&gt;gl_tex[img-&gt;active_slot]);</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_img_format = _sg_gl_teximage_format(img-&gt;pixel_format);</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_img_type = _sg_gl_teximage_type(img-&gt;pixel_format);</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> num_faces = img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a> ? 6 : 1;</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> num_mips = img-&gt;num_mipmaps;</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face_index = 0; face_index &lt; num_faces; face_index++) {</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mip_index = 0; mip_index &lt; num_mips; mip_index++) {</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;      <a class="code" href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a> gl_img_target = img-&gt;gl_target;</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a> == img-&gt;type) {</div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;        gl_img_target = _sg_gl_cubeface_target(face_index);</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;      }</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a1e5eb1ac5e47603cc80ab58338b92393">GLvoid</a>* data_ptr = data-&gt;<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c">ptr</a>;</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;      <span class="keywordtype">int</span> mip_width = img-&gt;width &gt;&gt; mip_index;</div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;      <span class="keywordflow">if</span> (mip_width == 0) {</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;        mip_width = 1;</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;      }</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;      <span class="keywordtype">int</span> mip_height = img-&gt;height &gt;&gt; mip_index;</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;      <span class="keywordflow">if</span> (mip_height == 0) {</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;        mip_height = 1;</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;      }</div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a> == img-&gt;type) || (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a> == img-&gt;type)) {</div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#a90520731d99d69c72294c595d47385f2">glTexSubImage2D</a>(gl_img_target, mip_index,</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;                        0, 0,</div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;                        mip_width, mip_height,</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;                        gl_img_format, gl_img_type,</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;                        data_ptr);</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;      }</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;<span class="preprocessor">#if !defined(SOKOL_GLES2)</span></div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!_sg_gl_gles2 &amp;&amp; ((<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a> == img-&gt;type) || (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a> == img-&gt;type))) {</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;        <span class="keywordtype">int</span> mip_depth = img-&gt;depth &gt;&gt; mip_index;</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;        <span class="keywordflow">if</span> (mip_depth == 0) {</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;          mip_depth = 1;</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;        }</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;        <a class="code" href="../../db/d2b/gl3w_8h.html#aa0817ce66934d545ee41b57c21675453">glTexSubImage3D</a>(gl_img_target, mip_index,</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;                        0, 0, 0,</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;                        mip_width, mip_height, mip_depth,</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;                        gl_img_format, gl_img_type,</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;                        data_ptr);</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;      }</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;    }</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;  }</div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;}</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;<span class="comment">/*== D3D11 BACKEND ===========================================================*/</span></div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;<span class="preprocessor">#elif defined(SOKOL_D3D11)</span></div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;<span class="preprocessor">#ifndef D3D11_NO_HELPERS</span></div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;<span class="preprocessor">#define D3D11_NO_HELPERS</span></div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;<span class="preprocessor">#ifndef CINTERFACE</span></div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;<span class="preprocessor">#define CINTERFACE</span></div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;<span class="preprocessor">#ifndef COBJMACROS</span></div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;<span class="preprocessor">#define COBJMACROS</span></div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;<span class="preprocessor">#ifndef WIN32_LEAN_AND_MEAN</span></div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;<span class="preprocessor">#define WIN32_LEAN_AND_MEAN</span></div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;<span class="preprocessor">#include &lt;windows.h&gt;</span></div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;<span class="preprocessor">#include &lt;d3d11.h&gt;</span></div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;<span class="preprocessor">#if (defined(WINAPI_FAMILY_PARTITION) &amp;&amp; !WINAPI_FAMILY_PARTITION(WINAPI_PARTITION_DESKTOP))</span></div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;<span class="preprocessor">#pragma comment(lib, &quot;WindowsApp.lib&quot;)</span></div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;<span class="preprocessor">#pragma comment(lib, &quot;user32.lib&quot;)</span></div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;<span class="preprocessor">#pragma comment(lib, &quot;dxgi.lib&quot;)</span></div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;<span class="preprocessor">#pragma comment(lib, &quot;d3d11.lib&quot;)</span></div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;<span class="preprocessor">#pragma comment(lib, &quot;dxguid.lib&quot;)</span></div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;<span class="preprocessor">#if defined(SOKOL_D3D11_SHADER_COMPILER)</span></div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;<span class="preprocessor">#include &lt;d3dcompiler.h&gt;</span></div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;<span class="preprocessor">#if !(defined(WINAPI_FAMILY_PARTITION) &amp;&amp; !WINAPI_FAMILY_PARTITION(WINAPI_PARTITION_DESKTOP))</span></div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;<span class="preprocessor">#pragma comment(lib, &quot;d3dcompiler.lib&quot;)</span></div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;<span class="comment">/*-- enum translation functions ----------------------------------------------*/</span></div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;_SOKOL_PRIVATE D3D11_USAGE _sg_d3d11_usage(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> usg)</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;{</div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;  <span class="keywordflow">switch</span> (usg) {</div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>:</div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;      <span class="keywordflow">return</span> D3D11_USAGE_IMMUTABLE;</div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca38c2a7730739e0e0ed461915d44e2dd8">SG_USAGE_DYNAMIC</a>:</div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0ccafa387c8c45104f25a8e2a68486ae620c">SG_USAGE_STREAM</a>:</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;      <span class="keywordflow">return</span> D3D11_USAGE_DYNAMIC;</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;      <span class="keywordflow">return</span> (D3D11_USAGE)0;</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;  }</div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;}</div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;</div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;_SOKOL_PRIVATE UINT _sg_d3d11_cpu_access_flags(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> usg)</div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;{</div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;  <span class="keywordflow">switch</span> (usg) {</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>:</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca38c2a7730739e0e0ed461915d44e2dd8">SG_USAGE_DYNAMIC</a>:</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0ccafa387c8c45104f25a8e2a68486ae620c">SG_USAGE_STREAM</a>:</div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;      <span class="keywordflow">return</span> D3D11_CPU_ACCESS_WRITE;</div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;  }</div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;}</div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;_SOKOL_PRIVATE DXGI_FORMAT _sg_d3d11_texture_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;{</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;  <span class="comment">/*</span></div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;<span class="comment">        NOTE: the following pixel formats are only supported on D3D11.1</span></div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;<span class="comment">        (we&#39;re running on D3D11.0):</span></div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;<span class="comment">            DXGI_FORMAT_B4G4R4A4_UNORM</span></div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;<span class="comment">            DXGI_FORMAT_B5G6R5_UNORM</span></div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;<span class="comment">            DXGI_FORMAT_B5G5R5A1_UNORM</span></div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>:</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R8G8B8A8_UNORM;</div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aee9de87145ed1e5f8129bd39501a164b">SG_PIXELFORMAT_R10G10B10A2</a>:</div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R10G10B10A2_UNORM;</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288">SG_PIXELFORMAT_RGBA32F</a>:</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R32G32B32A32_FLOAT;</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9">SG_PIXELFORMAT_RGBA16F</a>:</div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R16G16B16A16_FLOAT;</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7aebdb1f89ab56d5ac3e4101326ad5a7">SG_PIXELFORMAT_R32F</a>:</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R32_FLOAT;</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4acd416b883c484b0a30194f1a06f18f9d">SG_PIXELFORMAT_R16F</a>:</div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R16_FLOAT;</div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ac09ec30fb99ef631fe1afd23b8ebbc56">SG_PIXELFORMAT_L8</a>:</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R8_UNORM;</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab16b5755ede91f6c2d9ac0b95b939755">SG_PIXELFORMAT_DXT1</a>:</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_BC1_UNORM;</div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abc58007c8b3aea5d1d4f8003e1ebd015">SG_PIXELFORMAT_DXT3</a>:</div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_BC2_UNORM;</div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5707e92aad083b7e905f1cef363a736a">SG_PIXELFORMAT_DXT5</a>:</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_BC3_UNORM;</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_UNKNOWN;</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;  };</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;}</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;_SOKOL_PRIVATE DXGI_FORMAT _sg_d3d11_rendertarget_color_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;{</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>:</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R8G8B8A8_UNORM;</div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288">SG_PIXELFORMAT_RGBA32F</a>:</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R32G32B32A32_FLOAT;</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9">SG_PIXELFORMAT_RGBA16F</a>:</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R16G16B16A16_FLOAT;</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7aebdb1f89ab56d5ac3e4101326ad5a7">SG_PIXELFORMAT_R32F</a>:</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R32_FLOAT;</div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4acd416b883c484b0a30194f1a06f18f9d">SG_PIXELFORMAT_R16F</a>:</div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R16_FLOAT;</div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ac09ec30fb99ef631fe1afd23b8ebbc56">SG_PIXELFORMAT_L8</a>:</div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R8_UNORM;</div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_UNKNOWN;</div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;  }</div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;}</div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;</div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;_SOKOL_PRIVATE DXGI_FORMAT _sg_d3d11_rendertarget_depth_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;{</div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ad9b9e06c0f4c4576ddaa64de29903aa8">SG_PIXELFORMAT_DEPTH</a>:</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_D16_UNORM;</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>:</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_D24_UNORM_S8_UINT;</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_UNKNOWN;</div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;  }</div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;}</div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;_SOKOL_PRIVATE D3D11_PRIMITIVE_TOPOLOGY _sg_d3d11_primitive_topology(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4">sg_primitive_type</a> prim_type)</div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;{</div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;  <span class="keywordflow">switch</span> (prim_type) {</div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a56f0068a3381a2f910b646b15bbdad7c">SG_PRIMITIVETYPE_POINTS</a>:</div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;      <span class="keywordflow">return</span> D3D11_PRIMITIVE_TOPOLOGY_POINTLIST;</div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a64763b2f58505f8353981fa3a7d33b3d">SG_PRIMITIVETYPE_LINES</a>:</div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;      <span class="keywordflow">return</span> D3D11_PRIMITIVE_TOPOLOGY_LINELIST;</div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ac6adf96be338781a927207580110a0b6">SG_PRIMITIVETYPE_LINE_STRIP</a>:</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;      <span class="keywordflow">return</span> D3D11_PRIMITIVE_TOPOLOGY_LINESTRIP;</div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4aa8d428001b2200f78af617997a3be81b">SG_PRIMITIVETYPE_TRIANGLES</a>:</div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;      <span class="keywordflow">return</span> D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST;</div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ab0b91b82494a494db2f5e57c8b7356a7">SG_PRIMITIVETYPE_TRIANGLE_STRIP</a>:</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;      <span class="keywordflow">return</span> D3D11_PRIMITIVE_TOPOLOGY_TRIANGLESTRIP;</div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;      <span class="keywordflow">return</span> (D3D11_PRIMITIVE_TOPOLOGY)0;</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;  }</div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;}</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;_SOKOL_PRIVATE DXGI_FORMAT _sg_d3d11_index_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641">sg_index_type</a> index_type)</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;{</div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;  <span class="keywordflow">switch</span> (index_type) {</div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a>:</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_UNKNOWN;</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641aa12a337c61bc9a140d5a9ec1db91baae">SG_INDEXTYPE_UINT16</a>:</div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R16_UINT;</div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a351dd7105c6dd3e47dabb9ee6dff643a">SG_INDEXTYPE_UINT32</a>:</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R32_UINT;</div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;      <span class="keywordflow">return</span> (DXGI_FORMAT)0;</div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;  }</div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;}</div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;_SOKOL_PRIVATE D3D11_FILTER _sg_d3d11_filter(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> min_f, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> mag_f, uint32_t max_anisotropy)</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;{</div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;  <span class="keywordflow">if</span> (max_anisotropy &gt; 1) {</div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;    <span class="keywordflow">return</span> D3D11_FILTER_ANISOTROPIC;</div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mag_f == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>) {</div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;    <span class="keywordflow">switch</span> (min_f) {</div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>:</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a84115e146ee19b60c763d0dfb1cd347a">SG_FILTER_NEAREST_MIPMAP_NEAREST</a>:</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;        <span class="keywordflow">return</span> D3D11_FILTER_MIN_MAG_MIP_POINT;</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a71e72d5047072e13ecbe4717d7cb4f32">SG_FILTER_LINEAR</a>:</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a48f5bd6ec5073d2eec58e7af5b07375f">SG_FILTER_LINEAR_MIPMAP_NEAREST</a>:</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;        <span class="keywordflow">return</span> D3D11_FILTER_MIN_LINEAR_MAG_MIP_POINT;</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a21116fc969ac2da818c6f70ce6f04f01">SG_FILTER_NEAREST_MIPMAP_LINEAR</a>:</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;        <span class="keywordflow">return</span> D3D11_FILTER_MIN_MAG_POINT_MIP_LINEAR;</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a7f78c11a24799bfc6115afff391bc864">SG_FILTER_LINEAR_MIPMAP_LINEAR</a>:</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;        <span class="keywordflow">return</span> D3D11_FILTER_MIN_LINEAR_MAG_POINT_MIP_LINEAR;</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;        SOKOL_UNREACHABLE;</div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;    }</div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mag_f == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a71e72d5047072e13ecbe4717d7cb4f32">SG_FILTER_LINEAR</a>) {</div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;    <span class="keywordflow">switch</span> (min_f) {</div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>:</div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a84115e146ee19b60c763d0dfb1cd347a">SG_FILTER_NEAREST_MIPMAP_NEAREST</a>:</div><div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;        <span class="keywordflow">return</span> D3D11_FILTER_MIN_POINT_MAG_LINEAR_MIP_POINT;</div><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a71e72d5047072e13ecbe4717d7cb4f32">SG_FILTER_LINEAR</a>:</div><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a48f5bd6ec5073d2eec58e7af5b07375f">SG_FILTER_LINEAR_MIPMAP_NEAREST</a>:</div><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;        <span class="keywordflow">return</span> D3D11_FILTER_MIN_MAG_LINEAR_MIP_POINT;</div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a21116fc969ac2da818c6f70ce6f04f01">SG_FILTER_NEAREST_MIPMAP_LINEAR</a>:</div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;        <span class="keywordflow">return</span> D3D11_FILTER_MIN_POINT_MAG_MIP_LINEAR;</div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a7f78c11a24799bfc6115afff391bc864">SG_FILTER_LINEAR_MIPMAP_LINEAR</a>:</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;        <span class="keywordflow">return</span> D3D11_FILTER_MIN_MAG_MIP_LINEAR;</div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;        SOKOL_UNREACHABLE;</div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;    }</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;  }</div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;  <span class="comment">/* invalid value for mag filter */</span></div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;  SOKOL_UNREACHABLE;</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;  <span class="keywordflow">return</span> D3D11_FILTER_MIN_MAG_MIP_POINT;</div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;}</div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;</div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;_SOKOL_PRIVATE D3D11_TEXTURE_ADDRESS_MODE _sg_d3d11_address_mode(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> <a class="code" href="../../d4/dc3/classfloat.html">m</a>)</div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;{</div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;  <span class="keywordflow">switch</span> (m) {</div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>:</div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;      <span class="keywordflow">return</span> D3D11_TEXTURE_ADDRESS_WRAP;</div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654daa970e343704dddd57115f2d834241b78">SG_WRAP_CLAMP_TO_EDGE</a>:</div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;      <span class="keywordflow">return</span> D3D11_TEXTURE_ADDRESS_CLAMP;</div><div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da2d6a059f14a7330186f072c1d30d0a1c">SG_WRAP_MIRRORED_REPEAT</a>:</div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;      <span class="keywordflow">return</span> D3D11_TEXTURE_ADDRESS_MIRROR;</div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;      <span class="keywordflow">return</span> (D3D11_TEXTURE_ADDRESS_MODE)0;</div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;  }</div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;}</div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;</div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;_SOKOL_PRIVATE DXGI_FORMAT _sg_d3d11_vertex_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08f">sg_vertex_format</a> fmt)</div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;{</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa29b1e94ae9985fe1463d36e301916d29">SG_VERTEXFORMAT_FLOAT</a>:</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R32_FLOAT;</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa498741f607f4f10e6b9672dcb9a9c6ac">SG_VERTEXFORMAT_FLOAT2</a>:</div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R32G32_FLOAT;</div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6ba93ce02391f49c626baa5e6f7234b2">SG_VERTEXFORMAT_FLOAT3</a>:</div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R32G32B32_FLOAT;</div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6115bbd19f17c016a55102c485b7658c">SG_VERTEXFORMAT_FLOAT4</a>:</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R32G32B32A32_FLOAT;</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5c3facf45a0c01162b348286571e4cbc">SG_VERTEXFORMAT_BYTE4</a>:</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R8G8B8A8_SINT;</div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5bb6681394fe029a0ca1fa0e00e85da9">SG_VERTEXFORMAT_BYTE4N</a>:</div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R8G8B8A8_SNORM;</div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa1eac19f3f2048bed0f6b71f844e9bdb">SG_VERTEXFORMAT_UBYTE4</a>:</div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R8G8B8A8_UINT;</div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa598e60ae2c550a825145e20e377d7f19">SG_VERTEXFORMAT_UBYTE4N</a>:</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R8G8B8A8_UNORM;</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa742f7d751f8dff04449a03428372810a">SG_VERTEXFORMAT_SHORT2</a>:</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R16G16_SINT;</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fafec5d9fb7cb12489ea4be3637c746efa">SG_VERTEXFORMAT_SHORT2N</a>:</div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R16G16_SNORM;</div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faf321d1eb262dfb3db56fb43f76d9898a">SG_VERTEXFORMAT_SHORT4</a>:</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R16G16B16A16_SINT;</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6bfcbcd3a001760711189465343bd4e8">SG_VERTEXFORMAT_SHORT4N</a>:</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;      <span class="keywordflow">return</span> DXGI_FORMAT_R16G16B16A16_SNORM;</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;    <span class="comment">/* FIXME: signed 10-10-10-2 vertex format not supported on d3d11 (only unsigned) */</span></div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;      <span class="keywordflow">return</span> (DXGI_FORMAT)0;</div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;  }</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;}</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;</div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;_SOKOL_PRIVATE D3D11_INPUT_CLASSIFICATION _sg_d3d11_input_classification(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6">sg_vertex_step</a> step)</div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;{</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;  <span class="keywordflow">switch</span> (step) {</div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a84ea40a12ba85ca0542460d0624b88b5">SG_VERTEXSTEP_PER_VERTEX</a>:</div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;      <span class="keywordflow">return</span> D3D11_INPUT_PER_VERTEX_DATA;</div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a20f6cf1a89efe9c3129cf71910e71709">SG_VERTEXSTEP_PER_INSTANCE</a>:</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;      <span class="keywordflow">return</span> D3D11_INPUT_PER_INSTANCE_DATA;</div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;      <span class="keywordflow">return</span> (D3D11_INPUT_CLASSIFICATION)0;</div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;  }</div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;}</div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;</div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;_SOKOL_PRIVATE D3D11_CULL_MODE _sg_d3d11_cull_mode(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4">sg_cull_mode</a> m)</div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;{</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;  <span class="keywordflow">switch</span> (m) {</div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a131d819b6c0fe42072f7db0677941b5d">SG_CULLMODE_NONE</a>:</div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;      <span class="keywordflow">return</span> D3D11_CULL_NONE;</div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a384e2c1d24c7c03468f93419cc48971c">SG_CULLMODE_FRONT</a>:</div><div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;      <span class="keywordflow">return</span> D3D11_CULL_FRONT;</div><div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4af645d117b0ec8517b04bc827ae0e4baf">SG_CULLMODE_BACK</a>:</div><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;      <span class="keywordflow">return</span> D3D11_CULL_BACK;</div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;      <span class="keywordflow">return</span> (D3D11_CULL_MODE)0;</div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;  }</div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;}</div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;_SOKOL_PRIVATE D3D11_COMPARISON_FUNC _sg_d3d11_compare_func(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64">sg_compare_func</a> f)</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;{</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;  <span class="keywordflow">switch</span> (f) {</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a3c097f346c501db92d57775e7ab51157">SG_COMPAREFUNC_NEVER</a>:</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;      <span class="keywordflow">return</span> D3D11_COMPARISON_NEVER;</div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a9bc40473fa1a7f1805e04826dcb1cc8f">SG_COMPAREFUNC_LESS</a>:</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;      <span class="keywordflow">return</span> D3D11_COMPARISON_LESS;</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af164b871f09d6f7b671a2a611e6d570d">SG_COMPAREFUNC_EQUAL</a>:</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;      <span class="keywordflow">return</span> D3D11_COMPARISON_EQUAL;</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a1a8096a774c667c26ccde72d9ef4bd7a">SG_COMPAREFUNC_LESS_EQUAL</a>:</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;      <span class="keywordflow">return</span> D3D11_COMPARISON_LESS_EQUAL;</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a508dd2aada97b6358f31c4425fe84c82">SG_COMPAREFUNC_GREATER</a>:</div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;      <span class="keywordflow">return</span> D3D11_COMPARISON_GREATER;</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a8394ed7a0362acafc13fce791f9d7344">SG_COMPAREFUNC_NOT_EQUAL</a>:</div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;      <span class="keywordflow">return</span> D3D11_COMPARISON_NOT_EQUAL;</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af86c478058edd323bd609ff4bf2e848d">SG_COMPAREFUNC_GREATER_EQUAL</a>:</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;      <span class="keywordflow">return</span> D3D11_COMPARISON_GREATER_EQUAL;</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>:</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;      <span class="keywordflow">return</span> D3D11_COMPARISON_ALWAYS;</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;      <span class="keywordflow">return</span> (D3D11_COMPARISON_FUNC)0;</div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;  }</div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;}</div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;</div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;_SOKOL_PRIVATE D3D11_STENCIL_OP _sg_d3d11_stencil_op(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488a">sg_stencil_op</a> op)</div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;{</div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;  <span class="keywordflow">switch</span> (op) {</div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>:</div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;      <span class="keywordflow">return</span> D3D11_STENCIL_OP_KEEP;</div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa703bf305ed3f7826dab340a3b42f58e0">SG_STENCILOP_ZERO</a>:</div><div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;      <span class="keywordflow">return</span> D3D11_STENCIL_OP_ZERO;</div><div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aad5adc3a401f0ebcc100fe91f45e7b628">SG_STENCILOP_REPLACE</a>:</div><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;      <span class="keywordflow">return</span> D3D11_STENCIL_OP_REPLACE;</div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aacd444f9c15d8563e1dda2fc913bfe349">SG_STENCILOP_INCR_CLAMP</a>:</div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;      <span class="keywordflow">return</span> D3D11_STENCIL_OP_INCR_SAT;</div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa5833cf06326cae250c675cfb227d7783">SG_STENCILOP_DECR_CLAMP</a>:</div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;      <span class="keywordflow">return</span> D3D11_STENCIL_OP_DECR_SAT;</div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa02f24dee22dfe00513a57620bef88e10">SG_STENCILOP_INVERT</a>:</div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;      <span class="keywordflow">return</span> D3D11_STENCIL_OP_INVERT;</div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aac7f2b2dfb1c5340579c27f255a320569">SG_STENCILOP_INCR_WRAP</a>:</div><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;      <span class="keywordflow">return</span> D3D11_STENCIL_OP_INCR;</div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa546103a62234093824399823dba02002">SG_STENCILOP_DECR_WRAP</a>:</div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;      <span class="keywordflow">return</span> D3D11_STENCIL_OP_DECR;</div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;      <span class="keywordflow">return</span> (D3D11_STENCIL_OP)0;</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;  }</div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;}</div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;</div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;_SOKOL_PRIVATE D3D11_BLEND _sg_d3d11_blend_factor(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98">sg_blend_factor</a> f)</div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;{</div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;  <span class="keywordflow">switch</span> (f) {</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a>:</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_ZERO;</div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a>:</div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_ONE;</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a8c69759d579abc2330763accf53e22c6">SG_BLENDFACTOR_SRC_COLOR</a>:</div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_SRC_COLOR;</div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a641887d49c50dcaadab00c5457074894">SG_BLENDFACTOR_ONE_MINUS_SRC_COLOR</a>:</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_INV_SRC_COLOR;</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ac4a882a9f00214238fbb2d0e354ccdb1">SG_BLENDFACTOR_SRC_ALPHA</a>:</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_SRC_ALPHA;</div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a057316e7b0eb4cf1b36f8dd1f13cb01b">SG_BLENDFACTOR_ONE_MINUS_SRC_ALPHA</a>:</div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_INV_SRC_ALPHA;</div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a31651696629d4ccdb8e684c3ba02366b">SG_BLENDFACTOR_DST_COLOR</a>:</div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_DEST_COLOR;</div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a72b1df3612951c57703d3cf0279f750e">SG_BLENDFACTOR_ONE_MINUS_DST_COLOR</a>:</div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_INV_DEST_COLOR;</div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a1f10da138f1962007019feb50c37ba7f">SG_BLENDFACTOR_DST_ALPHA</a>:</div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_DEST_ALPHA;</div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ad219a9d23d6b3b19d2539ece4a0a71d3">SG_BLENDFACTOR_ONE_MINUS_DST_ALPHA</a>:</div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_INV_DEST_ALPHA;</div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98aad544ad360157642c7fa8ab7ba22e48d">SG_BLENDFACTOR_SRC_ALPHA_SATURATED</a>:</div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_SRC_ALPHA_SAT;</div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a62d9efdddbce46e11664b6daf160fff6">SG_BLENDFACTOR_BLEND_COLOR</a>:</div><div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_BLEND_FACTOR;</div><div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ac29f07005f4e09d33012c2ab1aa41ed4">SG_BLENDFACTOR_ONE_MINUS_BLEND_COLOR</a>:</div><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_INV_BLEND_FACTOR;</div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98aeb1ae23d2d8136f7fc0a453dc48ce3a0">SG_BLENDFACTOR_BLEND_ALPHA</a>:</div><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_BLEND_FACTOR;</div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af56378a9ce157db3a999f590489bb0f9">SG_BLENDFACTOR_ONE_MINUS_BLEND_ALPHA</a>:</div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_INV_BLEND_FACTOR;</div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;      <span class="keywordflow">return</span> (D3D11_BLEND)0;</div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;  }</div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;}</div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;</div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;_SOKOL_PRIVATE D3D11_BLEND_OP _sg_d3d11_blend_op(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007b">sg_blend_op</a> op)</div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;{</div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;  <span class="keywordflow">switch</span> (op) {</div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a>:</div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_OP_ADD;</div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba39bb8326504a0479b26cd513622425de">SG_BLENDOP_SUBTRACT</a>:</div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_OP_SUBTRACT;</div><div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007bafe44c904a6db19f96766c815ff903e93">SG_BLENDOP_REVERSE_SUBTRACT</a>:</div><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;      <span class="keywordflow">return</span> D3D11_BLEND_OP_REV_SUBTRACT;</div><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;      <span class="keywordflow">return</span> (D3D11_BLEND_OP)0;</div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;  }</div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;}</div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;</div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;_SOKOL_PRIVATE UINT8 _sg_d3d11_color_write_mask(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2">sg_color_mask</a> m)</div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;{</div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;  UINT8 res = 0;</div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;  <span class="keywordflow">if</span> (m &amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a1c86758e08ef3870ba966a2f83289407">SG_COLORMASK_R</a>) {</div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;    res |= D3D11_COLOR_WRITE_ENABLE_RED;</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;  }</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;  <span class="keywordflow">if</span> (m &amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2af61dc51ca3ada44f11e59503180a47c6">SG_COLORMASK_G</a>) {</div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;    res |= D3D11_COLOR_WRITE_ENABLE_GREEN;</div><div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;  }</div><div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;  <span class="keywordflow">if</span> (m &amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a072e65e21856ed2801874122723ab20d">SG_COLORMASK_B</a>) {</div><div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;    res |= D3D11_COLOR_WRITE_ENABLE_BLUE;</div><div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;  }</div><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;  <span class="keywordflow">if</span> (m &amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2adfb66631b5ff6d359c7cdc659b4f8e33">SG_COLORMASK_A</a>) {</div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;    res |= D3D11_COLOR_WRITE_ENABLE_ALPHA;</div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;  }</div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;}</div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;</div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;<span class="comment">/*-- backend resource structures ---------------------------------------------*/</span></div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>;</div><div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8f">sg_buffer_type</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>;</div><div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#afb85c5d9b1bce96aa3b530d581194d1a">usage</a>;</div><div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;  uint32_t upd_frame_index;</div><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;  ID3D11Buffer* d3d11_buf;</div><div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;} _sg_buffer;</div><div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;</div><div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_buffer_slot(_sg_buffer* buf)</div><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;{</div><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;  SOKOL_ASSERT(buf);</div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;  memset(buf, 0, <span class="keyword">sizeof</span>(_sg_buffer));</div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;}</div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;</div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">sg_image_type</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>;</div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;  <span class="keywordtype">bool</span> render_target;</div><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a76aaa5c50746272e7d2de9aece921757">width</a>;</div><div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae23e72c69f79d0aa647aa7929ef3f232">height</a>;</div><div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa8bd8cf1eef34712fdb6ad58b540a2ee">depth</a>;</div><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;  <span class="keywordtype">int</span> num_mipmaps;</div><div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#afb85c5d9b1bce96aa3b530d581194d1a">usage</a>;</div><div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> pixel_format;</div><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;  <span class="keywordtype">int</span> sample_count;</div><div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> min_filter;</div><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> mag_filter;</div><div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_u;</div><div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_v;</div><div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_w;</div><div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;  uint32_t max_anisotropy;</div><div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;  uint32_t upd_frame_index;</div><div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;  DXGI_FORMAT d3d11_format;</div><div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;  ID3D11Texture2D* d3d11_tex2d;</div><div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;  ID3D11Texture3D* d3d11_tex3d;</div><div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;  ID3D11Texture2D* d3d11_texds;</div><div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;  ID3D11Texture2D* d3d11_texmsaa;</div><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;  ID3D11ShaderResourceView* d3d11_srv;</div><div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;  ID3D11SamplerState* d3d11_smp;</div><div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;} _sg_image;</div><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;</div><div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_image_slot(_sg_image* img)</div><div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;{</div><div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;  SOKOL_ASSERT(img);</div><div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;  memset(img, 0, <span class="keyword">sizeof</span>(_sg_image));</div><div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;}</div><div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;</div><div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>;</div><div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;} _sg_uniform_block;</div><div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;</div><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">sg_image_type</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>;</div><div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;} _sg_shader_image;</div><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;</div><div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;  <span class="keywordtype">int</span> num_uniform_blocks;</div><div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;  <span class="keywordtype">int</span> num_images;</div><div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;  _sg_uniform_block uniform_blocks[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>];</div><div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;  _sg_shader_image images[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;  ID3D11Buffer* d3d11_cbs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>];</div><div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;} _sg_shader_stage;</div><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;</div><div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;  _sg_shader_stage stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">SG_NUM_SHADER_STAGES</a>];</div><div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;  ID3D11VertexShader* d3d11_vs;</div><div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;  ID3D11PixelShader* d3d11_fs;</div><div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;  <span class="keywordtype">void</span>* d3d11_vs_blob;</div><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;  <span class="keywordtype">int</span> d3d11_vs_blob_length;</div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;} _sg_shader;</div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;</div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_shader_slot(_sg_shader* shd)</div><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;{</div><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;  SOKOL_ASSERT(shd);</div><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;  memset(shd, 0, <span class="keyword">sizeof</span>(_sg_shader));</div><div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;}</div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;</div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;  _sg_shader* <a class="code" href="../../dc/da3/glcorearb_8h.html#a57b2a96adb1d51204909a82d861e395e">shader</a>;</div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;  <a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> shader_id;</div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641">sg_index_type</a> index_type;</div><div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;  <span class="keywordtype">bool</span> vertex_layout_valid[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;  <span class="keywordtype">int</span> color_attachment_count;</div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> color_format;</div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> depth_format;</div><div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;  <span class="keywordtype">int</span> sample_count;</div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;  <span class="keywordtype">float</span> blend_color[4];</div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;  UINT d3d11_stencil_ref;</div><div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;  UINT d3d11_vb_strides[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;  D3D_PRIMITIVE_TOPOLOGY d3d11_topology;</div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;  DXGI_FORMAT d3d11_index_format;</div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;  ID3D11InputLayout* d3d11_il;</div><div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;  ID3D11RasterizerState* d3d11_rs;</div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;  ID3D11DepthStencilState* d3d11_dss;</div><div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;  ID3D11BlendState* d3d11_bs;</div><div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;} _sg_pipeline;</div><div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;</div><div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_pipeline_slot(_sg_pipeline* pip)</div><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;{</div><div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;  SOKOL_ASSERT(pip);</div><div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;  memset(pip, 0, <span class="keyword">sizeof</span>(_sg_pipeline));</div><div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;}</div><div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;</div><div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;  _sg_image* image;</div><div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;  <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> image_id;</div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;  <span class="keywordtype">int</span> mip_level;</div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;  <span class="keywordtype">int</span> slice;</div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;} _sg_attachment;</div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;</div><div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;  <span class="keywordtype">int</span> num_color_atts;</div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;  _sg_attachment color_atts[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>];</div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;  _sg_attachment ds_att;</div><div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;  ID3D11RenderTargetView* d3d11_rtvs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>];</div><div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;  ID3D11DepthStencilView* d3d11_dsv;</div><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;} _sg_pass;</div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;</div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_pass_slot(_sg_pass* pass)</div><div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;{</div><div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;  SOKOL_ASSERT(pass);</div><div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;  memset(pass, 0, <span class="keyword">sizeof</span>(_sg_pass));</div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;}</div><div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;</div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;} _sg_context;</div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;</div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_context_slot(_sg_context* context)</div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;{</div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;  SOKOL_ASSERT(context);</div><div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;  memset(context, 0, <span class="keyword">sizeof</span>(_sg_context));</div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;}</div><div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;</div><div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;<span class="comment">/*-- main D3D11 backend state and functions ----------------------------------*/</span></div><div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;  <span class="keywordtype">bool</span> valid;</div><div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;  ID3D11Device* dev;</div><div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;  ID3D11DeviceContext* ctx;</div><div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* (*rtv_cb)(<a class="code" href="../../dc/da3/glcorearb_8h.html#a950fc91edb4504f62f1c577bf4727c29">void</a>);</div><div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span>* (*dsv_cb)(<a class="code" href="../../dc/da3/glcorearb_8h.html#a950fc91edb4504f62f1c577bf4727c29">void</a>);</div><div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;  <span class="keywordtype">bool</span> in_pass;</div><div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;  <span class="keywordtype">bool</span> use_indexed_draw;</div><div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;  <span class="keywordtype">int</span> cur_width;</div><div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;  <span class="keywordtype">int</span> cur_height;</div><div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;  <span class="keywordtype">int</span> num_rtvs;</div><div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;  _sg_pass* cur_pass;</div><div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;  <a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> cur_pass_id;</div><div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;  _sg_pipeline* cur_pipeline;</div><div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;  <a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> cur_pipeline_id;</div><div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;  ID3D11RenderTargetView* cur_rtvs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>];</div><div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;  ID3D11DepthStencilView* cur_dsv;</div><div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;  <span class="comment">/* the following arrays are used for unbinding resources, they will always contain zeroes */</span></div><div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;  ID3D11RenderTargetView* zero_rtvs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>];</div><div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;  ID3D11Buffer* zero_vbs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;  UINT zero_vb_offsets[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;  UINT zero_vb_strides[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;  ID3D11Buffer* zero_cbs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>];</div><div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;  ID3D11ShaderResourceView* zero_srvs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;  ID3D11SamplerState* zero_smps[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;  <span class="comment">/* global subresourcedata array for texture updates */</span></div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;  D3D11_SUBRESOURCE_DATA subres_data[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca8a9a7015046cf047f0534dfe86bc7545">SG_MAX_MIPMAPS</a> * <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caaf24e90f94788e5300a2149564f3c5c2">SG_MAX_TEXTUREARRAY_LAYERS</a>];</div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;} _sg_backend;</div><div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;<span class="keyword">static</span> _sg_backend _sg_d3d11;</div><div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;</div><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_setup_backend(<span class="keyword">const</span> <a class="code" href="../../dc/d0e/structsg__desc.html">sg_desc</a>* desc)</div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;{</div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;  SOKOL_ASSERT(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a388a3edd562774d081a32e0a88b4ee1f">d3d11_device</a>);</div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;  SOKOL_ASSERT(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a811ae5a1b522ea26a6c06318273fc6bc">d3d11_device_context</a>);</div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;  SOKOL_ASSERT(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a11079fb6fa66d884e04819998b1eb3f4">d3d11_render_target_view_cb</a>);</div><div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;  SOKOL_ASSERT(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a5fa12c0b28ca943f898f8a0d6f1978fc">d3d11_depth_stencil_view_cb</a>);</div><div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;  SOKOL_ASSERT(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a11079fb6fa66d884e04819998b1eb3f4">d3d11_render_target_view_cb</a> != desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a5fa12c0b28ca943f898f8a0d6f1978fc">d3d11_depth_stencil_view_cb</a>);</div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;  memset(&amp;_sg_d3d11, 0, <span class="keyword">sizeof</span>(_sg_d3d11));</div><div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;  _sg_d3d11.valid = <span class="keyword">true</span>;</div><div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;  _sg_d3d11.dev = (ID3D11Device*)desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a388a3edd562774d081a32e0a88b4ee1f">d3d11_device</a>;</div><div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;  _sg_d3d11.ctx = (ID3D11DeviceContext*)desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a811ae5a1b522ea26a6c06318273fc6bc">d3d11_device_context</a>;</div><div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;  _sg_d3d11.rtv_cb = desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a11079fb6fa66d884e04819998b1eb3f4">d3d11_render_target_view_cb</a>;</div><div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;  _sg_d3d11.dsv_cb = desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a5fa12c0b28ca943f898f8a0d6f1978fc">d3d11_depth_stencil_view_cb</a>;</div><div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;}</div><div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;</div><div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_discard_backend()</div><div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;{</div><div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;  SOKOL_ASSERT(_sg_d3d11.valid);</div><div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;  memset(&amp;_sg_d3d11, 0, <span class="keyword">sizeof</span>(_sg_d3d11));</div><div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;}</div><div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;</div><div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_query_feature(sg_feature f)</div><div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;{</div><div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;  <span class="keywordflow">switch</span> (f) {</div><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4">SG_FEATURE_INSTANCING</a>:</div><div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a9ca2b37fa43fcd46f8d6e537064e3e9b">SG_FEATURE_TEXTURE_COMPRESSION_DXT</a>:</div><div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897afd60e8098c18e6a67973d66e173742d8">SG_FEATURE_TEXTURE_FLOAT</a>:</div><div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a1afe1718136ca6a21672b44eacb70b8e">SG_FEATURE_TEXTURE_HALF_FLOAT</a>:</div><div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ac7c094127fe7cd4de810406b6a6c9c68">SG_FEATURE_ORIGIN_TOP_LEFT</a>:</div><div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a900e4644906ceec168a2ce44452e1a31">SG_FEATURE_MSAA_RENDER_TARGETS</a>:</div><div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897acd4385efaeceb7f3bb64817dbf0d5acf">SG_FEATURE_MULTIPLE_RENDER_TARGET</a>:</div><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a8a9131b5aa4d596ee5caaf5c738dd90f">SG_FEATURE_IMAGETYPE_3D</a>:</div><div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a3b2fbf1b80817df6f45664c192aa1183">SG_FEATURE_IMAGETYPE_ARRAY</a>:</div><div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;  }</div><div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;}</div><div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;</div><div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_d3d11_clear_state()</div><div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;{</div><div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;  <span class="comment">/* clear all the device context state, so that resource refs don&#39;t keep stuck in the d3d device context */</span></div><div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;  ID3D11DeviceContext_OMSetRenderTargets(_sg_d3d11.ctx, SG_MAX_COLOR_ATTACHMENTS, _sg_d3d11.zero_rtvs, <span class="keyword">nullptr</span>);</div><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;  ID3D11DeviceContext_RSSetState(_sg_d3d11.ctx, <span class="keyword">nullptr</span>);</div><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;  ID3D11DeviceContext_OMSetDepthStencilState(_sg_d3d11.ctx, <span class="keyword">nullptr</span>, 0);</div><div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;  ID3D11DeviceContext_OMSetBlendState(_sg_d3d11.ctx, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, 0xFFFFFFFF);</div><div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;  ID3D11DeviceContext_IASetVertexBuffers(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_BUFFERS, _sg_d3d11.zero_vbs, _sg_d3d11.zero_vb_strides, _sg_d3d11.zero_vb_offsets);</div><div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;  ID3D11DeviceContext_IASetIndexBuffer(_sg_d3d11.ctx, <span class="keyword">nullptr</span>, DXGI_FORMAT_UNKNOWN, 0);</div><div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;  ID3D11DeviceContext_IASetInputLayout(_sg_d3d11.ctx, <span class="keyword">nullptr</span>);</div><div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;  ID3D11DeviceContext_VSSetShader(_sg_d3d11.ctx, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, 0);</div><div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;  ID3D11DeviceContext_PSSetShader(_sg_d3d11.ctx, <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, 0);</div><div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;  ID3D11DeviceContext_VSSetConstantBuffers(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_UBS, _sg_d3d11.zero_cbs);</div><div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;  ID3D11DeviceContext_PSSetConstantBuffers(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_UBS, _sg_d3d11.zero_cbs);</div><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;  ID3D11DeviceContext_VSSetShaderResources(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_IMAGES, _sg_d3d11.zero_srvs);</div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;  ID3D11DeviceContext_PSSetShaderResources(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_IMAGES, _sg_d3d11.zero_srvs);</div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;  ID3D11DeviceContext_VSSetSamplers(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_IMAGES, _sg_d3d11.zero_smps);</div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;  ID3D11DeviceContext_PSSetSamplers(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_IMAGES, _sg_d3d11.zero_smps);</div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;}</div><div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;</div><div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_reset_state_cache()</div><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;{</div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;  <span class="comment">/* just clear the d3d11 device context state */</span></div><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;  _sg_d3d11_clear_state();</div><div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;}</div><div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;</div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_activate_context(_sg_context* ctx)</div><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;{</div><div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;  _SOKOL_UNUSED(ctx);</div><div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;  _sg_reset_state_cache();</div><div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;}</div><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;</div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_context(_sg_context* ctx)</div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;{</div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;  SOKOL_ASSERT(ctx);</div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;  SOKOL_ASSERT(ctx-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;  ctx-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;}</div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;</div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_context(_sg_context* ctx)</div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;{</div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;  SOKOL_ASSERT(ctx);</div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;  _sg_init_context_slot(ctx);</div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;}</div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;</div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_buffer(_sg_buffer* buf, <span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__buffer__desc.html">sg_buffer_desc</a>* desc)</div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;{</div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;  SOKOL_ASSERT(buf &amp;&amp; desc);</div><div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;  SOKOL_ASSERT(buf-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;  SOKOL_ASSERT(!buf-&gt;d3d11_buf);</div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;  buf-&gt;size = desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a73cd8286ef49470f30f83c2118d2136d">size</a>;</div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;  buf-&gt;type = _sg_def(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#aed03d70712027dc18902bfab4a6559f3">type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fa1052a9f00ec6b8a3e914db754c0c64e2">SG_BUFFERTYPE_VERTEXBUFFER</a>);</div><div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;  buf-&gt;usage = _sg_def(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a3fa569faec49b1252c05dd1210a85b10">usage</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>);</div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;  buf-&gt;upd_frame_index = 0;</div><div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> injected = (0 != desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a1b3954477f336313d9a5a1c989cabce4">d3d11_buffer</a>);</div><div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;  <span class="keywordflow">if</span> (injected) {</div><div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;    buf-&gt;d3d11_buf = (ID3D11Buffer*)desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a1b3954477f336313d9a5a1c989cabce4">d3d11_buffer</a>;</div><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;    ID3D11Buffer_AddRef(buf-&gt;d3d11_buf);</div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;    D3D11_BUFFER_DESC d3d11_desc;</div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;    memset(&amp;d3d11_desc, 0, <span class="keyword">sizeof</span>(d3d11_desc));</div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;    d3d11_desc.ByteWidth = buf-&gt;size;</div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;    d3d11_desc.Usage = _sg_d3d11_usage(buf-&gt;usage);</div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;    d3d11_desc.BindFlags = buf-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fa1052a9f00ec6b8a3e914db754c0c64e2">SG_BUFFERTYPE_VERTEXBUFFER</a> ? D3D11_BIND_VERTEX_BUFFER : D3D11_BIND_INDEX_BUFFER;</div><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;    d3d11_desc.CPUAccessFlags = _sg_d3d11_cpu_access_flags(buf-&gt;usage);</div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;    D3D11_SUBRESOURCE_DATA* init_data_ptr = 0;</div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;    D3D11_SUBRESOURCE_DATA init_data;</div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;    memset(&amp;init_data, 0, <span class="keyword">sizeof</span>(init_data));</div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;    <span class="keywordflow">if</span> (buf-&gt;usage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>) {</div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;      SOKOL_ASSERT(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a409e6cb69174e210981627d0a356bf65">content</a>);</div><div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;      init_data.pSysMem = desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a409e6cb69174e210981627d0a356bf65">content</a>;</div><div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;      init_data_ptr = &amp;init_data;</div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;    }</div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;    HRESULT hr = ID3D11Device_CreateBuffer(_sg_d3d11.dev, &amp;d3d11_desc, init_data_ptr, &amp;buf-&gt;d3d11_buf);</div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;    _SOKOL_UNUSED(hr);</div><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;    SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; buf-&gt;d3d11_buf);</div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;  }</div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;  buf-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;}</div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;</div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_buffer(_sg_buffer* buf)</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;{</div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;  SOKOL_ASSERT(buf);</div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;  <span class="keywordflow">if</span> (buf-&gt;d3d11_buf) {</div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;    ID3D11Buffer_Release(buf-&gt;d3d11_buf);</div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;  }</div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;  _sg_init_buffer_slot(buf);</div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;}</div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;</div><div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_d3d11_fill_subres_data(<span class="keyword">const</span> _sg_image* img, <span class="keyword">const</span> <a class="code" href="../../dd/d44/structsg__image__content.html">sg_image_content</a>* content)</div><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;{</div><div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> num_faces = (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>) ? 6 : 1;</div><div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> num_slices = (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>) ? img-&gt;depth : 1;</div><div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;  <span class="keywordtype">int</span> subres_index = 0;</div><div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;  <a class="code" href="../../d8/df7/BenchCathodeSegmentation_8cxx.html#a2b95d32c08b7fd322b51d91e97f1b552">for</a> (<span class="keywordtype">int</span> face_index = 0; face_index &lt; num_faces; face_index++) {</div><div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slice_index = 0; slice_index &lt; num_slices; slice_index++) {</div><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mip_index = 0; mip_index &lt; img-&gt;num_mipmaps; mip_index++, subres_index++) {</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;        SOKOL_ASSERT(subres_index &lt; (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca8a9a7015046cf047f0534dfe86bc7545">SG_MAX_MIPMAPS</a> * <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caaf24e90f94788e5300a2149564f3c5c2">SG_MAX_TEXTUREARRAY_LAYERS</a>));</div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;        D3D11_SUBRESOURCE_DATA* subres_data = &amp;_sg_d3d11.subres_data[subres_index];</div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> mip_width = ((img-&gt;width &gt;&gt; mip_index) &gt; 0) ? img-&gt;width &gt;&gt; mip_index : 1;</div><div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> mip_height = ((img-&gt;height &gt;&gt; mip_index) &gt; 0) ? img-&gt;height &gt;&gt; mip_index : 1;</div><div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d35/structsg__subimage__content.html">sg_subimage_content</a>* subimg_content = &amp;(content-&gt;<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index]);</div><div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> slice_size = subimg_content-&gt;<a class="code" href="../../d1/d35/structsg__subimage__content.html#ad5cf41c09de0390218aaa479aa2e58db">size</a> / num_slices;</div><div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> slice_offset = slice_size * slice_index;</div><div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;        <span class="keyword">const</span> uint8_t* ptr = (<span class="keyword">const</span> uint8_t*)subimg_content-&gt;<a class="code" href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c">ptr</a>;</div><div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;        subres_data-&gt;pSysMem = ptr + slice_offset;</div><div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;        subres_data-&gt;SysMemPitch = _sg_row_pitch(img-&gt;pixel_format, mip_width);</div><div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;        <span class="keywordflow">if</span> (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>) {</div><div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;          <span class="comment">/* FIXME? const int mip_depth = ((img-&gt;depth&gt;&gt;mip_index)&gt;0) ? img-&gt;depth&gt;&gt;mip_index : 1; */</span></div><div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;          subres_data-&gt;SysMemSlicePitch = _sg_surface_pitch(img-&gt;pixel_format, mip_width, mip_height);</div><div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;          subres_data-&gt;SysMemSlicePitch = 0;</div><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;        }</div><div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;      }</div><div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;    }</div><div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;  }</div><div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;}</div><div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;</div><div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_image(_sg_image* img, <span class="keyword">const</span> <a class="code" href="../../d4/d94/structsg__image__desc.html">sg_image_desc</a>* desc)</div><div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;{</div><div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;  SOKOL_ASSERT(img &amp;&amp; desc);</div><div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;  SOKOL_ASSERT(img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;  SOKOL_ASSERT(!img-&gt;d3d11_tex2d &amp;&amp; !img-&gt;d3d11_tex3d &amp;&amp; !img-&gt;d3d11_texds &amp;&amp; !img-&gt;d3d11_texmsaa);</div><div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;  SOKOL_ASSERT(!img-&gt;d3d11_srv &amp;&amp; !img-&gt;d3d11_smp);</div><div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;  HRESULT hr;</div><div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;</div><div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;  img-&gt;type = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a206bf908ad986430c63d819f06c4a91a">type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a>);</div><div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;  img-&gt;render_target = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#aeb5ea1efacf1fcbe702491bd6417df70">render_target</a>;</div><div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;  img-&gt;width = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a2852616fac46bf1d405b822ac612e94a">width</a>;</div><div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;  img-&gt;height = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a80175365c540f912492e50a5a8b362e7">height</a>;</div><div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;  img-&gt;depth = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a205fafb8e91cc1249e481378b7bac888">depth</a>, 1);</div><div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;  img-&gt;num_mipmaps = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a0653e80837f6ffa9477a62e627fad170">num_mipmaps</a>, 1);</div><div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;  img-&gt;usage = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a4610a2c95a3f97c99390ec4e08caa1ca">usage</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>);</div><div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;  img-&gt;pixel_format = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a07ce05ddf423b45fb74375b384dc1f14">pixel_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>);</div><div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;  img-&gt;sample_count = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a7e0d5c7130c32b489e509a6bcfd9904a">sample_count</a>, 1);</div><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;  img-&gt;min_filter = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a09eb7207f75e8ad1a8e49335b5da0a0f">min_filter</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>);</div><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;  img-&gt;mag_filter = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a7cc28a336de67a2fee6a39c0a4cb3eb6">mag_filter</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>);</div><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;  img-&gt;wrap_u = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#af56aa1ad4802c4377f32a3656cc00540">wrap_u</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>);</div><div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;  img-&gt;wrap_v = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ad92e8d7c8fc89dea7db54d569982f57d">wrap_v</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>);</div><div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;  img-&gt;wrap_w = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a457ed7b98ffce90d5cb6b70e2cc4027d">wrap_w</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>);</div><div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;  img-&gt;max_anisotropy = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a1db73b1b6b31ac8dc14f0c2358057f87">max_anisotropy</a>, 1);</div><div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;  img-&gt;upd_frame_index = 0;</div><div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> injected = (0 != desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a47068f539f908275b14356da7666c869">d3d11_texture</a>);</div><div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;</div><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;  <span class="comment">/* special case depth-stencil buffer? */</span></div><div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;  <span class="keywordflow">if</span> (_sg_is_valid_rendertarget_depth_format(img-&gt;pixel_format)) {</div><div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;    <span class="comment">/* create only a depth-texture */</span></div><div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;    SOKOL_ASSERT(!injected);</div><div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;    img-&gt;d3d11_format = _sg_d3d11_rendertarget_depth_format(img-&gt;pixel_format);</div><div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;    <span class="keywordflow">if</span> (img-&gt;d3d11_format == DXGI_FORMAT_UNKNOWN) {</div><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;      <span class="comment">/* trying to create a texture format that&#39;s not supported by D3D */</span></div><div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;      SOKOL_LOG(<span class="stringliteral">&quot;trying to create a D3D11 depth-texture with unsupported pixel format\n&quot;</span>);</div><div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;      img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;    }</div><div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;    D3D11_TEXTURE2D_DESC d3d11_desc;</div><div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;    memset(&amp;d3d11_desc, 0, <span class="keyword">sizeof</span>(d3d11_desc));</div><div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;    d3d11_desc.Width = img-&gt;width;</div><div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;    d3d11_desc.Height = img-&gt;height;</div><div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;    d3d11_desc.MipLevels = 1;</div><div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;    d3d11_desc.ArraySize = 1;</div><div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;    d3d11_desc.Format = img-&gt;d3d11_format;</div><div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;    d3d11_desc.Usage = D3D11_USAGE_DEFAULT;</div><div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;    d3d11_desc.BindFlags = D3D11_BIND_DEPTH_STENCIL;</div><div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;    d3d11_desc.SampleDesc.Count = img-&gt;sample_count;</div><div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;    d3d11_desc.SampleDesc.Quality = (img-&gt;sample_count &gt; 1) ? D3D11_STANDARD_MULTISAMPLE_PATTERN : 0;</div><div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;    hr = ID3D11Device_CreateTexture2D(_sg_d3d11.dev, &amp;d3d11_desc, <span class="keyword">nullptr</span>, &amp;img-&gt;d3d11_texds);</div><div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;    SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; img-&gt;d3d11_texds);</div><div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;    <span class="comment">/* create (or inject) color texture */</span></div><div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;</div><div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;    <span class="comment">/* prepare initial content pointers */</span></div><div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;    D3D11_SUBRESOURCE_DATA* init_data = 0;</div><div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;    <span class="keywordflow">if</span> (!injected &amp;&amp; (img-&gt;usage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>) &amp;&amp; !img-&gt;render_target) {</div><div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;      _sg_d3d11_fill_subres_data(img, &amp;desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ada2a41a3d05f322bc67e6441dbeb64d3">content</a>);</div><div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;      init_data = _sg_d3d11.subres_data;</div><div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;    }</div><div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;    <span class="keywordflow">if</span> (img-&gt;type != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>) {</div><div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;      <span class="comment">/* 2D-, cube- or array-texture */</span></div><div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;      <span class="comment">/* if this is an MSAA render target, the following texture will be the &#39;resolve-texture&#39; */</span></div><div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;      D3D11_TEXTURE2D_DESC d3d11_tex_desc;</div><div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;      memset(&amp;d3d11_tex_desc, 0, <span class="keyword">sizeof</span>(d3d11_tex_desc));</div><div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;      d3d11_tex_desc.Width = img-&gt;width;</div><div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;      d3d11_tex_desc.Height = img-&gt;height;</div><div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;      d3d11_tex_desc.MipLevels = img-&gt;num_mipmaps;</div><div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;      <span class="keywordflow">switch</span> (img-&gt;type) {</div><div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>:</div><div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;          d3d11_tex_desc.ArraySize = img-&gt;depth;</div><div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>:</div><div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;          d3d11_tex_desc.ArraySize = 6;</div><div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;          d3d11_tex_desc.ArraySize = 1;</div><div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;      }</div><div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;      d3d11_tex_desc.BindFlags = D3D11_BIND_SHADER_RESOURCE;</div><div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;      <span class="keywordflow">if</span> (img-&gt;render_target) {</div><div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;        img-&gt;d3d11_format = _sg_d3d11_rendertarget_color_format(img-&gt;pixel_format);</div><div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;        d3d11_tex_desc.Format = img-&gt;d3d11_format;</div><div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;        d3d11_tex_desc.Usage = D3D11_USAGE_DEFAULT;</div><div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;        <span class="keywordflow">if</span> (img-&gt;sample_count == 1) {</div><div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;          d3d11_tex_desc.BindFlags |= D3D11_BIND_RENDER_TARGET;</div><div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;        }</div><div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;        d3d11_tex_desc.CPUAccessFlags = 0;</div><div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;        img-&gt;d3d11_format = _sg_d3d11_texture_format(img-&gt;pixel_format);</div><div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;        d3d11_tex_desc.Format = img-&gt;d3d11_format;</div><div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;        d3d11_tex_desc.Usage = _sg_d3d11_usage(img-&gt;usage);</div><div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;        d3d11_tex_desc.CPUAccessFlags = _sg_d3d11_cpu_access_flags(img-&gt;usage);</div><div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;      }</div><div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;      <span class="keywordflow">if</span> (img-&gt;d3d11_format == DXGI_FORMAT_UNKNOWN) {</div><div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;        <span class="comment">/* trying to create a texture format that&#39;s not supported by D3D */</span></div><div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;        SOKOL_LOG(<span class="stringliteral">&quot;trying to create a D3D11 texture with unsupported pixel format\n&quot;</span>);</div><div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;        img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;      }</div><div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;      d3d11_tex_desc.SampleDesc.Count = 1;</div><div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;      d3d11_tex_desc.SampleDesc.Quality = 0;</div><div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;      d3d11_tex_desc.MiscFlags = (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>) ? D3D11_RESOURCE_MISC_TEXTURECUBE : 0;</div><div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;      <span class="keywordflow">if</span> (injected) {</div><div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;        img-&gt;d3d11_tex2d = (ID3D11Texture2D*)desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a47068f539f908275b14356da7666c869">d3d11_texture</a>;</div><div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;        ID3D11Texture2D_AddRef(img-&gt;d3d11_tex2d);</div><div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;        hr = ID3D11Device_CreateTexture2D(_sg_d3d11.dev, &amp;d3d11_tex_desc, init_data, &amp;img-&gt;d3d11_tex2d);</div><div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;        SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; img-&gt;d3d11_tex2d);</div><div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;      }</div><div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;</div><div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;      <span class="comment">/* also need to create a separate MSAA render target texture? */</span></div><div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;      <span class="keywordflow">if</span> (img-&gt;sample_count &gt; 1) {</div><div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;        d3d11_tex_desc.BindFlags |= D3D11_BIND_RENDER_TARGET;</div><div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;        d3d11_tex_desc.SampleDesc.Count = img-&gt;sample_count;</div><div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;        d3d11_tex_desc.SampleDesc.Quality = (UINT)D3D11_STANDARD_MULTISAMPLE_PATTERN;</div><div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;        hr = ID3D11Device_CreateTexture2D(_sg_d3d11.dev, &amp;d3d11_tex_desc, <span class="keyword">nullptr</span>, &amp;img-&gt;d3d11_texmsaa);</div><div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;        SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; img-&gt;d3d11_texmsaa);</div><div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;      }</div><div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;</div><div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;      <span class="comment">/* shader-resource-view */</span></div><div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;      D3D11_SHADER_RESOURCE_VIEW_DESC d3d11_srv_desc;</div><div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;      memset(&amp;d3d11_srv_desc, 0, <span class="keyword">sizeof</span>(d3d11_srv_desc));</div><div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;      d3d11_srv_desc.Format = d3d11_tex_desc.Format;</div><div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;      <span class="keywordflow">switch</span> (img-&gt;type) {</div><div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a>:</div><div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;          d3d11_srv_desc.ViewDimension = D3D11_SRV_DIMENSION_TEXTURE2D;</div><div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;          d3d11_srv_desc.Texture2D.MipLevels = img-&gt;num_mipmaps;</div><div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>:</div><div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;          d3d11_srv_desc.ViewDimension = D3D11_SRV_DIMENSION_TEXTURECUBE;</div><div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;          d3d11_srv_desc.TextureCube.MipLevels = img-&gt;num_mipmaps;</div><div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>:</div><div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;          d3d11_srv_desc.ViewDimension = D3D11_SRV_DIMENSION_TEXTURE2DARRAY;</div><div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;          d3d11_srv_desc.Texture2DArray.MipLevels = img-&gt;num_mipmaps;</div><div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;          d3d11_srv_desc.Texture2DArray.ArraySize = img-&gt;depth;</div><div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;          SOKOL_UNREACHABLE;</div><div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;      }</div><div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;      hr = ID3D11Device_CreateShaderResourceView(_sg_d3d11.dev, (ID3D11Resource*)img-&gt;d3d11_tex2d, &amp;d3d11_srv_desc, &amp;img-&gt;d3d11_srv);</div><div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;      SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; img-&gt;d3d11_srv);</div><div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;      <span class="comment">/* 3D texture */</span></div><div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;      D3D11_TEXTURE3D_DESC d3d11_tex_desc;</div><div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;      memset(&amp;d3d11_tex_desc, 0, <span class="keyword">sizeof</span>(d3d11_tex_desc));</div><div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;      d3d11_tex_desc.Width = img-&gt;width;</div><div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;      d3d11_tex_desc.Height = img-&gt;height;</div><div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;      d3d11_tex_desc.Depth = img-&gt;depth;</div><div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;      d3d11_tex_desc.MipLevels = img-&gt;num_mipmaps;</div><div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;      <span class="keywordflow">if</span> (img-&gt;render_target) {</div><div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;        img-&gt;d3d11_format = _sg_d3d11_rendertarget_color_format(img-&gt;pixel_format);</div><div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;        d3d11_tex_desc.Format = img-&gt;d3d11_format;</div><div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;        d3d11_tex_desc.Usage = D3D11_USAGE_DEFAULT;</div><div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;        d3d11_tex_desc.BindFlags = D3D11_BIND_SHADER_RESOURCE | D3D11_BIND_RENDER_TARGET;</div><div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;        d3d11_tex_desc.CPUAccessFlags = 0;</div><div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;        img-&gt;d3d11_format = _sg_d3d11_texture_format(img-&gt;pixel_format);</div><div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;        d3d11_tex_desc.Format = img-&gt;d3d11_format;</div><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;        d3d11_tex_desc.Usage = _sg_d3d11_usage(img-&gt;usage);</div><div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;        d3d11_tex_desc.BindFlags = D3D11_BIND_SHADER_RESOURCE;</div><div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;        d3d11_tex_desc.CPUAccessFlags = _sg_d3d11_cpu_access_flags(img-&gt;usage);</div><div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;      }</div><div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;      <span class="keywordflow">if</span> (img-&gt;d3d11_format == DXGI_FORMAT_UNKNOWN) {</div><div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;        <span class="comment">/* trying to create a texture format that&#39;s not supported by D3D */</span></div><div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;        SOKOL_LOG(<span class="stringliteral">&quot;trying to create a D3D11 texture with unsupported pixel format\n&quot;</span>);</div><div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;        img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;      }</div><div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;      <span class="keywordflow">if</span> (injected) {</div><div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;        img-&gt;d3d11_tex3d = (ID3D11Texture3D*)desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a47068f539f908275b14356da7666c869">d3d11_texture</a>;</div><div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;        ID3D11Texture3D_AddRef(img-&gt;d3d11_tex3d);</div><div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;        hr = ID3D11Device_CreateTexture3D(_sg_d3d11.dev, &amp;d3d11_tex_desc, init_data, &amp;img-&gt;d3d11_tex3d);</div><div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;        SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; img-&gt;d3d11_tex3d);</div><div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;      }</div><div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;</div><div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;      <span class="comment">/* shader resource view for 3d texture */</span></div><div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;      D3D11_SHADER_RESOURCE_VIEW_DESC d3d11_srv_desc;</div><div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;      memset(&amp;d3d11_srv_desc, 0, <span class="keyword">sizeof</span>(d3d11_srv_desc));</div><div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;      d3d11_srv_desc.Format = d3d11_tex_desc.Format;</div><div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;      d3d11_srv_desc.ViewDimension = D3D11_SRV_DIMENSION_TEXTURE3D;</div><div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;      d3d11_srv_desc.Texture3D.MipLevels = img-&gt;num_mipmaps;</div><div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;      hr = ID3D11Device_CreateShaderResourceView(_sg_d3d11.dev, (ID3D11Resource*)img-&gt;d3d11_tex3d, &amp;d3d11_srv_desc, &amp;img-&gt;d3d11_srv);</div><div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;      SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; img-&gt;d3d11_srv);</div><div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;    }</div><div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;</div><div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;    <span class="comment">/* sampler state object, note D3D11 implements an internal shared-pool for sampler objects */</span></div><div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;    D3D11_SAMPLER_DESC d3d11_smp_desc;</div><div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;    memset(&amp;d3d11_smp_desc, 0, <span class="keyword">sizeof</span>(d3d11_smp_desc));</div><div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;    d3d11_smp_desc.Filter = _sg_d3d11_filter(img-&gt;min_filter, img-&gt;mag_filter, img-&gt;max_anisotropy);</div><div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;    d3d11_smp_desc.AddressU = _sg_d3d11_address_mode(img-&gt;wrap_u);</div><div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;    d3d11_smp_desc.AddressV = _sg_d3d11_address_mode(img-&gt;wrap_v);</div><div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;    d3d11_smp_desc.AddressW = _sg_d3d11_address_mode(img-&gt;wrap_w);</div><div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;    d3d11_smp_desc.MaxAnisotropy = img-&gt;max_anisotropy;</div><div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;    d3d11_smp_desc.ComparisonFunc = D3D11_COMPARISON_NEVER;</div><div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;    d3d11_smp_desc.MinLOD = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a65deea510785efb62849e55b84193263">min_lod</a>;</div><div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;    d3d11_smp_desc.MaxLOD = _sg_def_flt(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a435a6e2e71f190b00ef4666c83173572">max_lod</a>, D3D11_FLOAT32_MAX);</div><div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;    hr = ID3D11Device_CreateSamplerState(_sg_d3d11.dev, &amp;d3d11_smp_desc, &amp;img-&gt;d3d11_smp);</div><div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;    SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; img-&gt;d3d11_smp);</div><div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;  }</div><div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;  img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;}</div><div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;</div><div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_image(_sg_image* img)</div><div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;{</div><div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;  SOKOL_ASSERT(img);</div><div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;  <span class="keywordflow">if</span> (img-&gt;d3d11_tex2d) {</div><div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;    ID3D11Texture2D_Release(img-&gt;d3d11_tex2d);</div><div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;  }</div><div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;  <span class="keywordflow">if</span> (img-&gt;d3d11_tex3d) {</div><div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;    ID3D11Texture3D_Release(img-&gt;d3d11_tex3d);</div><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;  }</div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;  <span class="keywordflow">if</span> (img-&gt;d3d11_texds) {</div><div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;    ID3D11Texture2D_Release(img-&gt;d3d11_texds);</div><div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;  }</div><div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;  <span class="keywordflow">if</span> (img-&gt;d3d11_texmsaa) {</div><div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;    ID3D11Texture2D_Release(img-&gt;d3d11_texmsaa);</div><div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;  }</div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;  <span class="keywordflow">if</span> (img-&gt;d3d11_srv) {</div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;    ID3D11ShaderResourceView_Release(img-&gt;d3d11_srv);</div><div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;  }</div><div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;  <span class="keywordflow">if</span> (img-&gt;d3d11_smp) {</div><div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;    ID3D11SamplerState_Release(img-&gt;d3d11_smp);</div><div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;  }</div><div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;  _sg_init_image_slot(img);</div><div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;}</div><div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;</div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;<span class="preprocessor">#if defined(SOKOL_D3D11_SHADER_COMPILER)</span></div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;_SOKOL_PRIVATE ID3DBlob* _sg_d3d11_compile_shader(<span class="keyword">const</span> <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html">sg_shader_stage_desc</a>* stage_desc, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../dc/da3/glcorearb_8h.html#af9d0cbbbeb7414e786c41899e5a856d7">target</a>)</div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;{</div><div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;  ID3DBlob* output = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;  ID3DBlob* errors = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;  D3DCompile(</div><div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;    stage_desc-&gt;<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a>,                                                   <span class="comment">/* pSrcData */</span></div><div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;    strlen(stage_desc-&gt;<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a>),                                           <span class="comment">/* SrcDataSize */</span></div><div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;    <span class="keyword">nullptr</span>,                                                              <span class="comment">/* pSourceName */</span></div><div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;    <span class="keyword">nullptr</span>,                                                              <span class="comment">/* pDefines */</span></div><div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;    <span class="keyword">nullptr</span>,                                                              <span class="comment">/* pInclude */</span></div><div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;    stage_desc-&gt;<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a27b2cc1c0ca15c1696f2f0de7798ff1b">entry</a> ? stage_desc-&gt;<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a27b2cc1c0ca15c1696f2f0de7798ff1b">entry</a> : <span class="stringliteral">&quot;main&quot;</span>,                       <span class="comment">/* pEntryPoint */</span></div><div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;    target,                                                               <span class="comment">/* pTarget (vs_5_0 or ps_5_0) */</span></div><div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;    D3DCOMPILE_PACK_MATRIX_COLUMN_MAJOR | D3DCOMPILE_OPTIMIZATION_LEVEL3, <span class="comment">/* Flags1 */</span></div><div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;    0,                                                                    <span class="comment">/* Flags2 */</span></div><div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;    &amp;output,                                                              <span class="comment">/* ppCode */</span></div><div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;    &amp;errors);                                                             <span class="comment">/* ppErrorMsgs */</span></div><div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;  <span class="keywordflow">if</span> (errors) {</div><div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;    SOKOL_LOG((LPCSTR)ID3D10Blob_GetBufferPointer(errors));</div><div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;    ID3D10Blob_Release(errors);</div><div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;    errors = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;  }</div><div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;  <span class="keywordflow">return</span> output;</div><div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;}</div><div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;</div><div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;<span class="preprocessor">#define _sg_d3d11_roundup(val, round_to) (((val) + ((round_to)-1)) &amp; ~((round_to)-1))</span></div><div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;</div><div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_shader(_sg_shader* shd, <span class="keyword">const</span> <a class="code" href="../../df/d17/structsg__shader__desc.html">sg_shader_desc</a>* desc)</div><div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;{</div><div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;  SOKOL_ASSERT(shd &amp;&amp; desc);</div><div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;  SOKOL_ASSERT(shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;  SOKOL_ASSERT(!shd-&gt;d3d11_vs &amp;&amp; !shd-&gt;d3d11_fs &amp;&amp; !shd-&gt;d3d11_vs_blob);</div><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;  HRESULT hr;</div><div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;</div><div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;  <span class="comment">/* shader stage uniform blocks and image slots */</span></div><div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stage_index = 0; stage_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">SG_NUM_SHADER_STAGES</a>; stage_index++) {</div><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html">sg_shader_stage_desc</a>* stage_desc = (stage_index == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>) ? &amp;desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a> : &amp;desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>;</div><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;    _sg_shader_stage* stage = &amp;shd-&gt;stage[stage_index];</div><div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;    SOKOL_ASSERT(stage-&gt;num_uniform_blocks == 0);</div><div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ub_index = 0; ub_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>; ub_index++) {</div><div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html">sg_shader_uniform_block_desc</a>* ub_desc = &amp;stage_desc-&gt;<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a62b1801dc0c45820abd59ac49504a318">uniform_blocks</a>[ub_index];</div><div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;      <span class="keywordflow">if</span> (0 == ub_desc-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a>) {</div><div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;      }</div><div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;      _sg_uniform_block* ub = &amp;stage-&gt;uniform_blocks[ub_index];</div><div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;      ub-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a> = ub_desc-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a>;</div><div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;</div><div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;      <span class="comment">/* create a D3D constant buffer */</span></div><div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;      SOKOL_ASSERT(!stage-&gt;d3d11_cbs[ub_index]);</div><div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;      D3D11_BUFFER_DESC cb_desc;</div><div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;      memset(&amp;cb_desc, 0, <span class="keyword">sizeof</span>(cb_desc));</div><div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;      cb_desc.ByteWidth = _sg_d3d11_roundup(ub-&gt;size, 16);</div><div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;      cb_desc.Usage = D3D11_USAGE_DEFAULT;</div><div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;      cb_desc.BindFlags = D3D11_BIND_CONSTANT_BUFFER;</div><div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;      hr = ID3D11Device_CreateBuffer(_sg_d3d11.dev, &amp;cb_desc, <span class="keyword">nullptr</span>, &amp;stage-&gt;d3d11_cbs[ub_index]);</div><div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;      SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; stage-&gt;d3d11_cbs[ub_index]);</div><div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;</div><div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;      stage-&gt;num_uniform_blocks++;</div><div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;    }</div><div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;    SOKOL_ASSERT(stage-&gt;num_images == 0);</div><div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> img_index = 0; img_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>; img_index++) {</div><div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dd/d8f/structsg__shader__image__desc.html">sg_shader_image_desc</a>* img_desc = &amp;stage_desc-&gt;<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa5ad88030a0aa4a7c8aedc31729c6c3c">images</a>[img_index];</div><div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;      <span class="keywordflow">if</span> (img_desc-&gt;<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4">type</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dae006b5445cb0f3b9c939d8074980805e">_SG_IMAGETYPE_DEFAULT</a>) {</div><div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;      }</div><div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;      stage-&gt;images[img_index].<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4">type</a> = img_desc-&gt;<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4">type</a>;</div><div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;      stage-&gt;num_images++;</div><div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;    }</div><div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;  }</div><div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;</div><div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">void</span> *vs_ptr = 0, *fs_ptr = 0;</div><div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;  SIZE_T vs_length = 0, fs_length = 0;</div><div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;<span class="preprocessor">#if defined(SOKOL_D3D11_SHADER_COMPILER)</span></div><div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;  ID3DBlob *vs_blob = 0, *fs_blob = 0;</div><div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;  <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a> &amp;&amp; desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>) {</div><div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;    <span class="comment">/* create from byte code */</span></div><div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;    vs_ptr = desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>;</div><div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;    fs_ptr = desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>;</div><div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;    vs_length = desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#ab4a4c8aacc932d2bcd3c174a8178249b">byte_code_size</a>;</div><div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;    fs_length = desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#ab4a4c8aacc932d2bcd3c174a8178249b">byte_code_size</a>;</div><div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;<span class="comment">/* compile shader code */</span></div><div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;<span class="preprocessor">#if defined(SOKOL_D3D11_SHADER_COMPILER)</span></div><div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;    vs_blob = _sg_d3d11_compile_shader(&amp;desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>, <span class="stringliteral">&quot;vs_5_0&quot;</span>);</div><div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;    fs_blob = _sg_d3d11_compile_shader(&amp;desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>, <span class="stringliteral">&quot;ps_5_0&quot;</span>);</div><div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;    <span class="keywordflow">if</span> (vs_blob &amp;&amp; fs_blob) {</div><div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;      vs_ptr = ID3D10Blob_GetBufferPointer(vs_blob);</div><div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;      vs_length = ID3D10Blob_GetBufferSize(vs_blob);</div><div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;      fs_ptr = ID3D10Blob_GetBufferPointer(fs_blob);</div><div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;      fs_length = ID3D10Blob_GetBufferSize(fs_blob);</div><div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;    }</div><div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;  }</div><div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;  <span class="keywordflow">if</span> (vs_ptr &amp;&amp; fs_ptr &amp;&amp; (vs_length &gt; 0) &amp;&amp; (fs_length &gt; 0)) {</div><div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;    <span class="comment">/* create the D3D vertex- and pixel-shader objects */</span></div><div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;    hr = ID3D11Device_CreateVertexShader(_sg_d3d11.dev, vs_ptr, vs_length, <span class="keyword">nullptr</span>, &amp;shd-&gt;d3d11_vs);</div><div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;    SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; shd-&gt;d3d11_vs);</div><div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;    hr = ID3D11Device_CreatePixelShader(_sg_d3d11.dev, fs_ptr, fs_length, <span class="keyword">nullptr</span>, &amp;shd-&gt;d3d11_fs);</div><div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;    SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; shd-&gt;d3d11_fs);</div><div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;</div><div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;    <span class="comment">/* need to store the vertex shader byte code, this is needed later in sg_create_pipeline */</span></div><div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;    shd-&gt;d3d11_vs_blob_length = (<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a08a5eaaa645e878bd69d4ab93f41e87c">int</a>)vs_length;</div><div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;    shd-&gt;d3d11_vs_blob = SOKOL_MALLOC((<span class="keywordtype">int</span>)vs_length);</div><div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;    SOKOL_ASSERT(shd-&gt;d3d11_vs_blob);</div><div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;    memcpy(shd-&gt;d3d11_vs_blob, vs_ptr, vs_length);</div><div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;</div><div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;    shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;    shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;  }</div><div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;<span class="preprocessor">#if defined(SOKOL_D3D11_SHADER_COMPILER)</span></div><div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;  <span class="keywordflow">if</span> (vs_blob) {</div><div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;    ID3D10Blob_Release(vs_blob);</div><div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;    vs_blob = 0;</div><div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;  }</div><div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;  <span class="keywordflow">if</span> (fs_blob) {</div><div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;    ID3D10Blob_Release(fs_blob);</div><div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;    fs_blob = 0;</div><div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;  }</div><div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;}</div><div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;</div><div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_shader(_sg_shader* shd)</div><div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;{</div><div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;  SOKOL_ASSERT(shd);</div><div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;  <span class="keywordflow">if</span> (shd-&gt;d3d11_vs) {</div><div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;    ID3D11VertexShader_Release(shd-&gt;d3d11_vs);</div><div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;  }</div><div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;  <span class="keywordflow">if</span> (shd-&gt;d3d11_fs) {</div><div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;    ID3D11PixelShader_Release(shd-&gt;d3d11_fs);</div><div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;  }</div><div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;  <span class="keywordflow">if</span> (shd-&gt;d3d11_vs_blob) {</div><div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;    SOKOL_FREE(shd-&gt;d3d11_vs_blob);</div><div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;  }</div><div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stage_index = 0; stage_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">SG_NUM_SHADER_STAGES</a>; stage_index++) {</div><div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;    _sg_shader_stage* stage = &amp;shd-&gt;stage[stage_index];</div><div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ub_index = 0; ub_index &lt; stage-&gt;num_uniform_blocks; ub_index++) {</div><div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;      <span class="keywordflow">if</span> (stage-&gt;d3d11_cbs[ub_index]) {</div><div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;        ID3D11Buffer_Release(stage-&gt;d3d11_cbs[ub_index]);</div><div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;      }</div><div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;    }</div><div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;  }</div><div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;  _sg_init_shader_slot(shd);</div><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;}</div><div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;</div><div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_pipeline(_sg_pipeline* pip, _sg_shader* shd, <span class="keyword">const</span> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html">sg_pipeline_desc</a>* desc)</div><div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;{</div><div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;  SOKOL_ASSERT(pip &amp;&amp; shd &amp;&amp; desc);</div><div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;  SOKOL_ASSERT(pip-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;  SOKOL_ASSERT(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae193421a3ac922d89a9cbf55788ede65">shader</a>.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a> == shd-&gt;slot.id);</div><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;  SOKOL_ASSERT(shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>);</div><div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;  SOKOL_ASSERT(shd-&gt;d3d11_vs_blob &amp;&amp; shd-&gt;d3d11_vs_blob_length &gt; 0);</div><div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;  SOKOL_ASSERT(!pip-&gt;d3d11_il &amp;&amp; !pip-&gt;d3d11_rs &amp;&amp; !pip-&gt;d3d11_dss &amp;&amp; !pip-&gt;d3d11_bs);</div><div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;  HRESULT hr;</div><div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;</div><div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;  pip-&gt;shader = shd;</div><div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;  pip-&gt;shader_id = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae193421a3ac922d89a9cbf55788ede65">shader</a>;</div><div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;  pip-&gt;index_type = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a7762d108e4ad271336c3006c84606a9f">index_type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a>);</div><div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;  pip-&gt;color_attachment_count = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4e583154ea74b802d760f3df0c4f429a">color_attachment_count</a>, 1);</div><div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;  pip-&gt;color_format = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#aef4624a1a4ef6da70a6ec6af5b285d36">color_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>);</div><div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;  pip-&gt;depth_format = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#aad5418b27eace35bda553a2b371f81e3">depth_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>);</div><div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;  pip-&gt;sample_count = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a>, 1);</div><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;  pip-&gt;d3d11_index_format = _sg_d3d11_index_format(pip-&gt;index_type);</div><div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;  pip-&gt;d3d11_topology = _sg_d3d11_primitive_topology(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a79b4b5aec590c5cbc1c1472661419bb5">primitive_type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4aa8d428001b2200f78af617997a3be81b">SG_PRIMITIVETYPE_TRIANGLES</a>));</div><div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div><div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;    pip-&gt;blend_color[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;  }</div><div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;  pip-&gt;d3d11_stencil_ref = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f">stencil_ref</a>;</div><div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;</div><div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;  <span class="comment">/* create input layout object */</span></div><div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;  <span class="keywordtype">int</span> auto_offset[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> layout_index = 0; layout_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>; layout_index++) {</div><div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;    auto_offset[layout_index] = 0;</div><div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;  }</div><div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;  <span class="keywordtype">bool</span> use_auto_offset = <span class="keyword">true</span>;</div><div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> attr_index = 0; attr_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>; attr_index++) {</div><div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;    <span class="comment">/* to use computed offsets, all attr offsets must be 0 */</span></div><div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;    <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a19f830b45bc4289d997fd51604a5e4f1">attrs</a>[attr_index].<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a987b32666e62b0aa825701c0ac03484e">offset</a> != 0) {</div><div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;      use_auto_offset = <span class="keyword">false</span>;</div><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;    }</div><div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;  }</div><div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;  D3D11_INPUT_ELEMENT_DESC d3d11_comps[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>];</div><div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;  memset(d3d11_comps, 0, <span class="keyword">sizeof</span>(d3d11_comps));</div><div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;  <span class="keywordtype">int</span> attr_index = 0;</div><div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;  <span class="keywordflow">for</span> (; attr_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>; attr_index++) {</div><div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html">sg_vertex_attr_desc</a>* a_desc = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a19f830b45bc4289d997fd51604a5e4f1">attrs</a>[attr_index];</div><div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;    <span class="keywordflow">if</span> (a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa2537db7b2956137a3fbe5a8929c01f5">SG_VERTEXFORMAT_INVALID</a>) {</div><div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;    }</div><div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;    SOKOL_ASSERT((a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a> &gt;= 0) &amp;&amp; (a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a> &lt; SG_MAX_SHADERSTAGE_BUFFERS));</div><div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html">sg_buffer_layout_desc</a>* l_desc = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a956d4bf59180e48cdfb5bcc00b0c7012">buffers</a>[a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>];</div><div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6">sg_vertex_step</a> step_func = _sg_def(l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#a31db96a851271a5c840fbd63ba461577">step_func</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a84ea40a12ba85ca0542460d0624b88b5">SG_VERTEXSTEP_PER_VERTEX</a>);</div><div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> step_rate = _sg_def(l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#a459ba52adfdcd699fdf29ecd13a702b4">step_rate</a>, 1);</div><div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;    D3D11_INPUT_ELEMENT_DESC* d3d11_comp = &amp;d3d11_comps[attr_index];</div><div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;    d3d11_comp-&gt;SemanticName = a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a300495aa1542131ca1376536d28b7ad5">sem_name</a>;</div><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;    d3d11_comp-&gt;SemanticIndex = a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a8d1f1db110d27b2bc17b1d625f04894d">sem_index</a>;</div><div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;    d3d11_comp-&gt;Format = _sg_d3d11_vertex_format(a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a>);</div><div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;    d3d11_comp-&gt;InputSlot = a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>;</div><div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;    d3d11_comp-&gt;AlignedByteOffset = use_auto_offset ? auto_offset[a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>] : a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a987b32666e62b0aa825701c0ac03484e">offset</a>;</div><div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;    d3d11_comp-&gt;InputSlotClass = _sg_d3d11_input_classification(step_func);</div><div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a20f6cf1a89efe9c3129cf71910e71709">SG_VERTEXSTEP_PER_INSTANCE</a> == step_func) {</div><div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;      d3d11_comp-&gt;InstanceDataStepRate = step_rate;</div><div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;    }</div><div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;    auto_offset[a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>] += _sg_vertexformat_bytesize(a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a>);</div><div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;    pip-&gt;vertex_layout_valid[a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;  }</div><div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> layout_index = 0; layout_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>; layout_index++) {</div><div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;    <span class="keywordflow">if</span> (pip-&gt;vertex_layout_valid[layout_index]) {</div><div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html">sg_buffer_layout_desc</a>* l_desc = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a956d4bf59180e48cdfb5bcc00b0c7012">buffers</a>[layout_index];</div><div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a9d21c1b0530d07b637b5b71b969d7921">stride</a> = l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#aab7f169abb46eecbecaec8e9d0d2f6f5">stride</a> ? l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#aab7f169abb46eecbecaec8e9d0d2f6f5">stride</a> : auto_offset[layout_index];</div><div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;      SOKOL_ASSERT(stride &gt; 0);</div><div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;      pip-&gt;d3d11_vb_strides[layout_index] = <a class="code" href="../../dc/da3/glcorearb_8h.html#a9d21c1b0530d07b637b5b71b969d7921">stride</a>;</div><div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;      pip-&gt;d3d11_vb_strides[layout_index] = 0;</div><div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;    }</div><div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;  }</div><div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;  hr = ID3D11Device_CreateInputLayout(_sg_d3d11.dev,</div><div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;                                      d3d11_comps,               <span class="comment">/* pInputElementDesc */</span></div><div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;                                      attr_index,                <span class="comment">/* NumElements */</span></div><div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;                                      shd-&gt;d3d11_vs_blob,        <span class="comment">/* pShaderByteCodeWithInputSignature */</span></div><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;                                      shd-&gt;d3d11_vs_blob_length, <span class="comment">/* BytecodeLength */</span></div><div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;                                      &amp;pip-&gt;d3d11_il);</div><div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;  SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; pip-&gt;d3d11_il);</div><div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;</div><div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;  <span class="comment">/* create rasterizer state */</span></div><div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;  D3D11_RASTERIZER_DESC rs_desc;</div><div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;  memset(&amp;rs_desc, 0, <span class="keyword">sizeof</span>(rs_desc));</div><div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;  rs_desc.FillMode = D3D11_FILL_SOLID;</div><div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;  rs_desc.CullMode = _sg_d3d11_cull_mode(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">cull_mode</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a131d819b6c0fe42072f7db0677941b5d">SG_CULLMODE_NONE</a>));</div><div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;  rs_desc.FrontCounterClockwise = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0">face_winding</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faaa4aae35b0695932b261357428ca413c">SG_FACEWINDING_CW</a>) == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331fa0c22e6268eb10c1121177a9fbb1856ef">SG_FACEWINDING_CCW</a>;</div><div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;  rs_desc.DepthBias = (INT)desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">depth_bias</a>;</div><div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;  rs_desc.DepthBiasClamp = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a15a60b827b6583f861bb79ff86a8383b">depth_bias_clamp</a>;</div><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;  rs_desc.SlopeScaledDepthBias = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">depth_bias_slope_scale</a>;</div><div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;  rs_desc.DepthClipEnable = TRUE;</div><div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;  rs_desc.ScissorEnable = TRUE;</div><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;  rs_desc.MultisampleEnable = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a>, 1) &gt; 1;</div><div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;  rs_desc.AntialiasedLineEnable = FALSE;</div><div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;  hr = ID3D11Device_CreateRasterizerState(_sg_d3d11.dev, &amp;rs_desc, &amp;pip-&gt;d3d11_rs);</div><div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;  SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; pip-&gt;d3d11_rs);</div><div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;</div><div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;  <span class="comment">/* create depth-stencil state */</span></div><div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;  D3D11_DEPTH_STENCIL_DESC dss_desc;</div><div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;  memset(&amp;dss_desc, 0, <span class="keyword">sizeof</span>(dss_desc));</div><div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;  dss_desc.DepthEnable = TRUE;</div><div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;  dss_desc.DepthWriteMask = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292">depth_write_enabled</a> ? D3D11_DEPTH_WRITE_MASK_ALL : D3D11_DEPTH_WRITE_MASK_ZERO;</div><div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;  dss_desc.DepthFunc = _sg_d3d11_compare_func(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74">depth_compare_func</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>));</div><div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;  dss_desc.StencilEnable = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3">stencil_enabled</a>;</div><div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;  dss_desc.StencilReadMask = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">stencil_read_mask</a>;</div><div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;  dss_desc.StencilWriteMask = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">stencil_write_mask</a>;</div><div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a>* sf = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#ad698879849d1e77dcbbda963cd45ef79">stencil_front</a>;</div><div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;  dss_desc.FrontFace.StencilFailOp = _sg_d3d11_stencil_op(_sg_def(sf-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034">fail_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>));</div><div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;  dss_desc.FrontFace.StencilDepthFailOp = _sg_d3d11_stencil_op(_sg_def(sf-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f">depth_fail_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>));</div><div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;  dss_desc.FrontFace.StencilPassOp = _sg_d3d11_stencil_op(_sg_def(sf-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20">pass_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>));</div><div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;  dss_desc.FrontFace.StencilFunc = _sg_d3d11_compare_func(_sg_def(sf-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88">compare_func</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>));</div><div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a>* sb = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a28ce155156b38f16e894aa724ece3091">stencil_back</a>;</div><div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;  dss_desc.BackFace.StencilFailOp = _sg_d3d11_stencil_op(_sg_def(sb-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034">fail_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>));</div><div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;  dss_desc.BackFace.StencilDepthFailOp = _sg_d3d11_stencil_op(_sg_def(sb-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f">depth_fail_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>));</div><div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;  dss_desc.BackFace.StencilPassOp = _sg_d3d11_stencil_op(_sg_def(sb-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20">pass_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>));</div><div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;  dss_desc.BackFace.StencilFunc = _sg_d3d11_compare_func(_sg_def(sb-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88">compare_func</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>));</div><div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;  hr = ID3D11Device_CreateDepthStencilState(_sg_d3d11.dev, &amp;dss_desc, &amp;pip-&gt;d3d11_dss);</div><div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;  SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; pip-&gt;d3d11_dss);</div><div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;</div><div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;  <span class="comment">/* create blend state */</span></div><div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;  D3D11_BLEND_DESC bs_desc;</div><div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;  memset(&amp;bs_desc, 0, <span class="keyword">sizeof</span>(bs_desc));</div><div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;  bs_desc.AlphaToCoverageEnable = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148">alpha_to_coverage_enabled</a>;</div><div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;  bs_desc.IndependentBlendEnable = FALSE;</div><div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;  bs_desc.RenderTarget[0].BlendEnable = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d">enabled</a>;</div><div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;  bs_desc.RenderTarget[0].SrcBlend = _sg_d3d11_blend_factor(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2">src_factor_rgb</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a>));</div><div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;  bs_desc.RenderTarget[0].DestBlend = _sg_d3d11_blend_factor(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3">dst_factor_rgb</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a>));</div><div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;  bs_desc.RenderTarget[0].BlendOp = _sg_d3d11_blend_op(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884">op_rgb</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a>));</div><div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;  bs_desc.RenderTarget[0].SrcBlendAlpha = _sg_d3d11_blend_factor(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f">src_factor_alpha</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a>));</div><div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;  bs_desc.RenderTarget[0].DestBlendAlpha = _sg_d3d11_blend_factor(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec">dst_factor_alpha</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a>));</div><div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;  bs_desc.RenderTarget[0].BlendOpAlpha = _sg_d3d11_blend_op(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c">op_alpha</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a>));</div><div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;  bs_desc.RenderTarget[0].RenderTargetWriteMask = _sg_d3d11_color_write_mask(_sg_def((<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2">sg_color_mask</a>)desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a6e762320d94f45741939d705166a17a2">SG_COLORMASK_RGBA</a>));</div><div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;  hr = ID3D11Device_CreateBlendState(_sg_d3d11.dev, &amp;bs_desc, &amp;pip-&gt;d3d11_bs);</div><div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;  SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; pip-&gt;d3d11_bs);</div><div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;</div><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;  pip-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;}</div><div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;</div><div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_pipeline(_sg_pipeline* pip)</div><div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;{</div><div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;  SOKOL_ASSERT(pip);</div><div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;  <span class="keywordflow">if</span> (pip-&gt;d3d11_il) {</div><div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;    ID3D11InputLayout_Release(pip-&gt;d3d11_il);</div><div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;  }</div><div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;  <span class="keywordflow">if</span> (pip-&gt;d3d11_rs) {</div><div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;    ID3D11RasterizerState_Release(pip-&gt;d3d11_rs);</div><div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;  }</div><div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;  <span class="keywordflow">if</span> (pip-&gt;d3d11_dss) {</div><div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;    ID3D11DepthStencilState_Release(pip-&gt;d3d11_dss);</div><div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;  }</div><div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;  <span class="keywordflow">if</span> (pip-&gt;d3d11_bs) {</div><div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;    ID3D11BlendState_Release(pip-&gt;d3d11_bs);</div><div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;  }</div><div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;  _sg_init_pipeline_slot(pip);</div><div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;}</div><div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;</div><div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_pass(_sg_pass* pass, _sg_image** att_images, <span class="keyword">const</span> <a class="code" href="../../d4/d2b/structsg__pass__desc.html">sg_pass_desc</a>* desc)</div><div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;{</div><div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;  SOKOL_ASSERT(pass &amp;&amp; desc);</div><div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;  SOKOL_ASSERT(pass-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;  SOKOL_ASSERT(att_images &amp;&amp; att_images[0]);</div><div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;  SOKOL_ASSERT(_sg_d3d11.dev);</div><div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;</div><div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d1/da2/structsg__attachment__desc.html">sg_attachment_desc</a>* att_desc;</div><div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;  _sg_attachment* att;</div><div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;    SOKOL_ASSERT(0 == pass-&gt;color_atts[i].image);</div><div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;    SOKOL_ASSERT(pass-&gt;d3d11_rtvs[i] == 0);</div><div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;    att_desc = &amp;desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a0671a1bca34513d50f88c551408643d5">color_attachments</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;    <span class="keywordflow">if</span> (att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;      pass-&gt;num_color_atts++;</div><div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;      SOKOL_ASSERT(att_images[i] &amp;&amp; (att_images[i]-&gt;slot.id == att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>));</div><div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;      SOKOL_ASSERT(_sg_is_valid_rendertarget_color_format(att_images[i]-&gt;pixel_format));</div><div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;      att = &amp;pass-&gt;color_atts[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;      SOKOL_ASSERT((att-&gt;image == 0) &amp;&amp; (att-&gt;image_id.id == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>));</div><div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;      att-&gt;image = att_images[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;      att-&gt;image_id = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>;</div><div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;      att-&gt;mip_level = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>;</div><div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;      att-&gt;slice = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a91d437e248352612f03c15cf47b2dd35">slice</a>;</div><div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;</div><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;      <span class="comment">/* create D3D11 render-target-view */</span></div><div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;      ID3D11Resource* d3d11_res = 0;</div><div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> is_msaa = att-&gt;image-&gt;sample_count &gt; 1;</div><div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;      D3D11_RENDER_TARGET_VIEW_DESC d3d11_rtv_desc;</div><div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;      memset(&amp;d3d11_rtv_desc, 0, <span class="keyword">sizeof</span>(d3d11_rtv_desc));</div><div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;      d3d11_rtv_desc.Format = att-&gt;image-&gt;d3d11_format;</div><div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;      <span class="keywordflow">switch</span> (att-&gt;image-&gt;type) {</div><div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a>:</div><div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;          <span class="keywordflow">if</span> (is_msaa) {</div><div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;            d3d11_res = (ID3D11Resource*)att-&gt;image-&gt;d3d11_texmsaa;</div><div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;            d3d11_rtv_desc.ViewDimension = D3D11_RTV_DIMENSION_TEXTURE2DMS;</div><div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;            d3d11_res = (ID3D11Resource*)att-&gt;image-&gt;d3d11_tex2d;</div><div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;            d3d11_rtv_desc.ViewDimension = D3D11_RTV_DIMENSION_TEXTURE2D;</div><div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;            d3d11_rtv_desc.Texture2D.MipSlice = att-&gt;mip_level;</div><div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;          }</div><div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>:</div><div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>:</div><div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;          <span class="keywordflow">if</span> (is_msaa) {</div><div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;            d3d11_res = (ID3D11Resource*)att-&gt;image-&gt;d3d11_texmsaa;</div><div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;            d3d11_rtv_desc.ViewDimension = D3D11_RTV_DIMENSION_TEXTURE2DMSARRAY;</div><div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;            d3d11_rtv_desc.Texture2DMSArray.FirstArraySlice = att-&gt;slice;</div><div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;            d3d11_rtv_desc.Texture2DMSArray.ArraySize = 1;</div><div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;            d3d11_res = (ID3D11Resource*)att-&gt;image-&gt;d3d11_tex2d;</div><div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;            d3d11_rtv_desc.ViewDimension = D3D11_RTV_DIMENSION_TEXTURE2DARRAY;</div><div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;            d3d11_rtv_desc.Texture2DArray.MipSlice = att-&gt;mip_level;</div><div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;            d3d11_rtv_desc.Texture2DArray.FirstArraySlice = att-&gt;slice;</div><div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;            d3d11_rtv_desc.Texture2DArray.ArraySize = 1;</div><div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;          }</div><div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>:</div><div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;          SOKOL_ASSERT(!is_msaa);</div><div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;          d3d11_res = (ID3D11Resource*)att-&gt;image-&gt;d3d11_tex3d;</div><div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;          d3d11_rtv_desc.ViewDimension = D3D11_RTV_DIMENSION_TEXTURE3D;</div><div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;          d3d11_rtv_desc.Texture3D.MipSlice = att-&gt;mip_level;</div><div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;          d3d11_rtv_desc.Texture3D.FirstWSlice = att-&gt;slice;</div><div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;          d3d11_rtv_desc.Texture3D.WSize = 1;</div><div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;          SOKOL_UNREACHABLE;</div><div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;          <span class="keywordflow">break</span>;</div><div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;      }</div><div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;      SOKOL_ASSERT(d3d11_res);</div><div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;      HRESULT hr = ID3D11Device_CreateRenderTargetView(_sg_d3d11.dev, d3d11_res, &amp;d3d11_rtv_desc, &amp;pass-&gt;d3d11_rtvs[i]);</div><div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;      _SOKOL_UNUSED(hr);</div><div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;      SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; pass-&gt;d3d11_rtvs[i]);</div><div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;    }</div><div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;  }</div><div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;</div><div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;  <span class="comment">/* optional depth-stencil image */</span></div><div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;  SOKOL_ASSERT(0 == pass-&gt;ds_att.image);</div><div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;  SOKOL_ASSERT(pass-&gt;d3d11_dsv == 0);</div><div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;  att_desc = &amp;desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a75a23624c5d16d675a70e62f6ce9ba70">depth_stencil_attachment</a>;</div><div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> ds_img_index = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>;</div><div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;  <span class="keywordflow">if</span> (att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;    SOKOL_ASSERT(att_images[ds_img_index] &amp;&amp; (att_images[ds_img_index]-&gt;slot.id == att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>));</div><div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;    SOKOL_ASSERT(_sg_is_valid_rendertarget_depth_format(att_images[ds_img_index]-&gt;pixel_format));</div><div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;    att = &amp;pass-&gt;ds_att;</div><div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;    SOKOL_ASSERT((att-&gt;image == 0) &amp;&amp; (att-&gt;image_id.id == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>));</div><div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;    att-&gt;image = att_images[ds_img_index];</div><div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;    att-&gt;image_id = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>;</div><div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;    att-&gt;mip_level = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>;</div><div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;    att-&gt;slice = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a91d437e248352612f03c15cf47b2dd35">slice</a>;</div><div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;</div><div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;    <span class="comment">/* create D3D11 depth-stencil-view */</span></div><div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;    D3D11_DEPTH_STENCIL_VIEW_DESC d3d11_dsv_desc;</div><div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;    memset(&amp;d3d11_dsv_desc, 0, <span class="keyword">sizeof</span>(d3d11_dsv_desc));</div><div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;    d3d11_dsv_desc.Format = att-&gt;image-&gt;d3d11_format;</div><div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> is_msaa = att-&gt;image-&gt;sample_count &gt; 1;</div><div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;    <span class="keywordflow">if</span> (is_msaa) {</div><div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;      d3d11_dsv_desc.ViewDimension = D3D11_DSV_DIMENSION_TEXTURE2DMS;</div><div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;      d3d11_dsv_desc.ViewDimension = D3D11_DSV_DIMENSION_TEXTURE2D;</div><div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;    }</div><div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;    ID3D11Resource* d3d11_res = (ID3D11Resource*)att-&gt;image-&gt;d3d11_texds;</div><div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;    SOKOL_ASSERT(d3d11_res);</div><div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;    HRESULT hr = ID3D11Device_CreateDepthStencilView(_sg_d3d11.dev, d3d11_res, &amp;d3d11_dsv_desc, &amp;pass-&gt;d3d11_dsv);</div><div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;    _SOKOL_UNUSED(hr);</div><div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;    SOKOL_ASSERT(SUCCEEDED(hr) &amp;&amp; pass-&gt;d3d11_dsv);</div><div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;  }</div><div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;  pass-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;}</div><div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;</div><div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_pass(_sg_pass* pass)</div><div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;{</div><div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;  SOKOL_ASSERT(pass);</div><div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;    <span class="keywordflow">if</span> (pass-&gt;d3d11_rtvs[i]) {</div><div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;      ID3D11RenderTargetView_Release(pass-&gt;d3d11_rtvs[i]);</div><div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;    }</div><div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;  }</div><div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;  <span class="keywordflow">if</span> (pass-&gt;d3d11_dsv) {</div><div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;    ID3D11DepthStencilView_Release(pass-&gt;d3d11_dsv);</div><div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;  }</div><div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;  _sg_init_pass_slot(pass);</div><div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;}</div><div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;</div><div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_begin_pass(_sg_pass* pass, <span class="keyword">const</span> <a class="code" href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a>* action, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h)</div><div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;{</div><div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;  SOKOL_ASSERT(action);</div><div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;  SOKOL_ASSERT(!_sg_d3d11.in_pass);</div><div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;  _sg_d3d11.in_pass = <span class="keyword">true</span>;</div><div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;  _sg_d3d11.cur_width = <a class="code" href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a>;</div><div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;  _sg_d3d11.cur_height = <a class="code" href="../../dc/da3/glcorearb_8h.html#afa0fb1b5e976920c0abeff2dca3ed774">h</a>;</div><div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;  <span class="keywordflow">if</span> (pass) {</div><div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;    _sg_d3d11.cur_pass = pass;</div><div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;    _sg_d3d11.cur_pass_id.id = pass-&gt;slot.id;</div><div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;    _sg_d3d11.num_rtvs = 0;</div><div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;      _sg_d3d11.cur_rtvs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = pass-&gt;d3d11_rtvs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;      <span class="keywordflow">if</span> (_sg_d3d11.cur_rtvs[i]) {</div><div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;        _sg_d3d11.num_rtvs++;</div><div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;      }</div><div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;    }</div><div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;    _sg_d3d11.cur_dsv = pass-&gt;d3d11_dsv;</div><div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;    <span class="comment">/* render to default frame buffer */</span></div><div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;    _sg_d3d11.cur_pass = 0;</div><div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;    _sg_d3d11.cur_pass_id.id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;    _sg_d3d11.num_rtvs = 1;</div><div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;    _sg_d3d11.cur_rtvs[0] = (ID3D11RenderTargetView*)_sg_d3d11.rtv_cb();</div><div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;      _sg_d3d11.cur_rtvs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;    }</div><div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;    _sg_d3d11.cur_dsv = (ID3D11DepthStencilView*)_sg_d3d11.dsv_cb();</div><div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;    SOKOL_ASSERT(_sg_d3d11.cur_rtvs[0] &amp;&amp; _sg_d3d11.cur_dsv);</div><div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;  }</div><div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;  <span class="comment">/* apply the render-target- and depth-stencil-views */</span></div><div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;  ID3D11DeviceContext_OMSetRenderTargets(_sg_d3d11.ctx, SG_MAX_COLOR_ATTACHMENTS, _sg_d3d11.cur_rtvs, _sg_d3d11.cur_dsv);</div><div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;</div><div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;  <span class="comment">/* set viewport and scissor rect to cover whole screen */</span></div><div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;  D3D11_VIEWPORT vp;</div><div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;  memset(&amp;vp, 0, <span class="keyword">sizeof</span>(vp));</div><div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;  vp.Width = (FLOAT)w;</div><div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;  vp.Height = (FLOAT)h;</div><div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;  vp.MaxDepth = 1.0f;</div><div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;  ID3D11DeviceContext_RSSetViewports(_sg_d3d11.ctx, 1, &amp;vp);</div><div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;  D3D11_RECT rect;</div><div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;  rect.left = 0;</div><div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;  rect.top = 0;</div><div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;  rect.right = <a class="code" href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a>;</div><div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;  rect.bottom = <a class="code" href="../../dc/da3/glcorearb_8h.html#afa0fb1b5e976920c0abeff2dca3ed774">h</a>;</div><div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;  ID3D11DeviceContext_RSSetScissorRects(_sg_d3d11.ctx, 1, &amp;rect);</div><div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;</div><div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;  <span class="comment">/* perform clear action */</span></div><div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; _sg_d3d11.num_rtvs; i++) {</div><div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;    <span class="keywordflow">if</span> (action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[i].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#ae5313aebc0025fd61a3f22c4acdcf3fd">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>) {</div><div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;      ID3D11DeviceContext_ClearRenderTargetView(_sg_d3d11.ctx, _sg_d3d11.cur_rtvs[i], action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[i].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#af2c2a030aa781f28b469a109d60c5db7">val</a>);</div><div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;    }</div><div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;  }</div><div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;  UINT ds_flags = 0;</div><div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;  <span class="keywordflow">if</span> (action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#afd874c73b9eeb2251453c66f88d620f9">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>) {</div><div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;    ds_flags |= D3D11_CLEAR_DEPTH;</div><div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;  }</div><div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;  <span class="keywordflow">if</span> (action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a322952eff6dc16d2ac27d6f98973a579">action</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>) {</div><div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;    ds_flags |= D3D11_CLEAR_STENCIL;</div><div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;  }</div><div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;  <span class="keywordflow">if</span> ((0 != ds_flags) &amp;&amp; _sg_d3d11.cur_dsv) {</div><div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;    ID3D11DeviceContext_ClearDepthStencilView(_sg_d3d11.ctx, _sg_d3d11.cur_dsv, ds_flags, action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#ae78551ad85b038b6431f32d1c1916ccb">val</a>, action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a5d4b67c71980cd17fb1ac7f0978b222f">val</a>);</div><div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;  }</div><div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;}</div><div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;</div><div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;<span class="comment">/* D3D11CalcSubresource only exists for C++ */</span></div><div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;_SOKOL_PRIVATE UINT _sg_d3d11_calcsubresource(UINT mip_slice, UINT array_slice, UINT mip_levels)</div><div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;{</div><div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;  <span class="keywordflow">return</span> mip_slice + array_slice * mip_levels;</div><div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;}</div><div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;</div><div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_end_pass()</div><div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;{</div><div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;  SOKOL_ASSERT(_sg_d3d11.in_pass &amp;&amp; _sg_d3d11.ctx);</div><div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;  _sg_d3d11.in_pass = <span class="keyword">false</span>;</div><div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;</div><div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;  <span class="comment">/* need to resolve MSAA render target into texture? */</span></div><div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;  <span class="keywordflow">if</span> (_sg_d3d11.cur_pass) {</div><div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;    SOKOL_ASSERT(_sg_d3d11.cur_pass-&gt;slot.id == _sg_d3d11.cur_pass_id.id);</div><div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; _sg_d3d11.num_rtvs; i++) {</div><div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;      _sg_attachment* att = &amp;_sg_d3d11.cur_pass-&gt;color_atts[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;      SOKOL_ASSERT(att-&gt;image &amp;&amp; (att-&gt;image-&gt;slot.id == att-&gt;image_id.id));</div><div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;      <span class="keywordflow">if</span> (att-&gt;image-&gt;sample_count &gt; 1) {</div><div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;        SOKOL_ASSERT(att-&gt;image-&gt;d3d11_tex2d &amp;&amp; att-&gt;image-&gt;d3d11_texmsaa &amp;&amp; !att-&gt;image-&gt;d3d11_tex3d);</div><div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;        SOKOL_ASSERT(DXGI_FORMAT_UNKNOWN != att-&gt;image-&gt;d3d11_format);</div><div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;        <span class="keyword">const</span> _sg_image* img = att-&gt;image;</div><div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;        UINT subres = _sg_d3d11_calcsubresource(att-&gt;mip_level, att-&gt;slice, img-&gt;num_mipmaps);</div><div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;        ID3D11DeviceContext_ResolveSubresource(_sg_d3d11.ctx,</div><div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;                                               (ID3D11Resource*)img-&gt;d3d11_tex2d,   <span class="comment">/* pDstResource */</span></div><div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;                                               subres,                              <span class="comment">/* DstSubresource */</span></div><div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;                                               (ID3D11Resource*)img-&gt;d3d11_texmsaa, <span class="comment">/* pSrcResource */</span></div><div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;                                               subres,                              <span class="comment">/* SrcSubresource */</span></div><div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;                                               img-&gt;d3d11_format);</div><div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;      }</div><div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;    }</div><div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;  }</div><div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;  _sg_d3d11.cur_pass = 0;</div><div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;  _sg_d3d11.cur_pass_id.id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;  _sg_d3d11.cur_pipeline = 0;</div><div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;  _sg_d3d11.cur_pipeline_id.id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;    _sg_d3d11.cur_rtvs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;  }</div><div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;  _sg_d3d11.cur_dsv = 0;</div><div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;  _sg_d3d11_clear_state();</div><div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;}</div><div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;</div><div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_apply_viewport(<span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>, <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">bool</span> origin_top_left)</div><div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;{</div><div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;  SOKOL_ASSERT(_sg_d3d11.ctx);</div><div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;  SOKOL_ASSERT(_sg_d3d11.in_pass);</div><div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;  D3D11_VIEWPORT vp;</div><div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;  vp.TopLeftX = (FLOAT)x;</div><div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;  vp.TopLeftY = (FLOAT)(origin_top_left ? y : (_sg_d3d11.cur_height - (y + h)));</div><div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;  vp.Width = (FLOAT)w;</div><div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;  vp.Height = (FLOAT)h;</div><div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;  vp.MinDepth = 0.0f;</div><div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;  vp.MaxDepth = 1.0f;</div><div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;  ID3D11DeviceContext_RSSetViewports(_sg_d3d11.ctx, 1, &amp;vp);</div><div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;}</div><div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;</div><div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_apply_scissor_rect(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">bool</span> origin_top_left)</div><div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;{</div><div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;  SOKOL_ASSERT(_sg_d3d11.ctx);</div><div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;  SOKOL_ASSERT(_sg_d3d11.in_pass);</div><div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;  D3D11_RECT rect;</div><div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;  rect.left = <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>;</div><div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;  rect.top = (origin_top_left ? y : (_sg_d3d11.cur_height - (y + <a class="code" href="../../dc/da3/glcorearb_8h.html#afa0fb1b5e976920c0abeff2dca3ed774">h</a>)));</div><div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;  rect.right = x + <a class="code" href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a>;</div><div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;  rect.bottom = origin_top_left ? (y + <a class="code" href="../../dc/da3/glcorearb_8h.html#afa0fb1b5e976920c0abeff2dca3ed774">h</a>) : (_sg_d3d11.cur_height - y);</div><div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;  ID3D11DeviceContext_RSSetScissorRects(_sg_d3d11.ctx, 1, &amp;rect);</div><div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;}</div><div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;</div><div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_apply_draw_state(</div><div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;  _sg_pipeline* pip,</div><div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;  _sg_buffer** vbs, <span class="keyword">const</span> uint32_t* vb_offsets, <span class="keywordtype">int</span> num_vbs,</div><div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;  _sg_buffer* ib, uint32_t ib_offset,</div><div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;  _sg_image** vs_imgs, <span class="keywordtype">int</span> num_vs_imgs,</div><div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;  _sg_image** fs_imgs, <span class="keywordtype">int</span> num_fs_imgs)</div><div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;{</div><div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;  SOKOL_ASSERT(pip);</div><div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;  SOKOL_ASSERT(pip-&gt;shader);</div><div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;  SOKOL_ASSERT(_sg_d3d11.ctx);</div><div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;  SOKOL_ASSERT(_sg_d3d11.in_pass);</div><div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;  SOKOL_ASSERT(pip-&gt;d3d11_rs &amp;&amp; pip-&gt;d3d11_bs &amp;&amp; pip-&gt;d3d11_dss &amp;&amp; pip-&gt;d3d11_il);</div><div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;</div><div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;  _sg_d3d11.cur_pipeline = pip;</div><div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;  _sg_d3d11.cur_pipeline_id.id = pip-&gt;slot.id;</div><div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;  _sg_d3d11.use_indexed_draw = (pip-&gt;d3d11_index_format != DXGI_FORMAT_UNKNOWN);</div><div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;</div><div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;  <span class="comment">/* gather all the D3D11 resources into arrays */</span></div><div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;  ID3D11Buffer* d3d11_ib = ib ? ib-&gt;d3d11_buf : 0;</div><div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;  ID3D11Buffer* d3d11_vbs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;  UINT d3d11_vb_offsets[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;  ID3D11ShaderResourceView* d3d11_vs_srvs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;  ID3D11SamplerState* d3d11_vs_smps[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;  ID3D11ShaderResourceView* d3d11_fs_srvs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;  ID3D11SamplerState* d3d11_fs_smps[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; num_vbs; i++) {</div><div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;    SOKOL_ASSERT(vbs[i]-&gt;d3d11_buf);</div><div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;    d3d11_vbs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = vbs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;d3d11_buf;</div><div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;    d3d11_vb_offsets[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = vb_offsets[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;  }</div><div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;  <span class="keywordflow">for</span> (; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>; i++) {</div><div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;    d3d11_vbs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;    d3d11_vb_offsets[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;  }</div><div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; num_vs_imgs; i++) {</div><div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;    SOKOL_ASSERT(vs_imgs[i]-&gt;d3d11_srv);</div><div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;    SOKOL_ASSERT(vs_imgs[i]-&gt;d3d11_smp);</div><div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;    d3d11_vs_srvs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = vs_imgs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;d3d11_srv;</div><div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;    d3d11_vs_smps[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = vs_imgs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;d3d11_smp;</div><div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;  }</div><div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;  <span class="keywordflow">for</span> (; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>; i++) {</div><div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;    d3d11_vs_srvs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;    d3d11_vs_smps[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;  }</div><div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; num_fs_imgs; i++) {</div><div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;    SOKOL_ASSERT(fs_imgs[i]-&gt;d3d11_srv);</div><div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;    SOKOL_ASSERT(fs_imgs[i]-&gt;d3d11_smp);</div><div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;    d3d11_fs_srvs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = fs_imgs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;d3d11_srv;</div><div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;    d3d11_fs_smps[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = fs_imgs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;d3d11_smp;</div><div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;  }</div><div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;  <span class="keywordflow">for</span> (; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>; i++) {</div><div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;    d3d11_fs_srvs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;    d3d11_fs_smps[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;  }</div><div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;</div><div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;  <span class="comment">/* FIXME: is it worth it to implement a state cache here? measure! */</span></div><div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;  ID3D11DeviceContext_RSSetState(_sg_d3d11.ctx, pip-&gt;d3d11_rs);</div><div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;  ID3D11DeviceContext_OMSetDepthStencilState(_sg_d3d11.ctx, pip-&gt;d3d11_dss, pip-&gt;d3d11_stencil_ref);</div><div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;  ID3D11DeviceContext_OMSetBlendState(_sg_d3d11.ctx, pip-&gt;d3d11_bs, pip-&gt;blend_color, 0xFFFFFFFF);</div><div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;</div><div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;  ID3D11DeviceContext_IASetVertexBuffers(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_BUFFERS, d3d11_vbs, pip-&gt;d3d11_vb_strides, d3d11_vb_offsets);</div><div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;  ID3D11DeviceContext_IASetPrimitiveTopology(_sg_d3d11.ctx, pip-&gt;d3d11_topology);</div><div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;  ID3D11DeviceContext_IASetIndexBuffer(_sg_d3d11.ctx, d3d11_ib, pip-&gt;d3d11_index_format, ib_offset);</div><div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;  ID3D11DeviceContext_IASetInputLayout(_sg_d3d11.ctx, pip-&gt;d3d11_il);</div><div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;</div><div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;  ID3D11DeviceContext_VSSetShader(_sg_d3d11.ctx, pip-&gt;shader-&gt;d3d11_vs, <span class="keyword">nullptr</span>, 0);</div><div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;  ID3D11DeviceContext_VSSetConstantBuffers(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_UBS, pip-&gt;shader-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>].d3d11_cbs);</div><div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;  ID3D11DeviceContext_VSSetShaderResources(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_IMAGES, d3d11_vs_srvs);</div><div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;  ID3D11DeviceContext_VSSetSamplers(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_IMAGES, d3d11_vs_smps);</div><div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;</div><div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;  ID3D11DeviceContext_PSSetShader(_sg_d3d11.ctx, pip-&gt;shader-&gt;d3d11_fs, <span class="keyword">nullptr</span>, 0);</div><div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;  ID3D11DeviceContext_PSSetConstantBuffers(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_UBS, pip-&gt;shader-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>].d3d11_cbs);</div><div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;  ID3D11DeviceContext_PSSetShaderResources(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_IMAGES, d3d11_fs_srvs);</div><div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;  ID3D11DeviceContext_PSSetSamplers(_sg_d3d11.ctx, 0, SG_MAX_SHADERSTAGE_IMAGES, d3d11_fs_smps);</div><div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;}</div><div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;</div><div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_apply_uniform_block(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343">sg_shader_stage</a> stage_index, <span class="keywordtype">int</span> ub_index, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> num_bytes)</div><div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;{</div><div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;  _SOKOL_UNUSED(num_bytes);</div><div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;  SOKOL_ASSERT(_sg_d3d11.ctx &amp;&amp; _sg_d3d11.in_pass);</div><div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;  SOKOL_ASSERT(data &amp;&amp; (num_bytes &gt; 0));</div><div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;  SOKOL_ASSERT((stage_index &gt;= 0) &amp;&amp; (stage_index &lt; SG_NUM_SHADER_STAGES));</div><div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;  SOKOL_ASSERT((ub_index &gt;= 0) &amp;&amp; (ub_index &lt; SG_MAX_SHADERSTAGE_UBS));</div><div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;  SOKOL_ASSERT(_sg_d3d11.cur_pipeline &amp;&amp; _sg_d3d11.cur_pipeline-&gt;slot.id == _sg_d3d11.cur_pipeline_id.id);</div><div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;  SOKOL_ASSERT(_sg_d3d11.cur_pipeline-&gt;shader &amp;&amp; _sg_d3d11.cur_pipeline-&gt;shader-&gt;slot.id == _sg_d3d11.cur_pipeline-&gt;shader_id.id);</div><div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;  SOKOL_ASSERT(ub_index &lt; _sg_d3d11.cur_pipeline-&gt;<a class="code" href="../../dc/da3/glcorearb_8h.html#a57b2a96adb1d51204909a82d861e395e">shader</a>-&gt;stage[stage_index].num_uniform_blocks);</div><div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;  SOKOL_ASSERT(num_bytes == _sg_d3d11.cur_pipeline-&gt;shader-&gt;stage[stage_index].uniform_blocks[ub_index].size);</div><div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;  ID3D11Buffer* cb = _sg_d3d11.cur_pipeline-&gt;shader-&gt;stage[stage_index].d3d11_cbs[ub_index];</div><div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;  SOKOL_ASSERT(cb);</div><div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;  ID3D11DeviceContext_UpdateSubresource(_sg_d3d11.ctx, (ID3D11Resource*)cb, 0, <span class="keyword">nullptr</span>, data, 0, 0);</div><div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;}</div><div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;</div><div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_draw(<span class="keywordtype">int</span> base_element, <span class="keywordtype">int</span> num_elements, <span class="keywordtype">int</span> num_instances)</div><div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;{</div><div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;  SOKOL_ASSERT(_sg_d3d11.in_pass);</div><div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;  <span class="keywordflow">if</span> (_sg_d3d11.use_indexed_draw) {</div><div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;    <span class="keywordflow">if</span> (1 == num_instances) {</div><div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;      ID3D11DeviceContext_DrawIndexed(_sg_d3d11.ctx, num_elements, base_element, 0);</div><div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;      ID3D11DeviceContext_DrawIndexedInstanced(_sg_d3d11.ctx, num_elements, num_instances, base_element, 0, 0);</div><div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;    }</div><div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;    <span class="keywordflow">if</span> (1 == num_instances) {</div><div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;      ID3D11DeviceContext_Draw(_sg_d3d11.ctx, num_elements, base_element);</div><div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;      ID3D11DeviceContext_DrawInstanced(_sg_d3d11.ctx, num_elements, num_instances, base_element, 0);</div><div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;    }</div><div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;  }</div><div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;}</div><div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;</div><div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_commit()</div><div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;{</div><div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;  SOKOL_ASSERT(!_sg_d3d11.in_pass);</div><div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;}</div><div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;</div><div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_update_buffer(_sg_buffer* buf, <span class="keyword">const</span> <span class="keywordtype">void</span>* data_ptr, <span class="keywordtype">int</span> data_size)</div><div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;{</div><div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;  SOKOL_ASSERT(buf &amp;&amp; data_ptr &amp;&amp; data_size);</div><div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;  SOKOL_ASSERT(_sg_d3d11.ctx);</div><div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;  SOKOL_ASSERT(buf-&gt;d3d11_buf);</div><div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;  D3D11_MAPPED_SUBRESOURCE d3d11_msr;</div><div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;  HRESULT hr = ID3D11DeviceContext_Map(_sg_d3d11.ctx, (ID3D11Resource*)buf-&gt;d3d11_buf, 0, D3D11_MAP_WRITE_DISCARD, 0, &amp;d3d11_msr);</div><div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;  _SOKOL_UNUSED(hr);</div><div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;  SOKOL_ASSERT(SUCCEEDED(hr));</div><div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;  memcpy(d3d11_msr.pData, data_ptr, data_size);</div><div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;  ID3D11DeviceContext_Unmap(_sg_d3d11.ctx, (ID3D11Resource*)buf-&gt;d3d11_buf, 0);</div><div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;}</div><div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;</div><div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_update_image(_sg_image* img, <span class="keyword">const</span> <a class="code" href="../../dd/d44/structsg__image__content.html">sg_image_content</a>* data)</div><div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;{</div><div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;  SOKOL_ASSERT(img &amp;&amp; data);</div><div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;  SOKOL_ASSERT(_sg_d3d11.ctx);</div><div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;  SOKOL_ASSERT(img-&gt;d3d11_tex2d || img-&gt;d3d11_tex3d);</div><div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;  ID3D11Resource* d3d11_res = 0;</div><div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;  <span class="keywordflow">if</span> (img-&gt;d3d11_tex3d) {</div><div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;    d3d11_res = (ID3D11Resource*)img-&gt;d3d11_tex3d;</div><div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;    d3d11_res = (ID3D11Resource*)img-&gt;d3d11_tex2d;</div><div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;  }</div><div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;  SOKOL_ASSERT(d3d11_res);</div><div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> num_faces = (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>) ? 6 : 1;</div><div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> num_slices = (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>) ? img-&gt;depth : 1;</div><div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;  <span class="keywordtype">int</span> subres_index = 0;</div><div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;  HRESULT hr;</div><div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;  D3D11_MAPPED_SUBRESOURCE d3d11_msr;</div><div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;  <a class="code" href="../../d8/df7/BenchCathodeSegmentation_8cxx.html#a2b95d32c08b7fd322b51d91e97f1b552">for</a> (<span class="keywordtype">int</span> face_index = 0; face_index &lt; num_faces; face_index++) {</div><div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slice_index = 0; slice_index &lt; num_slices; slice_index++) {</div><div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mip_index = 0; mip_index &lt; img-&gt;num_mipmaps; mip_index++, subres_index++) {</div><div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;        SOKOL_ASSERT(subres_index &lt; (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca8a9a7015046cf047f0534dfe86bc7545">SG_MAX_MIPMAPS</a> * <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caaf24e90f94788e5300a2149564f3c5c2">SG_MAX_TEXTUREARRAY_LAYERS</a>));</div><div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> mip_width = ((img-&gt;width &gt;&gt; mip_index) &gt; 0) ? img-&gt;width &gt;&gt; mip_index : 1;</div><div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> mip_height = ((img-&gt;height &gt;&gt; mip_index) &gt; 0) ? img-&gt;height &gt;&gt; mip_index : 1;</div><div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> src_pitch = _sg_row_pitch(img-&gt;pixel_format, mip_width);</div><div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;        <span class="keyword">const</span> <a class="code" href="../../d1/d35/structsg__subimage__content.html">sg_subimage_content</a>* subimg_content = &amp;(data-&gt;<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index]);</div><div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> slice_size = subimg_content-&gt;<a class="code" href="../../d1/d35/structsg__subimage__content.html#ad5cf41c09de0390218aaa479aa2e58db">size</a> / num_slices;</div><div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> slice_offset = slice_size * slice_index;</div><div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;        <span class="keyword">const</span> uint8_t* slice_ptr = ((<span class="keyword">const</span> uint8_t*)subimg_content-&gt;<a class="code" href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c">ptr</a>) + slice_offset;</div><div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;        hr = ID3D11DeviceContext_Map(_sg_d3d11.ctx, d3d11_res, subres_index, D3D11_MAP_WRITE_DISCARD, 0, &amp;d3d11_msr);</div><div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;        SOKOL_ASSERT(SUCCEEDED(hr));</div><div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;        <span class="comment">/* FIXME: need to handle difference in depth-pitch for 3D textures as well! */</span></div><div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;        <span class="keywordflow">if</span> (src_pitch == (<span class="keywordtype">int</span>)d3d11_msr.RowPitch) {</div><div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;          memcpy(d3d11_msr.pData, slice_ptr, slice_size);</div><div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;          SOKOL_ASSERT(src_pitch &lt; (<span class="keywordtype">int</span>)d3d11_msr.RowPitch);</div><div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;          <span class="keyword">const</span> uint8_t* src_ptr = slice_ptr;</div><div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;          uint8_t* dst_ptr = (uint8_t*)d3d11_msr.pData;</div><div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160;          <a class="code" href="../../d8/df7/BenchCathodeSegmentation_8cxx.html#a2b95d32c08b7fd322b51d91e97f1b552">for</a> (<span class="keywordtype">int</span> row_index = 0; row_index &lt; mip_height; row_index++) {</div><div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;            memcpy(dst_ptr, src_ptr, src_pitch);</div><div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;            src_ptr += src_pitch;</div><div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;            dst_ptr += d3d11_msr.RowPitch;</div><div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;          }</div><div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;        }</div><div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;        ID3D11DeviceContext_Unmap(_sg_d3d11.ctx, d3d11_res, subres_index);</div><div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;      }</div><div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;    }</div><div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;  }</div><div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;}</div><div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;</div><div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;<span class="comment">/*== METAL BACKEND ===========================================================*/</span></div><div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;<span class="preprocessor">#elif defined(SOKOL_METAL)</span></div><div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;</div><div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;<span class="preprocessor">#if !__has_feature(objc_arc)</span></div><div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;<span class="preprocessor">#error &quot;Please enable ARC when using the Metal backend&quot;</span></div><div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;</div><div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;<span class="comment">/* memset() */</span></div><div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;<span class="preprocessor">#include &lt;TargetConditionals.h&gt;</span></div><div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;<span class="preprocessor">#import &lt;Metal/Metal.h&gt;</span></div><div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;</div><div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;  _SG_MTL_DEFAULT_UB_SIZE = 4 * 1024 * 1024,</div><div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;<span class="preprocessor">#if !TARGET_OS_IPHONE</span></div><div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;  _SG_MTL_UB_ALIGN = 256,</div><div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;  _SG_MTL_UB_ALIGN = 16,</div><div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;  _SG_MTL_DEFAULT_SAMPLER_CACHE_CAPACITY = 64,</div><div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;  _SG_MTL_INVALID_POOL_INDEX = 0xFFFFFFFF</div><div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;};</div><div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;</div><div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;<span class="comment">/*-- enum translation functions ----------------------------------------------*/</span></div><div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;_SOKOL_PRIVATE MTLLoadAction _sg_mtl_load_action(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6">sg_action</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a>)</div><div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;{</div><div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;  <span class="keywordflow">switch</span> (a) {</div><div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a>:</div><div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;      <span class="keywordflow">return</span> MTLLoadActionClear;</div><div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6ae58d280dda29d0b3f7120937fe9c6742">SG_ACTION_LOAD</a>:</div><div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;      <span class="keywordflow">return</span> MTLLoadActionLoad;</div><div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a975d1f5f4f58d6c75e9c2ee6ee9767e3">SG_ACTION_DONTCARE</a>:</div><div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;      <span class="keywordflow">return</span> MTLLoadActionDontCare;</div><div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;      <span class="keywordflow">return</span> (MTLLoadAction)0;</div><div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;  }</div><div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;}</div><div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;</div><div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;_SOKOL_PRIVATE MTLResourceOptions _sg_mtl_buffer_resource_options(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> usg)</div><div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;{</div><div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;  <span class="keywordflow">switch</span> (usg) {</div><div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>:</div><div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;      <span class="keywordflow">return</span> MTLResourceStorageModeShared;</div><div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca38c2a7730739e0e0ed461915d44e2dd8">SG_USAGE_DYNAMIC</a>:</div><div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0ccafa387c8c45104f25a8e2a68486ae620c">SG_USAGE_STREAM</a>:</div><div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;<span class="preprocessor">#if !TARGET_OS_IPHONE</span></div><div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;      <span class="keywordflow">return</span> MTLCPUCacheModeWriteCombined | MTLResourceStorageModeManaged;</div><div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;      <span class="keywordflow">return</span> MTLCPUCacheModeWriteCombined;</div><div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;  }</div><div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;}</div><div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;</div><div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;_SOKOL_PRIVATE MTLVertexStepFunction _sg_mtl_step_function(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6">sg_vertex_step</a> step)</div><div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;{</div><div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;  <span class="keywordflow">switch</span> (step) {</div><div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a84ea40a12ba85ca0542460d0624b88b5">SG_VERTEXSTEP_PER_VERTEX</a>:</div><div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;      <span class="keywordflow">return</span> MTLVertexStepFunctionPerVertex;</div><div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a20f6cf1a89efe9c3129cf71910e71709">SG_VERTEXSTEP_PER_INSTANCE</a>:</div><div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;      <span class="keywordflow">return</span> MTLVertexStepFunctionPerInstance;</div><div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;      <span class="keywordflow">return</span> (MTLVertexStepFunction)0;</div><div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;  }</div><div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;}</div><div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;</div><div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;_SOKOL_PRIVATE MTLVertexFormat _sg_mtl_vertex_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08f">sg_vertex_format</a> fmt)</div><div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;{</div><div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa29b1e94ae9985fe1463d36e301916d29">SG_VERTEXFORMAT_FLOAT</a>:</div><div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatFloat;</div><div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa498741f607f4f10e6b9672dcb9a9c6ac">SG_VERTEXFORMAT_FLOAT2</a>:</div><div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatFloat2;</div><div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6ba93ce02391f49c626baa5e6f7234b2">SG_VERTEXFORMAT_FLOAT3</a>:</div><div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatFloat3;</div><div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6115bbd19f17c016a55102c485b7658c">SG_VERTEXFORMAT_FLOAT4</a>:</div><div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatFloat4;</div><div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5c3facf45a0c01162b348286571e4cbc">SG_VERTEXFORMAT_BYTE4</a>:</div><div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatChar4;</div><div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5bb6681394fe029a0ca1fa0e00e85da9">SG_VERTEXFORMAT_BYTE4N</a>:</div><div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatChar4Normalized;</div><div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa1eac19f3f2048bed0f6b71f844e9bdb">SG_VERTEXFORMAT_UBYTE4</a>:</div><div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatUChar4;</div><div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa598e60ae2c550a825145e20e377d7f19">SG_VERTEXFORMAT_UBYTE4N</a>:</div><div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatUChar4Normalized;</div><div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa742f7d751f8dff04449a03428372810a">SG_VERTEXFORMAT_SHORT2</a>:</div><div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatShort2;</div><div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fafec5d9fb7cb12489ea4be3637c746efa">SG_VERTEXFORMAT_SHORT2N</a>:</div><div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatShort2Normalized;</div><div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faf321d1eb262dfb3db56fb43f76d9898a">SG_VERTEXFORMAT_SHORT4</a>:</div><div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatShort4;</div><div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6bfcbcd3a001760711189465343bd4e8">SG_VERTEXFORMAT_SHORT4N</a>:</div><div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatShort4Normalized;</div><div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faafa9a30c6992cc63134b5e14cdd3162b">SG_VERTEXFORMAT_UINT10_N2</a>:</div><div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;      <span class="keywordflow">return</span> MTLVertexFormatUInt1010102Normalized;</div><div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;      <span class="keywordflow">return</span> (MTLVertexFormat)0;</div><div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;  }</div><div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;}</div><div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;</div><div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;_SOKOL_PRIVATE MTLPrimitiveType _sg_mtl_primitive_type(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4">sg_primitive_type</a> t)</div><div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;{</div><div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;  <span class="keywordflow">switch</span> (t) {</div><div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a56f0068a3381a2f910b646b15bbdad7c">SG_PRIMITIVETYPE_POINTS</a>:</div><div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;      <span class="keywordflow">return</span> MTLPrimitiveTypePoint;</div><div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a64763b2f58505f8353981fa3a7d33b3d">SG_PRIMITIVETYPE_LINES</a>:</div><div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;      <span class="keywordflow">return</span> MTLPrimitiveTypeLine;</div><div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ac6adf96be338781a927207580110a0b6">SG_PRIMITIVETYPE_LINE_STRIP</a>:</div><div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;      <span class="keywordflow">return</span> MTLPrimitiveTypeLineStrip;</div><div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4aa8d428001b2200f78af617997a3be81b">SG_PRIMITIVETYPE_TRIANGLES</a>:</div><div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;      <span class="keywordflow">return</span> MTLPrimitiveTypeTriangle;</div><div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ab0b91b82494a494db2f5e57c8b7356a7">SG_PRIMITIVETYPE_TRIANGLE_STRIP</a>:</div><div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;      <span class="keywordflow">return</span> MTLPrimitiveTypeTriangleStrip;</div><div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;      <span class="keywordflow">return</span> (MTLPrimitiveType)0;</div><div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;  }</div><div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;}</div><div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;</div><div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;_SOKOL_PRIVATE MTLPixelFormat _sg_mtl_texture_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;{</div><div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>:</div><div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatRGBA8Unorm;</div><div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aee9de87145ed1e5f8129bd39501a164b">SG_PIXELFORMAT_R10G10B10A2</a>:</div><div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatRGB10A2Unorm;</div><div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288">SG_PIXELFORMAT_RGBA32F</a>:</div><div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatRGBA32Float;</div><div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9">SG_PIXELFORMAT_RGBA16F</a>:</div><div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatRGBA16Float;</div><div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7aebdb1f89ab56d5ac3e4101326ad5a7">SG_PIXELFORMAT_R32F</a>:</div><div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatR32Float;</div><div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4acd416b883c484b0a30194f1a06f18f9d">SG_PIXELFORMAT_R16F</a>:</div><div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatR16Float;</div><div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ac09ec30fb99ef631fe1afd23b8ebbc56">SG_PIXELFORMAT_L8</a>:</div><div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatR8Unorm;</div><div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;<span class="preprocessor">#if !TARGET_OS_IPHONE</span></div><div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab16b5755ede91f6c2d9ac0b95b939755">SG_PIXELFORMAT_DXT1</a>:</div><div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatBC1_RGBA;</div><div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abc58007c8b3aea5d1d4f8003e1ebd015">SG_PIXELFORMAT_DXT3</a>:</div><div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatBC2_RGBA;</div><div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5707e92aad083b7e905f1cef363a736a">SG_PIXELFORMAT_DXT5</a>:</div><div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatBC3_RGBA;</div><div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5c1d86e7259c30e71a0345564ce133e5">SG_PIXELFORMAT_PVRTC2_RGB</a>:</div><div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatPVRTC_RGB_2BPP;</div><div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aff9e597d6ba26ce24ee763c57de6b20c">SG_PIXELFORMAT_PVRTC4_RGB</a>:</div><div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatPVRTC_RGB_4BPP;</div><div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7a18fff9a92408dc0b1b472e188a7293">SG_PIXELFORMAT_PVRTC2_RGBA</a>:</div><div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatPVRTC_RGBA_2BPP;</div><div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a3f7140ec7c333f21243ab73a1591c3b4">SG_PIXELFORMAT_PVRTC4_RGBA</a>:</div><div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatPVRTC_RGBA_4BPP;</div><div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab178a54fe3afec07062f05138608e559">SG_PIXELFORMAT_ETC2_RGB8</a>:</div><div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatETC2_RGB8;</div><div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a24fd6df84f189657c672835f616e9c21">SG_PIXELFORMAT_ETC2_SRGB8</a>:</div><div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatETC2_RGB8_sRGB;</div><div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatInvalid;</div><div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;  }</div><div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;}</div><div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;</div><div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;_SOKOL_PRIVATE MTLPixelFormat _sg_mtl_rendertarget_color_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;{</div><div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>:</div><div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatBGRA8Unorm; <span class="comment">/* not a bug */</span></div><div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288">SG_PIXELFORMAT_RGBA32F</a>:</div><div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatRGBA32Float;</div><div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9">SG_PIXELFORMAT_RGBA16F</a>:</div><div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatRGBA16Float;</div><div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aee9de87145ed1e5f8129bd39501a164b">SG_PIXELFORMAT_R10G10B10A2</a>:</div><div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatRGB10A2Unorm;</div><div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatInvalid;</div><div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;  }</div><div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;}</div><div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;</div><div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;_SOKOL_PRIVATE MTLPixelFormat _sg_mtl_rendertarget_depth_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;{</div><div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ad9b9e06c0f4c4576ddaa64de29903aa8">SG_PIXELFORMAT_DEPTH</a>:</div><div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatDepth32Float;</div><div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>:</div><div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;      <span class="comment">/* NOTE: Depth24_Stencil8 isn&#39;t universally supported! */</span></div><div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatDepth32Float_Stencil8;</div><div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatInvalid;</div><div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;  }</div><div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;}</div><div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;</div><div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;_SOKOL_PRIVATE MTLPixelFormat _sg_mtl_rendertarget_stencil_format(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;{</div><div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>:</div><div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatDepth32Float_Stencil8;</div><div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;      <span class="keywordflow">return</span> MTLPixelFormatInvalid;</div><div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;  }</div><div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;}</div><div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;</div><div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;_SOKOL_PRIVATE MTLColorWriteMask _sg_mtl_color_write_mask(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2">sg_color_mask</a> m)</div><div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;{</div><div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;  MTLColorWriteMask mtl_mask = MTLColorWriteMaskNone;</div><div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;  <span class="keywordflow">if</span> (m &amp; SG_COLORMASK_R) {</div><div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;    mtl_mask |= MTLColorWriteMaskRed;</div><div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;  }</div><div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;  <span class="keywordflow">if</span> (m &amp; SG_COLORMASK_G) {</div><div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;    mtl_mask |= MTLColorWriteMaskGreen;</div><div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;  }</div><div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;  <span class="keywordflow">if</span> (m &amp; SG_COLORMASK_B) {</div><div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;    mtl_mask |= MTLColorWriteMaskBlue;</div><div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;  }</div><div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;  <span class="keywordflow">if</span> (m &amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2adfb66631b5ff6d359c7cdc659b4f8e33">SG_COLORMASK_A</a>) {</div><div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;    mtl_mask |= MTLColorWriteMaskAlpha;</div><div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;  }</div><div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;  <span class="keywordflow">return</span> mtl_mask;</div><div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;}</div><div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;</div><div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;_SOKOL_PRIVATE MTLBlendOperation _sg_mtl_blend_op(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007b">sg_blend_op</a> op)</div><div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;{</div><div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;  <span class="keywordflow">switch</span> (op) {</div><div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a>:</div><div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;      <span class="keywordflow">return</span> MTLBlendOperationAdd;</div><div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba39bb8326504a0479b26cd513622425de">SG_BLENDOP_SUBTRACT</a>:</div><div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;      <span class="keywordflow">return</span> MTLBlendOperationSubtract;</div><div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007bafe44c904a6db19f96766c815ff903e93">SG_BLENDOP_REVERSE_SUBTRACT</a>:</div><div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;      <span class="keywordflow">return</span> MTLBlendOperationReverseSubtract;</div><div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;      <span class="keywordflow">return</span> (MTLBlendOperation)0;</div><div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;  }</div><div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;}</div><div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;</div><div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;_SOKOL_PRIVATE MTLBlendFactor _sg_mtl_blend_factor(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98">sg_blend_factor</a> f)</div><div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;{</div><div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;  <span class="keywordflow">switch</span> (f) {</div><div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a>:</div><div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorZero;</div><div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a>:</div><div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorOne;</div><div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a8c69759d579abc2330763accf53e22c6">SG_BLENDFACTOR_SRC_COLOR</a>:</div><div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorSourceColor;</div><div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a641887d49c50dcaadab00c5457074894">SG_BLENDFACTOR_ONE_MINUS_SRC_COLOR</a>:</div><div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorOneMinusSourceColor;</div><div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ac4a882a9f00214238fbb2d0e354ccdb1">SG_BLENDFACTOR_SRC_ALPHA</a>:</div><div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorSourceAlpha;</div><div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a057316e7b0eb4cf1b36f8dd1f13cb01b">SG_BLENDFACTOR_ONE_MINUS_SRC_ALPHA</a>:</div><div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorOneMinusSourceAlpha;</div><div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a31651696629d4ccdb8e684c3ba02366b">SG_BLENDFACTOR_DST_COLOR</a>:</div><div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorDestinationColor;</div><div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a72b1df3612951c57703d3cf0279f750e">SG_BLENDFACTOR_ONE_MINUS_DST_COLOR</a>:</div><div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorOneMinusDestinationColor;</div><div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a1f10da138f1962007019feb50c37ba7f">SG_BLENDFACTOR_DST_ALPHA</a>:</div><div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorDestinationAlpha;</div><div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ad219a9d23d6b3b19d2539ece4a0a71d3">SG_BLENDFACTOR_ONE_MINUS_DST_ALPHA</a>:</div><div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorOneMinusDestinationAlpha;</div><div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98aad544ad360157642c7fa8ab7ba22e48d">SG_BLENDFACTOR_SRC_ALPHA_SATURATED</a>:</div><div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorSourceAlphaSaturated;</div><div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a62d9efdddbce46e11664b6daf160fff6">SG_BLENDFACTOR_BLEND_COLOR</a>:</div><div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorBlendColor;</div><div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ac29f07005f4e09d33012c2ab1aa41ed4">SG_BLENDFACTOR_ONE_MINUS_BLEND_COLOR</a>:</div><div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorOneMinusBlendColor;</div><div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98aeb1ae23d2d8136f7fc0a453dc48ce3a0">SG_BLENDFACTOR_BLEND_ALPHA</a>:</div><div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorBlendAlpha;</div><div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af56378a9ce157db3a999f590489bb0f9">SG_BLENDFACTOR_ONE_MINUS_BLEND_ALPHA</a>:</div><div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;      <span class="keywordflow">return</span> MTLBlendFactorOneMinusBlendAlpha;</div><div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;      <span class="keywordflow">return</span> (MTLBlendFactor)0;</div><div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160;  }</div><div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;}</div><div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;</div><div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;_SOKOL_PRIVATE MTLCompareFunction _sg_mtl_compare_func(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64">sg_compare_func</a> f)</div><div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;{</div><div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;  <span class="keywordflow">switch</span> (f) {</div><div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a3c097f346c501db92d57775e7ab51157">SG_COMPAREFUNC_NEVER</a>:</div><div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;      <span class="keywordflow">return</span> MTLCompareFunctionNever;</div><div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a9bc40473fa1a7f1805e04826dcb1cc8f">SG_COMPAREFUNC_LESS</a>:</div><div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;      <span class="keywordflow">return</span> MTLCompareFunctionLess;</div><div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af164b871f09d6f7b671a2a611e6d570d">SG_COMPAREFUNC_EQUAL</a>:</div><div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;      <span class="keywordflow">return</span> MTLCompareFunctionEqual;</div><div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a1a8096a774c667c26ccde72d9ef4bd7a">SG_COMPAREFUNC_LESS_EQUAL</a>:</div><div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;      <span class="keywordflow">return</span> MTLCompareFunctionLessEqual;</div><div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a508dd2aada97b6358f31c4425fe84c82">SG_COMPAREFUNC_GREATER</a>:</div><div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;      <span class="keywordflow">return</span> MTLCompareFunctionGreater;</div><div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a8394ed7a0362acafc13fce791f9d7344">SG_COMPAREFUNC_NOT_EQUAL</a>:</div><div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;      <span class="keywordflow">return</span> MTLCompareFunctionNotEqual;</div><div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af86c478058edd323bd609ff4bf2e848d">SG_COMPAREFUNC_GREATER_EQUAL</a>:</div><div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;      <span class="keywordflow">return</span> MTLCompareFunctionGreaterEqual;</div><div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>:</div><div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;      <span class="keywordflow">return</span> MTLCompareFunctionAlways;</div><div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;      <span class="keywordflow">return</span> (MTLCompareFunction)0;</div><div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;  }</div><div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;}</div><div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;</div><div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;_SOKOL_PRIVATE MTLStencilOperation _sg_mtl_stencil_op(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488a">sg_stencil_op</a> op)</div><div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;{</div><div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;  <span class="keywordflow">switch</span> (op) {</div><div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>:</div><div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;      <span class="keywordflow">return</span> MTLStencilOperationKeep;</div><div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa703bf305ed3f7826dab340a3b42f58e0">SG_STENCILOP_ZERO</a>:</div><div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;      <span class="keywordflow">return</span> MTLStencilOperationZero;</div><div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aad5adc3a401f0ebcc100fe91f45e7b628">SG_STENCILOP_REPLACE</a>:</div><div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;      <span class="keywordflow">return</span> MTLStencilOperationReplace;</div><div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aacd444f9c15d8563e1dda2fc913bfe349">SG_STENCILOP_INCR_CLAMP</a>:</div><div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;      <span class="keywordflow">return</span> MTLStencilOperationIncrementClamp;</div><div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa5833cf06326cae250c675cfb227d7783">SG_STENCILOP_DECR_CLAMP</a>:</div><div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;      <span class="keywordflow">return</span> MTLStencilOperationDecrementClamp;</div><div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa02f24dee22dfe00513a57620bef88e10">SG_STENCILOP_INVERT</a>:</div><div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;      <span class="keywordflow">return</span> MTLStencilOperationInvert;</div><div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aac7f2b2dfb1c5340579c27f255a320569">SG_STENCILOP_INCR_WRAP</a>:</div><div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;      <span class="keywordflow">return</span> MTLStencilOperationIncrementWrap;</div><div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa546103a62234093824399823dba02002">SG_STENCILOP_DECR_WRAP</a>:</div><div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;      <span class="keywordflow">return</span> MTLStencilOperationDecrementWrap;</div><div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;      <span class="keywordflow">return</span> (MTLStencilOperation)0;</div><div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;  }</div><div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;}</div><div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;</div><div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;_SOKOL_PRIVATE MTLCullMode _sg_mtl_cull_mode(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4">sg_cull_mode</a> m)</div><div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;{</div><div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;  <span class="keywordflow">switch</span> (m) {</div><div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a131d819b6c0fe42072f7db0677941b5d">SG_CULLMODE_NONE</a>:</div><div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;      <span class="keywordflow">return</span> MTLCullModeNone;</div><div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a384e2c1d24c7c03468f93419cc48971c">SG_CULLMODE_FRONT</a>:</div><div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;      <span class="keywordflow">return</span> MTLCullModeFront;</div><div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4af645d117b0ec8517b04bc827ae0e4baf">SG_CULLMODE_BACK</a>:</div><div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;      <span class="keywordflow">return</span> MTLCullModeBack;</div><div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160;      <span class="keywordflow">return</span> (MTLCullMode)0;</div><div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;  }</div><div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;}</div><div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;</div><div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;_SOKOL_PRIVATE MTLWinding _sg_mtl_winding(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331f">sg_face_winding</a> w)</div><div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160;{</div><div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;  <span class="keywordflow">switch</span> (w) {</div><div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faaa4aae35b0695932b261357428ca413c">SG_FACEWINDING_CW</a>:</div><div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;      <span class="keywordflow">return</span> MTLWindingClockwise;</div><div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331fa0c22e6268eb10c1121177a9fbb1856ef">SG_FACEWINDING_CCW</a>:</div><div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;      <span class="keywordflow">return</span> MTLWindingCounterClockwise;</div><div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;      <span class="keywordflow">return</span> (MTLWinding)0;</div><div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;  }</div><div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;}</div><div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160;</div><div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;_SOKOL_PRIVATE MTLIndexType _sg_mtl_index_type(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641">sg_index_type</a> t)</div><div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;{</div><div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;  <span class="keywordflow">switch</span> (t) {</div><div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641aa12a337c61bc9a140d5a9ec1db91baae">SG_INDEXTYPE_UINT16</a>:</div><div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;      <span class="keywordflow">return</span> MTLIndexTypeUInt16;</div><div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a351dd7105c6dd3e47dabb9ee6dff643a">SG_INDEXTYPE_UINT32</a>:</div><div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;      <span class="keywordflow">return</span> MTLIndexTypeUInt32;</div><div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;      <span class="keywordflow">return</span> (MTLIndexType)0;</div><div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;  }</div><div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;}</div><div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;</div><div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;_SOKOL_PRIVATE NSUInteger _sg_mtl_index_size(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641">sg_index_type</a> t)</div><div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;{</div><div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;  <span class="keywordflow">switch</span> (t) {</div><div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a>:</div><div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641aa12a337c61bc9a140d5a9ec1db91baae">SG_INDEXTYPE_UINT16</a>:</div><div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;      <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a351dd7105c6dd3e47dabb9ee6dff643a">SG_INDEXTYPE_UINT32</a>:</div><div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;      <span class="keywordflow">return</span> 4;</div><div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;  }</div><div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;}</div><div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;</div><div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;_SOKOL_PRIVATE MTLTextureType _sg_mtl_texture_type(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">sg_image_type</a> t)</div><div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;{</div><div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;  <span class="keywordflow">switch</span> (t) {</div><div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a>:</div><div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;      <span class="keywordflow">return</span> MTLTextureType2D;</div><div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>:</div><div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;      <span class="keywordflow">return</span> MTLTextureTypeCube;</div><div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>:</div><div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;      <span class="keywordflow">return</span> MTLTextureType3D;</div><div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>:</div><div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;      <span class="keywordflow">return</span> MTLTextureType2DArray;</div><div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;      <span class="keywordflow">return</span> (MTLTextureType)0;</div><div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;  }</div><div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;}</div><div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;</div><div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_mtl_is_pvrtc(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt)</div><div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;{</div><div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;  <span class="keywordflow">switch</span> (fmt) {</div><div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5c1d86e7259c30e71a0345564ce133e5">SG_PIXELFORMAT_PVRTC2_RGB</a>:</div><div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7a18fff9a92408dc0b1b472e188a7293">SG_PIXELFORMAT_PVRTC2_RGBA</a>:</div><div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aff9e597d6ba26ce24ee763c57de6b20c">SG_PIXELFORMAT_PVRTC4_RGB</a>:</div><div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a3f7140ec7c333f21243ab73a1591c3b4">SG_PIXELFORMAT_PVRTC4_RGBA</a>:</div><div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;  }</div><div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;}</div><div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;</div><div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;_SOKOL_PRIVATE MTLSamplerAddressMode _sg_mtl_address_mode(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> w)</div><div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;{</div><div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;  <span class="keywordflow">switch</span> (w) {</div><div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>:</div><div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;      <span class="keywordflow">return</span> MTLSamplerAddressModeRepeat;</div><div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654daa970e343704dddd57115f2d834241b78">SG_WRAP_CLAMP_TO_EDGE</a>:</div><div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;      <span class="keywordflow">return</span> MTLSamplerAddressModeClampToEdge;</div><div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da2d6a059f14a7330186f072c1d30d0a1c">SG_WRAP_MIRRORED_REPEAT</a>:</div><div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;      <span class="keywordflow">return</span> MTLSamplerAddressModeMirrorRepeat;</div><div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;      <span class="keywordflow">return</span> (MTLSamplerAddressMode)0;</div><div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;  }</div><div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;}</div><div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;</div><div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;_SOKOL_PRIVATE MTLSamplerMinMagFilter _sg_mtl_minmag_filter(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> f)</div><div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;{</div><div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;  <span class="keywordflow">switch</span> (f) {</div><div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>:</div><div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a84115e146ee19b60c763d0dfb1cd347a">SG_FILTER_NEAREST_MIPMAP_NEAREST</a>:</div><div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a21116fc969ac2da818c6f70ce6f04f01">SG_FILTER_NEAREST_MIPMAP_LINEAR</a>:</div><div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;      <span class="keywordflow">return</span> MTLSamplerMinMagFilterNearest;</div><div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a71e72d5047072e13ecbe4717d7cb4f32">SG_FILTER_LINEAR</a>:</div><div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a48f5bd6ec5073d2eec58e7af5b07375f">SG_FILTER_LINEAR_MIPMAP_NEAREST</a>:</div><div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a7f78c11a24799bfc6115afff391bc864">SG_FILTER_LINEAR_MIPMAP_LINEAR</a>:</div><div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;      <span class="keywordflow">return</span> MTLSamplerMinMagFilterLinear;</div><div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;      <span class="keywordflow">return</span> (MTLSamplerMinMagFilter)0;</div><div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;  }</div><div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;}</div><div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;</div><div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;_SOKOL_PRIVATE MTLSamplerMipFilter _sg_mtl_mip_filter(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> f)</div><div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;{</div><div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;  <span class="keywordflow">switch</span> (f) {</div><div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>:</div><div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a71e72d5047072e13ecbe4717d7cb4f32">SG_FILTER_LINEAR</a>:</div><div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;      <span class="keywordflow">return</span> MTLSamplerMipFilterNotMipmapped;</div><div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a84115e146ee19b60c763d0dfb1cd347a">SG_FILTER_NEAREST_MIPMAP_NEAREST</a>:</div><div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a48f5bd6ec5073d2eec58e7af5b07375f">SG_FILTER_LINEAR_MIPMAP_NEAREST</a>:</div><div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;      <span class="keywordflow">return</span> MTLSamplerMipFilterNearest;</div><div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a21116fc969ac2da818c6f70ce6f04f01">SG_FILTER_NEAREST_MIPMAP_LINEAR</a>:</div><div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a7f78c11a24799bfc6115afff391bc864">SG_FILTER_LINEAR_MIPMAP_LINEAR</a>:</div><div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;      <span class="keywordflow">return</span> MTLSamplerMipFilterLinear;</div><div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;      SOKOL_UNREACHABLE;</div><div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;      <span class="keywordflow">return</span> (MTLSamplerMipFilter)0;</div><div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;  }</div><div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;}</div><div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;</div><div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;<span class="comment">/*-- a pool for all Metal resource objects, with deferred release queue -------*/</span></div><div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;<span class="keyword">static</span> uint32_t _sg_mtl_pool_size;</div><div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;<span class="keyword">static</span> NSMutableArray* _sg_mtl_pool;</div><div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;<span class="keyword">static</span> uint32_t _sg_mtl_free_queue_top;</div><div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;<span class="keyword">static</span> uint32_t* _sg_mtl_free_queue;</div><div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;<span class="keyword">static</span> uint32_t _sg_mtl_release_queue_front;</div><div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;<span class="keyword">static</span> uint32_t _sg_mtl_release_queue_back;</div><div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;  uint32_t frame_index; <span class="comment">/* frame index at which it is safe to release this resource */</span></div><div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;  uint32_t pool_index;</div><div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;} _sg_mtl_release_item;</div><div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;<span class="keyword">static</span> _sg_mtl_release_item* _sg_mtl_release_queue;</div><div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;</div><div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_mtl_init_pool(<span class="keyword">const</span> <a class="code" href="../../dc/d0e/structsg__desc.html">sg_desc</a>* desc)</div><div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;{</div><div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;  _sg_mtl_pool_size = 2 *</div><div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;                        2 * _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a04b19d54bf3b446715faac7ee895a6ad">buffer_pool_size</a>, _SG_DEFAULT_BUFFER_POOL_SIZE) +</div><div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;                      5 * _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#aae8ba84b9097e6321647193b2cf6e82a">image_pool_size</a>, _SG_DEFAULT_IMAGE_POOL_SIZE) +</div><div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;                      4 * _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a73bccc3454c2baa27e5ff9b1941c654d">shader_pool_size</a>, _SG_DEFAULT_SHADER_POOL_SIZE) +</div><div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;                      2 * _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a15b47daeb207aa0fb560b043904e33e1">pipeline_pool_size</a>, _SG_DEFAULT_PIPELINE_POOL_SIZE) +</div><div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;                      _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#ab56f235f260ba5c0a5f0d2bd470e854d">pass_pool_size</a>, _SG_DEFAULT_PASS_POOL_SIZE);</div><div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;  _sg_mtl_pool = [NSMutableArray arrayWithCapacity:_sg_mtl_pool_size];</div><div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;  NSNull* <a class="code" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985a37a6259cc0c1dae299a7866489dff0bd">null</a> = [NSNull null];</div><div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; _sg_mtl_pool_size; i++) {</div><div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;    [_sg_mtl_pool addObject:null];</div><div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;  }</div><div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;  SOKOL_ASSERT([_sg_mtl_pool count] == _sg_mtl_pool_size);</div><div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;  <span class="comment">/* a queue of currently free slot indices */</span></div><div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;  _sg_mtl_free_queue_top = 0;</div><div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;  _sg_mtl_free_queue = (uint32_t*)SOKOL_MALLOC(_sg_mtl_pool_size * <span class="keyword">sizeof</span>(uint32_t));</div><div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = _sg_mtl_pool_size - 1; i &gt;= 0; i--) {</div><div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;    _sg_mtl_free_queue[_sg_mtl_free_queue_top++] = (uint32_t)i;</div><div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;  }</div><div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;  <span class="comment">/* a circular queue which holds release items (frame index</span></div><div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;<span class="comment">       when a resource is to be released, and the resource&#39;s</span></div><div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;<span class="comment">       pool index</span></div><div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;  _sg_mtl_release_queue_front = 0;</div><div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;  _sg_mtl_release_queue_back = 0;</div><div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;  _sg_mtl_release_queue = (_sg_mtl_release_item*)SOKOL_MALLOC(_sg_mtl_pool_size * <span class="keyword">sizeof</span>(_sg_mtl_release_item));</div><div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;  <span class="keywordflow">for</span> (uint32_t i = 0; i &lt; _sg_mtl_pool_size; i++) {</div><div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;    _sg_mtl_release_queue[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].frame_index = 0;</div><div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;    _sg_mtl_release_queue[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].pool_index = _SG_MTL_INVALID_POOL_INDEX;</div><div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;  }</div><div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;}</div><div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;</div><div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_mtl_destroy_pool()</div><div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;{</div><div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;  SOKOL_FREE(_sg_mtl_release_queue);</div><div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;  _sg_mtl_release_queue = 0;</div><div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;  SOKOL_FREE(_sg_mtl_free_queue);</div><div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;  _sg_mtl_free_queue = 0;</div><div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;  _sg_mtl_pool = nil;</div><div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;}</div><div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;</div><div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;<span class="comment">/* get a new free resource pool slot */</span></div><div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;_SOKOL_PRIVATE uint32_t _sg_mtl_alloc_pool_slot()</div><div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;{</div><div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;  SOKOL_ASSERT(_sg_mtl_free_queue_top &gt; 0);</div><div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;  <span class="keyword">const</span> uint32_t pool_index = _sg_mtl_free_queue[--_sg_mtl_free_queue_top];</div><div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;  <span class="keywordflow">return</span> pool_index;</div><div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;}</div><div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;</div><div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;<span class="comment">/* put a free resource pool slot back into the free-queue */</span></div><div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_mtl_free_pool_slot(uint32_t pool_index)</div><div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;{</div><div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;  SOKOL_ASSERT(_sg_mtl_free_queue_top &lt; _sg_mtl_pool_size);</div><div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;  _sg_mtl_free_queue[_sg_mtl_free_queue_top++] = pool_index;</div><div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;}</div><div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;</div><div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;<span class="comment">/*  add an MTLResource to the pool, return pool index or 0xFFFFFFFF if input was &#39;nil&#39; */</span></div><div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;_SOKOL_PRIVATE uint32_t _sg_mtl_add_resource(<span class="keywordtype">id</span> res)</div><div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;{</div><div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;  <span class="keywordflow">if</span> (nil == res) {</div><div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;    <span class="keywordflow">return</span> _SG_MTL_INVALID_POOL_INDEX;</div><div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;  }</div><div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;  <span class="keyword">const</span> uint32_t pool_index = _sg_mtl_alloc_pool_slot();</div><div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;  SOKOL_ASSERT([NSNull null] == _sg_mtl_pool[pool_index]);</div><div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;  _sg_mtl_pool[pool_index] = res;</div><div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;  <span class="keywordflow">return</span> pool_index;</div><div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;}</div><div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;</div><div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;<span class="comment">/*  mark an MTLResource for release, this will put the resource into the</span></div><div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;<span class="comment">    deferred-release queue, and the resource will then be released N frames later,</span></div><div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;<span class="comment">    the special pool index 0xFFFFFFFF will be ignored (this means that a nil</span></div><div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;<span class="comment">    value was provided to _sg_mtl_add_resource()</span></div><div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_mtl_release_resource(uint32_t frame_index, uint32_t pool_index)</div><div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;{</div><div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;  <span class="keywordflow">if</span> (pool_index == _SG_MTL_INVALID_POOL_INDEX) {</div><div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;  }</div><div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;  SOKOL_ASSERT((pool_index &gt;= 0) &amp;&amp; (pool_index &lt; _sg_mtl_pool_size));</div><div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;  SOKOL_ASSERT([NSNull null] != _sg_mtl_pool[pool_index]);</div><div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;  <span class="keywordtype">int</span> slot_index = _sg_mtl_release_queue_front++;</div><div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;  <span class="keywordflow">if</span> (_sg_mtl_release_queue_front &gt;= _sg_mtl_pool_size) {</div><div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;    <span class="comment">/* wrap-around */</span></div><div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;    _sg_mtl_release_queue_front = 0;</div><div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;  }</div><div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;  <span class="comment">/* release queue full? */</span></div><div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;  SOKOL_ASSERT(_sg_mtl_release_queue_front != _sg_mtl_release_queue_back);</div><div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;  SOKOL_ASSERT(0 == _sg_mtl_release_queue[slot_index].frame_index);</div><div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;  <span class="keyword">const</span> uint32_t safe_to_release_frame_index = frame_index + <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a> + 1;</div><div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;  _sg_mtl_release_queue[slot_index].frame_index = safe_to_release_frame_index;</div><div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;  _sg_mtl_release_queue[slot_index].pool_index = pool_index;</div><div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;}</div><div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;</div><div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;<span class="comment">/* run garbage-collection pass on all resources in the release-queue */</span></div><div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_mtl_garbage_collect(uint32_t frame_index)</div><div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;{</div><div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;  <span class="keywordflow">while</span> (_sg_mtl_release_queue_back != _sg_mtl_release_queue_front) {</div><div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;    <span class="keywordflow">if</span> (frame_index &lt; _sg_mtl_release_queue[_sg_mtl_release_queue_back].frame_index) {</div><div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;      <span class="comment">/* don&#39;t need to check further, release-items past this are too young */</span></div><div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;    }</div><div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;    <span class="comment">/* safe to release this resource */</span></div><div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;    <span class="keyword">const</span> uint32_t pool_index = _sg_mtl_release_queue[_sg_mtl_release_queue_back].pool_index;</div><div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;    SOKOL_ASSERT(pool_index &lt; _sg_mtl_pool_size);</div><div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;    SOKOL_ASSERT(_sg_mtl_pool[pool_index] != [NSNull null]);</div><div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;    _sg_mtl_pool[pool_index] = [NSNull null];</div><div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;    <span class="comment">/* put the now free pool index back on the free queue */</span></div><div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;    _sg_mtl_free_pool_slot(pool_index);</div><div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;    <span class="comment">/* reset the release queue slot and advance the back index */</span></div><div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;    _sg_mtl_release_queue[_sg_mtl_release_queue_back].frame_index = 0;</div><div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;    _sg_mtl_release_queue[_sg_mtl_release_queue_back].pool_index = _SG_MTL_INVALID_POOL_INDEX;</div><div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;    _sg_mtl_release_queue_back++;</div><div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;    <span class="keywordflow">if</span> (_sg_mtl_release_queue_back &gt;= _sg_mtl_pool_size) {</div><div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;      <span class="comment">/* wrap-around */</span></div><div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;      _sg_mtl_release_queue_back = 0;</div><div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;    }</div><div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;  }</div><div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;}</div><div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160;</div><div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;<span class="comment">/*-- a very simple sampler cache -----------------------------------------------</span></div><div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;<span class="comment">    since there&#39;s only a small number of different samplers, sampler objects</span></div><div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;<span class="comment">    will never be deleted (except on shutdown), and searching an identical</span></div><div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;<span class="comment">    sampler is a simple linear search</span></div><div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> min_filter;</div><div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> mag_filter;</div><div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_u;</div><div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_v;</div><div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_w;</div><div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;  uint32_t max_anisotropy;</div><div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;  <span class="keywordtype">int</span> min_lod; <span class="comment">/* orig min/max_lod is float, this is int(min/max_lod*1000.0) */</span></div><div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;  <span class="keywordtype">int</span> max_lod;</div><div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;  uint32_t mtl_sampler_state;</div><div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;} _sg_mtl_sampler_cache_item;</div><div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> _sg_mtl_sampler_cache_capacity;</div><div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> _sg_mtl_sampler_cache_size;</div><div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;<span class="keyword">static</span> _sg_mtl_sampler_cache_item* _sg_mtl_sampler_cache;</div><div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;</div><div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;<span class="comment">/* initialize the sampler cache */</span></div><div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_mtl_init_sampler_cache(<span class="keyword">const</span> <a class="code" href="../../dc/d0e/structsg__desc.html">sg_desc</a>* desc)</div><div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;{</div><div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;  _sg_mtl_sampler_cache_capacity = _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#ae0a2df5024eb8857323b7d30d465f546">mtl_sampler_cache_size</a>, _SG_MTL_DEFAULT_SAMPLER_CACHE_CAPACITY);</div><div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;  _sg_mtl_sampler_cache_size = 0;</div><div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a> = _sg_mtl_sampler_cache_capacity * <span class="keyword">sizeof</span>(_sg_mtl_sampler_cache_item);</div><div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;  _sg_mtl_sampler_cache = (_sg_mtl_sampler_cache_item*)SOKOL_MALLOC(size);</div><div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;  memset(_sg_mtl_sampler_cache, 0, size);</div><div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;}</div><div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;</div><div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;<span class="comment">/* destroy the sampler cache, and release all sampler objects */</span></div><div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_mtl_destroy_sampler_cache(uint32_t frame_index)</div><div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;{</div><div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;  SOKOL_ASSERT(_sg_mtl_sampler_cache);</div><div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;  SOKOL_ASSERT(_sg_mtl_sampler_cache_size &lt;= _sg_mtl_sampler_cache_capacity);</div><div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; _sg_mtl_sampler_cache_size; i++) {</div><div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;    _sg_mtl_release_resource(frame_index, _sg_mtl_sampler_cache[i].mtl_sampler_state);</div><div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;  }</div><div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;  SOKOL_FREE(_sg_mtl_sampler_cache);</div><div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;  _sg_mtl_sampler_cache = 0;</div><div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;  _sg_mtl_sampler_cache_size = 0;</div><div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;  _sg_mtl_sampler_cache_capacity = 0;</div><div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;}</div><div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;</div><div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;<span class="comment">    create and add an MTLSamplerStateObject and return its resource pool index,</span></div><div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;<span class="comment">    reuse identical sampler state if one exists</span></div><div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;_SOKOL_PRIVATE uint32_t _sg_mtl_create_sampler(<a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLDevice&gt;</a> mtl_device, <span class="keyword">const</span> <a class="code" href="../../d4/d94/structsg__image__desc.html">sg_image_desc</a>* img_desc)</div><div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;{</div><div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;  SOKOL_ASSERT(img_desc);</div><div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;  SOKOL_ASSERT(_sg_mtl_sampler_cache);</div><div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;  <span class="comment">/* sampler state cache is full */</span></div><div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> min_filter = _sg_def(img_desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a09eb7207f75e8ad1a8e49335b5da0a0f">min_filter</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>);</div><div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> mag_filter = _sg_def(img_desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a7cc28a336de67a2fee6a39c0a4cb3eb6">mag_filter</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>);</div><div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_u = _sg_def(img_desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#af56aa1ad4802c4377f32a3656cc00540">wrap_u</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>);</div><div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_v = _sg_def(img_desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ad92e8d7c8fc89dea7db54d569982f57d">wrap_v</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>);</div><div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_w = _sg_def(img_desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a457ed7b98ffce90d5cb6b70e2cc4027d">wrap_w</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>);</div><div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;  <span class="keyword">const</span> uint32_t max_anisotropy = _sg_def(img_desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a1db73b1b6b31ac8dc14f0c2358057f87">max_anisotropy</a>, 1);</div><div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;  <span class="comment">/* convert floats to valid int for proper comparison */</span></div><div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> min_lod = (<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a08a5eaaa645e878bd69d4ab93f41e87c">int</a>)(img_desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a65deea510785efb62849e55b84193263">min_lod</a> * 1000.0f);</div><div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> max_lod = (<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a08a5eaaa645e878bd69d4ab93f41e87c">int</a>)(_sg_def_flt(img_desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a435a6e2e71f190b00ef4666c83173572">max_lod</a>, 1000.0f) * 1000.0f);</div><div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;  <span class="comment">/* first try to find identical sampler, number of samplers will be small, so linear search is ok */</span></div><div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; _sg_mtl_sampler_cache_size; i++) {</div><div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;    _sg_mtl_sampler_cache_item* item = &amp;_sg_mtl_sampler_cache[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;    <span class="keywordflow">if</span> ((min_filter == item-&gt;min_filter) &amp;&amp;</div><div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;        (mag_filter == item-&gt;mag_filter) &amp;&amp;</div><div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;        (wrap_u == item-&gt;wrap_u) &amp;&amp;</div><div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;        (wrap_v == item-&gt;wrap_v) &amp;&amp;</div><div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;        (wrap_w == item-&gt;wrap_w) &amp;&amp;</div><div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;        (max_anisotropy == item-&gt;max_anisotropy) &amp;&amp;</div><div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;        (min_lod == item-&gt;min_lod) &amp;&amp;</div><div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;        (max_lod == item-&gt;max_lod)) {</div><div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;      <span class="keywordflow">return</span> item-&gt;mtl_sampler_state;</div><div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;    }</div><div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;  }</div><div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;  <span class="comment">/* fallthrough: need to create a new MTLSamplerState object */</span></div><div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;  SOKOL_ASSERT(_sg_mtl_sampler_cache_size &lt; _sg_mtl_sampler_cache_capacity);</div><div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;  _sg_mtl_sampler_cache_item* new_item = &amp;_sg_mtl_sampler_cache[_sg_mtl_sampler_cache_size++];</div><div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;  new_item-&gt;min_filter = min_filter;</div><div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;  new_item-&gt;mag_filter = mag_filter;</div><div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;  new_item-&gt;wrap_u = wrap_u;</div><div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;  new_item-&gt;wrap_v = wrap_v;</div><div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;  new_item-&gt;wrap_w = wrap_w;</div><div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;  new_item-&gt;min_lod = min_lod;</div><div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;  new_item-&gt;max_lod = max_lod;</div><div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;  new_item-&gt;max_anisotropy = max_anisotropy;</div><div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;  MTLSamplerDescriptor* mtl_desc = [[MTLSamplerDescriptor <a class="code" href="../../da/de3/namespaceo2_1_1algorithm_1_1pageparser.html#afcb584be9f28324176c0d92fcbd32c99">alloc</a>] init];</div><div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;  mtl_desc.sAddressMode = _sg_mtl_address_mode(wrap_u);</div><div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;  mtl_desc.tAddressMode = _sg_mtl_address_mode(wrap_v);</div><div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a> == img_desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a206bf908ad986430c63d819f06c4a91a">type</a>) {</div><div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;    mtl_desc.rAddressMode = _sg_mtl_address_mode(wrap_w);</div><div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;  }</div><div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;  mtl_desc.minFilter = _sg_mtl_minmag_filter(min_filter);</div><div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;  mtl_desc.magFilter = _sg_mtl_minmag_filter(mag_filter);</div><div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;  mtl_desc.mipFilter = _sg_mtl_mip_filter(min_filter);</div><div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;  mtl_desc.lodMinClamp = img_desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a65deea510785efb62849e55b84193263">min_lod</a>;</div><div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;  mtl_desc.lodMaxClamp = _sg_def_flt(img_desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a435a6e2e71f190b00ef4666c83173572">max_lod</a>, FLT_MAX);</div><div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;  mtl_desc.maxAnisotropy = max_anisotropy;</div><div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;  mtl_desc.normalizedCoordinates = YES;</div><div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLSamplerState&gt;</a> mtl_sampler = [mtl_device newSamplerStateWithDescriptor:mtl_desc];</div><div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;  new_item-&gt;mtl_sampler_state = _sg_mtl_add_resource(mtl_sampler);</div><div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;  <span class="keywordflow">return</span> new_item-&gt;mtl_sampler_state;</div><div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;}</div><div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;</div><div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;<span class="comment">/*-- Metal backend resource structs ------------------------------------------*/</span></div><div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>;</div><div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8f">sg_buffer_type</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>;</div><div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#afb85c5d9b1bce96aa3b530d581194d1a">usage</a>;</div><div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;  uint32_t upd_frame_index;</div><div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;  <span class="keywordtype">int</span> num_slots;</div><div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;  <span class="keywordtype">int</span> active_slot;</div><div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;  uint32_t mtl_buf[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>]; <span class="comment">/* index intp _sg_mtl_pool */</span></div><div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;} _sg_buffer;</div><div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;</div><div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_buffer_slot(_sg_buffer* buf)</div><div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;{</div><div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;  SOKOL_ASSERT(buf);</div><div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;  memset(buf, 0, <span class="keyword">sizeof</span>(_sg_buffer));</div><div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;}</div><div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;</div><div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">sg_image_type</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>;</div><div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;  <span class="keywordtype">bool</span> render_target;</div><div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a76aaa5c50746272e7d2de9aece921757">width</a>;</div><div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae23e72c69f79d0aa647aa7929ef3f232">height</a>;</div><div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#aa8bd8cf1eef34712fdb6ad58b540a2ee">depth</a>;</div><div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;  <span class="keywordtype">int</span> num_mipmaps;</div><div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#afb85c5d9b1bce96aa3b530d581194d1a">usage</a>;</div><div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> pixel_format;</div><div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;  <span class="keywordtype">int</span> sample_count;</div><div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> min_filter;</div><div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a> mag_filter;</div><div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_u;</div><div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_v;</div><div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a> wrap_w;</div><div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;  uint32_t max_anisotropy;</div><div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;  uint32_t upd_frame_index;</div><div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;  <span class="keywordtype">int</span> num_slots;</div><div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;  <span class="keywordtype">int</span> active_slot;</div><div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;  uint32_t mtl_tex[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>];</div><div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;  uint32_t mtl_depth_tex;</div><div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;  uint32_t mtl_msaa_tex;</div><div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;  uint32_t mtl_sampler_state;</div><div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;} _sg_image;</div><div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;</div><div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_image_slot(_sg_image* img)</div><div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;{</div><div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;  SOKOL_ASSERT(img);</div><div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;  memset(img, 0, <span class="keyword">sizeof</span>(_sg_image));</div><div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;}</div><div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;</div><div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>;</div><div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;} _sg_uniform_block;</div><div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;</div><div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">sg_image_type</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>;</div><div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;} _sg_shader_image;</div><div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;</div><div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;  <span class="keywordtype">int</span> num_uniform_blocks;</div><div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;  <span class="keywordtype">int</span> num_images;</div><div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;  _sg_uniform_block uniform_blocks[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>];</div><div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;  _sg_shader_image images[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;  uint32_t mtl_lib;</div><div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;  uint32_t mtl_func;</div><div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;} _sg_shader_stage;</div><div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;</div><div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;  _sg_shader_stage stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">SG_NUM_SHADER_STAGES</a>];</div><div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;} _sg_shader;</div><div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;</div><div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_shader_slot(_sg_shader* shd)</div><div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;{</div><div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;  SOKOL_ASSERT(shd);</div><div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;  memset(shd, 0, <span class="keyword">sizeof</span>(_sg_shader));</div><div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;}</div><div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;</div><div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;  _sg_shader* <a class="code" href="../../dc/da3/glcorearb_8h.html#a57b2a96adb1d51204909a82d861e395e">shader</a>;</div><div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;  <a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> shader_id;</div><div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;  <span class="keywordtype">bool</span> vertex_layout_valid[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;  <span class="keywordtype">int</span> color_attachment_count;</div><div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> color_format;</div><div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> depth_format;</div><div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;  <span class="keywordtype">int</span> sample_count;</div><div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;  <span class="keywordtype">float</span> depth_bias;</div><div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;  <span class="keywordtype">float</span> depth_bias_slope_scale;</div><div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;  <span class="keywordtype">float</span> depth_bias_clamp;</div><div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;  MTLPrimitiveType mtl_prim_type;</div><div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641">sg_index_type</a> index_type;</div><div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;  NSUInteger mtl_index_size;</div><div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;  MTLIndexType mtl_index_type;</div><div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;  MTLCullMode mtl_cull_mode;</div><div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;  MTLWinding mtl_winding;</div><div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;  <span class="keywordtype">float</span> blend_color[4];</div><div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;  uint32_t mtl_stencil_ref;</div><div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;  uint32_t mtl_rps;</div><div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;  uint32_t mtl_dss;</div><div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;} _sg_pipeline;</div><div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;</div><div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_pipeline_slot(_sg_pipeline* pip)</div><div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;{</div><div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;  SOKOL_ASSERT(pip);</div><div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;  memset(pip, 0, <span class="keyword">sizeof</span>(_sg_pipeline));</div><div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;}</div><div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;</div><div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;  _sg_image* image;</div><div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;  <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> image_id;</div><div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;  <span class="keywordtype">int</span> mip_level;</div><div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;  <span class="keywordtype">int</span> slice;</div><div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;} _sg_attachment;</div><div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;</div><div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;  <span class="keywordtype">int</span> num_color_atts;</div><div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;  _sg_attachment color_atts[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>];</div><div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;  _sg_attachment ds_att;</div><div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;} _sg_pass;</div><div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;</div><div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_pass_slot(_sg_pass* pass)</div><div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;{</div><div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;  SOKOL_ASSERT(pass);</div><div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;  memset(pass, 0, <span class="keyword">sizeof</span>(_sg_pass));</div><div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;}</div><div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;</div><div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;  _sg_slot slot;</div><div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;} _sg_context;</div><div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;</div><div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_context_slot(_sg_context* ctx)</div><div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;{</div><div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;  SOKOL_ASSERT(ctx);</div><div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;  memset(ctx, 0, <span class="keyword">sizeof</span>(_sg_context));</div><div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;}</div><div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;</div><div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;<span class="comment">/*-- a simple state cache for the resource bindings --------------------------*/</span></div><div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> _sg_pipeline* _sg_mtl_cur_pipeline;</div><div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> _sg_mtl_cur_pipeline_id;</div><div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> _sg_buffer* _sg_mtl_cur_indexbuffer;</div><div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;<span class="keyword">static</span> uint32_t _sg_mtl_cur_indexbuffer_offset;</div><div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> _sg_mtl_cur_indexbuffer_id;</div><div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> _sg_buffer* _sg_mtl_cur_vertexbuffers[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;<span class="keyword">static</span> uint32_t _sg_mtl_cur_vertexbuffer_offsets[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> _sg_mtl_cur_vertexbuffer_ids[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> _sg_image* _sg_mtl_cur_vs_images[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> _sg_mtl_cur_vs_image_ids[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> _sg_image* _sg_mtl_cur_fs_images[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;<span class="keyword">static</span> <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> _sg_mtl_cur_fs_image_ids[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>];</div><div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;</div><div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_mtl_clear_state_cache()</div><div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;{</div><div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;  _sg_mtl_cur_pipeline = 0;</div><div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;  _sg_mtl_cur_pipeline_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;  _sg_mtl_cur_indexbuffer = 0;</div><div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;  _sg_mtl_cur_indexbuffer_offset = 0;</div><div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;  _sg_mtl_cur_indexbuffer_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>; i++) {</div><div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;    _sg_mtl_cur_vertexbuffers[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;    _sg_mtl_cur_vertexbuffer_offsets[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;    _sg_mtl_cur_vertexbuffer_ids[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;  }</div><div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>; i++) {</div><div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;    _sg_mtl_cur_vs_images[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;    _sg_mtl_cur_vs_image_ids[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;    _sg_mtl_cur_fs_images[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 0;</div><div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;    _sg_mtl_cur_fs_image_ids[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;  }</div><div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;}</div><div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;</div><div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;<span class="comment">/*-- main Metal backend state and functions ----------------------------------*/</span></div><div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> _sg_mtl_valid;</div><div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">void</span>* (*_sg_mtl_renderpass_descriptor_cb)(<a class="code" href="../../dc/da3/glcorearb_8h.html#a950fc91edb4504f62f1c577bf4727c29">void</a>);</div><div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">void</span>* (*_sg_mtl_drawable_cb)(<a class="code" href="../../dc/da3/glcorearb_8h.html#a950fc91edb4504f62f1c577bf4727c29">void</a>);</div><div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;<span class="keyword">static</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLDevice&gt;</a> _sg_mtl_device;</div><div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;<span class="keyword">static</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLCommandQueue&gt;</a> _sg_mtl_cmd_queue;</div><div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;<span class="keyword">static</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLCommandBuffer&gt;</a> _sg_mtl_cmd_buffer;</div><div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;<span class="keyword">static</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLRenderCommandEncoder&gt;</a> _sg_mtl_cmd_encoder;</div><div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;<span class="keyword">static</span> uint32_t _sg_mtl_frame_index;</div><div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;<span class="keyword">static</span> uint32_t _sg_mtl_cur_frame_rotate_index;</div><div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;<span class="keyword">static</span> uint32_t _sg_mtl_ub_size;</div><div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;<span class="keyword">static</span> uint32_t _sg_mtl_cur_ub_offset;</div><div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;<span class="keyword">static</span> uint8_t* _sg_mtl_cur_ub_base_ptr;</div><div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;<span class="keyword">static</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLBuffer&gt;</a> _sg_mtl_uniform_buffers[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>];</div><div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;<span class="keyword">static</span> dispatch_semaphore_t _sg_mtl_sem;</div><div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> _sg_mtl_in_pass;</div><div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> _sg_mtl_pass_valid;</div><div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> _sg_mtl_cur_width;</div><div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> _sg_mtl_cur_height;</div><div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;</div><div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_setup_backend(<span class="keyword">const</span> <a class="code" href="../../dc/d0e/structsg__desc.html">sg_desc</a>* desc)</div><div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;{</div><div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;  SOKOL_ASSERT(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#aae61c7e1c17c10737bf286b98fdbcb6d">mtl_device</a>);</div><div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;  SOKOL_ASSERT(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a5d30d3fe2a70a0133fde16461d53fb39">mtl_renderpass_descriptor_cb</a>);</div><div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;  SOKOL_ASSERT(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a3b9a260dd404099b2ed9c8f697fe8599">mtl_drawable_cb</a>);</div><div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;  _sg_mtl_init_pool(desc);</div><div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;  _sg_mtl_init_sampler_cache(desc);</div><div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;  _sg_mtl_clear_state_cache();</div><div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;  _sg_mtl_valid = <span class="keyword">true</span>;</div><div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;  _sg_mtl_renderpass_descriptor_cb = desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a5d30d3fe2a70a0133fde16461d53fb39">mtl_renderpass_descriptor_cb</a>;</div><div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;  _sg_mtl_drawable_cb = desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a3b9a260dd404099b2ed9c8f697fe8599">mtl_drawable_cb</a>;</div><div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;  _sg_mtl_in_pass = <span class="keyword">false</span>;</div><div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;  _sg_mtl_pass_valid = <span class="keyword">false</span>;</div><div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;  _sg_mtl_cur_width = 0;</div><div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;  _sg_mtl_cur_height = 0;</div><div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;  _sg_mtl_frame_index = 1;</div><div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;  _sg_mtl_cur_frame_rotate_index = 0;</div><div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;  _sg_mtl_cur_ub_offset = 0;</div><div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;  _sg_mtl_cur_ub_base_ptr = 0;</div><div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;  _sg_mtl_device = (__bridge <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLDevice&gt;</a>)desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#aae61c7e1c17c10737bf286b98fdbcb6d">mtl_device</a>;</div><div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;  _sg_mtl_sem = dispatch_semaphore_create(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>);</div><div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;  _sg_mtl_cmd_queue = [_sg_mtl_device newCommandQueue];</div><div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;  _sg_mtl_ub_size = _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#aeccf0b76760ad2fb16dd73cbfe880870">mtl_global_uniform_buffer_size</a>, _SG_MTL_DEFAULT_UB_SIZE);</div><div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;  MTLResourceOptions res_opts = MTLResourceCPUCacheModeWriteCombined;</div><div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;<span class="preprocessor">#if !TARGET_OS_IPHONE</span></div><div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;  res_opts |= MTLResourceStorageModeManaged;</div><div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>; i++) {</div><div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;    _sg_mtl_uniform_buffers[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = [_sg_mtl_device</div><div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;      newBufferWithLength:_sg_mtl_ub_size</div><div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;                  options:res_opts];</div><div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;  }</div><div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;}</div><div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;</div><div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_discard_backend()</div><div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;{</div><div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;  SOKOL_ASSERT(_sg_mtl_valid);</div><div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;  <span class="comment">/* wait for the last frame to finish */</span></div><div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>; i++) {</div><div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;    dispatch_semaphore_wait(_sg_mtl_sem, DISPATCH_TIME_FOREVER);</div><div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;  }</div><div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;  _sg_mtl_destroy_sampler_cache(_sg_mtl_frame_index);</div><div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;  _sg_mtl_garbage_collect(_sg_mtl_frame_index + SG_NUM_INFLIGHT_FRAMES + 2);</div><div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;  _sg_mtl_destroy_pool();</div><div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;  _sg_mtl_valid = <span class="keyword">false</span>;</div><div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;  _sg_mtl_cmd_encoder = nil;</div><div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;  _sg_mtl_cmd_buffer = nil;</div><div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;  _sg_mtl_cmd_queue = nil;</div><div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>; i++) {</div><div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;    _sg_mtl_uniform_buffers[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = nil;</div><div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;  }</div><div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;  _sg_mtl_device = nil;</div><div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;}</div><div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;</div><div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_query_feature(sg_feature f)</div><div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;{</div><div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;  <span class="keywordflow">switch</span> (f) {</div><div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4">SG_FEATURE_INSTANCING</a>:</div><div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;<span class="preprocessor">#if !TARGET_OS_IPHONE</span></div><div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a9ca2b37fa43fcd46f8d6e537064e3e9b">SG_FEATURE_TEXTURE_COMPRESSION_DXT</a>:</div><div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a06f42e3be3662f69b106bba1d47e92ef">SG_FEATURE_TEXTURE_COMPRESSION_PVRTC</a>:</div><div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ab44ce51d78809d456207d70f230d8d7f">SG_FEATURE_TEXTURE_COMPRESSION_ETC2</a>:</div><div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897afd60e8098c18e6a67973d66e173742d8">SG_FEATURE_TEXTURE_FLOAT</a>:</div><div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ac7c094127fe7cd4de810406b6a6c9c68">SG_FEATURE_ORIGIN_TOP_LEFT</a>:</div><div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a900e4644906ceec168a2ce44452e1a31">SG_FEATURE_MSAA_RENDER_TARGETS</a>:</div><div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad368978a4331e32ddf2715bbc6c6aa10">SG_FEATURE_PACKED_VERTEX_FORMAT_10_2</a>:</div><div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897acd4385efaeceb7f3bb64817dbf0d5acf">SG_FEATURE_MULTIPLE_RENDER_TARGET</a>:</div><div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a8a9131b5aa4d596ee5caaf5c738dd90f">SG_FEATURE_IMAGETYPE_3D</a>:</div><div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a3b2fbf1b80817df6f45664c192aa1183">SG_FEATURE_IMAGETYPE_ARRAY</a>:</div><div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;  }</div><div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;}</div><div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;</div><div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_reset_state_cache()</div><div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;{</div><div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;  _sg_mtl_clear_state_cache();</div><div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;}</div><div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;</div><div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_context(_sg_context* ctx)</div><div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;{</div><div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;  SOKOL_ASSERT(ctx);</div><div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;  SOKOL_ASSERT(ctx-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;  ctx-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;}</div><div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;</div><div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_context(_sg_context* ctx)</div><div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;{</div><div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;  SOKOL_ASSERT(ctx);</div><div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;  _sg_init_context_slot(ctx);</div><div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;}</div><div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;</div><div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_activate_context(_sg_context* ctx)</div><div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;{</div><div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;  _sg_reset_state_cache();</div><div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;}</div><div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;</div><div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_buffer(_sg_buffer* buf, <span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__buffer__desc.html">sg_buffer_desc</a>* desc)</div><div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;{</div><div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;  SOKOL_ASSERT(buf &amp;&amp; desc);</div><div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;  SOKOL_ASSERT(buf-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;  buf-&gt;size = desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a73cd8286ef49470f30f83c2118d2136d">size</a>;</div><div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;  buf-&gt;type = _sg_def(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#aed03d70712027dc18902bfab4a6559f3">type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fa1052a9f00ec6b8a3e914db754c0c64e2">SG_BUFFERTYPE_VERTEXBUFFER</a>);</div><div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;  buf-&gt;usage = _sg_def(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a3fa569faec49b1252c05dd1210a85b10">usage</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>);</div><div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;  buf-&gt;upd_frame_index = 0;</div><div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;  buf-&gt;num_slots = (buf-&gt;usage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>) ? 1 : SG_NUM_INFLIGHT_FRAMES;</div><div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;  buf-&gt;active_slot = 0;</div><div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> injected = (0 != desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#ad4f2b240c65b7ee8d8b2fa39208cb9a5">mtl_buffers</a>[0]);</div><div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;  MTLResourceOptions mtl_options = _sg_mtl_buffer_resource_options(buf-&gt;usage);</div><div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slot = 0; slot &lt; buf-&gt;num_slots; slot++) {</div><div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;    <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLBuffer&gt;</a> mtl_buf;</div><div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;    <span class="keywordflow">if</span> (injected) {</div><div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;      SOKOL_ASSERT(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#ad4f2b240c65b7ee8d8b2fa39208cb9a5">mtl_buffers</a>[slot]);</div><div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;      mtl_buf = (__bridge <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLBuffer&gt;</a>)desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#ad4f2b240c65b7ee8d8b2fa39208cb9a5">mtl_buffers</a>[slot];</div><div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;      <span class="keywordflow">if</span> (buf-&gt;usage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>) {</div><div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;        SOKOL_ASSERT(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a409e6cb69174e210981627d0a356bf65">content</a>);</div><div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;        mtl_buf = [_sg_mtl_device newBufferWithBytes:desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a409e6cb69174e210981627d0a356bf65">content</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a921fa83f7755f0139c84ba1831417a2e">length</a>:buf-&gt;size options:mtl_options];</div><div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;        mtl_buf = [_sg_mtl_device newBufferWithLength:buf-&gt;size options:mtl_options];</div><div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160;      }</div><div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;    }</div><div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;    buf-&gt;mtl_buf[slot] = _sg_mtl_add_resource(mtl_buf);</div><div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;  }</div><div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;  buf-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;}</div><div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;</div><div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_buffer(_sg_buffer* buf)</div><div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;{</div><div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;  SOKOL_ASSERT(buf);</div><div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;  <span class="keywordflow">if</span> (buf-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slot = 0; slot &lt; buf-&gt;num_slots; slot++) {</div><div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;      _sg_mtl_release_resource(_sg_mtl_frame_index, buf-&gt;mtl_buf[slot]);</div><div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;    }</div><div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;  }</div><div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;  _sg_init_buffer_slot(buf);</div><div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;}</div><div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;</div><div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_mtl_copy_image_content(<span class="keyword">const</span> _sg_image* img, __unsafe_unretained <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLTexture&gt;</a> mtl_tex, <span class="keyword">const</span> <a class="code" href="../../dd/d44/structsg__image__content.html">sg_image_content</a>* content)</div><div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;{</div><div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> num_faces = (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>) ? 6 : 1;</div><div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> num_slices = (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>) ? img-&gt;depth : 1;</div><div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;  <a class="code" href="../../d8/df7/BenchCathodeSegmentation_8cxx.html#a2b95d32c08b7fd322b51d91e97f1b552">for</a> (<span class="keywordtype">int</span> face_index = 0; face_index &lt; num_faces; face_index++) {</div><div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mip_index = 0; mip_index &lt; img-&gt;num_mipmaps; mip_index++) {</div><div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;      SOKOL_ASSERT(content-&gt;<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c">ptr</a>);</div><div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;      SOKOL_ASSERT(content-&gt;<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#ad5cf41c09de0390218aaa479aa2e58db">size</a> &gt; 0);</div><div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;      <span class="keyword">const</span> uint8_t* data_ptr = (<span class="keyword">const</span> uint8_t*)content-&gt;<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c">ptr</a>;</div><div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> mip_width = _sg_max(img-&gt;width &gt;&gt; mip_index, 1);</div><div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> mip_height = _sg_max(img-&gt;height &gt;&gt; mip_index, 1);</div><div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;      <span class="comment">/* special case PVRTC formats: bytePerRow must be 0 */</span></div><div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;      <span class="keywordtype">int</span> bytes_per_row = 0;</div><div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;      <span class="keywordtype">int</span> bytes_per_slice = _sg_surface_pitch(img-&gt;pixel_format, mip_width, mip_height);</div><div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;      <span class="keywordflow">if</span> (!_sg_mtl_is_pvrtc(img-&gt;pixel_format)) {</div><div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;        bytes_per_row = _sg_row_pitch(img-&gt;pixel_format, mip_width);</div><div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;      }</div><div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;      MTLRegion region;</div><div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;      <span class="keywordflow">if</span> (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>) {</div><div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> mip_depth = _sg_max(img-&gt;depth &gt;&gt; mip_index, 1);</div><div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;        region = MTLRegionMake3D(0, 0, 0, mip_width, mip_height, mip_depth);</div><div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;        <span class="comment">/* FIXME: apparently the minimal bytes_per_image size for 3D texture</span></div><div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;<span class="comment">                 is 4 KByte... somehow need to handle this */</span></div><div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;        region = MTLRegionMake2D(0, 0, mip_width, mip_height);</div><div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;      }</div><div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slice_index = 0; slice_index &lt; num_slices; slice_index++) {</div><div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> mtl_slice_index = (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>) ? face_index : slice_index;</div><div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> slice_offset = slice_index * bytes_per_slice;</div><div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;        SOKOL_ASSERT((slice_offset + bytes_per_slice) &lt;= (<span class="keywordtype">int</span>)content-&gt;<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#ad5cf41c09de0390218aaa479aa2e58db">size</a>);</div><div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;        [mtl_tex replaceRegion:region</div><div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;                   mipmapLevel:mip_index</div><div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;                         slice:mtl_slice_index</div><div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;                     withBytes:data_ptr + slice_offset</div><div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;                   bytesPerRow:bytes_per_row</div><div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;                 bytesPerImage:bytes_per_slice];</div><div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;      }</div><div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;    }</div><div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;  }</div><div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;}</div><div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;</div><div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_image(_sg_image* img, <span class="keyword">const</span> <a class="code" href="../../d4/d94/structsg__image__desc.html">sg_image_desc</a>* desc)</div><div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;{</div><div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;  SOKOL_ASSERT(img &amp;&amp; desc);</div><div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;  SOKOL_ASSERT(img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;  img-&gt;type = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a206bf908ad986430c63d819f06c4a91a">type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a>);</div><div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;  img-&gt;render_target = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#aeb5ea1efacf1fcbe702491bd6417df70">render_target</a>;</div><div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;  img-&gt;width = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a2852616fac46bf1d405b822ac612e94a">width</a>;</div><div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;  img-&gt;height = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a80175365c540f912492e50a5a8b362e7">height</a>;</div><div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;  img-&gt;depth = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a205fafb8e91cc1249e481378b7bac888">depth</a>, 1);</div><div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;  img-&gt;num_mipmaps = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a0653e80837f6ffa9477a62e627fad170">num_mipmaps</a>, 1);</div><div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;  img-&gt;usage = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a4610a2c95a3f97c99390ec4e08caa1ca">usage</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>);</div><div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;  img-&gt;pixel_format = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a07ce05ddf423b45fb74375b384dc1f14">pixel_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>);</div><div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;  img-&gt;sample_count = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a7e0d5c7130c32b489e509a6bcfd9904a">sample_count</a>, 1);</div><div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;  img-&gt;min_filter = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a09eb7207f75e8ad1a8e49335b5da0a0f">min_filter</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>);</div><div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;  img-&gt;mag_filter = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a7cc28a336de67a2fee6a39c0a4cb3eb6">mag_filter</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a>);</div><div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;  img-&gt;wrap_u = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#af56aa1ad4802c4377f32a3656cc00540">wrap_u</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>);</div><div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;  img-&gt;wrap_v = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ad92e8d7c8fc89dea7db54d569982f57d">wrap_v</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>);</div><div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;  img-&gt;wrap_w = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a457ed7b98ffce90d5cb6b70e2cc4027d">wrap_w</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a>);</div><div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;  img-&gt;max_anisotropy = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a1db73b1b6b31ac8dc14f0c2358057f87">max_anisotropy</a>, 1);</div><div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;  img-&gt;upd_frame_index = 0;</div><div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;  img-&gt;num_slots = (img-&gt;usage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>) ? 1 : SG_NUM_INFLIGHT_FRAMES;</div><div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;  img-&gt;active_slot = 0;</div><div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> injected = (0 != desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#acaa521ee4257b203252d89c0f4d299a9">mtl_textures</a>[0]);</div><div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;</div><div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;  <span class="comment">/* first initialize all Metal resource pool slots to &#39;empty&#39; */</span></div><div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a>; i++) {</div><div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;    img-&gt;mtl_tex[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = _sg_mtl_add_resource(nil);</div><div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;  }</div><div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;  img-&gt;mtl_sampler_state = _sg_mtl_add_resource(nil);</div><div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;  img-&gt;mtl_depth_tex = _sg_mtl_add_resource(nil);</div><div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;  img-&gt;mtl_msaa_tex = _sg_mtl_add_resource(nil);</div><div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;</div><div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;  <span class="comment">/* initialize a Metal texture descriptor with common attributes */</span></div><div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;  MTLTextureDescriptor* mtl_desc = [[MTLTextureDescriptor <a class="code" href="../../da/de3/namespaceo2_1_1algorithm_1_1pageparser.html#afcb584be9f28324176c0d92fcbd32c99">alloc</a>] init];</div><div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;  mtl_desc.textureType = _sg_mtl_texture_type(img-&gt;type);</div><div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;  <span class="keywordflow">if</span> (img-&gt;render_target) {</div><div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;    <span class="keywordflow">if</span> (_sg_is_valid_rendertarget_color_format(img-&gt;pixel_format)) {</div><div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;      mtl_desc.pixelFormat = _sg_mtl_rendertarget_color_format(img-&gt;pixel_format);</div><div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;      mtl_desc.pixelFormat = _sg_mtl_rendertarget_depth_format(img-&gt;pixel_format);</div><div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160;    }</div><div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;    mtl_desc.pixelFormat = _sg_mtl_texture_format(img-&gt;pixel_format);</div><div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;  }</div><div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;  <span class="keywordflow">if</span> (MTLPixelFormatInvalid == mtl_desc.pixelFormat) {</div><div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;Unsupported texture pixel format!\n&quot;</span>);</div><div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;    img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;  }</div><div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;  mtl_desc.width = img-&gt;width;</div><div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;  mtl_desc.height = img-&gt;height;</div><div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a> == img-&gt;type) {</div><div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;    mtl_desc.depth = img-&gt;depth;</div><div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;    mtl_desc.depth = 1;</div><div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;  }</div><div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;  mtl_desc.mipmapLevelCount = img-&gt;num_mipmaps;</div><div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a> == img-&gt;type) {</div><div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;    mtl_desc.arrayLength = img-&gt;depth;</div><div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;    mtl_desc.arrayLength = 1;</div><div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;  }</div><div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;  <span class="keywordflow">if</span> (img-&gt;render_target) {</div><div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;    mtl_desc.resourceOptions = MTLResourceStorageModePrivate;</div><div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;    mtl_desc.cpuCacheMode = MTLCPUCacheModeDefaultCache;</div><div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;    mtl_desc.storageMode = MTLStorageModePrivate;</div><div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;    mtl_desc.usage |= MTLTextureUsageRenderTarget;</div><div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;  }</div><div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;</div><div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;  <span class="comment">/* special case depth-stencil-buffer? */</span></div><div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;  <span class="keywordflow">if</span> (_sg_is_valid_rendertarget_depth_format(img-&gt;pixel_format)) {</div><div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;    <span class="comment">/* create only a depth texture */</span></div><div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;    SOKOL_ASSERT(img-&gt;render_target);</div><div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;    SOKOL_ASSERT(img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a>);</div><div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;    SOKOL_ASSERT(img-&gt;num_mipmaps == 1);</div><div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;    SOKOL_ASSERT(!injected);</div><div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;    <span class="keywordflow">if</span> (img-&gt;sample_count &gt; 1) {</div><div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;      mtl_desc.textureType = MTLTextureType2DMultisample;</div><div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;      mtl_desc.sampleCount = img-&gt;sample_count;</div><div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;    }</div><div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;    <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLTexture&gt;</a> tex = [_sg_mtl_device newTextureWithDescriptor:mtl_desc];</div><div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;    SOKOL_ASSERT(nil != tex);</div><div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;    img-&gt;mtl_depth_tex = _sg_mtl_add_resource(tex);</div><div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;    <span class="comment">/* create the color texture(s) */</span></div><div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slot = 0; slot &lt; img-&gt;num_slots; slot++) {</div><div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;      <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLTexture&gt;</a> tex;</div><div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;      <span class="keywordflow">if</span> (injected) {</div><div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;        SOKOL_ASSERT(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#acaa521ee4257b203252d89c0f4d299a9">mtl_textures</a>[slot]);</div><div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;        tex = (__bridge <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLTexture&gt;</a>)desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#acaa521ee4257b203252d89c0f4d299a9">mtl_textures</a>[slot];</div><div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;        tex = [_sg_mtl_device newTextureWithDescriptor:mtl_desc];</div><div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;        <span class="keywordflow">if</span> ((img-&gt;usage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>) &amp;&amp; !img-&gt;render_target) {</div><div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;          _sg_mtl_copy_image_content(img, tex, &amp;desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ada2a41a3d05f322bc67e6441dbeb64d3">content</a>);</div><div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;        }</div><div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;      }</div><div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;      img-&gt;mtl_tex[slot] = _sg_mtl_add_resource(tex);</div><div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;    }</div><div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;</div><div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;    <span class="comment">/* if MSAA color render target, create an additional MSAA render-surface texture */</span></div><div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;    <span class="keywordflow">if</span> (img-&gt;render_target &amp;&amp; (img-&gt;sample_count &gt; 1)) {</div><div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;      mtl_desc.textureType = MTLTextureType2DMultisample;</div><div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;      mtl_desc.depth = 1;</div><div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;      mtl_desc.arrayLength = 1;</div><div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;      mtl_desc.mipmapLevelCount = 1;</div><div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;      mtl_desc.sampleCount = img-&gt;sample_count;</div><div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;      <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLTexture&gt;</a> tex = [_sg_mtl_device newTextureWithDescriptor:mtl_desc];</div><div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;      img-&gt;mtl_msaa_tex = _sg_mtl_add_resource(tex);</div><div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;    }</div><div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;</div><div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;    <span class="comment">/* create (possibly shared) sampler state */</span></div><div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;    img-&gt;mtl_sampler_state = _sg_mtl_create_sampler(_sg_mtl_device, desc);</div><div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;  }</div><div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;  img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;}</div><div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;</div><div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_image(_sg_image* img)</div><div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;{</div><div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;  SOKOL_ASSERT(img);</div><div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;  <span class="keywordflow">if</span> (img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slot = 0; slot &lt; img-&gt;num_slots; slot++) {</div><div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;      _sg_mtl_release_resource(_sg_mtl_frame_index, img-&gt;mtl_tex[slot]);</div><div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;    }</div><div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;    _sg_mtl_release_resource(_sg_mtl_frame_index, img-&gt;mtl_depth_tex);</div><div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;    _sg_mtl_release_resource(_sg_mtl_frame_index, img-&gt;mtl_msaa_tex);</div><div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;    <span class="comment">/* NOTE: sampler state objects are shared and not released until shutdown */</span></div><div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;  }</div><div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;  _sg_init_image_slot(img);</div><div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;}</div><div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;</div><div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLLibrary&gt;</a> _sg_mtl_compile_library(<span class="keyword">const</span> <span class="keywordtype">char</span>* src)</div><div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;{</div><div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;  NSError* err = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLLibrary&gt;</a> lib = [_sg_mtl_device</div><div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;    newLibraryWithSource:[NSString stringWithUTF8String:<a class="code" href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a>]</div><div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;                 options:nil</div><div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;                   error:&amp;err];</div><div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;  <span class="keywordflow">if</span> (err) {</div><div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;    SOKOL_LOG([err.localizedDescription UTF8String]);</div><div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;  }</div><div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;  <span class="keywordflow">return</span> lib;</div><div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;}</div><div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;</div><div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;_SOKOL_PRIVATE <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLLibrary&gt;</a> _sg_mtl_library_from_bytecode(<span class="keyword">const</span> uint8_t* ptr, <span class="keywordtype">int</span> num_bytes)</div><div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;{</div><div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;  NSError* err = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;  dispatch_data_t lib_data = dispatch_data_create(ptr, num_bytes, <span class="keyword">nullptr</span>, DISPATCH_DATA_DESTRUCTOR_DEFAULT);</div><div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLLibrary&gt;</a> lib = [_sg_mtl_device newLibraryWithData:lib_data error:&amp;err];</div><div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;  <span class="keywordflow">if</span> (err) {</div><div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;    SOKOL_LOG([err.localizedDescription UTF8String]);</div><div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;  }</div><div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;  <span class="keywordflow">return</span> lib;</div><div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;}</div><div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;</div><div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_shader(_sg_shader* shd, <span class="keyword">const</span> <a class="code" href="../../df/d17/structsg__shader__desc.html">sg_shader_desc</a>* desc)</div><div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;{</div><div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;  SOKOL_ASSERT(shd &amp;&amp; desc);</div><div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;  SOKOL_ASSERT(shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;</div><div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;  <span class="comment">/* uniform block sizes and image types */</span></div><div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stage_index = 0; stage_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">SG_NUM_SHADER_STAGES</a>; stage_index++) {</div><div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html">sg_shader_stage_desc</a>* stage_desc = (stage_index == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>) ? &amp;desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a> : &amp;desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>;</div><div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;    _sg_shader_stage* stage = &amp;shd-&gt;stage[stage_index];</div><div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;    SOKOL_ASSERT(stage-&gt;num_uniform_blocks == 0);</div><div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ub_index = 0; ub_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>; ub_index++) {</div><div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html">sg_shader_uniform_block_desc</a>* ub_desc = &amp;stage_desc-&gt;<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a62b1801dc0c45820abd59ac49504a318">uniform_blocks</a>[ub_index];</div><div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;      <span class="keywordflow">if</span> (0 == ub_desc-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a>) {</div><div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;      }</div><div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;      _sg_uniform_block* ub = &amp;stage-&gt;uniform_blocks[ub_index];</div><div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;      ub-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a> = ub_desc-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a>;</div><div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;      stage-&gt;num_uniform_blocks++;</div><div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;    }</div><div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;    SOKOL_ASSERT(stage-&gt;num_images == 0);</div><div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> img_index = 0; img_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>; img_index++) {</div><div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dd/d8f/structsg__shader__image__desc.html">sg_shader_image_desc</a>* img_desc = &amp;stage_desc-&gt;<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa5ad88030a0aa4a7c8aedc31729c6c3c">images</a>[img_index];</div><div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;      <span class="keywordflow">if</span> (img_desc-&gt;<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4">type</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dae006b5445cb0f3b9c939d8074980805e">_SG_IMAGETYPE_DEFAULT</a>) {</div><div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;      }</div><div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;      stage-&gt;images[img_index].<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4">type</a> = img_desc-&gt;<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4">type</a>;</div><div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;      stage-&gt;num_images++;</div><div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;    }</div><div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;  }</div><div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;</div><div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;  <span class="comment">/* create metal libray objects and lookup entry functions */</span></div><div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLLibrary&gt;</a> vs_lib;</div><div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLLibrary&gt;</a> fs_lib;</div><div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLFunction&gt;</a> vs_func;</div><div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLFunction&gt;</a> fs_func;</div><div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* vs_entry = _sg_def(desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a27b2cc1c0ca15c1696f2f0de7798ff1b">entry</a>, <span class="stringliteral">&quot;_main&quot;</span>);</div><div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">char</span>* fs_entry = _sg_def(desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a27b2cc1c0ca15c1696f2f0de7798ff1b">entry</a>, <span class="stringliteral">&quot;_main&quot;</span>);</div><div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;  <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a> &amp;&amp; desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>) {</div><div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;    <span class="comment">/* separate byte code provided */</span></div><div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;    vs_lib = _sg_mtl_library_from_bytecode(desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>, desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#ab4a4c8aacc932d2bcd3c174a8178249b">byte_code_size</a>);</div><div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;    fs_lib = _sg_mtl_library_from_bytecode(desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>, desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#ab4a4c8aacc932d2bcd3c174a8178249b">byte_code_size</a>);</div><div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;    <span class="keywordflow">if</span> (nil == vs_lib || nil == fs_lib) {</div><div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;      shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;    }</div><div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;    vs_func = [vs_lib newFunctionWithName:[NSString stringWithUTF8String:vs_entry]];</div><div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;    fs_func = [fs_lib newFunctionWithName:[NSString stringWithUTF8String:fs_entry]];</div><div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a> &amp;&amp; desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a>) {</div><div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;    <span class="comment">/* separate sources provided */</span></div><div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;    vs_lib = _sg_mtl_compile_library(desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a>);</div><div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;    fs_lib = _sg_mtl_compile_library(desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a>);</div><div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;    <span class="keywordflow">if</span> (nil == vs_lib || nil == fs_lib) {</div><div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;      shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;    }</div><div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;    vs_func = [vs_lib newFunctionWithName:[NSString stringWithUTF8String:vs_entry]];</div><div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;    fs_func = [fs_lib newFunctionWithName:[NSString stringWithUTF8String:fs_entry]];</div><div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;    shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;  }</div><div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;  <span class="keywordflow">if</span> (nil == vs_func) {</div><div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;vertex shader entry function not found\n&quot;</span>);</div><div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;    shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;  }</div><div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;  <span class="keywordflow">if</span> (nil == fs_func) {</div><div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;fragment shader entry function not found\n&quot;</span>);</div><div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;    shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;  }</div><div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;  <span class="comment">/* it is legal to call _sg_mtl_add_resource with a nil value, this will return a special 0xFFFFFFFF index */</span></div><div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;  shd-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>].mtl_lib = _sg_mtl_add_resource(vs_lib);</div><div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;  shd-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>].mtl_lib = _sg_mtl_add_resource(fs_lib);</div><div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;  shd-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>].mtl_func = _sg_mtl_add_resource(vs_func);</div><div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;  shd-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>].mtl_func = _sg_mtl_add_resource(fs_func);</div><div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;  shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;}</div><div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;</div><div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_shader(_sg_shader* shd)</div><div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;{</div><div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;  SOKOL_ASSERT(shd);</div><div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;  <span class="keywordflow">if</span> (shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;    <span class="comment">/* it is valid to call _sg_mtl_release_resource with the special 0xFFFFFFFF index */</span></div><div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;    _sg_mtl_release_resource(_sg_mtl_frame_index, shd-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>].mtl_func);</div><div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;    _sg_mtl_release_resource(_sg_mtl_frame_index, shd-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>].mtl_lib);</div><div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;    _sg_mtl_release_resource(_sg_mtl_frame_index, shd-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>].mtl_func);</div><div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;    _sg_mtl_release_resource(_sg_mtl_frame_index, shd-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>].mtl_lib);</div><div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;  }</div><div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;  _sg_init_shader_slot(shd);</div><div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;}</div><div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;</div><div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_pipeline(_sg_pipeline* pip, _sg_shader* shd, <span class="keyword">const</span> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html">sg_pipeline_desc</a>* desc)</div><div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;{</div><div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;  SOKOL_ASSERT(pip &amp;&amp; shd &amp;&amp; desc);</div><div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;  SOKOL_ASSERT(pip-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;  SOKOL_ASSERT(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae193421a3ac922d89a9cbf55788ede65">shader</a>.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a> == shd-&gt;slot.id);</div><div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;  SOKOL_ASSERT(shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>);</div><div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;</div><div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;  pip-&gt;shader = shd;</div><div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;  pip-&gt;shader_id = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae193421a3ac922d89a9cbf55788ede65">shader</a>;</div><div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;  pip-&gt;color_attachment_count = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4e583154ea74b802d760f3df0c4f429a">color_attachment_count</a>, 1);</div><div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;  pip-&gt;color_format = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#aef4624a1a4ef6da70a6ec6af5b285d36">color_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>);</div><div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;  pip-&gt;depth_format = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#aad5418b27eace35bda553a2b371f81e3">depth_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>);</div><div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;  pip-&gt;sample_count = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a>, 1);</div><div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;  pip-&gt;depth_bias = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">depth_bias</a>;</div><div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;  pip-&gt;depth_bias_slope_scale = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">depth_bias_slope_scale</a>;</div><div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;  pip-&gt;depth_bias_clamp = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a15a60b827b6583f861bb79ff86a8383b">depth_bias_clamp</a>;</div><div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4">sg_primitive_type</a> prim_type = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a79b4b5aec590c5cbc1c1472661419bb5">primitive_type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4aa8d428001b2200f78af617997a3be81b">SG_PRIMITIVETYPE_TRIANGLES</a>);</div><div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;  pip-&gt;mtl_prim_type = _sg_mtl_primitive_type(prim_type);</div><div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;  pip-&gt;index_type = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a7762d108e4ad271336c3006c84606a9f">index_type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a>);</div><div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;  pip-&gt;mtl_index_size = _sg_mtl_index_size(pip-&gt;index_type);</div><div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a> != pip-&gt;index_type) {</div><div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;    pip-&gt;mtl_index_type = _sg_mtl_index_type(pip-&gt;index_type);</div><div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;  }</div><div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;  pip-&gt;mtl_cull_mode = _sg_mtl_cull_mode(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">cull_mode</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a131d819b6c0fe42072f7db0677941b5d">SG_CULLMODE_NONE</a>));</div><div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;  pip-&gt;mtl_winding = _sg_mtl_winding(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0">face_winding</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faaa4aae35b0695932b261357428ca413c">SG_FACEWINDING_CW</a>));</div><div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;  pip-&gt;mtl_stencil_ref = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f">stencil_ref</a>;</div><div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 4; i++) {</div><div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;    pip-&gt;blend_color[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">blend_color</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;  }</div><div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;</div><div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;  <span class="comment">/* create vertex-descriptor */</span></div><div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;  MTLVertexDescriptor* vtx_desc = [MTLVertexDescriptor vertexDescriptor];</div><div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;  <span class="keywordtype">int</span> auto_offset[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>];</div><div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> layout_index = 0; layout_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>; layout_index++) {</div><div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;    auto_offset[layout_index] = 0;</div><div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;  }</div><div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;  <span class="comment">/* to use computed offsets, *all* attr offsets must be 0 */</span></div><div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;  <span class="keywordtype">bool</span> use_auto_offset = <span class="keyword">true</span>;</div><div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> attr_index = 0; attr_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>; attr_index++) {</div><div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;    <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a19f830b45bc4289d997fd51604a5e4f1">attrs</a>[attr_index].<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a987b32666e62b0aa825701c0ac03484e">offset</a> != 0) {</div><div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;      use_auto_offset = <span class="keyword">false</span>;</div><div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;    }</div><div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;  }</div><div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> attr_index = 0; attr_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>; attr_index++) {</div><div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html">sg_vertex_attr_desc</a>* a_desc = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a19f830b45bc4289d997fd51604a5e4f1">attrs</a>[attr_index];</div><div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;    <span class="keywordflow">if</span> (a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa2537db7b2956137a3fbe5a8929c01f5">SG_VERTEXFORMAT_INVALID</a>) {</div><div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;    }</div><div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;    SOKOL_ASSERT((a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a> &gt;= 0) &amp;&amp; (a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a> &lt; SG_MAX_SHADERSTAGE_BUFFERS));</div><div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;    vtx_desc.attributes[attr_index].format = _sg_mtl_vertex_format(a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a>);</div><div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;    vtx_desc.attributes[attr_index].offset = use_auto_offset ? auto_offset[a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>] : a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a987b32666e62b0aa825701c0ac03484e">offset</a>;</div><div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;    vtx_desc.attributes[attr_index].bufferIndex = a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a> + <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>;</div><div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;    auto_offset[a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>] += _sg_vertexformat_bytesize(a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a>);</div><div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;    pip-&gt;vertex_layout_valid[a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a>] = <span class="keyword">true</span>;</div><div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160;  }</div><div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> layout_index = 0; layout_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>; layout_index++) {</div><div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;    <span class="keywordflow">if</span> (pip-&gt;vertex_layout_valid[layout_index]) {</div><div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html">sg_buffer_layout_desc</a>* l_desc = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a956d4bf59180e48cdfb5bcc00b0c7012">buffers</a>[layout_index];</div><div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> mtl_vb_slot = layout_index + <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>;</div><div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a9d21c1b0530d07b637b5b71b969d7921">stride</a> = l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#aab7f169abb46eecbecaec8e9d0d2f6f5">stride</a> ? l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#aab7f169abb46eecbecaec8e9d0d2f6f5">stride</a> : auto_offset[layout_index];</div><div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160;      SOKOL_ASSERT(stride &gt; 0);</div><div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;      vtx_desc.layouts[mtl_vb_slot].stride = <a class="code" href="../../dc/da3/glcorearb_8h.html#a9d21c1b0530d07b637b5b71b969d7921">stride</a>;</div><div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;      vtx_desc.layouts[mtl_vb_slot].stepFunction = _sg_mtl_step_function(_sg_def(l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#a31db96a851271a5c840fbd63ba461577">step_func</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a84ea40a12ba85ca0542460d0624b88b5">SG_VERTEXSTEP_PER_VERTEX</a>));</div><div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;      vtx_desc.layouts[mtl_vb_slot].stepRate = _sg_def(l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#a459ba52adfdcd699fdf29ecd13a702b4">step_rate</a>, 1);</div><div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;    }</div><div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;  }</div><div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;</div><div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160;  <span class="comment">/* render-pipeline descriptor */</span></div><div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;  MTLRenderPipelineDescriptor* rp_desc = [[MTLRenderPipelineDescriptor <a class="code" href="../../da/de3/namespaceo2_1_1algorithm_1_1pageparser.html#afcb584be9f28324176c0d92fcbd32c99">alloc</a>] init];</div><div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160;  rp_desc.vertexDescriptor = vtx_desc;</div><div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160;  SOKOL_ASSERT(shd-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>].mtl_func != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;  rp_desc.vertexFunction = _sg_mtl_pool[shd-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>].mtl_func];</div><div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;  SOKOL_ASSERT(shd-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>].mtl_func != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;  rp_desc.fragmentFunction = _sg_mtl_pool[shd-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>].mtl_func];</div><div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;  rp_desc.sampleCount = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sample_count</a>, 1);</div><div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;  rp_desc.alphaToCoverageEnabled = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">rasterizer</a>.<a class="code" href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148">alpha_to_coverage_enabled</a>;</div><div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;  rp_desc.alphaToOneEnabled = NO;</div><div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;  rp_desc.rasterizationEnabled = YES;</div><div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;  rp_desc.depthAttachmentPixelFormat = _sg_mtl_rendertarget_depth_format(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#aad5418b27eace35bda553a2b371f81e3">depth_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>));</div><div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;  rp_desc.stencilAttachmentPixelFormat = _sg_mtl_rendertarget_stencil_format(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#aad5418b27eace35bda553a2b371f81e3">depth_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>));</div><div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;  <span class="comment">/* FIXME: this only works on macOS 10.13!</span></div><div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160;<span class="comment">    for (int i = 0; i &lt; (SG_MAX_SHADERSTAGE_UBS+SG_MAX_SHADERSTAGE_BUFFERS); i++) {</span></div><div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;<span class="comment">        rp_desc.vertexBuffers[i].mutability = MTLMutabilityImmutable;</span></div><div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;<span class="comment">    for (int i = 0; i &lt; SG_MAX_SHADERSTAGE_UBS; i++) {</span></div><div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;<span class="comment">        rp_desc.fragmentBuffers[i].mutability = MTLMutabilityImmutable;</span></div><div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;<span class="comment">    }</span></div><div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> att_count = _sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4e583154ea74b802d760f3df0c4f429a">color_attachment_count</a>, 1);</div><div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; att_count; i++) {</div><div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;    rp_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].pixelFormat = _sg_mtl_rendertarget_color_format(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#aef4624a1a4ef6da70a6ec6af5b285d36">color_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>));</div><div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;    rp_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].writeMask = _sg_mtl_color_write_mask((<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2">sg_color_mask</a>)_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">color_write_mask</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a6e762320d94f45741939d705166a17a2">SG_COLORMASK_RGBA</a>));</div><div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;    rp_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].blendingEnabled = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d">enabled</a>;</div><div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160;    rp_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].alphaBlendOperation = _sg_mtl_blend_op(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c">op_alpha</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a>));</div><div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160;    rp_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].rgbBlendOperation = _sg_mtl_blend_op(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884">op_rgb</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a>));</div><div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;    rp_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].destinationAlphaBlendFactor = _sg_mtl_blend_factor(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec">dst_factor_alpha</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a>));</div><div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;    rp_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].destinationRGBBlendFactor = _sg_mtl_blend_factor(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3">dst_factor_rgb</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a>));</div><div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160;    rp_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].sourceAlphaBlendFactor = _sg_mtl_blend_factor(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f">src_factor_alpha</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a>));</div><div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;    rp_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].sourceRGBBlendFactor = _sg_mtl_blend_factor(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">blend</a>.<a class="code" href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2">src_factor_rgb</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a>));</div><div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;  }</div><div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;  NSError* err = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLRenderPipelineState&gt;</a> mtl_rps = [_sg_mtl_device newRenderPipelineStateWithDescriptor:rp_desc error:&amp;err];</div><div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;  <span class="keywordflow">if</span> (nil == mtl_rps) {</div><div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;    SOKOL_ASSERT(err);</div><div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;    SOKOL_LOG([err.localizedDescription UTF8String]);</div><div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;    pip-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;  }</div><div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;</div><div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;  <span class="comment">/* depth-stencil-state */</span></div><div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;  MTLDepthStencilDescriptor* ds_desc = [[MTLDepthStencilDescriptor <a class="code" href="../../da/de3/namespaceo2_1_1algorithm_1_1pageparser.html#afcb584be9f28324176c0d92fcbd32c99">alloc</a>] init];</div><div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;  ds_desc.depthCompareFunction = _sg_mtl_compare_func(_sg_def(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74">depth_compare_func</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>));</div><div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;  ds_desc.depthWriteEnabled = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292">depth_write_enabled</a>;</div><div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;  <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3">stencil_enabled</a>) {</div><div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a>* sb = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a28ce155156b38f16e894aa724ece3091">stencil_back</a>;</div><div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;    ds_desc.backFaceStencil = [[MTLStencilDescriptor <a class="code" href="../../da/de3/namespaceo2_1_1algorithm_1_1pageparser.html#afcb584be9f28324176c0d92fcbd32c99">alloc</a>] init];</div><div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;    ds_desc.backFaceStencil.stencilFailureOperation = _sg_mtl_stencil_op(_sg_def(sb-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034">fail_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>));</div><div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;    ds_desc.backFaceStencil.depthFailureOperation = _sg_mtl_stencil_op(_sg_def(sb-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f">depth_fail_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>));</div><div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;    ds_desc.backFaceStencil.depthStencilPassOperation = _sg_mtl_stencil_op(_sg_def(sb-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20">pass_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>));</div><div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160;    ds_desc.backFaceStencil.stencilCompareFunction = _sg_mtl_compare_func(_sg_def(sb-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88">compare_func</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>));</div><div class="line"><a name="l07444"></a><span class="lineno"> 7444</span>&#160;    ds_desc.backFaceStencil.readMask = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">stencil_read_mask</a>;</div><div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;    ds_desc.backFaceStencil.writeMask = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">stencil_write_mask</a>;</div><div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a>* sf = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#ad698879849d1e77dcbbda963cd45ef79">stencil_front</a>;</div><div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;    ds_desc.frontFaceStencil = [[MTLStencilDescriptor <a class="code" href="../../da/de3/namespaceo2_1_1algorithm_1_1pageparser.html#afcb584be9f28324176c0d92fcbd32c99">alloc</a>] init];</div><div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;    ds_desc.frontFaceStencil.stencilFailureOperation = _sg_mtl_stencil_op(_sg_def(sf-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034">fail_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>));</div><div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;    ds_desc.frontFaceStencil.depthFailureOperation = _sg_mtl_stencil_op(_sg_def(sf-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f">depth_fail_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>));</div><div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;    ds_desc.frontFaceStencil.depthStencilPassOperation = _sg_mtl_stencil_op(_sg_def(sf-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20">pass_op</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a>));</div><div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;    ds_desc.frontFaceStencil.stencilCompareFunction = _sg_mtl_compare_func(_sg_def(sf-&gt;<a class="code" href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88">compare_func</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a>));</div><div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;    ds_desc.frontFaceStencil.readMask = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">stencil_read_mask</a>;</div><div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;    ds_desc.frontFaceStencil.writeMask = desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">depth_stencil</a>.<a class="code" href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">stencil_write_mask</a>;</div><div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;  }</div><div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLDepthStencilState&gt;</a> mtl_dss = [_sg_mtl_device newDepthStencilStateWithDescriptor:ds_desc];</div><div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;</div><div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;  pip-&gt;mtl_rps = _sg_mtl_add_resource(mtl_rps);</div><div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;  pip-&gt;mtl_dss = _sg_mtl_add_resource(mtl_dss);</div><div class="line"><a name="l07459"></a><span class="lineno"> 7459</span>&#160;  pip-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;}</div><div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;</div><div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_pipeline(_sg_pipeline* pip)</div><div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;{</div><div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;  SOKOL_ASSERT(pip);</div><div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;  <span class="keywordflow">if</span> (pip-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;    _sg_mtl_release_resource(_sg_mtl_frame_index, pip-&gt;mtl_rps);</div><div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;    _sg_mtl_release_resource(_sg_mtl_frame_index, pip-&gt;mtl_dss);</div><div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;  }</div><div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;  _sg_init_pipeline_slot(pip);</div><div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;}</div><div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;</div><div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_create_pass(_sg_pass* pass, _sg_image** att_images, <span class="keyword">const</span> <a class="code" href="../../d4/d2b/structsg__pass__desc.html">sg_pass_desc</a>* desc)</div><div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;{</div><div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;  SOKOL_ASSERT(pass &amp;&amp; desc);</div><div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;  SOKOL_ASSERT(pass-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160;  SOKOL_ASSERT(att_images &amp;&amp; att_images[0]);</div><div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;</div><div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;  <span class="comment">/* copy image pointers and desc attributes */</span></div><div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d1/da2/structsg__attachment__desc.html">sg_attachment_desc</a>* att_desc;</div><div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;  _sg_attachment* att;</div><div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;    SOKOL_ASSERT(0 == pass-&gt;color_atts[i].image);</div><div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;    att_desc = &amp;desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a0671a1bca34513d50f88c551408643d5">color_attachments</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;    <span class="keywordflow">if</span> (att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;      pass-&gt;num_color_atts++;</div><div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;      SOKOL_ASSERT(att_images[i] &amp;&amp; (att_images[i]-&gt;slot.id == att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>));</div><div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;      SOKOL_ASSERT(_sg_is_valid_rendertarget_color_format(att_images[i]-&gt;pixel_format));</div><div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;      att = &amp;pass-&gt;color_atts[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;      SOKOL_ASSERT((att-&gt;image == 0) &amp;&amp; (att-&gt;image_id.id == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>));</div><div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;      att-&gt;image = att_images[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;      att-&gt;image_id = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>;</div><div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;      att-&gt;mip_level = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>;</div><div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;      att-&gt;slice = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a91d437e248352612f03c15cf47b2dd35">slice</a>;</div><div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160;    }</div><div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;  }</div><div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;  SOKOL_ASSERT(0 == pass-&gt;ds_att.image);</div><div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;  att_desc = &amp;desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a75a23624c5d16d675a70e62f6ce9ba70">depth_stencil_attachment</a>;</div><div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> ds_img_index = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>;</div><div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;  <span class="keywordflow">if</span> (att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;    SOKOL_ASSERT(att_images[ds_img_index] &amp;&amp; (att_images[ds_img_index]-&gt;slot.id == att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>));</div><div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;    SOKOL_ASSERT(_sg_is_valid_rendertarget_depth_format(att_images[ds_img_index]-&gt;pixel_format));</div><div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;    att = &amp;pass-&gt;ds_att;</div><div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;    SOKOL_ASSERT((att-&gt;image == 0) &amp;&amp; (att-&gt;image_id.id == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>));</div><div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;    att-&gt;image = att_images[ds_img_index];</div><div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;    att-&gt;image_id = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>;</div><div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;    att-&gt;mip_level = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>;</div><div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;    att-&gt;slice = att_desc-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a91d437e248352612f03c15cf47b2dd35">slice</a>;</div><div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160;  }</div><div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160;  pass-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>;</div><div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;}</div><div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;</div><div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_pass(_sg_pass* pass)</div><div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160;{</div><div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;  SOKOL_ASSERT(pass);</div><div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;  _sg_init_pass_slot(pass);</div><div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;}</div><div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;</div><div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_begin_pass(_sg_pass* pass, <span class="keyword">const</span> <a class="code" href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a>* action, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h)</div><div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;{</div><div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;  SOKOL_ASSERT(action);</div><div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160;  SOKOL_ASSERT(!_sg_mtl_in_pass);</div><div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;  SOKOL_ASSERT(_sg_mtl_cmd_queue);</div><div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;  SOKOL_ASSERT(!_sg_mtl_cmd_encoder);</div><div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160;  SOKOL_ASSERT(_sg_mtl_renderpass_descriptor_cb);</div><div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160;  _sg_mtl_in_pass = <span class="keyword">true</span>;</div><div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160;  _sg_mtl_cur_width = <a class="code" href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a>;</div><div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;  _sg_mtl_cur_height = <a class="code" href="../../dc/da3/glcorearb_8h.html#afa0fb1b5e976920c0abeff2dca3ed774">h</a>;</div><div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160;  _sg_mtl_clear_state_cache();</div><div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160;</div><div class="line"><a name="l07530"></a><span class="lineno"> 7530</span>&#160;  <span class="comment">/* if this is the first pass in the frame, create a command buffer */</span></div><div class="line"><a name="l07531"></a><span class="lineno"> 7531</span>&#160;  <span class="keywordflow">if</span> (nil == _sg_mtl_cmd_buffer) {</div><div class="line"><a name="l07532"></a><span class="lineno"> 7532</span>&#160;    <span class="comment">/* block until the oldest frame in flight has finished */</span></div><div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;    dispatch_semaphore_wait(_sg_mtl_sem, DISPATCH_TIME_FOREVER);</div><div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160;    _sg_mtl_cmd_buffer = [_sg_mtl_cmd_queue commandBufferWithUnretainedReferences];</div><div class="line"><a name="l07535"></a><span class="lineno"> 7535</span>&#160;  }</div><div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160;</div><div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160;  <span class="comment">/* if this is first pass in frame, get uniform buffer base pointer */</span></div><div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;  <span class="keywordflow">if</span> (0 == _sg_mtl_cur_ub_base_ptr) {</div><div class="line"><a name="l07539"></a><span class="lineno"> 7539</span>&#160;    _sg_mtl_cur_ub_base_ptr = (uint8_t*)[_sg_mtl_uniform_buffers[_sg_mtl_cur_frame_rotate_index] contents];</div><div class="line"><a name="l07540"></a><span class="lineno"> 7540</span>&#160;  }</div><div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160;</div><div class="line"><a name="l07542"></a><span class="lineno"> 7542</span>&#160;  <span class="comment">/* initialize a render pass descriptor */</span></div><div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160;  MTLRenderPassDescriptor* pass_desc = nil;</div><div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160;  <span class="keywordflow">if</span> (pass) {</div><div class="line"><a name="l07545"></a><span class="lineno"> 7545</span>&#160;    <span class="comment">/* offscreen render pass */</span></div><div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160;    pass_desc = [MTLRenderPassDescriptor renderPassDescriptor];</div><div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160;    <span class="comment">/* default render pass, call user-provided callback to provide render pass descriptor */</span></div><div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160;    pass_desc = (__bridge MTLRenderPassDescriptor*)_sg_mtl_renderpass_descriptor_cb();</div><div class="line"><a name="l07550"></a><span class="lineno"> 7550</span>&#160;  }</div><div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160;  <span class="keywordflow">if</span> (pass_desc) {</div><div class="line"><a name="l07552"></a><span class="lineno"> 7552</span>&#160;    _sg_mtl_pass_valid = <span class="keyword">true</span>;</div><div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160;    <span class="comment">/* default pass descriptor will not be valid if window is minimized,</span></div><div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;<span class="comment">           don&#39;t do any rendering in this case */</span></div><div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;    _sg_mtl_pass_valid = <span class="keyword">false</span>;</div><div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l07558"></a><span class="lineno"> 7558</span>&#160;  }</div><div class="line"><a name="l07559"></a><span class="lineno"> 7559</span>&#160;  <span class="keywordflow">if</span> (pass) {</div><div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160;    <span class="comment">/* setup pass descriptor for offscreen rendering */</span></div><div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;    SOKOL_ASSERT(pass-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>);</div><div class="line"><a name="l07562"></a><span class="lineno"> 7562</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l07563"></a><span class="lineno"> 7563</span>&#160;      <span class="keyword">const</span> _sg_attachment* att = &amp;pass-&gt;color_atts[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l07564"></a><span class="lineno"> 7564</span>&#160;      <span class="keywordflow">if</span> (0 == att-&gt;image) {</div><div class="line"><a name="l07565"></a><span class="lineno"> 7565</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l07566"></a><span class="lineno"> 7566</span>&#160;      }</div><div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;      SOKOL_ASSERT(att-&gt;image-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>);</div><div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160;      SOKOL_ASSERT(att-&gt;image-&gt;slot.id == att-&gt;image_id.id);</div><div class="line"><a name="l07569"></a><span class="lineno"> 7569</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> is_msaa = (att-&gt;image-&gt;sample_count &gt; 1);</div><div class="line"><a name="l07570"></a><span class="lineno"> 7570</span>&#160;      pass_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].loadAction = _sg_mtl_load_action(action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[i].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#ae5313aebc0025fd61a3f22c4acdcf3fd">action</a>);</div><div class="line"><a name="l07571"></a><span class="lineno"> 7571</span>&#160;      pass_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].storeAction = is_msaa ? MTLStoreActionMultisampleResolve : MTLStoreActionStore;</div><div class="line"><a name="l07572"></a><span class="lineno"> 7572</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">float</span>* <a class="code" href="../../d8/de9/qconfigoptions_8h.html#af50954f6efd5209b2328d33cd185f87e">c</a> = &amp;(action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#af2c2a030aa781f28b469a109d60c5db7">val</a>[0]);</div><div class="line"><a name="l07573"></a><span class="lineno"> 7573</span>&#160;      pass_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].clearColor = MTLClearColorMake(c[0], c[1], c[2], c[3]);</div><div class="line"><a name="l07574"></a><span class="lineno"> 7574</span>&#160;      <span class="keywordflow">if</span> (is_msaa) {</div><div class="line"><a name="l07575"></a><span class="lineno"> 7575</span>&#160;        SOKOL_ASSERT(att-&gt;image-&gt;mtl_msaa_tex != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07576"></a><span class="lineno"> 7576</span>&#160;        SOKOL_ASSERT(att-&gt;image-&gt;mtl_tex[att-&gt;image-&gt;active_slot] != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07577"></a><span class="lineno"> 7577</span>&#160;        pass_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].texture = _sg_mtl_pool[att-&gt;image-&gt;mtl_msaa_tex];</div><div class="line"><a name="l07578"></a><span class="lineno"> 7578</span>&#160;        pass_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].resolveTexture = _sg_mtl_pool[att-&gt;image-&gt;mtl_tex[att-&gt;image-&gt;active_slot]];</div><div class="line"><a name="l07579"></a><span class="lineno"> 7579</span>&#160;        pass_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].resolveLevel = att-&gt;mip_level;</div><div class="line"><a name="l07580"></a><span class="lineno"> 7580</span>&#160;        <span class="keywordflow">switch</span> (att-&gt;image-&gt;type) {</div><div class="line"><a name="l07581"></a><span class="lineno"> 7581</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>:</div><div class="line"><a name="l07582"></a><span class="lineno"> 7582</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>:</div><div class="line"><a name="l07583"></a><span class="lineno"> 7583</span>&#160;            pass_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].resolveSlice = att-&gt;slice;</div><div class="line"><a name="l07584"></a><span class="lineno"> 7584</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07585"></a><span class="lineno"> 7585</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>:</div><div class="line"><a name="l07586"></a><span class="lineno"> 7586</span>&#160;            pass_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].resolveDepthPlane = att-&gt;slice;</div><div class="line"><a name="l07587"></a><span class="lineno"> 7587</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07588"></a><span class="lineno"> 7588</span>&#160;          <span class="keywordflow">default</span>:</div><div class="line"><a name="l07589"></a><span class="lineno"> 7589</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07590"></a><span class="lineno"> 7590</span>&#160;        }</div><div class="line"><a name="l07591"></a><span class="lineno"> 7591</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07592"></a><span class="lineno"> 7592</span>&#160;        SOKOL_ASSERT(att-&gt;image-&gt;mtl_tex[att-&gt;image-&gt;active_slot] != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07593"></a><span class="lineno"> 7593</span>&#160;        pass_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].texture = _sg_mtl_pool[att-&gt;image-&gt;mtl_tex[att-&gt;image-&gt;active_slot]];</div><div class="line"><a name="l07594"></a><span class="lineno"> 7594</span>&#160;        pass_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].level = att-&gt;mip_level;</div><div class="line"><a name="l07595"></a><span class="lineno"> 7595</span>&#160;        <span class="keywordflow">switch</span> (att-&gt;image-&gt;type) {</div><div class="line"><a name="l07596"></a><span class="lineno"> 7596</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>:</div><div class="line"><a name="l07597"></a><span class="lineno"> 7597</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>:</div><div class="line"><a name="l07598"></a><span class="lineno"> 7598</span>&#160;            pass_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].slice = att-&gt;slice;</div><div class="line"><a name="l07599"></a><span class="lineno"> 7599</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07600"></a><span class="lineno"> 7600</span>&#160;          <span class="keywordflow">case</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>:</div><div class="line"><a name="l07601"></a><span class="lineno"> 7601</span>&#160;            pass_desc.colorAttachments[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>].depthPlane = att-&gt;slice;</div><div class="line"><a name="l07602"></a><span class="lineno"> 7602</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07603"></a><span class="lineno"> 7603</span>&#160;          <span class="keywordflow">default</span>:</div><div class="line"><a name="l07604"></a><span class="lineno"> 7604</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07605"></a><span class="lineno"> 7605</span>&#160;        }</div><div class="line"><a name="l07606"></a><span class="lineno"> 7606</span>&#160;      }</div><div class="line"><a name="l07607"></a><span class="lineno"> 7607</span>&#160;    }</div><div class="line"><a name="l07608"></a><span class="lineno"> 7608</span>&#160;    <span class="keywordflow">if</span> (0 != pass-&gt;ds_att.image) {</div><div class="line"><a name="l07609"></a><span class="lineno"> 7609</span>&#160;      <span class="keyword">const</span> _sg_attachment* att = &amp;pass-&gt;ds_att;</div><div class="line"><a name="l07610"></a><span class="lineno"> 7610</span>&#160;      SOKOL_ASSERT(att-&gt;image-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>);</div><div class="line"><a name="l07611"></a><span class="lineno"> 7611</span>&#160;      SOKOL_ASSERT(att-&gt;image-&gt;slot.id == att-&gt;image_id.id);</div><div class="line"><a name="l07612"></a><span class="lineno"> 7612</span>&#160;      SOKOL_ASSERT(att-&gt;image-&gt;mtl_depth_tex != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07613"></a><span class="lineno"> 7613</span>&#160;      pass_desc.depthAttachment.texture = _sg_mtl_pool[att-&gt;image-&gt;mtl_depth_tex];</div><div class="line"><a name="l07614"></a><span class="lineno"> 7614</span>&#160;      pass_desc.depthAttachment.loadAction = _sg_mtl_load_action(action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#afd874c73b9eeb2251453c66f88d620f9">action</a>);</div><div class="line"><a name="l07615"></a><span class="lineno"> 7615</span>&#160;      pass_desc.depthAttachment.clearDepth = action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#ae78551ad85b038b6431f32d1c1916ccb">val</a>;</div><div class="line"><a name="l07616"></a><span class="lineno"> 7616</span>&#160;      <span class="keywordflow">if</span> (_sg_is_depth_stencil_format(att-&gt;image-&gt;pixel_format)) {</div><div class="line"><a name="l07617"></a><span class="lineno"> 7617</span>&#160;        pass_desc.stencilAttachment.texture = _sg_mtl_pool[att-&gt;image-&gt;mtl_depth_tex];</div><div class="line"><a name="l07618"></a><span class="lineno"> 7618</span>&#160;        pass_desc.stencilAttachment.loadAction = _sg_mtl_load_action(action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a322952eff6dc16d2ac27d6f98973a579">action</a>);</div><div class="line"><a name="l07619"></a><span class="lineno"> 7619</span>&#160;        pass_desc.stencilAttachment.clearStencil = action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a5d4b67c71980cd17fb1ac7f0978b222f">val</a>;</div><div class="line"><a name="l07620"></a><span class="lineno"> 7620</span>&#160;      }</div><div class="line"><a name="l07621"></a><span class="lineno"> 7621</span>&#160;    }</div><div class="line"><a name="l07622"></a><span class="lineno"> 7622</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07623"></a><span class="lineno"> 7623</span>&#160;    <span class="comment">/* setup pass descriptor for default rendering */</span></div><div class="line"><a name="l07624"></a><span class="lineno"> 7624</span>&#160;    pass_desc.colorAttachments[0].loadAction = _sg_mtl_load_action(action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[0].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#ae5313aebc0025fd61a3f22c4acdcf3fd">action</a>);</div><div class="line"><a name="l07625"></a><span class="lineno"> 7625</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* c = &amp;(action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">colors</a>[0].<a class="code" href="../../db/dc9/structsg__color__attachment__action.html#af2c2a030aa781f28b469a109d60c5db7">val</a>[0]);</div><div class="line"><a name="l07626"></a><span class="lineno"> 7626</span>&#160;    pass_desc.colorAttachments[0].clearColor = MTLClearColorMake(c[0], c[1], c[2], c[3]);</div><div class="line"><a name="l07627"></a><span class="lineno"> 7627</span>&#160;    pass_desc.depthAttachment.loadAction = _sg_mtl_load_action(action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#afd874c73b9eeb2251453c66f88d620f9">action</a>);</div><div class="line"><a name="l07628"></a><span class="lineno"> 7628</span>&#160;    pass_desc.depthAttachment.clearDepth = action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">depth</a>.<a class="code" href="../../d3/dd4/structsg__depth__attachment__action.html#ae78551ad85b038b6431f32d1c1916ccb">val</a>;</div><div class="line"><a name="l07629"></a><span class="lineno"> 7629</span>&#160;    pass_desc.stencilAttachment.loadAction = _sg_mtl_load_action(action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a322952eff6dc16d2ac27d6f98973a579">action</a>);</div><div class="line"><a name="l07630"></a><span class="lineno"> 7630</span>&#160;    pass_desc.stencilAttachment.clearStencil = action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">stencil</a>.<a class="code" href="../../d3/d48/structsg__stencil__attachment__action.html#a5d4b67c71980cd17fb1ac7f0978b222f">val</a>;</div><div class="line"><a name="l07631"></a><span class="lineno"> 7631</span>&#160;  }</div><div class="line"><a name="l07632"></a><span class="lineno"> 7632</span>&#160;</div><div class="line"><a name="l07633"></a><span class="lineno"> 7633</span>&#160;  <span class="comment">/* create a render command encoder, this might return nil if window is minimized */</span></div><div class="line"><a name="l07634"></a><span class="lineno"> 7634</span>&#160;  _sg_mtl_cmd_encoder = [_sg_mtl_cmd_buffer renderCommandEncoderWithDescriptor:pass_desc];</div><div class="line"><a name="l07635"></a><span class="lineno"> 7635</span>&#160;  <span class="keywordflow">if</span> (_sg_mtl_cmd_encoder == nil) {</div><div class="line"><a name="l07636"></a><span class="lineno"> 7636</span>&#160;    _sg_mtl_pass_valid = <span class="keyword">false</span>;</div><div class="line"><a name="l07637"></a><span class="lineno"> 7637</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l07638"></a><span class="lineno"> 7638</span>&#160;  }</div><div class="line"><a name="l07639"></a><span class="lineno"> 7639</span>&#160;</div><div class="line"><a name="l07640"></a><span class="lineno"> 7640</span>&#160;  <span class="comment">/* bind the global uniform buffer, this only happens once per pass */</span></div><div class="line"><a name="l07641"></a><span class="lineno"> 7641</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> slot = 0; slot &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>; slot++) {</div><div class="line"><a name="l07642"></a><span class="lineno"> 7642</span>&#160;    [_sg_mtl_cmd_encoder</div><div class="line"><a name="l07643"></a><span class="lineno"> 7643</span>&#160;      setVertexBuffer:_sg_mtl_uniform_buffers[_sg_mtl_cur_frame_rotate_index]</div><div class="line"><a name="l07644"></a><span class="lineno"> 7644</span>&#160;               <a class="code" href="../../dc/da3/glcorearb_8h.html#ab81054a092f44d2ce010b3c46e3a7ff3">offset</a>:0</div><div class="line"><a name="l07645"></a><span class="lineno"> 7645</span>&#160;              atIndex:slot];</div><div class="line"><a name="l07646"></a><span class="lineno"> 7646</span>&#160;    [_sg_mtl_cmd_encoder</div><div class="line"><a name="l07647"></a><span class="lineno"> 7647</span>&#160;      setFragmentBuffer:_sg_mtl_uniform_buffers[_sg_mtl_cur_frame_rotate_index]</div><div class="line"><a name="l07648"></a><span class="lineno"> 7648</span>&#160;                 <a class="code" href="../../dc/da3/glcorearb_8h.html#ab81054a092f44d2ce010b3c46e3a7ff3">offset</a>:0</div><div class="line"><a name="l07649"></a><span class="lineno"> 7649</span>&#160;                atIndex:slot];</div><div class="line"><a name="l07650"></a><span class="lineno"> 7650</span>&#160;  }</div><div class="line"><a name="l07651"></a><span class="lineno"> 7651</span>&#160;}</div><div class="line"><a name="l07652"></a><span class="lineno"> 7652</span>&#160;</div><div class="line"><a name="l07653"></a><span class="lineno"> 7653</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_end_pass()</div><div class="line"><a name="l07654"></a><span class="lineno"> 7654</span>&#160;{</div><div class="line"><a name="l07655"></a><span class="lineno"> 7655</span>&#160;  SOKOL_ASSERT(_sg_mtl_in_pass);</div><div class="line"><a name="l07656"></a><span class="lineno"> 7656</span>&#160;  _sg_mtl_in_pass = <span class="keyword">false</span>;</div><div class="line"><a name="l07657"></a><span class="lineno"> 7657</span>&#160;  _sg_mtl_pass_valid = <span class="keyword">false</span>;</div><div class="line"><a name="l07658"></a><span class="lineno"> 7658</span>&#160;  <span class="keywordflow">if</span> (nil != _sg_mtl_cmd_encoder) {</div><div class="line"><a name="l07659"></a><span class="lineno"> 7659</span>&#160;    [_sg_mtl_cmd_encoder endEncoding];</div><div class="line"><a name="l07660"></a><span class="lineno"> 7660</span>&#160;    _sg_mtl_cmd_encoder = nil;</div><div class="line"><a name="l07661"></a><span class="lineno"> 7661</span>&#160;  }</div><div class="line"><a name="l07662"></a><span class="lineno"> 7662</span>&#160;}</div><div class="line"><a name="l07663"></a><span class="lineno"> 7663</span>&#160;</div><div class="line"><a name="l07664"></a><span class="lineno"> 7664</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_commit()</div><div class="line"><a name="l07665"></a><span class="lineno"> 7665</span>&#160;{</div><div class="line"><a name="l07666"></a><span class="lineno"> 7666</span>&#160;  SOKOL_ASSERT(!_sg_mtl_in_pass);</div><div class="line"><a name="l07667"></a><span class="lineno"> 7667</span>&#160;  SOKOL_ASSERT(!_sg_mtl_pass_valid);</div><div class="line"><a name="l07668"></a><span class="lineno"> 7668</span>&#160;  SOKOL_ASSERT(_sg_mtl_drawable_cb);</div><div class="line"><a name="l07669"></a><span class="lineno"> 7669</span>&#160;  SOKOL_ASSERT(nil == _sg_mtl_cmd_encoder);</div><div class="line"><a name="l07670"></a><span class="lineno"> 7670</span>&#160;  SOKOL_ASSERT(nil != _sg_mtl_cmd_buffer);</div><div class="line"><a name="l07671"></a><span class="lineno"> 7671</span>&#160;</div><div class="line"><a name="l07672"></a><span class="lineno"> 7672</span>&#160;<span class="preprocessor">#if !TARGET_OS_IPHONE</span></div><div class="line"><a name="l07673"></a><span class="lineno"> 7673</span>&#160;  [_sg_mtl_uniform_buffers[_sg_mtl_cur_frame_rotate_index] didModifyRange:NSMakeRange(0, _sg_mtl_cur_ub_offset)];</div><div class="line"><a name="l07674"></a><span class="lineno"> 7674</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l07675"></a><span class="lineno"> 7675</span>&#160;</div><div class="line"><a name="l07676"></a><span class="lineno"> 7676</span>&#160;  <span class="comment">/* present, commit and signal semaphore when done */</span></div><div class="line"><a name="l07677"></a><span class="lineno"> 7677</span>&#160;  <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLDrawable&gt;</a> cur_drawable = (__bridge <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLDrawable&gt;</a>)_sg_mtl_drawable_cb();</div><div class="line"><a name="l07678"></a><span class="lineno"> 7678</span>&#160;  [_sg_mtl_cmd_buffer presentDrawable:cur_drawable];</div><div class="line"><a name="l07679"></a><span class="lineno"> 7679</span>&#160;  __block dispatch_semaphore_t sem = _sg_mtl_sem;</div><div class="line"><a name="l07680"></a><span class="lineno"> 7680</span>&#160;  [_sg_mtl_cmd_buffer addCompletedHandler:^(<a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLCommandBuffer&gt;</a> cmd_buffer) {</div><div class="line"><a name="l07681"></a><span class="lineno"> 7681</span>&#160;    dispatch_semaphore_signal(sem);</div><div class="line"><a name="l07682"></a><span class="lineno"> 7682</span>&#160;  }];</div><div class="line"><a name="l07683"></a><span class="lineno"> 7683</span>&#160;  [_sg_mtl_cmd_buffer <a class="code" href="../../dc/da3/glcorearb_8h.html#a5c56d586c7b2588c4f0413e1a92fd181">commit</a>];</div><div class="line"><a name="l07684"></a><span class="lineno"> 7684</span>&#160;</div><div class="line"><a name="l07685"></a><span class="lineno"> 7685</span>&#160;  <span class="comment">/* garbage-collect resources pending for release */</span></div><div class="line"><a name="l07686"></a><span class="lineno"> 7686</span>&#160;  _sg_mtl_garbage_collect(_sg_mtl_frame_index);</div><div class="line"><a name="l07687"></a><span class="lineno"> 7687</span>&#160;</div><div class="line"><a name="l07688"></a><span class="lineno"> 7688</span>&#160;  <span class="comment">/* rotate uniform buffer slot */</span></div><div class="line"><a name="l07689"></a><span class="lineno"> 7689</span>&#160;  <span class="keywordflow">if</span> (++_sg_mtl_cur_frame_rotate_index &gt;= SG_NUM_INFLIGHT_FRAMES) {</div><div class="line"><a name="l07690"></a><span class="lineno"> 7690</span>&#160;    _sg_mtl_cur_frame_rotate_index = 0;</div><div class="line"><a name="l07691"></a><span class="lineno"> 7691</span>&#160;  }</div><div class="line"><a name="l07692"></a><span class="lineno"> 7692</span>&#160;  _sg_mtl_frame_index++;</div><div class="line"><a name="l07693"></a><span class="lineno"> 7693</span>&#160;  _sg_mtl_cur_ub_offset = 0;</div><div class="line"><a name="l07694"></a><span class="lineno"> 7694</span>&#160;  _sg_mtl_cur_ub_base_ptr = 0;</div><div class="line"><a name="l07695"></a><span class="lineno"> 7695</span>&#160;  _sg_mtl_cmd_buffer = nil;</div><div class="line"><a name="l07696"></a><span class="lineno"> 7696</span>&#160;}</div><div class="line"><a name="l07697"></a><span class="lineno"> 7697</span>&#160;</div><div class="line"><a name="l07698"></a><span class="lineno"> 7698</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_apply_viewport(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">bool</span> origin_top_left)</div><div class="line"><a name="l07699"></a><span class="lineno"> 7699</span>&#160;{</div><div class="line"><a name="l07700"></a><span class="lineno"> 7700</span>&#160;  SOKOL_ASSERT(_sg_mtl_in_pass);</div><div class="line"><a name="l07701"></a><span class="lineno"> 7701</span>&#160;  <span class="keywordflow">if</span> (!_sg_mtl_pass_valid) {</div><div class="line"><a name="l07702"></a><span class="lineno"> 7702</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l07703"></a><span class="lineno"> 7703</span>&#160;  }</div><div class="line"><a name="l07704"></a><span class="lineno"> 7704</span>&#160;  SOKOL_ASSERT(_sg_mtl_cmd_encoder);</div><div class="line"><a name="l07705"></a><span class="lineno"> 7705</span>&#160;  MTLViewport vp;</div><div class="line"><a name="l07706"></a><span class="lineno"> 7706</span>&#160;  vp.originX = (double)x;</div><div class="line"><a name="l07707"></a><span class="lineno"> 7707</span>&#160;  vp.originY = (double)(origin_top_left ? y : (_sg_mtl_cur_height - (y + h)));</div><div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160;  vp.width = (double)w;</div><div class="line"><a name="l07709"></a><span class="lineno"> 7709</span>&#160;  vp.height = (double)h;</div><div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160;  vp.znear = 0.0;</div><div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160;  vp.zfar = 1.0;</div><div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160;  [_sg_mtl_cmd_encoder setViewport:vp];</div><div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160;}</div><div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160;</div><div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_apply_scissor_rect(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> h, <span class="keywordtype">bool</span> origin_top_left)</div><div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;{</div><div class="line"><a name="l07717"></a><span class="lineno"> 7717</span>&#160;  SOKOL_ASSERT(_sg_mtl_in_pass);</div><div class="line"><a name="l07718"></a><span class="lineno"> 7718</span>&#160;  <span class="keywordflow">if</span> (!_sg_mtl_pass_valid) {</div><div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;  }</div><div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160;  SOKOL_ASSERT(_sg_mtl_cmd_encoder);</div><div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160;  <span class="comment">/* clip against framebuffer rect */</span></div><div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;  x = _sg_min(_sg_max(0, x), _sg_mtl_cur_width - 1);</div><div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;  y = _sg_min(_sg_max(0, y), _sg_mtl_cur_height - 1);</div><div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160;  <span class="keywordflow">if</span> ((x + w) &gt; _sg_mtl_cur_width) {</div><div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;    w = _sg_mtl_cur_width - <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>;</div><div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160;  }</div><div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160;  <span class="keywordflow">if</span> ((y + h) &gt; _sg_mtl_cur_height) {</div><div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;    h = _sg_mtl_cur_height - <a class="code" href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a>;</div><div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;  }</div><div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160;  w = _sg_max(w, 1);</div><div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;  h = _sg_max(h, 1);</div><div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160;</div><div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;  MTLScissorRect <a class="code" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a>;</div><div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160;  r.x = <a class="code" href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a>;</div><div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160;  r.y = origin_top_left ? y : (_sg_mtl_cur_height - (y + <a class="code" href="../../dc/da3/glcorearb_8h.html#afa0fb1b5e976920c0abeff2dca3ed774">h</a>));</div><div class="line"><a name="l07737"></a><span class="lineno"> 7737</span>&#160;  r.width = <a class="code" href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a>;</div><div class="line"><a name="l07738"></a><span class="lineno"> 7738</span>&#160;  r.height = <a class="code" href="../../dc/da3/glcorearb_8h.html#afa0fb1b5e976920c0abeff2dca3ed774">h</a>;</div><div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;  [_sg_mtl_cmd_encoder setScissorRect:<a class="code" href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a>];</div><div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160;}</div><div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;</div><div class="line"><a name="l07742"></a><span class="lineno"> 7742</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_apply_draw_state(</div><div class="line"><a name="l07743"></a><span class="lineno"> 7743</span>&#160;  _sg_pipeline* pip,</div><div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;  _sg_buffer** vbs, <span class="keyword">const</span> uint32_t* vb_offsets, <span class="keywordtype">int</span> num_vbs,</div><div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160;  _sg_buffer* ib, uint32_t ib_offset,</div><div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160;  _sg_image** vs_imgs, <span class="keywordtype">int</span> num_vs_imgs,</div><div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160;  _sg_image** fs_imgs, <span class="keywordtype">int</span> num_fs_imgs)</div><div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160;{</div><div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160;  SOKOL_ASSERT(pip);</div><div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160;  SOKOL_ASSERT(pip-&gt;shader);</div><div class="line"><a name="l07751"></a><span class="lineno"> 7751</span>&#160;  SOKOL_ASSERT(_sg_mtl_in_pass);</div><div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;  <span class="keywordflow">if</span> (!_sg_mtl_pass_valid) {</div><div class="line"><a name="l07753"></a><span class="lineno"> 7753</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160;  }</div><div class="line"><a name="l07755"></a><span class="lineno"> 7755</span>&#160;  SOKOL_ASSERT(_sg_mtl_cmd_encoder);</div><div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;</div><div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160;  <span class="comment">/* store index buffer binding, this will be needed later in sg_draw() */</span></div><div class="line"><a name="l07758"></a><span class="lineno"> 7758</span>&#160;  _sg_mtl_cur_indexbuffer = ib;</div><div class="line"><a name="l07759"></a><span class="lineno"> 7759</span>&#160;  _sg_mtl_cur_indexbuffer_offset = ib_offset;</div><div class="line"><a name="l07760"></a><span class="lineno"> 7760</span>&#160;  <span class="keywordflow">if</span> (ib) {</div><div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;    SOKOL_ASSERT(pip-&gt;index_type != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a>);</div><div class="line"><a name="l07762"></a><span class="lineno"> 7762</span>&#160;    _sg_mtl_cur_indexbuffer_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> = ib-&gt;slot.id;</div><div class="line"><a name="l07763"></a><span class="lineno"> 7763</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07764"></a><span class="lineno"> 7764</span>&#160;    SOKOL_ASSERT(pip-&gt;index_type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a>);</div><div class="line"><a name="l07765"></a><span class="lineno"> 7765</span>&#160;    _sg_mtl_cur_indexbuffer_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;  }</div><div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;</div><div class="line"><a name="l07768"></a><span class="lineno"> 7768</span>&#160;  <span class="comment">/* apply pipeline state */</span></div><div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;  <span class="keywordflow">if</span> ((_sg_mtl_cur_pipeline != pip) || (_sg_mtl_cur_pipeline_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a> != pip-&gt;slot.id)) {</div><div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160;    _sg_mtl_cur_pipeline = pip;</div><div class="line"><a name="l07771"></a><span class="lineno"> 7771</span>&#160;    _sg_mtl_cur_pipeline_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a> = pip-&gt;slot.id;</div><div class="line"><a name="l07772"></a><span class="lineno"> 7772</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span>* c = pip-&gt;blend_color;</div><div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;    <span class="comment">/* FIXME: those should be filtered through a simple state cache */</span></div><div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;    [_sg_mtl_cmd_encoder setBlendColorRed:c[0] <a class="code" href="../../d4/dc3/classfloat.html">green</a>:c[1] <a class="code" href="../../dc/da3/glcorearb_8h.html#ab4fcc6ff520ae4d9de259c8468a5cd93">blue</a>:c[2] <a class="code" href="../../dc/da3/glcorearb_8h.html#a090ebe65994a3ee4bb60ae3472abffc5">alpha</a>:c[3]];</div><div class="line"><a name="l07775"></a><span class="lineno"> 7775</span>&#160;    [_sg_mtl_cmd_encoder setCullMode:pip-&gt;mtl_cull_mode];</div><div class="line"><a name="l07776"></a><span class="lineno"> 7776</span>&#160;    [_sg_mtl_cmd_encoder setFrontFacingWinding:pip-&gt;mtl_winding];</div><div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160;    [_sg_mtl_cmd_encoder setStencilReferenceValue:pip-&gt;mtl_stencil_ref];</div><div class="line"><a name="l07778"></a><span class="lineno"> 7778</span>&#160;    [_sg_mtl_cmd_encoder setDepthBias:pip-&gt;depth_bias slopeScale:pip-&gt;depth_bias_slope_scale <a class="code" href="../../dc/da3/glcorearb_8h.html#abd92661d757c8e8c0e50c1b9c3ce496e">clamp</a>:pip-&gt;depth_bias_clamp];</div><div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;    SOKOL_ASSERT(pip-&gt;mtl_rps != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07780"></a><span class="lineno"> 7780</span>&#160;    [_sg_mtl_cmd_encoder setRenderPipelineState:_sg_mtl_pool[pip-&gt;mtl_rps]];</div><div class="line"><a name="l07781"></a><span class="lineno"> 7781</span>&#160;    SOKOL_ASSERT(pip-&gt;mtl_dss != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07782"></a><span class="lineno"> 7782</span>&#160;    [_sg_mtl_cmd_encoder setDepthStencilState:_sg_mtl_pool[pip-&gt;mtl_dss]];</div><div class="line"><a name="l07783"></a><span class="lineno"> 7783</span>&#160;  }</div><div class="line"><a name="l07784"></a><span class="lineno"> 7784</span>&#160;</div><div class="line"><a name="l07785"></a><span class="lineno"> 7785</span>&#160;  <span class="comment">/* apply vertex buffers */</span></div><div class="line"><a name="l07786"></a><span class="lineno"> 7786</span>&#160;  <span class="keywordtype">int</span> slot;</div><div class="line"><a name="l07787"></a><span class="lineno"> 7787</span>&#160;  <span class="keywordflow">for</span> (slot = 0; slot &lt; num_vbs; slot++) {</div><div class="line"><a name="l07788"></a><span class="lineno"> 7788</span>&#160;    <span class="keyword">const</span> _sg_buffer* vb = vbs[slot];</div><div class="line"><a name="l07789"></a><span class="lineno"> 7789</span>&#160;    <span class="keywordflow">if</span> ((_sg_mtl_cur_vertexbuffers[slot] != vb) ||</div><div class="line"><a name="l07790"></a><span class="lineno"> 7790</span>&#160;        (_sg_mtl_cur_vertexbuffer_offsets[slot] != vb_offsets[slot]) ||</div><div class="line"><a name="l07791"></a><span class="lineno"> 7791</span>&#160;        (_sg_mtl_cur_vertexbuffer_ids[slot].<span class="keywordtype">id</span> != vb-&gt;slot.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>)) {</div><div class="line"><a name="l07792"></a><span class="lineno"> 7792</span>&#160;      _sg_mtl_cur_vertexbuffers[slot] = vb;</div><div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;      _sg_mtl_cur_vertexbuffer_offsets[slot] = vb_offsets[slot];</div><div class="line"><a name="l07794"></a><span class="lineno"> 7794</span>&#160;      _sg_mtl_cur_vertexbuffer_ids[slot].<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> = vb-&gt;slot.id;</div><div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160;      <span class="keyword">const</span> NSUInteger mtl_slot = SG_MAX_SHADERSTAGE_UBS + slot;</div><div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;      SOKOL_ASSERT(vb-&gt;mtl_buf[vb-&gt;active_slot] != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160;      [_sg_mtl_cmd_encoder setVertexBuffer:_sg_mtl_pool[vb-&gt;mtl_buf[vb-&gt;active_slot]]</div><div class="line"><a name="l07798"></a><span class="lineno"> 7798</span>&#160;                                    <a class="code" href="../../dc/da3/glcorearb_8h.html#ab81054a092f44d2ce010b3c46e3a7ff3">offset</a>:vb_offsets[slot]</div><div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;                                   atIndex:mtl_slot];</div><div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;    }</div><div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;  }</div><div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160;</div><div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;  <span class="comment">/* apply vertex shader images */</span></div><div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160;  <span class="keywordflow">for</span> (slot = 0; slot &lt; num_vs_imgs; slot++) {</div><div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160;    <span class="keyword">const</span> _sg_image* img = vs_imgs[slot];</div><div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;    <span class="keywordflow">if</span> ((_sg_mtl_cur_vs_images[slot] != img) || (_sg_mtl_cur_vs_image_ids[slot].<span class="keywordtype">id</span> != img-&gt;slot.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>)) {</div><div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160;      _sg_mtl_cur_vs_images[slot] = <a class="code" href="../../dc/da3/glcorearb_8h.html#a3455aaa12cecc35ac4a42a9bf1273da8">img</a>;</div><div class="line"><a name="l07808"></a><span class="lineno"> 7808</span>&#160;      _sg_mtl_cur_vs_image_ids[slot].<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> = img-&gt;slot.id;</div><div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160;      SOKOL_ASSERT(img-&gt;mtl_tex[img-&gt;active_slot] != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160;      [_sg_mtl_cmd_encoder setVertexTexture:_sg_mtl_pool[img-&gt;mtl_tex[img-&gt;active_slot]] atIndex:slot];</div><div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160;      SOKOL_ASSERT(img-&gt;mtl_sampler_state != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160;      [_sg_mtl_cmd_encoder setVertexSamplerState:_sg_mtl_pool[img-&gt;mtl_sampler_state] atIndex:slot];</div><div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;    }</div><div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160;  }</div><div class="line"><a name="l07815"></a><span class="lineno"> 7815</span>&#160;</div><div class="line"><a name="l07816"></a><span class="lineno"> 7816</span>&#160;  <span class="comment">/* apply fragment shader images */</span></div><div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160;  <span class="keywordflow">for</span> (slot = 0; slot &lt; num_fs_imgs; slot++) {</div><div class="line"><a name="l07818"></a><span class="lineno"> 7818</span>&#160;    <span class="keyword">const</span> _sg_image* img = fs_imgs[slot];</div><div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160;    <span class="keywordflow">if</span> ((_sg_mtl_cur_fs_images[slot] != img) || (_sg_mtl_cur_fs_image_ids[slot].<span class="keywordtype">id</span> != img-&gt;slot.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>)) {</div><div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160;      _sg_mtl_cur_fs_images[slot] = <a class="code" href="../../dc/da3/glcorearb_8h.html#a3455aaa12cecc35ac4a42a9bf1273da8">img</a>;</div><div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160;      _sg_mtl_cur_fs_image_ids[slot].<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> = img-&gt;slot.id;</div><div class="line"><a name="l07822"></a><span class="lineno"> 7822</span>&#160;      SOKOL_ASSERT(img-&gt;mtl_tex[img-&gt;active_slot] != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160;      [_sg_mtl_cmd_encoder setFragmentTexture:_sg_mtl_pool[img-&gt;mtl_tex[img-&gt;active_slot]] atIndex:slot];</div><div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;      SOKOL_ASSERT(img-&gt;mtl_sampler_state != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160;      [_sg_mtl_cmd_encoder setFragmentSamplerState:_sg_mtl_pool[img-&gt;mtl_sampler_state] atIndex:slot];</div><div class="line"><a name="l07826"></a><span class="lineno"> 7826</span>&#160;    }</div><div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160;  }</div><div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;}</div><div class="line"><a name="l07829"></a><span class="lineno"> 7829</span>&#160;</div><div class="line"><a name="l07830"></a><span class="lineno"> 7830</span>&#160;<span class="preprocessor">#define _sg_mtl_roundup(val, round_to) (((val) + ((round_to)-1)) &amp; ~((round_to)-1))</span></div><div class="line"><a name="l07831"></a><span class="lineno"> 7831</span>&#160;</div><div class="line"><a name="l07832"></a><span class="lineno"> 7832</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_apply_uniform_block(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343">sg_shader_stage</a> stage_index, <span class="keywordtype">int</span> ub_index, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> num_bytes)</div><div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;{</div><div class="line"><a name="l07834"></a><span class="lineno"> 7834</span>&#160;  SOKOL_ASSERT(_sg_mtl_in_pass);</div><div class="line"><a name="l07835"></a><span class="lineno"> 7835</span>&#160;  <span class="keywordflow">if</span> (!_sg_mtl_pass_valid) {</div><div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l07837"></a><span class="lineno"> 7837</span>&#160;  }</div><div class="line"><a name="l07838"></a><span class="lineno"> 7838</span>&#160;  SOKOL_ASSERT(_sg_mtl_cmd_encoder);</div><div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;  SOKOL_ASSERT(data &amp;&amp; (num_bytes &gt; 0));</div><div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160;  SOKOL_ASSERT((stage_index &gt;= 0) &amp;&amp; ((<span class="keywordtype">int</span>)stage_index &lt; SG_NUM_SHADER_STAGES));</div><div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;  SOKOL_ASSERT((ub_index &gt;= 0) &amp;&amp; (ub_index &lt; SG_MAX_SHADERSTAGE_UBS));</div><div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;  SOKOL_ASSERT((_sg_mtl_cur_ub_offset + num_bytes) &lt;= _sg_mtl_ub_size);</div><div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;  SOKOL_ASSERT((_sg_mtl_cur_ub_offset &amp; (_SG_MTL_UB_ALIGN - 1)) == 0);</div><div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160;  SOKOL_ASSERT(_sg_mtl_cur_pipeline &amp;&amp; _sg_mtl_cur_pipeline-&gt;shader);</div><div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;  SOKOL_ASSERT(_sg_mtl_cur_pipeline-&gt;slot.id == _sg_mtl_cur_pipeline_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a>);</div><div class="line"><a name="l07846"></a><span class="lineno"> 7846</span>&#160;  SOKOL_ASSERT(_sg_mtl_cur_pipeline-&gt;shader-&gt;slot.id == _sg_mtl_cur_pipeline-&gt;shader_id.id);</div><div class="line"><a name="l07847"></a><span class="lineno"> 7847</span>&#160;  SOKOL_ASSERT(ub_index &lt; _sg_mtl_cur_pipeline-&gt;<a class="code" href="../../dc/da3/glcorearb_8h.html#a57b2a96adb1d51204909a82d861e395e">shader</a>-&gt;stage[stage_index].num_uniform_blocks);</div><div class="line"><a name="l07848"></a><span class="lineno"> 7848</span>&#160;  SOKOL_ASSERT(num_bytes &lt;= _sg_mtl_cur_pipeline-&gt;<a class="code" href="../../dc/da3/glcorearb_8h.html#a57b2a96adb1d51204909a82d861e395e">shader</a>-&gt;stage[stage_index].uniform_blocks[ub_index].size);</div><div class="line"><a name="l07849"></a><span class="lineno"> 7849</span>&#160;</div><div class="line"><a name="l07850"></a><span class="lineno"> 7850</span>&#160;  <span class="comment">/* copy to global uniform buffer, record offset into cmd encoder, and advance offset */</span></div><div class="line"><a name="l07851"></a><span class="lineno"> 7851</span>&#160;  uint8_t* dst = &amp;_sg_mtl_cur_ub_base_ptr[_sg_mtl_cur_ub_offset];</div><div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;  memcpy(dst, data, num_bytes);</div><div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160;  <span class="keywordflow">if</span> (stage_index == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>) {</div><div class="line"><a name="l07854"></a><span class="lineno"> 7854</span>&#160;    [_sg_mtl_cmd_encoder setVertexBufferOffset:_sg_mtl_cur_ub_offset atIndex:ub_index];</div><div class="line"><a name="l07855"></a><span class="lineno"> 7855</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160;    [_sg_mtl_cmd_encoder setFragmentBufferOffset:_sg_mtl_cur_ub_offset atIndex:ub_index];</div><div class="line"><a name="l07857"></a><span class="lineno"> 7857</span>&#160;  }</div><div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160;  _sg_mtl_cur_ub_offset = _sg_mtl_roundup(_sg_mtl_cur_ub_offset + num_bytes, _SG_MTL_UB_ALIGN);</div><div class="line"><a name="l07859"></a><span class="lineno"> 7859</span>&#160;}</div><div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160;</div><div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_draw(<span class="keywordtype">int</span> base_element, <span class="keywordtype">int</span> num_elements, <span class="keywordtype">int</span> num_instances)</div><div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;{</div><div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;  SOKOL_ASSERT(_sg_mtl_in_pass);</div><div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160;  <span class="keywordflow">if</span> (!_sg_mtl_pass_valid) {</div><div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l07866"></a><span class="lineno"> 7866</span>&#160;  }</div><div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;  SOKOL_ASSERT(_sg_mtl_cmd_encoder);</div><div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160;  SOKOL_ASSERT(_sg_mtl_cur_pipeline &amp;&amp; (_sg_mtl_cur_pipeline-&gt;slot.id == _sg_mtl_cur_pipeline_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a>));</div><div class="line"><a name="l07869"></a><span class="lineno"> 7869</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a> != _sg_mtl_cur_pipeline-&gt;index_type) {</div><div class="line"><a name="l07870"></a><span class="lineno"> 7870</span>&#160;    <span class="comment">/* indexed rendering */</span></div><div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;    SOKOL_ASSERT(_sg_mtl_cur_indexbuffer &amp;&amp; (_sg_mtl_cur_indexbuffer-&gt;slot.id == _sg_mtl_cur_indexbuffer_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>));</div><div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;    <span class="keyword">const</span> _sg_buffer* ib = _sg_mtl_cur_indexbuffer;</div><div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160;    SOKOL_ASSERT(ib-&gt;mtl_buf[ib-&gt;active_slot] != _SG_MTL_INVALID_POOL_INDEX);</div><div class="line"><a name="l07874"></a><span class="lineno"> 7874</span>&#160;    <span class="keyword">const</span> NSUInteger index_buffer_offset = _sg_mtl_cur_indexbuffer_offset +</div><div class="line"><a name="l07875"></a><span class="lineno"> 7875</span>&#160;                                           base_element * _sg_mtl_cur_pipeline-&gt;mtl_index_size;</div><div class="line"><a name="l07876"></a><span class="lineno"> 7876</span>&#160;    [_sg_mtl_cmd_encoder drawIndexedPrimitives:_sg_mtl_cur_pipeline-&gt;mtl_prim_type</div><div class="line"><a name="l07877"></a><span class="lineno"> 7877</span>&#160;                                    indexCount:num_elements</div><div class="line"><a name="l07878"></a><span class="lineno"> 7878</span>&#160;                                     indexType:_sg_mtl_cur_pipeline-&gt;mtl_index_type</div><div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;                                   indexBuffer:_sg_mtl_pool[ib-&gt;mtl_buf[ib-&gt;active_slot]]</div><div class="line"><a name="l07880"></a><span class="lineno"> 7880</span>&#160;                             indexBufferOffset:index_buffer_offset</div><div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160;                                 instanceCount:num_instances];</div><div class="line"><a name="l07882"></a><span class="lineno"> 7882</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;    <span class="comment">/* non-indexed rendering */</span></div><div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160;    [_sg_mtl_cmd_encoder drawPrimitives:_sg_mtl_cur_pipeline-&gt;mtl_prim_type</div><div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160;                            vertexStart:base_element</div><div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160;                            vertexCount:num_elements</div><div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;                          instanceCount:num_instances];</div><div class="line"><a name="l07888"></a><span class="lineno"> 7888</span>&#160;  }</div><div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;}</div><div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160;</div><div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_update_buffer(_sg_buffer* buf, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> data_size)</div><div class="line"><a name="l07892"></a><span class="lineno"> 7892</span>&#160;{</div><div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;  SOKOL_ASSERT(buf &amp;&amp; data &amp;&amp; (data_size &gt; 0));</div><div class="line"><a name="l07894"></a><span class="lineno"> 7894</span>&#160;  <span class="keywordflow">if</span> (++buf-&gt;active_slot &gt;= buf-&gt;num_slots) {</div><div class="line"><a name="l07895"></a><span class="lineno"> 7895</span>&#160;    buf-&gt;active_slot = 0;</div><div class="line"><a name="l07896"></a><span class="lineno"> 7896</span>&#160;  }</div><div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;  __unsafe_unretained <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLBuffer&gt;</a> mtl_buf = _sg_mtl_pool[buf-&gt;mtl_buf[buf-&gt;active_slot]];</div><div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160;  <span class="keywordtype">void</span>* dst_ptr = [mtl_buf contents];</div><div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;  memcpy(dst_ptr, data, data_size);</div><div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;<span class="preprocessor">#if !TARGET_OS_IPHONE</span></div><div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;  [mtl_buf didModifyRange:NSMakeRange(0, data_size)];</div><div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;}</div><div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160;</div><div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_update_image(_sg_image* img, <span class="keyword">const</span> <a class="code" href="../../dd/d44/structsg__image__content.html">sg_image_content</a>* data)</div><div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160;{</div><div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;  SOKOL_ASSERT(img &amp;&amp; data);</div><div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160;  <span class="keywordflow">if</span> (++img-&gt;active_slot &gt;= img-&gt;num_slots) {</div><div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;    img-&gt;active_slot = 0;</div><div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160;  }</div><div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;  __unsafe_unretained <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id&lt;MTLTexture&gt;</a> mtl_tex = _sg_mtl_pool[img-&gt;mtl_tex[img-&gt;active_slot]];</div><div class="line"><a name="l07912"></a><span class="lineno"> 7912</span>&#160;  _sg_mtl_copy_image_content(img, mtl_tex, data);</div><div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;}</div><div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160;</div><div class="line"><a name="l07915"></a><span class="lineno"> 7915</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l07916"></a><span class="lineno"> 7916</span>&#160;<span class="preprocessor">#error &quot;No rendering backend selected&quot;</span></div><div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160;<span class="comment">/*== RESOURCE POOLS ==========================================================*/</span></div><div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a>;</div><div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160;  uint32_t unique_counter;</div><div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160;  <span class="keywordtype">int</span> queue_top;</div><div class="line"><a name="l07923"></a><span class="lineno"> 7923</span>&#160;  <span class="keywordtype">int</span>* free_queue;</div><div class="line"><a name="l07924"></a><span class="lineno"> 7924</span>&#160;} _sg_pool;</div><div class="line"><a name="l07925"></a><span class="lineno"> 7925</span>&#160;</div><div class="line"><a name="l07926"></a><span class="lineno"> 7926</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_init_pool(_sg_pool* pool, <span class="keywordtype">int</span> <a class="code" href="../../d2/d12/bench__Clusterizer_8cxx.html#af656038045ce6448240b3767491787da">num</a>)</div><div class="line"><a name="l07927"></a><span class="lineno"> 7927</span>&#160;{</div><div class="line"><a name="l07928"></a><span class="lineno"> 7928</span>&#160;  SOKOL_ASSERT(pool &amp;&amp; (num &gt; 1));</div><div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;  <span class="comment">/* slot 0 is reserved for the &#39;invalid id&#39;, so bump the pool size by 1 */</span></div><div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;  pool-&gt;size = num + 1;</div><div class="line"><a name="l07931"></a><span class="lineno"> 7931</span>&#160;  pool-&gt;queue_top = 0;</div><div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160;  pool-&gt;unique_counter = 0;</div><div class="line"><a name="l07933"></a><span class="lineno"> 7933</span>&#160;  <span class="comment">/* it&#39;s not a bug to only reserve &#39;num&#39; here */</span></div><div class="line"><a name="l07934"></a><span class="lineno"> 7934</span>&#160;  pool-&gt;free_queue = (<span class="keywordtype">int</span>*)SOKOL_MALLOC(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) * <a class="code" href="../../d2/d12/bench__Clusterizer_8cxx.html#af656038045ce6448240b3767491787da">num</a>);</div><div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;  SOKOL_ASSERT(pool-&gt;free_queue);</div><div class="line"><a name="l07936"></a><span class="lineno"> 7936</span>&#160;  <span class="comment">/* never allocate the zero-th pool item since the invalid id is 0 */</span></div><div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = pool-&gt;size - 1; i &gt;= 1; i--) {</div><div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160;    pool-&gt;free_queue[pool-&gt;queue_top++] = <a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div><div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;  }</div><div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;}</div><div class="line"><a name="l07941"></a><span class="lineno"> 7941</span>&#160;</div><div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_discard_pool(_sg_pool* pool)</div><div class="line"><a name="l07943"></a><span class="lineno"> 7943</span>&#160;{</div><div class="line"><a name="l07944"></a><span class="lineno"> 7944</span>&#160;  SOKOL_ASSERT(pool);</div><div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160;  SOKOL_FREE(pool-&gt;free_queue);</div><div class="line"><a name="l07946"></a><span class="lineno"> 7946</span>&#160;  pool-&gt;free_queue = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;  pool-&gt;size = 0;</div><div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;  pool-&gt;queue_top = 0;</div><div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160;  pool-&gt;unique_counter = 0;</div><div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;}</div><div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160;</div><div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;_SOKOL_PRIVATE uint32_t _sg_pool_alloc_id(_sg_pool* pool)</div><div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;{</div><div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160;  SOKOL_ASSERT(pool);</div><div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;  SOKOL_ASSERT(pool-&gt;free_queue);</div><div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160;  <span class="keywordflow">if</span> (pool-&gt;queue_top &gt; 0) {</div><div class="line"><a name="l07957"></a><span class="lineno"> 7957</span>&#160;    <span class="keywordtype">int</span> slot_index = pool-&gt;free_queue[--pool-&gt;queue_top];</div><div class="line"><a name="l07958"></a><span class="lineno"> 7958</span>&#160;    <span class="keywordflow">return</span> ((pool-&gt;unique_counter++) &lt;&lt; _SG_SLOT_SHIFT) | slot_index;</div><div class="line"><a name="l07959"></a><span class="lineno"> 7959</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07960"></a><span class="lineno"> 7960</span>&#160;    <span class="comment">/* pool exhausted */</span></div><div class="line"><a name="l07961"></a><span class="lineno"> 7961</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l07962"></a><span class="lineno"> 7962</span>&#160;  }</div><div class="line"><a name="l07963"></a><span class="lineno"> 7963</span>&#160;}</div><div class="line"><a name="l07964"></a><span class="lineno"> 7964</span>&#160;</div><div class="line"><a name="l07965"></a><span class="lineno"> 7965</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_pool_free_id(_sg_pool* pool, uint32_t <span class="keywordtype">id</span>)</div><div class="line"><a name="l07966"></a><span class="lineno"> 7966</span>&#160;{</div><div class="line"><a name="l07967"></a><span class="lineno"> 7967</span>&#160;  SOKOL_ASSERT(<span class="keywordtype">id</span> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>);</div><div class="line"><a name="l07968"></a><span class="lineno"> 7968</span>&#160;  SOKOL_ASSERT(pool);</div><div class="line"><a name="l07969"></a><span class="lineno"> 7969</span>&#160;  SOKOL_ASSERT(pool-&gt;free_queue);</div><div class="line"><a name="l07970"></a><span class="lineno"> 7970</span>&#160;  SOKOL_ASSERT(pool-&gt;queue_top &lt; pool-&gt;size);</div><div class="line"><a name="l07971"></a><span class="lineno"> 7971</span>&#160;<span class="preprocessor">#ifdef SOKOL_DEBUG</span></div><div class="line"><a name="l07972"></a><span class="lineno"> 7972</span>&#160;  <span class="comment">/* debug check against double-free */</span></div><div class="line"><a name="l07973"></a><span class="lineno"> 7973</span>&#160;  <span class="keywordtype">int</span> slot_index = _sg_slot_index(<span class="keywordtype">id</span>);</div><div class="line"><a name="l07974"></a><span class="lineno"> 7974</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; pool-&gt;queue_top; i++) {</div><div class="line"><a name="l07975"></a><span class="lineno"> 7975</span>&#160;    SOKOL_ASSERT(pool-&gt;free_queue[i] != slot_index);</div><div class="line"><a name="l07976"></a><span class="lineno"> 7976</span>&#160;  }</div><div class="line"><a name="l07977"></a><span class="lineno"> 7977</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l07978"></a><span class="lineno"> 7978</span>&#160;  pool-&gt;free_queue[pool-&gt;queue_top++] = <a class="code" href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id</a>;</div><div class="line"><a name="l07979"></a><span class="lineno"> 7979</span>&#160;  SOKOL_ASSERT(pool-&gt;queue_top &lt;= (pool-&gt;size - 1));</div><div class="line"><a name="l07980"></a><span class="lineno"> 7980</span>&#160;}</div><div class="line"><a name="l07981"></a><span class="lineno"> 7981</span>&#160;</div><div class="line"><a name="l07982"></a><span class="lineno"> 7982</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l07983"></a><span class="lineno"> 7983</span>&#160;  _sg_pool buffer_pool;</div><div class="line"><a name="l07984"></a><span class="lineno"> 7984</span>&#160;  _sg_pool image_pool;</div><div class="line"><a name="l07985"></a><span class="lineno"> 7985</span>&#160;  _sg_pool shader_pool;</div><div class="line"><a name="l07986"></a><span class="lineno"> 7986</span>&#160;  _sg_pool pipeline_pool;</div><div class="line"><a name="l07987"></a><span class="lineno"> 7987</span>&#160;  _sg_pool pass_pool;</div><div class="line"><a name="l07988"></a><span class="lineno"> 7988</span>&#160;  _sg_pool context_pool;</div><div class="line"><a name="l07989"></a><span class="lineno"> 7989</span>&#160;  _sg_buffer* <a class="code" href="../../dc/da3/glcorearb_8h.html#af545b4458d07f53f6ffebc73b38814cb">buffers</a>;</div><div class="line"><a name="l07990"></a><span class="lineno"> 7990</span>&#160;  _sg_image* images;</div><div class="line"><a name="l07991"></a><span class="lineno"> 7991</span>&#160;  _sg_shader* <a class="code" href="../../dc/da3/glcorearb_8h.html#a9ef40b8b66ee2f657225b989845b9a19">shaders</a>;</div><div class="line"><a name="l07992"></a><span class="lineno"> 7992</span>&#160;  _sg_pipeline* <a class="code" href="../../dc/da3/glcorearb_8h.html#a2e4b00a98ef858050e7ce85444f8399a">pipelines</a>;</div><div class="line"><a name="l07993"></a><span class="lineno"> 7993</span>&#160;  _sg_pass* passes;</div><div class="line"><a name="l07994"></a><span class="lineno"> 7994</span>&#160;  _sg_context* contexts;</div><div class="line"><a name="l07995"></a><span class="lineno"> 7995</span>&#160;} _sg_pools;</div><div class="line"><a name="l07996"></a><span class="lineno"> 7996</span>&#160;</div><div class="line"><a name="l07997"></a><span class="lineno"> 7997</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_setup_pools(_sg_pools* p, <span class="keyword">const</span> <a class="code" href="../../dc/d0e/structsg__desc.html">sg_desc</a>* desc)</div><div class="line"><a name="l07998"></a><span class="lineno"> 7998</span>&#160;{</div><div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160;  SOKOL_ASSERT(p);</div><div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l08001"></a><span class="lineno"> 8001</span>&#160;  <span class="comment">/* note: the pools here will have an additional item, since slot 0 is reserved */</span></div><div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160;  SOKOL_ASSERT((desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a04b19d54bf3b446715faac7ee895a6ad">buffer_pool_size</a> &gt;= 0) &amp;&amp; (desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a04b19d54bf3b446715faac7ee895a6ad">buffer_pool_size</a> &lt; _SG_MAX_POOL_SIZE));</div><div class="line"><a name="l08003"></a><span class="lineno"> 8003</span>&#160;  _sg_init_pool(&amp;p-&gt;buffer_pool, _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a04b19d54bf3b446715faac7ee895a6ad">buffer_pool_size</a>, _SG_DEFAULT_BUFFER_POOL_SIZE));</div><div class="line"><a name="l08004"></a><span class="lineno"> 8004</span>&#160;  p-&gt;buffers = (_sg_buffer*)SOKOL_MALLOC(<span class="keyword">sizeof</span>(_sg_buffer) * p-&gt;buffer_pool.size);</div><div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;  SOKOL_ASSERT(p-&gt;buffers);</div><div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; p-&gt;buffer_pool.size; i++) {</div><div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;    _sg_init_buffer_slot(&amp;p-&gt;buffers[i]);</div><div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;  }</div><div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;</div><div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160;  SOKOL_ASSERT((desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#aae8ba84b9097e6321647193b2cf6e82a">image_pool_size</a> &gt;= 0) &amp;&amp; (desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#aae8ba84b9097e6321647193b2cf6e82a">image_pool_size</a> &lt; _SG_MAX_POOL_SIZE));</div><div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160;  _sg_init_pool(&amp;p-&gt;image_pool, _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#aae8ba84b9097e6321647193b2cf6e82a">image_pool_size</a>, _SG_DEFAULT_IMAGE_POOL_SIZE));</div><div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;  p-&gt;images = (_sg_image*)SOKOL_MALLOC(<span class="keyword">sizeof</span>(_sg_image) * p-&gt;image_pool.size);</div><div class="line"><a name="l08013"></a><span class="lineno"> 8013</span>&#160;  SOKOL_ASSERT(p-&gt;images);</div><div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; p-&gt;image_pool.size; i++) {</div><div class="line"><a name="l08015"></a><span class="lineno"> 8015</span>&#160;    _sg_init_image_slot(&amp;p-&gt;images[i]);</div><div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;  }</div><div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160;</div><div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160;  SOKOL_ASSERT((desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a73bccc3454c2baa27e5ff9b1941c654d">shader_pool_size</a> &gt;= 0) &amp;&amp; (desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a73bccc3454c2baa27e5ff9b1941c654d">shader_pool_size</a> &lt; _SG_MAX_POOL_SIZE));</div><div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160;  _sg_init_pool(&amp;p-&gt;shader_pool, _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a73bccc3454c2baa27e5ff9b1941c654d">shader_pool_size</a>, _SG_DEFAULT_SHADER_POOL_SIZE));</div><div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;  p-&gt;shaders = (_sg_shader*)SOKOL_MALLOC(<span class="keyword">sizeof</span>(_sg_shader) * p-&gt;shader_pool.size);</div><div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;  SOKOL_ASSERT(p-&gt;shaders);</div><div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; p-&gt;shader_pool.size; i++) {</div><div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;    _sg_init_shader_slot(&amp;p-&gt;shaders[i]);</div><div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160;  }</div><div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160;</div><div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;  SOKOL_ASSERT((desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a15b47daeb207aa0fb560b043904e33e1">pipeline_pool_size</a> &gt;= 0) &amp;&amp; (desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a15b47daeb207aa0fb560b043904e33e1">pipeline_pool_size</a> &lt; _SG_MAX_POOL_SIZE));</div><div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;  _sg_init_pool(&amp;p-&gt;pipeline_pool, _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a15b47daeb207aa0fb560b043904e33e1">pipeline_pool_size</a>, _SG_DEFAULT_PIPELINE_POOL_SIZE));</div><div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160;  p-&gt;pipelines = (_sg_pipeline*)SOKOL_MALLOC(<span class="keyword">sizeof</span>(_sg_pipeline) * p-&gt;pipeline_pool.size);</div><div class="line"><a name="l08029"></a><span class="lineno"> 8029</span>&#160;  SOKOL_ASSERT(p-&gt;pipelines);</div><div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; p-&gt;pipeline_pool.size; i++) {</div><div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;    _sg_init_pipeline_slot(&amp;p-&gt;pipelines[i]);</div><div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160;  }</div><div class="line"><a name="l08033"></a><span class="lineno"> 8033</span>&#160;</div><div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;  SOKOL_ASSERT((desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#ab56f235f260ba5c0a5f0d2bd470e854d">pass_pool_size</a> &gt;= 0) &amp;&amp; (desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#ab56f235f260ba5c0a5f0d2bd470e854d">pass_pool_size</a> &lt; _SG_MAX_POOL_SIZE));</div><div class="line"><a name="l08035"></a><span class="lineno"> 8035</span>&#160;  _sg_init_pool(&amp;p-&gt;pass_pool, _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#ab56f235f260ba5c0a5f0d2bd470e854d">pass_pool_size</a>, _SG_DEFAULT_PASS_POOL_SIZE));</div><div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;  p-&gt;passes = (_sg_pass*)SOKOL_MALLOC(<span class="keyword">sizeof</span>(_sg_pass) * p-&gt;pass_pool.size);</div><div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160;  SOKOL_ASSERT(p-&gt;passes);</div><div class="line"><a name="l08038"></a><span class="lineno"> 8038</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; p-&gt;pass_pool.size; i++) {</div><div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;    _sg_init_pass_slot(&amp;p-&gt;passes[i]);</div><div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160;  }</div><div class="line"><a name="l08041"></a><span class="lineno"> 8041</span>&#160;</div><div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;  SOKOL_ASSERT((desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#ae8900a940c09b074efd6afc4cd87dc4f">context_pool_size</a> &gt;= 0) &amp;&amp; (desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#ae8900a940c09b074efd6afc4cd87dc4f">context_pool_size</a> &lt; _SG_MAX_POOL_SIZE));</div><div class="line"><a name="l08043"></a><span class="lineno"> 8043</span>&#160;  _sg_init_pool(&amp;p-&gt;context_pool, _sg_def(desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#ae8900a940c09b074efd6afc4cd87dc4f">context_pool_size</a>, _SG_DEFAULT_CONTEXT_POOL_SIZE));</div><div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;  p-&gt;contexts = (_sg_context*)SOKOL_MALLOC(<span class="keyword">sizeof</span>(_sg_context) * p-&gt;context_pool.size);</div><div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160;  SOKOL_ASSERT(p-&gt;contexts);</div><div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; p-&gt;context_pool.size; i++) {</div><div class="line"><a name="l08047"></a><span class="lineno"> 8047</span>&#160;    _sg_init_context_slot(&amp;p-&gt;contexts[i]);</div><div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160;  }</div><div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;}</div><div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;</div><div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_discard_pools(_sg_pools* p)</div><div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160;{</div><div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160;  SOKOL_ASSERT(p);</div><div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160;  SOKOL_FREE(p-&gt;contexts);</div><div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;  p-&gt;contexts = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160;  SOKOL_FREE(p-&gt;passes);</div><div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160;  p-&gt;passes = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l08058"></a><span class="lineno"> 8058</span>&#160;  SOKOL_FREE(p-&gt;pipelines);</div><div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160;  p-&gt;pipelines = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l08060"></a><span class="lineno"> 8060</span>&#160;  SOKOL_FREE(p-&gt;shaders);</div><div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160;  p-&gt;shaders = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160;  SOKOL_FREE(p-&gt;images);</div><div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;  p-&gt;images = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160;  SOKOL_FREE(p-&gt;buffers);</div><div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160;  p-&gt;buffers = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l08066"></a><span class="lineno"> 8066</span>&#160;  _sg_discard_pool(&amp;p-&gt;context_pool);</div><div class="line"><a name="l08067"></a><span class="lineno"> 8067</span>&#160;  _sg_discard_pool(&amp;p-&gt;pass_pool);</div><div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;  _sg_discard_pool(&amp;p-&gt;pipeline_pool);</div><div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160;  _sg_discard_pool(&amp;p-&gt;shader_pool);</div><div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;  _sg_discard_pool(&amp;p-&gt;image_pool);</div><div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;  _sg_discard_pool(&amp;p-&gt;buffer_pool);</div><div class="line"><a name="l08072"></a><span class="lineno"> 8072</span>&#160;}</div><div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160;</div><div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160;<span class="comment">/* returns pointer to resource by id without matching id check */</span></div><div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160;_SOKOL_PRIVATE _sg_buffer* _sg_buffer_at(<span class="keyword">const</span> _sg_pools* p, uint32_t buf_id)</div><div class="line"><a name="l08076"></a><span class="lineno"> 8076</span>&#160;{</div><div class="line"><a name="l08077"></a><span class="lineno"> 8077</span>&#160;  SOKOL_ASSERT(p &amp;&amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> != buf_id);</div><div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;  <span class="keywordtype">int</span> slot_index = _sg_slot_index(buf_id);</div><div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;  SOKOL_ASSERT((slot_index &gt;= 0) &amp;&amp; (slot_index &lt; p-&gt;buffer_pool.size));</div><div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160;  <span class="keywordflow">return</span> &amp;p-&gt;buffers[slot_index];</div><div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;}</div><div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;</div><div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;_SOKOL_PRIVATE _sg_image* _sg_image_at(<span class="keyword">const</span> _sg_pools* p, uint32_t img_id)</div><div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160;{</div><div class="line"><a name="l08085"></a><span class="lineno"> 8085</span>&#160;  SOKOL_ASSERT(p &amp;&amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> != img_id);</div><div class="line"><a name="l08086"></a><span class="lineno"> 8086</span>&#160;  <span class="keywordtype">int</span> slot_index = _sg_slot_index(img_id);</div><div class="line"><a name="l08087"></a><span class="lineno"> 8087</span>&#160;  SOKOL_ASSERT((slot_index &gt;= 0) &amp;&amp; (slot_index &lt; p-&gt;image_pool.size));</div><div class="line"><a name="l08088"></a><span class="lineno"> 8088</span>&#160;  <span class="keywordflow">return</span> &amp;p-&gt;images[slot_index];</div><div class="line"><a name="l08089"></a><span class="lineno"> 8089</span>&#160;}</div><div class="line"><a name="l08090"></a><span class="lineno"> 8090</span>&#160;</div><div class="line"><a name="l08091"></a><span class="lineno"> 8091</span>&#160;_SOKOL_PRIVATE _sg_shader* _sg_shader_at(<span class="keyword">const</span> _sg_pools* p, uint32_t shd_id)</div><div class="line"><a name="l08092"></a><span class="lineno"> 8092</span>&#160;{</div><div class="line"><a name="l08093"></a><span class="lineno"> 8093</span>&#160;  SOKOL_ASSERT(p &amp;&amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> != shd_id);</div><div class="line"><a name="l08094"></a><span class="lineno"> 8094</span>&#160;  <span class="keywordtype">int</span> slot_index = _sg_slot_index(shd_id);</div><div class="line"><a name="l08095"></a><span class="lineno"> 8095</span>&#160;  SOKOL_ASSERT((slot_index &gt;= 0) &amp;&amp; (slot_index &lt; p-&gt;shader_pool.size));</div><div class="line"><a name="l08096"></a><span class="lineno"> 8096</span>&#160;  <span class="keywordflow">return</span> &amp;p-&gt;shaders[slot_index];</div><div class="line"><a name="l08097"></a><span class="lineno"> 8097</span>&#160;}</div><div class="line"><a name="l08098"></a><span class="lineno"> 8098</span>&#160;</div><div class="line"><a name="l08099"></a><span class="lineno"> 8099</span>&#160;_SOKOL_PRIVATE _sg_pipeline* _sg_pipeline_at(<span class="keyword">const</span> _sg_pools* p, uint32_t pip_id)</div><div class="line"><a name="l08100"></a><span class="lineno"> 8100</span>&#160;{</div><div class="line"><a name="l08101"></a><span class="lineno"> 8101</span>&#160;  SOKOL_ASSERT(p &amp;&amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> != pip_id);</div><div class="line"><a name="l08102"></a><span class="lineno"> 8102</span>&#160;  <span class="keywordtype">int</span> slot_index = _sg_slot_index(pip_id);</div><div class="line"><a name="l08103"></a><span class="lineno"> 8103</span>&#160;  SOKOL_ASSERT((slot_index &gt;= 0) &amp;&amp; (slot_index &lt; p-&gt;pipeline_pool.size));</div><div class="line"><a name="l08104"></a><span class="lineno"> 8104</span>&#160;  <span class="keywordflow">return</span> &amp;p-&gt;pipelines[slot_index];</div><div class="line"><a name="l08105"></a><span class="lineno"> 8105</span>&#160;}</div><div class="line"><a name="l08106"></a><span class="lineno"> 8106</span>&#160;</div><div class="line"><a name="l08107"></a><span class="lineno"> 8107</span>&#160;_SOKOL_PRIVATE _sg_pass* _sg_pass_at(<span class="keyword">const</span> _sg_pools* p, uint32_t pass_id)</div><div class="line"><a name="l08108"></a><span class="lineno"> 8108</span>&#160;{</div><div class="line"><a name="l08109"></a><span class="lineno"> 8109</span>&#160;  SOKOL_ASSERT(p &amp;&amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> != pass_id);</div><div class="line"><a name="l08110"></a><span class="lineno"> 8110</span>&#160;  <span class="keywordtype">int</span> slot_index = _sg_slot_index(pass_id);</div><div class="line"><a name="l08111"></a><span class="lineno"> 8111</span>&#160;  SOKOL_ASSERT((slot_index &gt;= 0) &amp;&amp; (slot_index &lt; p-&gt;pass_pool.size));</div><div class="line"><a name="l08112"></a><span class="lineno"> 8112</span>&#160;  <span class="keywordflow">return</span> &amp;p-&gt;passes[slot_index];</div><div class="line"><a name="l08113"></a><span class="lineno"> 8113</span>&#160;}</div><div class="line"><a name="l08114"></a><span class="lineno"> 8114</span>&#160;</div><div class="line"><a name="l08115"></a><span class="lineno"> 8115</span>&#160;_SOKOL_PRIVATE _sg_context* _sg_context_at(<span class="keyword">const</span> _sg_pools* p, uint32_t context_id)</div><div class="line"><a name="l08116"></a><span class="lineno"> 8116</span>&#160;{</div><div class="line"><a name="l08117"></a><span class="lineno"> 8117</span>&#160;  SOKOL_ASSERT(p &amp;&amp; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> != context_id);</div><div class="line"><a name="l08118"></a><span class="lineno"> 8118</span>&#160;  <span class="keywordtype">int</span> slot_index = _sg_slot_index(context_id);</div><div class="line"><a name="l08119"></a><span class="lineno"> 8119</span>&#160;  SOKOL_ASSERT((slot_index &gt;= 0) &amp;&amp; (slot_index &lt; p-&gt;context_pool.size));</div><div class="line"><a name="l08120"></a><span class="lineno"> 8120</span>&#160;  <span class="keywordflow">return</span> &amp;p-&gt;contexts[slot_index];</div><div class="line"><a name="l08121"></a><span class="lineno"> 8121</span>&#160;}</div><div class="line"><a name="l08122"></a><span class="lineno"> 8122</span>&#160;</div><div class="line"><a name="l08123"></a><span class="lineno"> 8123</span>&#160;<span class="comment">/* returns pointer to resource with matching id check, may return 0 */</span></div><div class="line"><a name="l08124"></a><span class="lineno"> 8124</span>&#160;_SOKOL_PRIVATE _sg_buffer* _sg_lookup_buffer(<span class="keyword">const</span> _sg_pools* p, uint32_t buf_id)</div><div class="line"><a name="l08125"></a><span class="lineno"> 8125</span>&#160;{</div><div class="line"><a name="l08126"></a><span class="lineno"> 8126</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> != buf_id) {</div><div class="line"><a name="l08127"></a><span class="lineno"> 8127</span>&#160;    _sg_buffer* buf = _sg_buffer_at(p, buf_id);</div><div class="line"><a name="l08128"></a><span class="lineno"> 8128</span>&#160;    <span class="keywordflow">if</span> (buf-&gt;slot.id == buf_id) {</div><div class="line"><a name="l08129"></a><span class="lineno"> 8129</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#ad8a8baf08bc0399738960c9259571911">buf</a>;</div><div class="line"><a name="l08130"></a><span class="lineno"> 8130</span>&#160;    }</div><div class="line"><a name="l08131"></a><span class="lineno"> 8131</span>&#160;  }</div><div class="line"><a name="l08132"></a><span class="lineno"> 8132</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l08133"></a><span class="lineno"> 8133</span>&#160;}</div><div class="line"><a name="l08134"></a><span class="lineno"> 8134</span>&#160;</div><div class="line"><a name="l08135"></a><span class="lineno"> 8135</span>&#160;_SOKOL_PRIVATE _sg_image* _sg_lookup_image(<span class="keyword">const</span> _sg_pools* p, uint32_t img_id)</div><div class="line"><a name="l08136"></a><span class="lineno"> 8136</span>&#160;{</div><div class="line"><a name="l08137"></a><span class="lineno"> 8137</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> != img_id) {</div><div class="line"><a name="l08138"></a><span class="lineno"> 8138</span>&#160;    _sg_image* img = _sg_image_at(p, img_id);</div><div class="line"><a name="l08139"></a><span class="lineno"> 8139</span>&#160;    <span class="keywordflow">if</span> (img-&gt;slot.id == img_id) {</div><div class="line"><a name="l08140"></a><span class="lineno"> 8140</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a3455aaa12cecc35ac4a42a9bf1273da8">img</a>;</div><div class="line"><a name="l08141"></a><span class="lineno"> 8141</span>&#160;    }</div><div class="line"><a name="l08142"></a><span class="lineno"> 8142</span>&#160;  }</div><div class="line"><a name="l08143"></a><span class="lineno"> 8143</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l08144"></a><span class="lineno"> 8144</span>&#160;}</div><div class="line"><a name="l08145"></a><span class="lineno"> 8145</span>&#160;</div><div class="line"><a name="l08146"></a><span class="lineno"> 8146</span>&#160;_SOKOL_PRIVATE _sg_shader* _sg_lookup_shader(<span class="keyword">const</span> _sg_pools* p, uint32_t shd_id)</div><div class="line"><a name="l08147"></a><span class="lineno"> 8147</span>&#160;{</div><div class="line"><a name="l08148"></a><span class="lineno"> 8148</span>&#160;  SOKOL_ASSERT(p);</div><div class="line"><a name="l08149"></a><span class="lineno"> 8149</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> != shd_id) {</div><div class="line"><a name="l08150"></a><span class="lineno"> 8150</span>&#160;    _sg_shader* shd = _sg_shader_at(p, shd_id);</div><div class="line"><a name="l08151"></a><span class="lineno"> 8151</span>&#160;    <span class="keywordflow">if</span> (shd-&gt;slot.id == shd_id) {</div><div class="line"><a name="l08152"></a><span class="lineno"> 8152</span>&#160;      <span class="keywordflow">return</span> shd;</div><div class="line"><a name="l08153"></a><span class="lineno"> 8153</span>&#160;    }</div><div class="line"><a name="l08154"></a><span class="lineno"> 8154</span>&#160;  }</div><div class="line"><a name="l08155"></a><span class="lineno"> 8155</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l08156"></a><span class="lineno"> 8156</span>&#160;}</div><div class="line"><a name="l08157"></a><span class="lineno"> 8157</span>&#160;</div><div class="line"><a name="l08158"></a><span class="lineno"> 8158</span>&#160;_SOKOL_PRIVATE _sg_pipeline* _sg_lookup_pipeline(<span class="keyword">const</span> _sg_pools* p, uint32_t pip_id)</div><div class="line"><a name="l08159"></a><span class="lineno"> 8159</span>&#160;{</div><div class="line"><a name="l08160"></a><span class="lineno"> 8160</span>&#160;  SOKOL_ASSERT(p);</div><div class="line"><a name="l08161"></a><span class="lineno"> 8161</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> != pip_id) {</div><div class="line"><a name="l08162"></a><span class="lineno"> 8162</span>&#160;    _sg_pipeline* pip = _sg_pipeline_at(p, pip_id);</div><div class="line"><a name="l08163"></a><span class="lineno"> 8163</span>&#160;    <span class="keywordflow">if</span> (pip-&gt;slot.id == pip_id) {</div><div class="line"><a name="l08164"></a><span class="lineno"> 8164</span>&#160;      <span class="keywordflow">return</span> pip;</div><div class="line"><a name="l08165"></a><span class="lineno"> 8165</span>&#160;    }</div><div class="line"><a name="l08166"></a><span class="lineno"> 8166</span>&#160;  }</div><div class="line"><a name="l08167"></a><span class="lineno"> 8167</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l08168"></a><span class="lineno"> 8168</span>&#160;}</div><div class="line"><a name="l08169"></a><span class="lineno"> 8169</span>&#160;</div><div class="line"><a name="l08170"></a><span class="lineno"> 8170</span>&#160;_SOKOL_PRIVATE _sg_pass* _sg_lookup_pass(<span class="keyword">const</span> _sg_pools* p, uint32_t pass_id)</div><div class="line"><a name="l08171"></a><span class="lineno"> 8171</span>&#160;{</div><div class="line"><a name="l08172"></a><span class="lineno"> 8172</span>&#160;  SOKOL_ASSERT(p);</div><div class="line"><a name="l08173"></a><span class="lineno"> 8173</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> != pass_id) {</div><div class="line"><a name="l08174"></a><span class="lineno"> 8174</span>&#160;    _sg_pass* pass = _sg_pass_at(p, pass_id);</div><div class="line"><a name="l08175"></a><span class="lineno"> 8175</span>&#160;    <span class="keywordflow">if</span> (pass-&gt;slot.id == pass_id) {</div><div class="line"><a name="l08176"></a><span class="lineno"> 8176</span>&#160;      <span class="keywordflow">return</span> pass;</div><div class="line"><a name="l08177"></a><span class="lineno"> 8177</span>&#160;    }</div><div class="line"><a name="l08178"></a><span class="lineno"> 8178</span>&#160;  }</div><div class="line"><a name="l08179"></a><span class="lineno"> 8179</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l08180"></a><span class="lineno"> 8180</span>&#160;}</div><div class="line"><a name="l08181"></a><span class="lineno"> 8181</span>&#160;</div><div class="line"><a name="l08182"></a><span class="lineno"> 8182</span>&#160;_SOKOL_PRIVATE _sg_context* _sg_lookup_context(<span class="keyword">const</span> _sg_pools* p, uint32_t ctx_id)</div><div class="line"><a name="l08183"></a><span class="lineno"> 8183</span>&#160;{</div><div class="line"><a name="l08184"></a><span class="lineno"> 8184</span>&#160;  SOKOL_ASSERT(p);</div><div class="line"><a name="l08185"></a><span class="lineno"> 8185</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> != ctx_id) {</div><div class="line"><a name="l08186"></a><span class="lineno"> 8186</span>&#160;    _sg_context* ctx = _sg_context_at(p, ctx_id);</div><div class="line"><a name="l08187"></a><span class="lineno"> 8187</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;slot.id == ctx_id) {</div><div class="line"><a name="l08188"></a><span class="lineno"> 8188</span>&#160;      <span class="keywordflow">return</span> ctx;</div><div class="line"><a name="l08189"></a><span class="lineno"> 8189</span>&#160;    }</div><div class="line"><a name="l08190"></a><span class="lineno"> 8190</span>&#160;  }</div><div class="line"><a name="l08191"></a><span class="lineno"> 8191</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div><div class="line"><a name="l08192"></a><span class="lineno"> 8192</span>&#160;}</div><div class="line"><a name="l08193"></a><span class="lineno"> 8193</span>&#160;</div><div class="line"><a name="l08194"></a><span class="lineno"> 8194</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_destroy_all_resources(_sg_pools* p, uint32_t ctx_id)</div><div class="line"><a name="l08195"></a><span class="lineno"> 8195</span>&#160;{</div><div class="line"><a name="l08196"></a><span class="lineno"> 8196</span>&#160;  <span class="comment">/*  this is a bit dumb since it loops over all pool slots to</span></div><div class="line"><a name="l08197"></a><span class="lineno"> 8197</span>&#160;<span class="comment">        find the occupied slots, on the other hand it is only ever</span></div><div class="line"><a name="l08198"></a><span class="lineno"> 8198</span>&#160;<span class="comment">        executed at shutdown</span></div><div class="line"><a name="l08199"></a><span class="lineno"> 8199</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08200"></a><span class="lineno"> 8200</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; p-&gt;buffer_pool.size; i++) {</div><div class="line"><a name="l08201"></a><span class="lineno"> 8201</span>&#160;    <span class="keywordflow">if</span> (p-&gt;buffers[i].slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l08202"></a><span class="lineno"> 8202</span>&#160;      <span class="keywordflow">if</span> (p-&gt;buffers[i].slot.ctx_id == ctx_id) {</div><div class="line"><a name="l08203"></a><span class="lineno"> 8203</span>&#160;        _sg_destroy_buffer(&amp;p-&gt;buffers[i]);</div><div class="line"><a name="l08204"></a><span class="lineno"> 8204</span>&#160;      }</div><div class="line"><a name="l08205"></a><span class="lineno"> 8205</span>&#160;    }</div><div class="line"><a name="l08206"></a><span class="lineno"> 8206</span>&#160;  }</div><div class="line"><a name="l08207"></a><span class="lineno"> 8207</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; p-&gt;image_pool.size; i++) {</div><div class="line"><a name="l08208"></a><span class="lineno"> 8208</span>&#160;    <span class="keywordflow">if</span> (p-&gt;images[i].slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l08209"></a><span class="lineno"> 8209</span>&#160;      <span class="keywordflow">if</span> (p-&gt;images[i].slot.ctx_id == ctx_id) {</div><div class="line"><a name="l08210"></a><span class="lineno"> 8210</span>&#160;        _sg_destroy_image(&amp;p-&gt;images[i]);</div><div class="line"><a name="l08211"></a><span class="lineno"> 8211</span>&#160;      }</div><div class="line"><a name="l08212"></a><span class="lineno"> 8212</span>&#160;    }</div><div class="line"><a name="l08213"></a><span class="lineno"> 8213</span>&#160;  }</div><div class="line"><a name="l08214"></a><span class="lineno"> 8214</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; p-&gt;shader_pool.size; i++) {</div><div class="line"><a name="l08215"></a><span class="lineno"> 8215</span>&#160;    <span class="keywordflow">if</span> (p-&gt;shaders[i].slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l08216"></a><span class="lineno"> 8216</span>&#160;      <span class="keywordflow">if</span> (p-&gt;shaders[i].slot.ctx_id == ctx_id) {</div><div class="line"><a name="l08217"></a><span class="lineno"> 8217</span>&#160;        _sg_destroy_shader(&amp;p-&gt;shaders[i]);</div><div class="line"><a name="l08218"></a><span class="lineno"> 8218</span>&#160;      }</div><div class="line"><a name="l08219"></a><span class="lineno"> 8219</span>&#160;    }</div><div class="line"><a name="l08220"></a><span class="lineno"> 8220</span>&#160;  }</div><div class="line"><a name="l08221"></a><span class="lineno"> 8221</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; p-&gt;pipeline_pool.size; i++) {</div><div class="line"><a name="l08222"></a><span class="lineno"> 8222</span>&#160;    <span class="keywordflow">if</span> (p-&gt;pipelines[i].slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l08223"></a><span class="lineno"> 8223</span>&#160;      <span class="keywordflow">if</span> (p-&gt;pipelines[i].slot.ctx_id == ctx_id) {</div><div class="line"><a name="l08224"></a><span class="lineno"> 8224</span>&#160;        _sg_destroy_pipeline(&amp;p-&gt;pipelines[i]);</div><div class="line"><a name="l08225"></a><span class="lineno"> 8225</span>&#160;      }</div><div class="line"><a name="l08226"></a><span class="lineno"> 8226</span>&#160;    }</div><div class="line"><a name="l08227"></a><span class="lineno"> 8227</span>&#160;  }</div><div class="line"><a name="l08228"></a><span class="lineno"> 8228</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; p-&gt;pass_pool.size; i++) {</div><div class="line"><a name="l08229"></a><span class="lineno"> 8229</span>&#160;    <span class="keywordflow">if</span> (p-&gt;passes[i].slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l08230"></a><span class="lineno"> 8230</span>&#160;      <span class="keywordflow">if</span> (p-&gt;passes[i].slot.ctx_id == ctx_id) {</div><div class="line"><a name="l08231"></a><span class="lineno"> 8231</span>&#160;        _sg_destroy_pass(&amp;p-&gt;passes[i]);</div><div class="line"><a name="l08232"></a><span class="lineno"> 8232</span>&#160;      }</div><div class="line"><a name="l08233"></a><span class="lineno"> 8233</span>&#160;    }</div><div class="line"><a name="l08234"></a><span class="lineno"> 8234</span>&#160;  }</div><div class="line"><a name="l08235"></a><span class="lineno"> 8235</span>&#160;}</div><div class="line"><a name="l08236"></a><span class="lineno"> 8236</span>&#160;</div><div class="line"><a name="l08237"></a><span class="lineno"> 8237</span>&#160;<span class="comment">/*== VALIDATION LAYER ========================================================*/</span></div><div class="line"><a name="l08238"></a><span class="lineno"> 8238</span>&#160;<span class="preprocessor">#if defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08239"></a><span class="lineno"> 8239</span>&#160;<span class="keyword">typedef</span> <span class="keyword">enum</span> {</div><div class="line"><a name="l08240"></a><span class="lineno"> 8240</span>&#160;  <span class="comment">/* special case &#39;validation was successful&#39; */</span></div><div class="line"><a name="l08241"></a><span class="lineno"> 8241</span>&#160;  _SG_VALIDATE_SUCCESS,</div><div class="line"><a name="l08242"></a><span class="lineno"> 8242</span>&#160;</div><div class="line"><a name="l08243"></a><span class="lineno"> 8243</span>&#160;  <span class="comment">/* buffer creation */</span></div><div class="line"><a name="l08244"></a><span class="lineno"> 8244</span>&#160;  _SG_VALIDATE_BUFFERDESC_CANARY,</div><div class="line"><a name="l08245"></a><span class="lineno"> 8245</span>&#160;  _SG_VALIDATE_BUFFERDESC_SIZE,</div><div class="line"><a name="l08246"></a><span class="lineno"> 8246</span>&#160;  _SG_VALIDATE_BUFFERDESC_CONTENT,</div><div class="line"><a name="l08247"></a><span class="lineno"> 8247</span>&#160;  _SG_VALIDATE_BUFFERDESC_NO_CONTENT,</div><div class="line"><a name="l08248"></a><span class="lineno"> 8248</span>&#160;</div><div class="line"><a name="l08249"></a><span class="lineno"> 8249</span>&#160;  <span class="comment">/* image creation */</span></div><div class="line"><a name="l08250"></a><span class="lineno"> 8250</span>&#160;  _SG_VALIDATE_IMAGEDESC_CANARY,</div><div class="line"><a name="l08251"></a><span class="lineno"> 8251</span>&#160;  _SG_VALIDATE_IMAGEDESC_WIDTH,</div><div class="line"><a name="l08252"></a><span class="lineno"> 8252</span>&#160;  _SG_VALIDATE_IMAGEDESC_HEIGHT,</div><div class="line"><a name="l08253"></a><span class="lineno"> 8253</span>&#160;  _SG_VALIDATE_IMAGEDESC_RT_PIXELFORMAT,</div><div class="line"><a name="l08254"></a><span class="lineno"> 8254</span>&#160;  _SG_VALIDATE_IMAGEDESC_NONRT_PIXELFORMAT,</div><div class="line"><a name="l08255"></a><span class="lineno"> 8255</span>&#160;  _SG_VALIDATE_IMAGEDESC_MSAA_BUT_NO_RT,</div><div class="line"><a name="l08256"></a><span class="lineno"> 8256</span>&#160;  _SG_VALIDATE_IMAGEDESC_NO_MSAA_RT_SUPPORT,</div><div class="line"><a name="l08257"></a><span class="lineno"> 8257</span>&#160;  _SG_VALIDATE_IMAGEDESC_RT_IMMUTABLE,</div><div class="line"><a name="l08258"></a><span class="lineno"> 8258</span>&#160;  _SG_VALIDATE_IMAGEDESC_RT_NO_CONTENT,</div><div class="line"><a name="l08259"></a><span class="lineno"> 8259</span>&#160;  _SG_VALIDATE_IMAGEDESC_CONTENT,</div><div class="line"><a name="l08260"></a><span class="lineno"> 8260</span>&#160;  _SG_VALIDATE_IMAGEDESC_NO_CONTENT,</div><div class="line"><a name="l08261"></a><span class="lineno"> 8261</span>&#160;</div><div class="line"><a name="l08262"></a><span class="lineno"> 8262</span>&#160;  <span class="comment">/* shader creation */</span></div><div class="line"><a name="l08263"></a><span class="lineno"> 8263</span>&#160;  _SG_VALIDATE_SHADERDESC_CANARY,</div><div class="line"><a name="l08264"></a><span class="lineno"> 8264</span>&#160;  _SG_VALIDATE_SHADERDESC_SOURCE,</div><div class="line"><a name="l08265"></a><span class="lineno"> 8265</span>&#160;  _SG_VALIDATE_SHADERDESC_BYTECODE,</div><div class="line"><a name="l08266"></a><span class="lineno"> 8266</span>&#160;  _SG_VALIDATE_SHADERDESC_SOURCE_OR_BYTECODE,</div><div class="line"><a name="l08267"></a><span class="lineno"> 8267</span>&#160;  _SG_VALIDATE_SHADERDESC_NO_BYTECODE_SIZE,</div><div class="line"><a name="l08268"></a><span class="lineno"> 8268</span>&#160;  _SG_VALIDATE_SHADERDESC_NO_CONT_UBS,</div><div class="line"><a name="l08269"></a><span class="lineno"> 8269</span>&#160;  _SG_VALIDATE_SHADERDESC_NO_CONT_IMGS,</div><div class="line"><a name="l08270"></a><span class="lineno"> 8270</span>&#160;  _SG_VALIDATE_SHADERDESC_NO_CONT_UB_MEMBERS,</div><div class="line"><a name="l08271"></a><span class="lineno"> 8271</span>&#160;  _SG_VALIDATE_SHADERDESC_NO_UB_MEMBERS,</div><div class="line"><a name="l08272"></a><span class="lineno"> 8272</span>&#160;  _SG_VALIDATE_SHADERDESC_UB_MEMBER_NAME,</div><div class="line"><a name="l08273"></a><span class="lineno"> 8273</span>&#160;  _SG_VALIDATE_SHADERDESC_UB_SIZE_MISMATCH,</div><div class="line"><a name="l08274"></a><span class="lineno"> 8274</span>&#160;  _SG_VALIDATE_SHADERDESC_IMG_NAME,</div><div class="line"><a name="l08275"></a><span class="lineno"> 8275</span>&#160;</div><div class="line"><a name="l08276"></a><span class="lineno"> 8276</span>&#160;  <span class="comment">/* pipeline creation */</span></div><div class="line"><a name="l08277"></a><span class="lineno"> 8277</span>&#160;  _SG_VALIDATE_PIPELINEDESC_CANARY,</div><div class="line"><a name="l08278"></a><span class="lineno"> 8278</span>&#160;  _SG_VALIDATE_PIPELINEDESC_SHADER,</div><div class="line"><a name="l08279"></a><span class="lineno"> 8279</span>&#160;  _SG_VALIDATE_PIPELINEDESC_NO_ATTRS,</div><div class="line"><a name="l08280"></a><span class="lineno"> 8280</span>&#160;  _SG_VALIDATE_PIPELINEDESC_LAYOUT_STRIDE4,</div><div class="line"><a name="l08281"></a><span class="lineno"> 8281</span>&#160;  _SG_VALIDATE_PIPELINEDESC_ATTR_NAME,</div><div class="line"><a name="l08282"></a><span class="lineno"> 8282</span>&#160;  _SG_VALIDATE_PIPELINEDESC_ATTR_SEMANTICS,</div><div class="line"><a name="l08283"></a><span class="lineno"> 8283</span>&#160;</div><div class="line"><a name="l08284"></a><span class="lineno"> 8284</span>&#160;  <span class="comment">/* pass creation */</span></div><div class="line"><a name="l08285"></a><span class="lineno"> 8285</span>&#160;  _SG_VALIDATE_PASSDESC_CANARY,</div><div class="line"><a name="l08286"></a><span class="lineno"> 8286</span>&#160;  _SG_VALIDATE_PASSDESC_NO_COLOR_ATTS,</div><div class="line"><a name="l08287"></a><span class="lineno"> 8287</span>&#160;  _SG_VALIDATE_PASSDESC_NO_CONT_COLOR_ATTS,</div><div class="line"><a name="l08288"></a><span class="lineno"> 8288</span>&#160;  _SG_VALIDATE_PASSDESC_IMAGE,</div><div class="line"><a name="l08289"></a><span class="lineno"> 8289</span>&#160;  _SG_VALIDATE_PASSDESC_MIPLEVEL,</div><div class="line"><a name="l08290"></a><span class="lineno"> 8290</span>&#160;  _SG_VALIDATE_PASSDESC_FACE,</div><div class="line"><a name="l08291"></a><span class="lineno"> 8291</span>&#160;  _SG_VALIDATE_PASSDESC_LAYER,</div><div class="line"><a name="l08292"></a><span class="lineno"> 8292</span>&#160;  _SG_VALIDATE_PASSDESC_SLICE,</div><div class="line"><a name="l08293"></a><span class="lineno"> 8293</span>&#160;  _SG_VALIDATE_PASSDESC_IMAGE_NO_RT,</div><div class="line"><a name="l08294"></a><span class="lineno"> 8294</span>&#160;  _SG_VALIDATE_PASSDESC_COLOR_PIXELFORMATS,</div><div class="line"><a name="l08295"></a><span class="lineno"> 8295</span>&#160;  _SG_VALIDATE_PASSDESC_COLOR_INV_PIXELFORMAT,</div><div class="line"><a name="l08296"></a><span class="lineno"> 8296</span>&#160;  _SG_VALIDATE_PASSDESC_DEPTH_INV_PIXELFORMAT,</div><div class="line"><a name="l08297"></a><span class="lineno"> 8297</span>&#160;  _SG_VALIDATE_PASSDESC_IMAGE_SIZES,</div><div class="line"><a name="l08298"></a><span class="lineno"> 8298</span>&#160;  _SG_VALIDATE_PASSDESC_IMAGE_SAMPLE_COUNTS,</div><div class="line"><a name="l08299"></a><span class="lineno"> 8299</span>&#160;</div><div class="line"><a name="l08300"></a><span class="lineno"> 8300</span>&#160;  <span class="comment">/* sg_begin_pass validation */</span></div><div class="line"><a name="l08301"></a><span class="lineno"> 8301</span>&#160;  _SG_VALIDATE_BEGINPASS_PASS,</div><div class="line"><a name="l08302"></a><span class="lineno"> 8302</span>&#160;  _SG_VALIDATE_BEGINPASS_IMAGE,</div><div class="line"><a name="l08303"></a><span class="lineno"> 8303</span>&#160;</div><div class="line"><a name="l08304"></a><span class="lineno"> 8304</span>&#160;  <span class="comment">/* sg_apply_draw_state validation */</span></div><div class="line"><a name="l08305"></a><span class="lineno"> 8305</span>&#160;  _SG_VALIDATE_ADS_PIP,</div><div class="line"><a name="l08306"></a><span class="lineno"> 8306</span>&#160;  _SG_VALIDATE_ADS_VBS,</div><div class="line"><a name="l08307"></a><span class="lineno"> 8307</span>&#160;  _SG_VALIDATE_ADS_VB_TYPE,</div><div class="line"><a name="l08308"></a><span class="lineno"> 8308</span>&#160;  _SG_VALIDATE_ADS_NO_IB,</div><div class="line"><a name="l08309"></a><span class="lineno"> 8309</span>&#160;  _SG_VALIDATE_ADS_IB,</div><div class="line"><a name="l08310"></a><span class="lineno"> 8310</span>&#160;  _SG_VALIDATE_ADS_IB_TYPE,</div><div class="line"><a name="l08311"></a><span class="lineno"> 8311</span>&#160;  _SG_VALIDATE_ADS_VS_IMGS,</div><div class="line"><a name="l08312"></a><span class="lineno"> 8312</span>&#160;  _SG_VALIDATE_ADS_VS_IMG_TYPES,</div><div class="line"><a name="l08313"></a><span class="lineno"> 8313</span>&#160;  _SG_VALIDATE_ADS_FS_IMGS,</div><div class="line"><a name="l08314"></a><span class="lineno"> 8314</span>&#160;  _SG_VALIDATE_ADS_FS_IMG_TYPES,</div><div class="line"><a name="l08315"></a><span class="lineno"> 8315</span>&#160;  _SG_VALIDATE_ADS_ATT_COUNT,</div><div class="line"><a name="l08316"></a><span class="lineno"> 8316</span>&#160;  _SG_VALIDATE_ADS_COLOR_FORMAT,</div><div class="line"><a name="l08317"></a><span class="lineno"> 8317</span>&#160;  _SG_VALIDATE_ADS_DEPTH_FORMAT,</div><div class="line"><a name="l08318"></a><span class="lineno"> 8318</span>&#160;  _SG_VALIDATE_ADS_SAMPLE_COUNT,</div><div class="line"><a name="l08319"></a><span class="lineno"> 8319</span>&#160;</div><div class="line"><a name="l08320"></a><span class="lineno"> 8320</span>&#160;  <span class="comment">/* sg_apply_uniform_block validation */</span></div><div class="line"><a name="l08321"></a><span class="lineno"> 8321</span>&#160;  _SG_VALIDATE_AUB_NO_PIPELINE,</div><div class="line"><a name="l08322"></a><span class="lineno"> 8322</span>&#160;  _SG_VALIDATE_AUB_NO_UB_AT_SLOT,</div><div class="line"><a name="l08323"></a><span class="lineno"> 8323</span>&#160;  _SG_VALIDATE_AUB_SIZE,</div><div class="line"><a name="l08324"></a><span class="lineno"> 8324</span>&#160;</div><div class="line"><a name="l08325"></a><span class="lineno"> 8325</span>&#160;  <span class="comment">/* sg_update_buffer validation */</span></div><div class="line"><a name="l08326"></a><span class="lineno"> 8326</span>&#160;  _SG_VALIDATE_UPDBUF_USAGE,</div><div class="line"><a name="l08327"></a><span class="lineno"> 8327</span>&#160;  _SG_VALIDATE_UPDBUF_SIZE,</div><div class="line"><a name="l08328"></a><span class="lineno"> 8328</span>&#160;  _SG_VALIDATE_UPDBUF_ONCE,</div><div class="line"><a name="l08329"></a><span class="lineno"> 8329</span>&#160;</div><div class="line"><a name="l08330"></a><span class="lineno"> 8330</span>&#160;  <span class="comment">/* sg_update_image validation */</span></div><div class="line"><a name="l08331"></a><span class="lineno"> 8331</span>&#160;  _SG_VALIDATE_UPDIMG_USAGE,</div><div class="line"><a name="l08332"></a><span class="lineno"> 8332</span>&#160;  _SG_VALIDATE_UPDIMG_NOTENOUGHDATA,</div><div class="line"><a name="l08333"></a><span class="lineno"> 8333</span>&#160;  _SG_VALIDATE_UPDIMG_SIZE,</div><div class="line"><a name="l08334"></a><span class="lineno"> 8334</span>&#160;  _SG_VALIDATE_UPDIMG_COMPRESSED,</div><div class="line"><a name="l08335"></a><span class="lineno"> 8335</span>&#160;  _SG_VALIDATE_UPDIMG_ONCE</div><div class="line"><a name="l08336"></a><span class="lineno"> 8336</span>&#160;</div><div class="line"><a name="l08337"></a><span class="lineno"> 8337</span>&#160;} _sg_validate_error;</div><div class="line"><a name="l08338"></a><span class="lineno"> 8338</span>&#160;</div><div class="line"><a name="l08339"></a><span class="lineno"> 8339</span>&#160;<span class="comment">/* return a human readable string for an _sg_validate_error */</span></div><div class="line"><a name="l08340"></a><span class="lineno"> 8340</span>&#160;_SOKOL_PRIVATE <span class="keyword">const</span> <span class="keywordtype">char</span>* _sg_validate_string(_sg_validate_error err)</div><div class="line"><a name="l08341"></a><span class="lineno"> 8341</span>&#160;{</div><div class="line"><a name="l08342"></a><span class="lineno"> 8342</span>&#160;  <span class="keywordflow">switch</span> (err) {</div><div class="line"><a name="l08343"></a><span class="lineno"> 8343</span>&#160;    <span class="comment">/* buffer creation validation errors */</span></div><div class="line"><a name="l08344"></a><span class="lineno"> 8344</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_BUFFERDESC_CANARY:</div><div class="line"><a name="l08345"></a><span class="lineno"> 8345</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_buffer_desc not initialized&quot;</span>;</div><div class="line"><a name="l08346"></a><span class="lineno"> 8346</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_BUFFERDESC_SIZE:</div><div class="line"><a name="l08347"></a><span class="lineno"> 8347</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_buffer_desc.size cannot be 0&quot;</span>;</div><div class="line"><a name="l08348"></a><span class="lineno"> 8348</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_BUFFERDESC_CONTENT:</div><div class="line"><a name="l08349"></a><span class="lineno"> 8349</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;immutable buffers must be initialized with content (sg_buffer_desc.content)&quot;</span>;</div><div class="line"><a name="l08350"></a><span class="lineno"> 8350</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_BUFFERDESC_NO_CONTENT:</div><div class="line"><a name="l08351"></a><span class="lineno"> 8351</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;dynamic/stream usage buffers cannot be initialized with content&quot;</span>;</div><div class="line"><a name="l08352"></a><span class="lineno"> 8352</span>&#160;</div><div class="line"><a name="l08353"></a><span class="lineno"> 8353</span>&#160;    <span class="comment">/* image creation validation errros */</span></div><div class="line"><a name="l08354"></a><span class="lineno"> 8354</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_IMAGEDESC_CANARY:</div><div class="line"><a name="l08355"></a><span class="lineno"> 8355</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_image_desc not initialized&quot;</span>;</div><div class="line"><a name="l08356"></a><span class="lineno"> 8356</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_IMAGEDESC_WIDTH:</div><div class="line"><a name="l08357"></a><span class="lineno"> 8357</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_image_desc.width must be &gt; 0&quot;</span>;</div><div class="line"><a name="l08358"></a><span class="lineno"> 8358</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_IMAGEDESC_HEIGHT:</div><div class="line"><a name="l08359"></a><span class="lineno"> 8359</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_image_desc.height must be &gt; 0&quot;</span>;</div><div class="line"><a name="l08360"></a><span class="lineno"> 8360</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_IMAGEDESC_RT_PIXELFORMAT:</div><div class="line"><a name="l08361"></a><span class="lineno"> 8361</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;invalid pixel format for render-target image&quot;</span>;</div><div class="line"><a name="l08362"></a><span class="lineno"> 8362</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_IMAGEDESC_NONRT_PIXELFORMAT:</div><div class="line"><a name="l08363"></a><span class="lineno"> 8363</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;invalid pixel format for non-render-target image&quot;</span>;</div><div class="line"><a name="l08364"></a><span class="lineno"> 8364</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_IMAGEDESC_MSAA_BUT_NO_RT:</div><div class="line"><a name="l08365"></a><span class="lineno"> 8365</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;non-render-target images cannot be multisampled&quot;</span>;</div><div class="line"><a name="l08366"></a><span class="lineno"> 8366</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_IMAGEDESC_NO_MSAA_RT_SUPPORT:</div><div class="line"><a name="l08367"></a><span class="lineno"> 8367</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;MSAA render targets not supported (SG_FEATURE_MSAA_RENDER_TARGETS)&quot;</span>;</div><div class="line"><a name="l08368"></a><span class="lineno"> 8368</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_IMAGEDESC_RT_IMMUTABLE:</div><div class="line"><a name="l08369"></a><span class="lineno"> 8369</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;render target images must be SG_USAGE_IMMUTABLE&quot;</span>;</div><div class="line"><a name="l08370"></a><span class="lineno"> 8370</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_IMAGEDESC_RT_NO_CONTENT:</div><div class="line"><a name="l08371"></a><span class="lineno"> 8371</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;render target images cannot be initialized with content&quot;</span>;</div><div class="line"><a name="l08372"></a><span class="lineno"> 8372</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_IMAGEDESC_CONTENT:</div><div class="line"><a name="l08373"></a><span class="lineno"> 8373</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;missing or invalid content for immutable image&quot;</span>;</div><div class="line"><a name="l08374"></a><span class="lineno"> 8374</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_IMAGEDESC_NO_CONTENT:</div><div class="line"><a name="l08375"></a><span class="lineno"> 8375</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;dynamic/stream usage images cannot be initialized with content&quot;</span>;</div><div class="line"><a name="l08376"></a><span class="lineno"> 8376</span>&#160;</div><div class="line"><a name="l08377"></a><span class="lineno"> 8377</span>&#160;    <span class="comment">/* shader creation */</span></div><div class="line"><a name="l08378"></a><span class="lineno"> 8378</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_SHADERDESC_CANARY:</div><div class="line"><a name="l08379"></a><span class="lineno"> 8379</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_shader_desc not initialized&quot;</span>;</div><div class="line"><a name="l08380"></a><span class="lineno"> 8380</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_SHADERDESC_SOURCE:</div><div class="line"><a name="l08381"></a><span class="lineno"> 8381</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;shader source code required&quot;</span>;</div><div class="line"><a name="l08382"></a><span class="lineno"> 8382</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_SHADERDESC_BYTECODE:</div><div class="line"><a name="l08383"></a><span class="lineno"> 8383</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;shader byte code required&quot;</span>;</div><div class="line"><a name="l08384"></a><span class="lineno"> 8384</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_SHADERDESC_SOURCE_OR_BYTECODE:</div><div class="line"><a name="l08385"></a><span class="lineno"> 8385</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;shader source or byte code required&quot;</span>;</div><div class="line"><a name="l08386"></a><span class="lineno"> 8386</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_SHADERDESC_NO_BYTECODE_SIZE:</div><div class="line"><a name="l08387"></a><span class="lineno"> 8387</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;shader byte code length (in bytes) required&quot;</span>;</div><div class="line"><a name="l08388"></a><span class="lineno"> 8388</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_SHADERDESC_NO_CONT_UBS:</div><div class="line"><a name="l08389"></a><span class="lineno"> 8389</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;shader uniform blocks must occupy continuous slots&quot;</span>;</div><div class="line"><a name="l08390"></a><span class="lineno"> 8390</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_SHADERDESC_NO_CONT_UB_MEMBERS:</div><div class="line"><a name="l08391"></a><span class="lineno"> 8391</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;uniform block members must occupy continuous slots&quot;</span>;</div><div class="line"><a name="l08392"></a><span class="lineno"> 8392</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_SHADERDESC_NO_UB_MEMBERS:</div><div class="line"><a name="l08393"></a><span class="lineno"> 8393</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;GL backend requires uniform block member declarations&quot;</span>;</div><div class="line"><a name="l08394"></a><span class="lineno"> 8394</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_SHADERDESC_UB_MEMBER_NAME:</div><div class="line"><a name="l08395"></a><span class="lineno"> 8395</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;uniform block member name missing&quot;</span>;</div><div class="line"><a name="l08396"></a><span class="lineno"> 8396</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_SHADERDESC_UB_SIZE_MISMATCH:</div><div class="line"><a name="l08397"></a><span class="lineno"> 8397</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;size of uniform block members doesn&#39;t match uniform block size&quot;</span>;</div><div class="line"><a name="l08398"></a><span class="lineno"> 8398</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_SHADERDESC_NO_CONT_IMGS:</div><div class="line"><a name="l08399"></a><span class="lineno"> 8399</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;shader images must occupy continuous slots&quot;</span>;</div><div class="line"><a name="l08400"></a><span class="lineno"> 8400</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_SHADERDESC_IMG_NAME:</div><div class="line"><a name="l08401"></a><span class="lineno"> 8401</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;GL backend requires uniform block member names&quot;</span>;</div><div class="line"><a name="l08402"></a><span class="lineno"> 8402</span>&#160;</div><div class="line"><a name="l08403"></a><span class="lineno"> 8403</span>&#160;    <span class="comment">/* pipeline creation */</span></div><div class="line"><a name="l08404"></a><span class="lineno"> 8404</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PIPELINEDESC_CANARY:</div><div class="line"><a name="l08405"></a><span class="lineno"> 8405</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_pipeline_desc not initialized&quot;</span>;</div><div class="line"><a name="l08406"></a><span class="lineno"> 8406</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PIPELINEDESC_SHADER:</div><div class="line"><a name="l08407"></a><span class="lineno"> 8407</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_pipeline_desc.shader missing or invalid&quot;</span>;</div><div class="line"><a name="l08408"></a><span class="lineno"> 8408</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PIPELINEDESC_NO_ATTRS:</div><div class="line"><a name="l08409"></a><span class="lineno"> 8409</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_pipeline_desc.layout.attrs is empty or not continuous&quot;</span>;</div><div class="line"><a name="l08410"></a><span class="lineno"> 8410</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PIPELINEDESC_LAYOUT_STRIDE4:</div><div class="line"><a name="l08411"></a><span class="lineno"> 8411</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_pipeline_desc.layout.buffers[].stride must be multiple of 4&quot;</span>;</div><div class="line"><a name="l08412"></a><span class="lineno"> 8412</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PIPELINEDESC_ATTR_NAME:</div><div class="line"><a name="l08413"></a><span class="lineno"> 8413</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;GLES2/WebGL vertex layouts must have attribute names&quot;</span>;</div><div class="line"><a name="l08414"></a><span class="lineno"> 8414</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PIPELINEDESC_ATTR_SEMANTICS:</div><div class="line"><a name="l08415"></a><span class="lineno"> 8415</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;D3D11 vertex layouts must have attribute semantics (sem_name and sem_index)&quot;</span>;</div><div class="line"><a name="l08416"></a><span class="lineno"> 8416</span>&#160;</div><div class="line"><a name="l08417"></a><span class="lineno"> 8417</span>&#160;    <span class="comment">/* pass creation */</span></div><div class="line"><a name="l08418"></a><span class="lineno"> 8418</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_CANARY:</div><div class="line"><a name="l08419"></a><span class="lineno"> 8419</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_pass_desc not initialized&quot;</span>;</div><div class="line"><a name="l08420"></a><span class="lineno"> 8420</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_NO_COLOR_ATTS:</div><div class="line"><a name="l08421"></a><span class="lineno"> 8421</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_pass_desc.color_attachments[0] must be valid&quot;</span>;</div><div class="line"><a name="l08422"></a><span class="lineno"> 8422</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_NO_CONT_COLOR_ATTS:</div><div class="line"><a name="l08423"></a><span class="lineno"> 8423</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;color attachments must occupy continuous slots&quot;</span>;</div><div class="line"><a name="l08424"></a><span class="lineno"> 8424</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_IMAGE:</div><div class="line"><a name="l08425"></a><span class="lineno"> 8425</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;pass attachment image is not valid&quot;</span>;</div><div class="line"><a name="l08426"></a><span class="lineno"> 8426</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_MIPLEVEL:</div><div class="line"><a name="l08427"></a><span class="lineno"> 8427</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;pass attachment mip level is bigger than image has mipmaps&quot;</span>;</div><div class="line"><a name="l08428"></a><span class="lineno"> 8428</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_FACE:</div><div class="line"><a name="l08429"></a><span class="lineno"> 8429</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;pass attachment image is cubemap, but face index is too big&quot;</span>;</div><div class="line"><a name="l08430"></a><span class="lineno"> 8430</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_LAYER:</div><div class="line"><a name="l08431"></a><span class="lineno"> 8431</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;pass attachment image is array texture, but layer index is too big&quot;</span>;</div><div class="line"><a name="l08432"></a><span class="lineno"> 8432</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_SLICE:</div><div class="line"><a name="l08433"></a><span class="lineno"> 8433</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;pass attachment image is 3d texture, but slice value is too big&quot;</span>;</div><div class="line"><a name="l08434"></a><span class="lineno"> 8434</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_IMAGE_NO_RT:</div><div class="line"><a name="l08435"></a><span class="lineno"> 8435</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;pass attachment image must be render targets&quot;</span>;</div><div class="line"><a name="l08436"></a><span class="lineno"> 8436</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_COLOR_PIXELFORMATS:</div><div class="line"><a name="l08437"></a><span class="lineno"> 8437</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;all pass color attachment images must have the same pixel format&quot;</span>;</div><div class="line"><a name="l08438"></a><span class="lineno"> 8438</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_COLOR_INV_PIXELFORMAT:</div><div class="line"><a name="l08439"></a><span class="lineno"> 8439</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;pass color-attachment images must have a renderable pixel format&quot;</span>;</div><div class="line"><a name="l08440"></a><span class="lineno"> 8440</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_DEPTH_INV_PIXELFORMAT:</div><div class="line"><a name="l08441"></a><span class="lineno"> 8441</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;pass depth-attachment image must have depth pixel format&quot;</span>;</div><div class="line"><a name="l08442"></a><span class="lineno"> 8442</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_IMAGE_SIZES:</div><div class="line"><a name="l08443"></a><span class="lineno"> 8443</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;all pass attachments must have the same size&quot;</span>;</div><div class="line"><a name="l08444"></a><span class="lineno"> 8444</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_PASSDESC_IMAGE_SAMPLE_COUNTS:</div><div class="line"><a name="l08445"></a><span class="lineno"> 8445</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;all pass attachments must have the same sample count&quot;</span>;</div><div class="line"><a name="l08446"></a><span class="lineno"> 8446</span>&#160;</div><div class="line"><a name="l08447"></a><span class="lineno"> 8447</span>&#160;    <span class="comment">/* sg_begin_pass */</span></div><div class="line"><a name="l08448"></a><span class="lineno"> 8448</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_BEGINPASS_PASS:</div><div class="line"><a name="l08449"></a><span class="lineno"> 8449</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_begin_pass: pass must be valid&quot;</span>;</div><div class="line"><a name="l08450"></a><span class="lineno"> 8450</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_BEGINPASS_IMAGE:</div><div class="line"><a name="l08451"></a><span class="lineno"> 8451</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_begin_pass: one or more attachment images are not valid&quot;</span>;</div><div class="line"><a name="l08452"></a><span class="lineno"> 8452</span>&#160;</div><div class="line"><a name="l08453"></a><span class="lineno"> 8453</span>&#160;    <span class="comment">/* sg_apply_draw_state */</span></div><div class="line"><a name="l08454"></a><span class="lineno"> 8454</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_PIP:</div><div class="line"><a name="l08455"></a><span class="lineno"> 8455</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: pipeline object required&quot;</span>;</div><div class="line"><a name="l08456"></a><span class="lineno"> 8456</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_VBS:</div><div class="line"><a name="l08457"></a><span class="lineno"> 8457</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: number of vertex buffers doesn&#39;t match number of pipeline vertex layouts&quot;</span>;</div><div class="line"><a name="l08458"></a><span class="lineno"> 8458</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_VB_TYPE:</div><div class="line"><a name="l08459"></a><span class="lineno"> 8459</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: buffer in vertex buffer slot is not a SG_BUFFERTYPE_VERTEXBUFFER&quot;</span>;</div><div class="line"><a name="l08460"></a><span class="lineno"> 8460</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_NO_IB:</div><div class="line"><a name="l08461"></a><span class="lineno"> 8461</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: pipeline object defines indexed rendering, but no index buffer provided&quot;</span>;</div><div class="line"><a name="l08462"></a><span class="lineno"> 8462</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_IB:</div><div class="line"><a name="l08463"></a><span class="lineno"> 8463</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: pipeline object defines non-indexed rendering, but index buffer provided&quot;</span>;</div><div class="line"><a name="l08464"></a><span class="lineno"> 8464</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_IB_TYPE:</div><div class="line"><a name="l08465"></a><span class="lineno"> 8465</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: buffer in index buffer slot is not a SG_BUFFERTYPE_INDEXBUFFER&quot;</span>;</div><div class="line"><a name="l08466"></a><span class="lineno"> 8466</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_VS_IMGS:</div><div class="line"><a name="l08467"></a><span class="lineno"> 8467</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: vertex shader image count doesn&#39;t match sg_shader_desc&quot;</span>;</div><div class="line"><a name="l08468"></a><span class="lineno"> 8468</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_VS_IMG_TYPES:</div><div class="line"><a name="l08469"></a><span class="lineno"> 8469</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: one or more vertex shader image types don&#39;t match sg_shader_desc&quot;</span>;</div><div class="line"><a name="l08470"></a><span class="lineno"> 8470</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_FS_IMGS:</div><div class="line"><a name="l08471"></a><span class="lineno"> 8471</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: fragment shader image count doesn&#39;t match sg_shader_desc&quot;</span>;</div><div class="line"><a name="l08472"></a><span class="lineno"> 8472</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_FS_IMG_TYPES:</div><div class="line"><a name="l08473"></a><span class="lineno"> 8473</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: one or more fragment shader image types don&#39;t match sg_shader_desc&quot;</span>;</div><div class="line"><a name="l08474"></a><span class="lineno"> 8474</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_ATT_COUNT:</div><div class="line"><a name="l08475"></a><span class="lineno"> 8475</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: color_attachment_count in pipeline doesn&#39;t match number of pass color attachments&quot;</span>;</div><div class="line"><a name="l08476"></a><span class="lineno"> 8476</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_COLOR_FORMAT:</div><div class="line"><a name="l08477"></a><span class="lineno"> 8477</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: color_format in pipeline doesn&#39;t match pass color attachment pixel format&quot;</span>;</div><div class="line"><a name="l08478"></a><span class="lineno"> 8478</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_DEPTH_FORMAT:</div><div class="line"><a name="l08479"></a><span class="lineno"> 8479</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: depth_format in pipeline doesn&#39;t match pass depth attachment pixel format&quot;</span>;</div><div class="line"><a name="l08480"></a><span class="lineno"> 8480</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_ADS_SAMPLE_COUNT:</div><div class="line"><a name="l08481"></a><span class="lineno"> 8481</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_draw_state: MSAA sample count in pipeline doesn&#39;t match render pass attachment sample count&quot;</span>;</div><div class="line"><a name="l08482"></a><span class="lineno"> 8482</span>&#160;</div><div class="line"><a name="l08483"></a><span class="lineno"> 8483</span>&#160;    <span class="comment">/* sg_apply_uniform_block */</span></div><div class="line"><a name="l08484"></a><span class="lineno"> 8484</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_AUB_NO_PIPELINE:</div><div class="line"><a name="l08485"></a><span class="lineno"> 8485</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_uniform_block: must be called after sg_apply_draw_state()&quot;</span>;</div><div class="line"><a name="l08486"></a><span class="lineno"> 8486</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_AUB_NO_UB_AT_SLOT:</div><div class="line"><a name="l08487"></a><span class="lineno"> 8487</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_uniform_block: no uniform block declaration at this shader stage UB slot&quot;</span>;</div><div class="line"><a name="l08488"></a><span class="lineno"> 8488</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_AUB_SIZE:</div><div class="line"><a name="l08489"></a><span class="lineno"> 8489</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_apply_uniform_block: data size exceeds declared uniform block size&quot;</span>;</div><div class="line"><a name="l08490"></a><span class="lineno"> 8490</span>&#160;</div><div class="line"><a name="l08491"></a><span class="lineno"> 8491</span>&#160;    <span class="comment">/* sg_update_buffer */</span></div><div class="line"><a name="l08492"></a><span class="lineno"> 8492</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_UPDBUF_USAGE:</div><div class="line"><a name="l08493"></a><span class="lineno"> 8493</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_update_buffer: cannot update immutable buffer&quot;</span>;</div><div class="line"><a name="l08494"></a><span class="lineno"> 8494</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_UPDBUF_SIZE:</div><div class="line"><a name="l08495"></a><span class="lineno"> 8495</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_update_buffer: update size is bigger than buffer size&quot;</span>;</div><div class="line"><a name="l08496"></a><span class="lineno"> 8496</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_UPDBUF_ONCE:</div><div class="line"><a name="l08497"></a><span class="lineno"> 8497</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_update_buffer: only one update allowed per buffer and frame&quot;</span>;</div><div class="line"><a name="l08498"></a><span class="lineno"> 8498</span>&#160;</div><div class="line"><a name="l08499"></a><span class="lineno"> 8499</span>&#160;    <span class="comment">/* sg_update_image */</span></div><div class="line"><a name="l08500"></a><span class="lineno"> 8500</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_UPDIMG_USAGE:</div><div class="line"><a name="l08501"></a><span class="lineno"> 8501</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_update_image: cannot update immutable image&quot;</span>;</div><div class="line"><a name="l08502"></a><span class="lineno"> 8502</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_UPDIMG_NOTENOUGHDATA:</div><div class="line"><a name="l08503"></a><span class="lineno"> 8503</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_update_image: not enough subimage data provided&quot;</span>;</div><div class="line"><a name="l08504"></a><span class="lineno"> 8504</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_UPDIMG_SIZE:</div><div class="line"><a name="l08505"></a><span class="lineno"> 8505</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_update_image: provided subimage data size too big&quot;</span>;</div><div class="line"><a name="l08506"></a><span class="lineno"> 8506</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_UPDIMG_COMPRESSED:</div><div class="line"><a name="l08507"></a><span class="lineno"> 8507</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_update_image: cannot update images with compressed format&quot;</span>;</div><div class="line"><a name="l08508"></a><span class="lineno"> 8508</span>&#160;    <span class="keywordflow">case</span> _SG_VALIDATE_UPDIMG_ONCE:</div><div class="line"><a name="l08509"></a><span class="lineno"> 8509</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;sg_update_image: only one update allowed per image and frame&quot;</span>;</div><div class="line"><a name="l08510"></a><span class="lineno"> 8510</span>&#160;</div><div class="line"><a name="l08511"></a><span class="lineno"> 8511</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l08512"></a><span class="lineno"> 8512</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;unknown validation error&quot;</span>;</div><div class="line"><a name="l08513"></a><span class="lineno"> 8513</span>&#160;  }</div><div class="line"><a name="l08514"></a><span class="lineno"> 8514</span>&#160;}</div><div class="line"><a name="l08515"></a><span class="lineno"> 8515</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* defined(SOKOL_DEBUG) */</span><span class="preprocessor"></span></div><div class="line"><a name="l08516"></a><span class="lineno"> 8516</span>&#160;</div><div class="line"><a name="l08517"></a><span class="lineno"> 8517</span>&#160;<span class="comment">/*-- generic backend state ---------------------------------------------------*/</span></div><div class="line"><a name="l08518"></a><span class="lineno"> 8518</span>&#160;<span class="keyword">typedef</span> <span class="keyword">struct </span>{</div><div class="line"><a name="l08519"></a><span class="lineno"> 8519</span>&#160;  _sg_pools pools;</div><div class="line"><a name="l08520"></a><span class="lineno"> 8520</span>&#160;  <span class="keywordtype">bool</span> valid;</div><div class="line"><a name="l08521"></a><span class="lineno"> 8521</span>&#160;  uint32_t frame_index;</div><div class="line"><a name="l08522"></a><span class="lineno"> 8522</span>&#160;  <a class="code" href="../../d2/d13/structsg__context.html">sg_context</a> active_context;</div><div class="line"><a name="l08523"></a><span class="lineno"> 8523</span>&#160;  <a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> cur_pass;</div><div class="line"><a name="l08524"></a><span class="lineno"> 8524</span>&#160;  <a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> cur_pipeline;</div><div class="line"><a name="l08525"></a><span class="lineno"> 8525</span>&#160;  <span class="keywordtype">bool</span> pass_valid;</div><div class="line"><a name="l08526"></a><span class="lineno"> 8526</span>&#160;  <span class="keywordtype">bool</span> next_draw_valid;</div><div class="line"><a name="l08527"></a><span class="lineno"> 8527</span>&#160;<span class="preprocessor">#if defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08528"></a><span class="lineno"> 8528</span>&#160;  _sg_validate_error validate_error;</div><div class="line"><a name="l08529"></a><span class="lineno"> 8529</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08530"></a><span class="lineno"> 8530</span>&#160;} _sg_state;</div><div class="line"><a name="l08531"></a><span class="lineno"> 8531</span>&#160;<span class="keyword">static</span> _sg_state _sg;</div><div class="line"><a name="l08532"></a><span class="lineno"> 8532</span>&#160;</div><div class="line"><a name="l08533"></a><span class="lineno"> 8533</span>&#160;<span class="comment">/*-- validation checks -------------------------------------------------------*/</span></div><div class="line"><a name="l08534"></a><span class="lineno"> 8534</span>&#160;<span class="preprocessor">#if defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08535"></a><span class="lineno"> 8535</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_validate_begin()</div><div class="line"><a name="l08536"></a><span class="lineno"> 8536</span>&#160;{</div><div class="line"><a name="l08537"></a><span class="lineno"> 8537</span>&#160;  _sg.validate_error = _SG_VALIDATE_SUCCESS;</div><div class="line"><a name="l08538"></a><span class="lineno"> 8538</span>&#160;}</div><div class="line"><a name="l08539"></a><span class="lineno"> 8539</span>&#160;</div><div class="line"><a name="l08540"></a><span class="lineno"> 8540</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">void</span> _sg_validate(<span class="keywordtype">bool</span> cond, _sg_validate_error err)</div><div class="line"><a name="l08541"></a><span class="lineno"> 8541</span>&#160;{</div><div class="line"><a name="l08542"></a><span class="lineno"> 8542</span>&#160;  <span class="keywordflow">if</span> (!cond) {</div><div class="line"><a name="l08543"></a><span class="lineno"> 8543</span>&#160;    _sg.validate_error = err;</div><div class="line"><a name="l08544"></a><span class="lineno"> 8544</span>&#160;    SOKOL_LOG(_sg_validate_string(err));</div><div class="line"><a name="l08545"></a><span class="lineno"> 8545</span>&#160;  }</div><div class="line"><a name="l08546"></a><span class="lineno"> 8546</span>&#160;}</div><div class="line"><a name="l08547"></a><span class="lineno"> 8547</span>&#160;</div><div class="line"><a name="l08548"></a><span class="lineno"> 8548</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_validate_end()</div><div class="line"><a name="l08549"></a><span class="lineno"> 8549</span>&#160;{</div><div class="line"><a name="l08550"></a><span class="lineno"> 8550</span>&#160;  <span class="keywordflow">if</span> (_sg.validate_error != _SG_VALIDATE_SUCCESS) {</div><div class="line"><a name="l08551"></a><span class="lineno"> 8551</span>&#160;<span class="preprocessor">#if !defined(SOKOL_VALIDATE_NON_FATAL)</span></div><div class="line"><a name="l08552"></a><span class="lineno"> 8552</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;^^^^  VALIDATION FAILED, TERMINATING ^^^^&quot;</span>);</div><div class="line"><a name="l08553"></a><span class="lineno"> 8553</span>&#160;    SOKOL_ASSERT(<span class="keyword">false</span>);</div><div class="line"><a name="l08554"></a><span class="lineno"> 8554</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08555"></a><span class="lineno"> 8555</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l08556"></a><span class="lineno"> 8556</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08557"></a><span class="lineno"> 8557</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l08558"></a><span class="lineno"> 8558</span>&#160;  }</div><div class="line"><a name="l08559"></a><span class="lineno"> 8559</span>&#160;}</div><div class="line"><a name="l08560"></a><span class="lineno"> 8560</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08561"></a><span class="lineno"> 8561</span>&#160;</div><div class="line"><a name="l08562"></a><span class="lineno"> 8562</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_validate_buffer_desc(<span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__buffer__desc.html">sg_buffer_desc</a>* desc)</div><div class="line"><a name="l08563"></a><span class="lineno"> 8563</span>&#160;{</div><div class="line"><a name="l08564"></a><span class="lineno"> 8564</span>&#160;<span class="preprocessor">#if !defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08565"></a><span class="lineno"> 8565</span>&#160;  _SOKOL_UNUSED(desc);</div><div class="line"><a name="l08566"></a><span class="lineno"> 8566</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l08567"></a><span class="lineno"> 8567</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l08568"></a><span class="lineno"> 8568</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l08569"></a><span class="lineno"> 8569</span>&#160;  SOKOL_VALIDATE_BEGIN();</div><div class="line"><a name="l08570"></a><span class="lineno"> 8570</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#aba112cb79e353714cdac9aa411db481b">_start_canary</a> == 0, _SG_VALIDATE_BUFFERDESC_CANARY);</div><div class="line"><a name="l08571"></a><span class="lineno"> 8571</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#ae9fc3e2cb0fc7c169ef3fdde5ef66c80">_end_canary</a> == 0, _SG_VALIDATE_BUFFERDESC_CANARY);</div><div class="line"><a name="l08572"></a><span class="lineno"> 8572</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a73cd8286ef49470f30f83c2118d2136d">size</a> &gt; 0, _SG_VALIDATE_BUFFERDESC_SIZE);</div><div class="line"><a name="l08573"></a><span class="lineno"> 8573</span>&#160;  <span class="keywordtype">bool</span> ext = (0 != desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#aaaa91111849a07716f2d9e840fa17c6e">gl_buffers</a>[0]) || (0 != desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#ad4f2b240c65b7ee8d8b2fa39208cb9a5">mtl_buffers</a>[0]) || (0 != desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a1b3954477f336313d9a5a1c989cabce4">d3d11_buffer</a>);</div><div class="line"><a name="l08574"></a><span class="lineno"> 8574</span>&#160;  <span class="keywordflow">if</span> (!ext &amp;&amp; (_sg_def(desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a3fa569faec49b1252c05dd1210a85b10">usage</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>) == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>)) {</div><div class="line"><a name="l08575"></a><span class="lineno"> 8575</span>&#160;    SOKOL_VALIDATE(0 != desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a409e6cb69174e210981627d0a356bf65">content</a>, _SG_VALIDATE_BUFFERDESC_CONTENT);</div><div class="line"><a name="l08576"></a><span class="lineno"> 8576</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08577"></a><span class="lineno"> 8577</span>&#160;    SOKOL_VALIDATE(0 == desc-&gt;<a class="code" href="../../d6/d2c/structsg__buffer__desc.html#a409e6cb69174e210981627d0a356bf65">content</a>, _SG_VALIDATE_BUFFERDESC_NO_CONTENT);</div><div class="line"><a name="l08578"></a><span class="lineno"> 8578</span>&#160;  }</div><div class="line"><a name="l08579"></a><span class="lineno"> 8579</span>&#160;  <span class="keywordflow">return</span> SOKOL_VALIDATE_END();</div><div class="line"><a name="l08580"></a><span class="lineno"> 8580</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08581"></a><span class="lineno"> 8581</span>&#160;}</div><div class="line"><a name="l08582"></a><span class="lineno"> 8582</span>&#160;</div><div class="line"><a name="l08583"></a><span class="lineno"> 8583</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_validate_image_desc(<span class="keyword">const</span> <a class="code" href="../../d4/d94/structsg__image__desc.html">sg_image_desc</a>* desc)</div><div class="line"><a name="l08584"></a><span class="lineno"> 8584</span>&#160;{</div><div class="line"><a name="l08585"></a><span class="lineno"> 8585</span>&#160;<span class="preprocessor">#if !defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08586"></a><span class="lineno"> 8586</span>&#160;  _SOKOL_UNUSED(desc);</div><div class="line"><a name="l08587"></a><span class="lineno"> 8587</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l08588"></a><span class="lineno"> 8588</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l08589"></a><span class="lineno"> 8589</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l08590"></a><span class="lineno"> 8590</span>&#160;  SOKOL_VALIDATE_BEGIN();</div><div class="line"><a name="l08591"></a><span class="lineno"> 8591</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a7710b99d8f762ca5d3427aec45476ac8">_start_canary</a> == 0, _SG_VALIDATE_IMAGEDESC_CANARY);</div><div class="line"><a name="l08592"></a><span class="lineno"> 8592</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a228daac3459d79ef70db9c3f77b1d987">_end_canary</a> == 0, _SG_VALIDATE_IMAGEDESC_CANARY);</div><div class="line"><a name="l08593"></a><span class="lineno"> 8593</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a2852616fac46bf1d405b822ac612e94a">width</a> &gt; 0, _SG_VALIDATE_IMAGEDESC_WIDTH);</div><div class="line"><a name="l08594"></a><span class="lineno"> 8594</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a80175365c540f912492e50a5a8b362e7">height</a> &gt; 0, _SG_VALIDATE_IMAGEDESC_HEIGHT);</div><div class="line"><a name="l08595"></a><span class="lineno"> 8595</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> fmt = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a07ce05ddf423b45fb74375b384dc1f14">pixel_format</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>);</div><div class="line"><a name="l08596"></a><span class="lineno"> 8596</span>&#160;  <span class="keyword">const</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#afb85c5d9b1bce96aa3b530d581194d1a">usage</a> = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a4610a2c95a3f97c99390ec4e08caa1ca">usage</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>);</div><div class="line"><a name="l08597"></a><span class="lineno"> 8597</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">bool</span> ext = (0 != desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a099e099707ea148ef97aa81c526086bf">gl_textures</a>[0]) || (0 != desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#acaa521ee4257b203252d89c0f4d299a9">mtl_textures</a>[0]) || (0 != desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a47068f539f908275b14356da7666c869">d3d11_texture</a>);</div><div class="line"><a name="l08598"></a><span class="lineno"> 8598</span>&#160;  <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#aeb5ea1efacf1fcbe702491bd6417df70">render_target</a>) {</div><div class="line"><a name="l08599"></a><span class="lineno"> 8599</span>&#160;    <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a7e0d5c7130c32b489e509a6bcfd9904a">sample_count</a> &gt; 1) {</div><div class="line"><a name="l08600"></a><span class="lineno"> 8600</span>&#160;      SOKOL_VALIDATE(_sg_query_feature(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a900e4644906ceec168a2ce44452e1a31">SG_FEATURE_MSAA_RENDER_TARGETS</a>), _SG_VALIDATE_IMAGEDESC_NO_MSAA_RT_SUPPORT);</div><div class="line"><a name="l08601"></a><span class="lineno"> 8601</span>&#160;    }</div><div class="line"><a name="l08602"></a><span class="lineno"> 8602</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> valid_color_fmt = _sg_is_valid_rendertarget_color_format(fmt);</div><div class="line"><a name="l08603"></a><span class="lineno"> 8603</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> valid_depth_fmt = _sg_is_valid_rendertarget_depth_format(fmt);</div><div class="line"><a name="l08604"></a><span class="lineno"> 8604</span>&#160;    SOKOL_VALIDATE(valid_color_fmt || valid_depth_fmt, _SG_VALIDATE_IMAGEDESC_RT_PIXELFORMAT);</div><div class="line"><a name="l08605"></a><span class="lineno"> 8605</span>&#160;    SOKOL_VALIDATE(usage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>, _SG_VALIDATE_IMAGEDESC_RT_IMMUTABLE);</div><div class="line"><a name="l08606"></a><span class="lineno"> 8606</span>&#160;    SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ada2a41a3d05f322bc67e6441dbeb64d3">content</a>.<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[0][0].<a class="code" href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c">ptr</a> == 0, _SG_VALIDATE_IMAGEDESC_RT_NO_CONTENT);</div><div class="line"><a name="l08607"></a><span class="lineno"> 8607</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08608"></a><span class="lineno"> 8608</span>&#160;    SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a7e0d5c7130c32b489e509a6bcfd9904a">sample_count</a> &lt;= 1, _SG_VALIDATE_IMAGEDESC_MSAA_BUT_NO_RT);</div><div class="line"><a name="l08609"></a><span class="lineno"> 8609</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">bool</span> valid_nonrt_fmt = !_sg_is_valid_rendertarget_depth_format(fmt);</div><div class="line"><a name="l08610"></a><span class="lineno"> 8610</span>&#160;    SOKOL_VALIDATE(valid_nonrt_fmt, _SG_VALIDATE_IMAGEDESC_NONRT_PIXELFORMAT);</div><div class="line"><a name="l08611"></a><span class="lineno"> 8611</span>&#160;    <span class="comment">/* FIXME: should use the same &quot;expected size&quot; computation as in _sg_validate_update_image() here */</span></div><div class="line"><a name="l08612"></a><span class="lineno"> 8612</span>&#160;    <span class="keywordflow">if</span> (!ext &amp;&amp; (usage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>)) {</div><div class="line"><a name="l08613"></a><span class="lineno"> 8613</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> num_faces = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a206bf908ad986430c63d819f06c4a91a">type</a>, <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a>) == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a> ? 6 : 1;</div><div class="line"><a name="l08614"></a><span class="lineno"> 8614</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> num_mips = _sg_def(desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#a0653e80837f6ffa9477a62e627fad170">num_mipmaps</a>, 1);</div><div class="line"><a name="l08615"></a><span class="lineno"> 8615</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face_index = 0; face_index &lt; num_faces; face_index++) {</div><div class="line"><a name="l08616"></a><span class="lineno"> 8616</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mip_index = 0; mip_index &lt; num_mips; mip_index++) {</div><div class="line"><a name="l08617"></a><span class="lineno"> 8617</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">bool</span> has_data = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ada2a41a3d05f322bc67e6441dbeb64d3">content</a>.<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c">ptr</a> != 0;</div><div class="line"><a name="l08618"></a><span class="lineno"> 8618</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">bool</span> has_size = desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ada2a41a3d05f322bc67e6441dbeb64d3">content</a>.<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#ad5cf41c09de0390218aaa479aa2e58db">size</a> &gt; 0;</div><div class="line"><a name="l08619"></a><span class="lineno"> 8619</span>&#160;          SOKOL_VALIDATE(has_data &amp;&amp; has_size, _SG_VALIDATE_IMAGEDESC_CONTENT);</div><div class="line"><a name="l08620"></a><span class="lineno"> 8620</span>&#160;        }</div><div class="line"><a name="l08621"></a><span class="lineno"> 8621</span>&#160;      }</div><div class="line"><a name="l08622"></a><span class="lineno"> 8622</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08623"></a><span class="lineno"> 8623</span>&#160;      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face_index = 0; face_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522aeb579c50d806e02e56139d56e0e41728">SG_CUBEFACE_NUM</a>; face_index++) {</div><div class="line"><a name="l08624"></a><span class="lineno"> 8624</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mip_index = 0; mip_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca8a9a7015046cf047f0534dfe86bc7545">SG_MAX_MIPMAPS</a>; mip_index++) {</div><div class="line"><a name="l08625"></a><span class="lineno"> 8625</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">bool</span> no_data = 0 == desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ada2a41a3d05f322bc67e6441dbeb64d3">content</a>.<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c">ptr</a>;</div><div class="line"><a name="l08626"></a><span class="lineno"> 8626</span>&#160;          <span class="keyword">const</span> <span class="keywordtype">bool</span> no_size = 0 == desc-&gt;<a class="code" href="../../d4/d94/structsg__image__desc.html#ada2a41a3d05f322bc67e6441dbeb64d3">content</a>.<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#ad5cf41c09de0390218aaa479aa2e58db">size</a>;</div><div class="line"><a name="l08627"></a><span class="lineno"> 8627</span>&#160;          SOKOL_VALIDATE(no_data &amp;&amp; no_size, _SG_VALIDATE_IMAGEDESC_NO_CONTENT);</div><div class="line"><a name="l08628"></a><span class="lineno"> 8628</span>&#160;        }</div><div class="line"><a name="l08629"></a><span class="lineno"> 8629</span>&#160;      }</div><div class="line"><a name="l08630"></a><span class="lineno"> 8630</span>&#160;    }</div><div class="line"><a name="l08631"></a><span class="lineno"> 8631</span>&#160;  }</div><div class="line"><a name="l08632"></a><span class="lineno"> 8632</span>&#160;  <span class="keywordflow">return</span> SOKOL_VALIDATE_END();</div><div class="line"><a name="l08633"></a><span class="lineno"> 8633</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08634"></a><span class="lineno"> 8634</span>&#160;}</div><div class="line"><a name="l08635"></a><span class="lineno"> 8635</span>&#160;</div><div class="line"><a name="l08636"></a><span class="lineno"> 8636</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_validate_shader_desc(<span class="keyword">const</span> <a class="code" href="../../df/d17/structsg__shader__desc.html">sg_shader_desc</a>* desc)</div><div class="line"><a name="l08637"></a><span class="lineno"> 8637</span>&#160;{</div><div class="line"><a name="l08638"></a><span class="lineno"> 8638</span>&#160;<span class="preprocessor">#if !defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08639"></a><span class="lineno"> 8639</span>&#160;  _SOKOL_UNUSED(desc);</div><div class="line"><a name="l08640"></a><span class="lineno"> 8640</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l08641"></a><span class="lineno"> 8641</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l08642"></a><span class="lineno"> 8642</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l08643"></a><span class="lineno"> 8643</span>&#160;  SOKOL_VALIDATE_BEGIN();</div><div class="line"><a name="l08644"></a><span class="lineno"> 8644</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#aa7f3617850909bec39ac109c92c98c3d">_start_canary</a> == 0, _SG_VALIDATE_SHADERDESC_CANARY);</div><div class="line"><a name="l08645"></a><span class="lineno"> 8645</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a87386b33905c8aefc6eccd477af43f99">_end_canary</a> == 0, _SG_VALIDATE_SHADERDESC_CANARY);</div><div class="line"><a name="l08646"></a><span class="lineno"> 8646</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLCORE33) || defined(SOKOL_GLES2) || defined(SOKOL_GLES3)</span></div><div class="line"><a name="l08647"></a><span class="lineno"> 8647</span>&#160;  <span class="comment">/* on GL, must provide shader source code */</span></div><div class="line"><a name="l08648"></a><span class="lineno"> 8648</span>&#160;  SOKOL_VALIDATE(0 != desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a>, _SG_VALIDATE_SHADERDESC_SOURCE);</div><div class="line"><a name="l08649"></a><span class="lineno"> 8649</span>&#160;  SOKOL_VALIDATE(0 != desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a>, _SG_VALIDATE_SHADERDESC_SOURCE);</div><div class="line"><a name="l08650"></a><span class="lineno"> 8650</span>&#160;<span class="preprocessor">#elif defined(SOKOL_METAL) || defined(SOKOL_D3D11_SHADER_COMPILER)</span></div><div class="line"><a name="l08651"></a><span class="lineno"> 8651</span>&#160;  <span class="comment">/* on Metal or D3D with shader compiler, must provide shader source code or byte code */</span></div><div class="line"><a name="l08652"></a><span class="lineno"> 8652</span>&#160;  SOKOL_VALIDATE((0 != desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a>) || (0 != desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>), _SG_VALIDATE_SHADERDESC_SOURCE_OR_BYTECODE);</div><div class="line"><a name="l08653"></a><span class="lineno"> 8653</span>&#160;  SOKOL_VALIDATE((0 != desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">source</a>) || (0 != desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>), _SG_VALIDATE_SHADERDESC_SOURCE_OR_BYTECODE);</div><div class="line"><a name="l08654"></a><span class="lineno"> 8654</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l08655"></a><span class="lineno"> 8655</span>&#160;  <span class="comment">/* on D3D11 without shader compiler, must provide byte code */</span></div><div class="line"><a name="l08656"></a><span class="lineno"> 8656</span>&#160;  SOKOL_VALIDATE(0 != desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>, _SG_VALIDATE_SHADERDESC_BYTECODE);</div><div class="line"><a name="l08657"></a><span class="lineno"> 8657</span>&#160;  SOKOL_VALIDATE(0 != desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>, _SG_VALIDATE_SHADERDESC_BYTECODE);</div><div class="line"><a name="l08658"></a><span class="lineno"> 8658</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08659"></a><span class="lineno"> 8659</span>&#160;  <span class="comment">/* if shader byte code, the size must also be provided */</span></div><div class="line"><a name="l08660"></a><span class="lineno"> 8660</span>&#160;  <span class="keywordflow">if</span> (0 != desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>) {</div><div class="line"><a name="l08661"></a><span class="lineno"> 8661</span>&#160;    SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#ab4a4c8aacc932d2bcd3c174a8178249b">byte_code_size</a> &gt; 0, _SG_VALIDATE_SHADERDESC_NO_BYTECODE_SIZE);</div><div class="line"><a name="l08662"></a><span class="lineno"> 8662</span>&#160;  }</div><div class="line"><a name="l08663"></a><span class="lineno"> 8663</span>&#160;  <span class="keywordflow">if</span> (0 != desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">byte_code</a>) {</div><div class="line"><a name="l08664"></a><span class="lineno"> 8664</span>&#160;    SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>.<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#ab4a4c8aacc932d2bcd3c174a8178249b">byte_code_size</a> &gt; 0, _SG_VALIDATE_SHADERDESC_NO_BYTECODE_SIZE);</div><div class="line"><a name="l08665"></a><span class="lineno"> 8665</span>&#160;  }</div><div class="line"><a name="l08666"></a><span class="lineno"> 8666</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> stage_index = 0; stage_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">SG_NUM_SHADER_STAGES</a>; stage_index++) {</div><div class="line"><a name="l08667"></a><span class="lineno"> 8667</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d9/d32/structsg__shader__stage__desc.html">sg_shader_stage_desc</a>* stage_desc = (stage_index == 0) ? &amp;desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">vs</a> : &amp;desc-&gt;<a class="code" href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">fs</a>;</div><div class="line"><a name="l08668"></a><span class="lineno"> 8668</span>&#160;    <span class="keywordtype">bool</span> uniform_blocks_continuous = <span class="keyword">true</span>;</div><div class="line"><a name="l08669"></a><span class="lineno"> 8669</span>&#160;    <a class="code" href="../../d8/df7/BenchCathodeSegmentation_8cxx.html#a2b95d32c08b7fd322b51d91e97f1b552">for</a> (<span class="keywordtype">int</span> ub_index = 0; ub_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a>; ub_index++) {</div><div class="line"><a name="l08670"></a><span class="lineno"> 8670</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html">sg_shader_uniform_block_desc</a>* ub_desc = &amp;stage_desc-&gt;<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#a62b1801dc0c45820abd59ac49504a318">uniform_blocks</a>[ub_index];</div><div class="line"><a name="l08671"></a><span class="lineno"> 8671</span>&#160;      <span class="keywordflow">if</span> (ub_desc-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a> &gt; 0) {</div><div class="line"><a name="l08672"></a><span class="lineno"> 8672</span>&#160;        SOKOL_VALIDATE(uniform_blocks_continuous, _SG_VALIDATE_SHADERDESC_NO_CONT_UBS);</div><div class="line"><a name="l08673"></a><span class="lineno"> 8673</span>&#160;        <span class="keywordtype">bool</span> uniforms_continuous = <span class="keyword">true</span>;</div><div class="line"><a name="l08674"></a><span class="lineno"> 8674</span>&#160;        <span class="keywordtype">int</span> uniform_offset = 0;</div><div class="line"><a name="l08675"></a><span class="lineno"> 8675</span>&#160;        <span class="keywordtype">int</span> num_uniforms = 0;</div><div class="line"><a name="l08676"></a><span class="lineno"> 8676</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> u_index = 0; u_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca746b50b205e4d09963f11f32b18c6cf9">SG_MAX_UB_MEMBERS</a>; u_index++) {</div><div class="line"><a name="l08677"></a><span class="lineno"> 8677</span>&#160;          <span class="keyword">const</span> <a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html">sg_shader_uniform_desc</a>* u_desc = &amp;ub_desc-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#a995bb1ddede542251b268a3457ff89d1">uniforms</a>[u_index];</div><div class="line"><a name="l08678"></a><span class="lineno"> 8678</span>&#160;          <span class="keywordflow">if</span> (u_desc-&gt;<a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#a09493618d985e76c5160c8611624da4e">type</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2aebd4e667ec034abd1b1b5f935113fdad">SG_UNIFORMTYPE_INVALID</a>) {</div><div class="line"><a name="l08679"></a><span class="lineno"> 8679</span>&#160;            SOKOL_VALIDATE(uniforms_continuous, _SG_VALIDATE_SHADERDESC_NO_CONT_UB_MEMBERS);</div><div class="line"><a name="l08680"></a><span class="lineno"> 8680</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLES2) || defined(SOKOL_GLES3)</span></div><div class="line"><a name="l08681"></a><span class="lineno"> 8681</span>&#160;            SOKOL_VALIDATE(u_desc-&gt;<a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#ae5acb2f7605843de918b252ce4db5d26">name</a>, _SG_VALIDATE_SHADERDESC_UB_MEMBER_NAME);</div><div class="line"><a name="l08682"></a><span class="lineno"> 8682</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08683"></a><span class="lineno"> 8683</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">int</span> array_count = _sg_def(u_desc-&gt;<a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#a13e9085423f4faf73f68ca2567a168ea">array_count</a>, 1);</div><div class="line"><a name="l08684"></a><span class="lineno"> 8684</span>&#160;            uniform_offset += _sg_uniform_size(u_desc-&gt;<a class="code" href="../../d2/d67/structsg__shader__uniform__desc.html#a09493618d985e76c5160c8611624da4e">type</a>, array_count);</div><div class="line"><a name="l08685"></a><span class="lineno"> 8685</span>&#160;            num_uniforms++;</div><div class="line"><a name="l08686"></a><span class="lineno"> 8686</span>&#160;          } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08687"></a><span class="lineno"> 8687</span>&#160;            uniforms_continuous = <span class="keyword">false</span>;</div><div class="line"><a name="l08688"></a><span class="lineno"> 8688</span>&#160;          }</div><div class="line"><a name="l08689"></a><span class="lineno"> 8689</span>&#160;        }</div><div class="line"><a name="l08690"></a><span class="lineno"> 8690</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLCORE33) || defined(SOKOL_GLES2) || defined(SOKOL_GLES3)</span></div><div class="line"><a name="l08691"></a><span class="lineno"> 8691</span>&#160;        SOKOL_VALIDATE(uniform_offset == ub_desc-&gt;<a class="code" href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">size</a>, _SG_VALIDATE_SHADERDESC_UB_SIZE_MISMATCH);</div><div class="line"><a name="l08692"></a><span class="lineno"> 8692</span>&#160;        SOKOL_VALIDATE(num_uniforms &gt; 0, _SG_VALIDATE_SHADERDESC_NO_UB_MEMBERS);</div><div class="line"><a name="l08693"></a><span class="lineno"> 8693</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08694"></a><span class="lineno"> 8694</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08695"></a><span class="lineno"> 8695</span>&#160;        uniform_blocks_continuous = <span class="keyword">false</span>;</div><div class="line"><a name="l08696"></a><span class="lineno"> 8696</span>&#160;      }</div><div class="line"><a name="l08697"></a><span class="lineno"> 8697</span>&#160;    }</div><div class="line"><a name="l08698"></a><span class="lineno"> 8698</span>&#160;    <span class="keywordtype">bool</span> images_continuous = <span class="keyword">true</span>;</div><div class="line"><a name="l08699"></a><span class="lineno"> 8699</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> img_index = 0; img_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>; img_index++) {</div><div class="line"><a name="l08700"></a><span class="lineno"> 8700</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../dd/d8f/structsg__shader__image__desc.html">sg_shader_image_desc</a>* img_desc = &amp;stage_desc-&gt;<a class="code" href="../../d9/d32/structsg__shader__stage__desc.html#aa5ad88030a0aa4a7c8aedc31729c6c3c">images</a>[img_index];</div><div class="line"><a name="l08701"></a><span class="lineno"> 8701</span>&#160;      <span class="keywordflow">if</span> (img_desc-&gt;<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4">type</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dae006b5445cb0f3b9c939d8074980805e">_SG_IMAGETYPE_DEFAULT</a>) {</div><div class="line"><a name="l08702"></a><span class="lineno"> 8702</span>&#160;        SOKOL_VALIDATE(images_continuous, _SG_VALIDATE_SHADERDESC_NO_CONT_IMGS);</div><div class="line"><a name="l08703"></a><span class="lineno"> 8703</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLES2)</span></div><div class="line"><a name="l08704"></a><span class="lineno"> 8704</span>&#160;        SOKOL_VALIDATE(img_desc-&gt;<a class="code" href="../../dd/d8f/structsg__shader__image__desc.html#ada7a7a8884528b37079f4c7055e15df0">name</a>, _SG_VALIDATE_SHADERDESC_IMG_NAME);</div><div class="line"><a name="l08705"></a><span class="lineno"> 8705</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08706"></a><span class="lineno"> 8706</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08707"></a><span class="lineno"> 8707</span>&#160;        images_continuous = <span class="keyword">false</span>;</div><div class="line"><a name="l08708"></a><span class="lineno"> 8708</span>&#160;      }</div><div class="line"><a name="l08709"></a><span class="lineno"> 8709</span>&#160;    }</div><div class="line"><a name="l08710"></a><span class="lineno"> 8710</span>&#160;  }</div><div class="line"><a name="l08711"></a><span class="lineno"> 8711</span>&#160;  <span class="keywordflow">return</span> SOKOL_VALIDATE_END();</div><div class="line"><a name="l08712"></a><span class="lineno"> 8712</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08713"></a><span class="lineno"> 8713</span>&#160;}</div><div class="line"><a name="l08714"></a><span class="lineno"> 8714</span>&#160;</div><div class="line"><a name="l08715"></a><span class="lineno"> 8715</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_validate_pipeline_desc(<span class="keyword">const</span> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html">sg_pipeline_desc</a>* desc)</div><div class="line"><a name="l08716"></a><span class="lineno"> 8716</span>&#160;{</div><div class="line"><a name="l08717"></a><span class="lineno"> 8717</span>&#160;<span class="preprocessor">#if !defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08718"></a><span class="lineno"> 8718</span>&#160;  _SOKOL_UNUSED(desc);</div><div class="line"><a name="l08719"></a><span class="lineno"> 8719</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l08720"></a><span class="lineno"> 8720</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l08721"></a><span class="lineno"> 8721</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l08722"></a><span class="lineno"> 8722</span>&#160;  SOKOL_VALIDATE_BEGIN();</div><div class="line"><a name="l08723"></a><span class="lineno"> 8723</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a1422173396d3a421d7bf7170a410f775">_start_canary</a> == 0, _SG_VALIDATE_PIPELINEDESC_CANARY);</div><div class="line"><a name="l08724"></a><span class="lineno"> 8724</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ad9ee6ba045cb445d556d64baa93ae6bf">_end_canary</a> == 0, _SG_VALIDATE_PIPELINEDESC_CANARY);</div><div class="line"><a name="l08725"></a><span class="lineno"> 8725</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae193421a3ac922d89a9cbf55788ede65">shader</a>.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>, _SG_VALIDATE_PIPELINEDESC_SHADER);</div><div class="line"><a name="l08726"></a><span class="lineno"> 8726</span>&#160;  <span class="keyword">const</span> _sg_shader* shd = _sg_lookup_shader(&amp;_sg.pools, desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae193421a3ac922d89a9cbf55788ede65">shader</a>.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a>);</div><div class="line"><a name="l08727"></a><span class="lineno"> 8727</span>&#160;  SOKOL_VALIDATE(shd &amp;&amp; shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>, _SG_VALIDATE_PIPELINEDESC_SHADER);</div><div class="line"><a name="l08728"></a><span class="lineno"> 8728</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> buf_index = 0; buf_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>; buf_index++) {</div><div class="line"><a name="l08729"></a><span class="lineno"> 8729</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html">sg_buffer_layout_desc</a>* l_desc = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a956d4bf59180e48cdfb5bcc00b0c7012">buffers</a>[buf_index];</div><div class="line"><a name="l08730"></a><span class="lineno"> 8730</span>&#160;    <span class="keywordflow">if</span> (l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#aab7f169abb46eecbecaec8e9d0d2f6f5">stride</a> == 0) {</div><div class="line"><a name="l08731"></a><span class="lineno"> 8731</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l08732"></a><span class="lineno"> 8732</span>&#160;    }</div><div class="line"><a name="l08733"></a><span class="lineno"> 8733</span>&#160;    SOKOL_VALIDATE((l_desc-&gt;<a class="code" href="../../dc/da3/structsg__buffer__layout__desc.html#aab7f169abb46eecbecaec8e9d0d2f6f5">stride</a> &amp; 3) == 0, _SG_VALIDATE_PIPELINEDESC_LAYOUT_STRIDE4);</div><div class="line"><a name="l08734"></a><span class="lineno"> 8734</span>&#160;  }</div><div class="line"><a name="l08735"></a><span class="lineno"> 8735</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a19f830b45bc4289d997fd51604a5e4f1">attrs</a>[0].<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa2537db7b2956137a3fbe5a8929c01f5">SG_VERTEXFORMAT_INVALID</a>, _SG_VALIDATE_PIPELINEDESC_NO_ATTRS);</div><div class="line"><a name="l08736"></a><span class="lineno"> 8736</span>&#160;  <span class="keywordtype">bool</span> attrs_cont = <span class="keyword">true</span>;</div><div class="line"><a name="l08737"></a><span class="lineno"> 8737</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> attr_index = 0; attr_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a>; attr_index++) {</div><div class="line"><a name="l08738"></a><span class="lineno"> 8738</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html">sg_vertex_attr_desc</a>* a_desc = &amp;desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">layout</a>.<a class="code" href="../../d1/d64/structsg__layout__desc.html#a19f830b45bc4289d997fd51604a5e4f1">attrs</a>[attr_index];</div><div class="line"><a name="l08739"></a><span class="lineno"> 8739</span>&#160;    <span class="keywordflow">if</span> (a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">format</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa2537db7b2956137a3fbe5a8929c01f5">SG_VERTEXFORMAT_INVALID</a>) {</div><div class="line"><a name="l08740"></a><span class="lineno"> 8740</span>&#160;      attrs_cont = <span class="keyword">false</span>;</div><div class="line"><a name="l08741"></a><span class="lineno"> 8741</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l08742"></a><span class="lineno"> 8742</span>&#160;    }</div><div class="line"><a name="l08743"></a><span class="lineno"> 8743</span>&#160;    SOKOL_VALIDATE(attrs_cont, _SG_VALIDATE_PIPELINEDESC_NO_ATTRS);</div><div class="line"><a name="l08744"></a><span class="lineno"> 8744</span>&#160;    SOKOL_ASSERT(a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">buffer_index</a> &lt; SG_MAX_SHADERSTAGE_BUFFERS);</div><div class="line"><a name="l08745"></a><span class="lineno"> 8745</span>&#160;<span class="preprocessor">#if defined(SOKOL_GLES2)</span></div><div class="line"><a name="l08746"></a><span class="lineno"> 8746</span>&#160;    <span class="comment">/* on GLES2, vertex attribute names must be provided */</span></div><div class="line"><a name="l08747"></a><span class="lineno"> 8747</span>&#160;    SOKOL_VALIDATE(a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a357b733993ec8e744fe6dc6bd2a3d060">name</a>, _SG_VALIDATE_PIPELINEDESC_ATTR_NAME);</div><div class="line"><a name="l08748"></a><span class="lineno"> 8748</span>&#160;<span class="preprocessor">#elif defined(SOKOL_D3D11)</span></div><div class="line"><a name="l08749"></a><span class="lineno"> 8749</span>&#160;    <span class="comment">/* on D3D11, semantic names (and semantic indices) must be provided */</span></div><div class="line"><a name="l08750"></a><span class="lineno"> 8750</span>&#160;    SOKOL_VALIDATE(a_desc-&gt;<a class="code" href="../../d5/d83/structsg__vertex__attr__desc.html#a300495aa1542131ca1376536d28b7ad5">sem_name</a>, _SG_VALIDATE_PIPELINEDESC_ATTR_SEMANTICS);</div><div class="line"><a name="l08751"></a><span class="lineno"> 8751</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08752"></a><span class="lineno"> 8752</span>&#160;  }</div><div class="line"><a name="l08753"></a><span class="lineno"> 8753</span>&#160;  <span class="keywordflow">return</span> SOKOL_VALIDATE_END();</div><div class="line"><a name="l08754"></a><span class="lineno"> 8754</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08755"></a><span class="lineno"> 8755</span>&#160;}</div><div class="line"><a name="l08756"></a><span class="lineno"> 8756</span>&#160;</div><div class="line"><a name="l08757"></a><span class="lineno"> 8757</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_validate_pass_desc(<span class="keyword">const</span> <a class="code" href="../../d4/d2b/structsg__pass__desc.html">sg_pass_desc</a>* desc)</div><div class="line"><a name="l08758"></a><span class="lineno"> 8758</span>&#160;{</div><div class="line"><a name="l08759"></a><span class="lineno"> 8759</span>&#160;<span class="preprocessor">#if !defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08760"></a><span class="lineno"> 8760</span>&#160;  _SOKOL_UNUSED(desc);</div><div class="line"><a name="l08761"></a><span class="lineno"> 8761</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l08762"></a><span class="lineno"> 8762</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l08763"></a><span class="lineno"> 8763</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l08764"></a><span class="lineno"> 8764</span>&#160;  SOKOL_VALIDATE_BEGIN();</div><div class="line"><a name="l08765"></a><span class="lineno"> 8765</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#ac2620e3d5c3b7b8a122bacdf7408e424">_start_canary</a> == 0, _SG_VALIDATE_PASSDESC_CANARY);</div><div class="line"><a name="l08766"></a><span class="lineno"> 8766</span>&#160;  SOKOL_VALIDATE(desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a60895ff91f318d528793dd786b5c9aa0">_end_canary</a> == 0, _SG_VALIDATE_PASSDESC_CANARY);</div><div class="line"><a name="l08767"></a><span class="lineno"> 8767</span>&#160;  <span class="keywordtype">bool</span> atts_cont = <span class="keyword">true</span>;</div><div class="line"><a name="l08768"></a><span class="lineno"> 8768</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a> color_fmt = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abd35ac81800ef42e025231cf6e10956c">SG_PIXELFORMAT_NONE</a>;</div><div class="line"><a name="l08769"></a><span class="lineno"> 8769</span>&#160;  <span class="keywordtype">int</span> width = -1, height = -1, sample_count = -1;</div><div class="line"><a name="l08770"></a><span class="lineno"> 8770</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> att_index = 0; att_index &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; att_index++) {</div><div class="line"><a name="l08771"></a><span class="lineno"> 8771</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/da2/structsg__attachment__desc.html">sg_attachment_desc</a>* att = &amp;desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a0671a1bca34513d50f88c551408643d5">color_attachments</a>[att_index];</div><div class="line"><a name="l08772"></a><span class="lineno"> 8772</span>&#160;    <span class="keywordflow">if</span> (att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l08773"></a><span class="lineno"> 8773</span>&#160;      SOKOL_VALIDATE(att_index &gt; 0, _SG_VALIDATE_PASSDESC_NO_COLOR_ATTS);</div><div class="line"><a name="l08774"></a><span class="lineno"> 8774</span>&#160;      atts_cont = <span class="keyword">false</span>;</div><div class="line"><a name="l08775"></a><span class="lineno"> 8775</span>&#160;      <span class="keywordflow">continue</span>;</div><div class="line"><a name="l08776"></a><span class="lineno"> 8776</span>&#160;    }</div><div class="line"><a name="l08777"></a><span class="lineno"> 8777</span>&#160;    SOKOL_VALIDATE(atts_cont, _SG_VALIDATE_PASSDESC_NO_CONT_COLOR_ATTS);</div><div class="line"><a name="l08778"></a><span class="lineno"> 8778</span>&#160;    <span class="keyword">const</span> _sg_image* img = _sg_lookup_image(&amp;_sg.pools, att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l08779"></a><span class="lineno"> 8779</span>&#160;    SOKOL_VALIDATE(img &amp;&amp; img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>, _SG_VALIDATE_PASSDESC_IMAGE);</div><div class="line"><a name="l08780"></a><span class="lineno"> 8780</span>&#160;    SOKOL_VALIDATE(att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a> &lt; img-&gt;num_mipmaps, _SG_VALIDATE_PASSDESC_MIPLEVEL);</div><div class="line"><a name="l08781"></a><span class="lineno"> 8781</span>&#160;    <span class="keywordflow">if</span> (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>) {</div><div class="line"><a name="l08782"></a><span class="lineno"> 8782</span>&#160;      SOKOL_VALIDATE(att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#ad0208f4dba2779f88c66139199f467ca">face</a> &lt; 6, _SG_VALIDATE_PASSDESC_FACE);</div><div class="line"><a name="l08783"></a><span class="lineno"> 8783</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>) {</div><div class="line"><a name="l08784"></a><span class="lineno"> 8784</span>&#160;      SOKOL_VALIDATE(att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a75e122aeb68f7e8e2ab0665643730638">layer</a> &lt; img-&gt;depth, _SG_VALIDATE_PASSDESC_LAYER);</div><div class="line"><a name="l08785"></a><span class="lineno"> 8785</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>) {</div><div class="line"><a name="l08786"></a><span class="lineno"> 8786</span>&#160;      SOKOL_VALIDATE(att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a91d437e248352612f03c15cf47b2dd35">slice</a> &lt; img-&gt;depth, _SG_VALIDATE_PASSDESC_SLICE);</div><div class="line"><a name="l08787"></a><span class="lineno"> 8787</span>&#160;    }</div><div class="line"><a name="l08788"></a><span class="lineno"> 8788</span>&#160;    SOKOL_VALIDATE(img-&gt;render_target, _SG_VALIDATE_PASSDESC_IMAGE_NO_RT);</div><div class="line"><a name="l08789"></a><span class="lineno"> 8789</span>&#160;    <span class="keywordflow">if</span> (att_index == 0) {</div><div class="line"><a name="l08790"></a><span class="lineno"> 8790</span>&#160;      color_fmt = img-&gt;pixel_format;</div><div class="line"><a name="l08791"></a><span class="lineno"> 8791</span>&#160;      width = img-&gt;width &gt;&gt; att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>;</div><div class="line"><a name="l08792"></a><span class="lineno"> 8792</span>&#160;      height = img-&gt;height &gt;&gt; att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>;</div><div class="line"><a name="l08793"></a><span class="lineno"> 8793</span>&#160;      sample_count = img-&gt;sample_count;</div><div class="line"><a name="l08794"></a><span class="lineno"> 8794</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08795"></a><span class="lineno"> 8795</span>&#160;      SOKOL_VALIDATE(img-&gt;pixel_format == color_fmt, _SG_VALIDATE_PASSDESC_COLOR_PIXELFORMATS);</div><div class="line"><a name="l08796"></a><span class="lineno"> 8796</span>&#160;      SOKOL_VALIDATE(width == img-&gt;width &gt;&gt; att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>, _SG_VALIDATE_PASSDESC_IMAGE_SIZES);</div><div class="line"><a name="l08797"></a><span class="lineno"> 8797</span>&#160;      SOKOL_VALIDATE(height == img-&gt;height &gt;&gt; att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>, _SG_VALIDATE_PASSDESC_IMAGE_SIZES);</div><div class="line"><a name="l08798"></a><span class="lineno"> 8798</span>&#160;      SOKOL_VALIDATE(sample_count == img-&gt;sample_count, _SG_VALIDATE_PASSDESC_IMAGE_SAMPLE_COUNTS);</div><div class="line"><a name="l08799"></a><span class="lineno"> 8799</span>&#160;    }</div><div class="line"><a name="l08800"></a><span class="lineno"> 8800</span>&#160;    SOKOL_VALIDATE(_sg_is_valid_rendertarget_color_format(img-&gt;pixel_format), _SG_VALIDATE_PASSDESC_COLOR_INV_PIXELFORMAT);</div><div class="line"><a name="l08801"></a><span class="lineno"> 8801</span>&#160;  }</div><div class="line"><a name="l08802"></a><span class="lineno"> 8802</span>&#160;  <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a75a23624c5d16d675a70e62f6ce9ba70">depth_stencil_attachment</a>.<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l08803"></a><span class="lineno"> 8803</span>&#160;    <span class="keyword">const</span> <a class="code" href="../../d1/da2/structsg__attachment__desc.html">sg_attachment_desc</a>* att = &amp;desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a75a23624c5d16d675a70e62f6ce9ba70">depth_stencil_attachment</a>;</div><div class="line"><a name="l08804"></a><span class="lineno"> 8804</span>&#160;    <span class="keyword">const</span> _sg_image* img = _sg_lookup_image(&amp;_sg.pools, att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l08805"></a><span class="lineno"> 8805</span>&#160;    SOKOL_VALIDATE(img &amp;&amp; img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>, _SG_VALIDATE_PASSDESC_IMAGE);</div><div class="line"><a name="l08806"></a><span class="lineno"> 8806</span>&#160;    SOKOL_VALIDATE(att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a> &lt; img-&gt;num_mipmaps, _SG_VALIDATE_PASSDESC_MIPLEVEL);</div><div class="line"><a name="l08807"></a><span class="lineno"> 8807</span>&#160;    <span class="keywordflow">if</span> (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>) {</div><div class="line"><a name="l08808"></a><span class="lineno"> 8808</span>&#160;      SOKOL_VALIDATE(att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#ad0208f4dba2779f88c66139199f467ca">face</a> &lt; 6, _SG_VALIDATE_PASSDESC_FACE);</div><div class="line"><a name="l08809"></a><span class="lineno"> 8809</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a>) {</div><div class="line"><a name="l08810"></a><span class="lineno"> 8810</span>&#160;      SOKOL_VALIDATE(att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a75e122aeb68f7e8e2ab0665643730638">layer</a> &lt; img-&gt;depth, _SG_VALIDATE_PASSDESC_LAYER);</div><div class="line"><a name="l08811"></a><span class="lineno"> 8811</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a>) {</div><div class="line"><a name="l08812"></a><span class="lineno"> 8812</span>&#160;      SOKOL_VALIDATE(att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a91d437e248352612f03c15cf47b2dd35">slice</a> &lt; img-&gt;depth, _SG_VALIDATE_PASSDESC_SLICE);</div><div class="line"><a name="l08813"></a><span class="lineno"> 8813</span>&#160;    }</div><div class="line"><a name="l08814"></a><span class="lineno"> 8814</span>&#160;    SOKOL_VALIDATE(img-&gt;render_target, _SG_VALIDATE_PASSDESC_IMAGE_NO_RT);</div><div class="line"><a name="l08815"></a><span class="lineno"> 8815</span>&#160;    SOKOL_VALIDATE(width == img-&gt;width &gt;&gt; att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>, _SG_VALIDATE_PASSDESC_IMAGE_SIZES);</div><div class="line"><a name="l08816"></a><span class="lineno"> 8816</span>&#160;    SOKOL_VALIDATE(height == img-&gt;height &gt;&gt; att-&gt;<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">mip_level</a>, _SG_VALIDATE_PASSDESC_IMAGE_SIZES);</div><div class="line"><a name="l08817"></a><span class="lineno"> 8817</span>&#160;    SOKOL_VALIDATE(sample_count == img-&gt;sample_count, _SG_VALIDATE_PASSDESC_IMAGE_SAMPLE_COUNTS);</div><div class="line"><a name="l08818"></a><span class="lineno"> 8818</span>&#160;    SOKOL_VALIDATE(_sg_is_valid_rendertarget_depth_format(img-&gt;pixel_format), _SG_VALIDATE_PASSDESC_DEPTH_INV_PIXELFORMAT);</div><div class="line"><a name="l08819"></a><span class="lineno"> 8819</span>&#160;  }</div><div class="line"><a name="l08820"></a><span class="lineno"> 8820</span>&#160;  <span class="keywordflow">return</span> SOKOL_VALIDATE_END();</div><div class="line"><a name="l08821"></a><span class="lineno"> 8821</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08822"></a><span class="lineno"> 8822</span>&#160;}</div><div class="line"><a name="l08823"></a><span class="lineno"> 8823</span>&#160;</div><div class="line"><a name="l08824"></a><span class="lineno"> 8824</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_validate_begin_pass(_sg_pass* pass)</div><div class="line"><a name="l08825"></a><span class="lineno"> 8825</span>&#160;{</div><div class="line"><a name="l08826"></a><span class="lineno"> 8826</span>&#160;<span class="preprocessor">#if !defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08827"></a><span class="lineno"> 8827</span>&#160;  _SOKOL_UNUSED(pass);</div><div class="line"><a name="l08828"></a><span class="lineno"> 8828</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l08829"></a><span class="lineno"> 8829</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l08830"></a><span class="lineno"> 8830</span>&#160;  SOKOL_VALIDATE_BEGIN();</div><div class="line"><a name="l08831"></a><span class="lineno"> 8831</span>&#160;  SOKOL_VALIDATE(pass-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>, _SG_VALIDATE_BEGINPASS_PASS);</div><div class="line"><a name="l08832"></a><span class="lineno"> 8832</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l08833"></a><span class="lineno"> 8833</span>&#160;    <span class="keyword">const</span> _sg_attachment* att = &amp;pass-&gt;color_atts[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>];</div><div class="line"><a name="l08834"></a><span class="lineno"> 8834</span>&#160;    <span class="keywordflow">if</span> (att-&gt;image) {</div><div class="line"><a name="l08835"></a><span class="lineno"> 8835</span>&#160;      SOKOL_VALIDATE(att-&gt;image-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>, _SG_VALIDATE_BEGINPASS_IMAGE);</div><div class="line"><a name="l08836"></a><span class="lineno"> 8836</span>&#160;      SOKOL_VALIDATE(att-&gt;image-&gt;slot.id == att-&gt;image_id.id, _SG_VALIDATE_BEGINPASS_IMAGE);</div><div class="line"><a name="l08837"></a><span class="lineno"> 8837</span>&#160;    }</div><div class="line"><a name="l08838"></a><span class="lineno"> 8838</span>&#160;  }</div><div class="line"><a name="l08839"></a><span class="lineno"> 8839</span>&#160;  <span class="keywordflow">if</span> (pass-&gt;ds_att.image) {</div><div class="line"><a name="l08840"></a><span class="lineno"> 8840</span>&#160;    <span class="keyword">const</span> _sg_attachment* att = &amp;pass-&gt;ds_att;</div><div class="line"><a name="l08841"></a><span class="lineno"> 8841</span>&#160;    SOKOL_VALIDATE(att-&gt;image-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>, _SG_VALIDATE_BEGINPASS_IMAGE);</div><div class="line"><a name="l08842"></a><span class="lineno"> 8842</span>&#160;    SOKOL_VALIDATE(att-&gt;image-&gt;slot.id == att-&gt;image_id.id, _SG_VALIDATE_BEGINPASS_IMAGE);</div><div class="line"><a name="l08843"></a><span class="lineno"> 8843</span>&#160;  }</div><div class="line"><a name="l08844"></a><span class="lineno"> 8844</span>&#160;  <span class="keywordflow">return</span> SOKOL_VALIDATE_END();</div><div class="line"><a name="l08845"></a><span class="lineno"> 8845</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08846"></a><span class="lineno"> 8846</span>&#160;}</div><div class="line"><a name="l08847"></a><span class="lineno"> 8847</span>&#160;</div><div class="line"><a name="l08848"></a><span class="lineno"> 8848</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_validate_draw_state(<span class="keyword">const</span> <a class="code" href="../../d5/d1e/structsg__draw__state.html">sg_draw_state</a>* ds)</div><div class="line"><a name="l08849"></a><span class="lineno"> 8849</span>&#160;{</div><div class="line"><a name="l08850"></a><span class="lineno"> 8850</span>&#160;<span class="preprocessor">#if !defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08851"></a><span class="lineno"> 8851</span>&#160;  _SOKOL_UNUSED(ds);</div><div class="line"><a name="l08852"></a><span class="lineno"> 8852</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l08853"></a><span class="lineno"> 8853</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l08854"></a><span class="lineno"> 8854</span>&#160;  SOKOL_VALIDATE_BEGIN();</div><div class="line"><a name="l08855"></a><span class="lineno"> 8855</span>&#160;  <span class="comment">/* has pipeline and pipeline still exists */</span></div><div class="line"><a name="l08856"></a><span class="lineno"> 8856</span>&#160;  SOKOL_VALIDATE(ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#af1a5b81461b7f6774b90d5718d255ae9">pipeline</a>.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>, _SG_VALIDATE_ADS_PIP);</div><div class="line"><a name="l08857"></a><span class="lineno"> 8857</span>&#160;  <span class="keyword">const</span> _sg_pipeline* pip = _sg_lookup_pipeline(&amp;_sg.pools, ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#af1a5b81461b7f6774b90d5718d255ae9">pipeline</a>.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a>);</div><div class="line"><a name="l08858"></a><span class="lineno"> 8858</span>&#160;  <span class="keywordflow">if</span> (!pip) {</div><div class="line"><a name="l08859"></a><span class="lineno"> 8859</span>&#160;    <span class="comment">/* cannot continue with validation without pipeline object */</span></div><div class="line"><a name="l08860"></a><span class="lineno"> 8860</span>&#160;    <span class="keywordflow">return</span> SOKOL_VALIDATE_END();</div><div class="line"><a name="l08861"></a><span class="lineno"> 8861</span>&#160;  }</div><div class="line"><a name="l08862"></a><span class="lineno"> 8862</span>&#160;  SOKOL_ASSERT(pip-&gt;shader);</div><div class="line"><a name="l08863"></a><span class="lineno"> 8863</span>&#160;</div><div class="line"><a name="l08864"></a><span class="lineno"> 8864</span>&#160;  <span class="comment">/* has expected vertex buffers, and vertex buffers still exist */</span></div><div class="line"><a name="l08865"></a><span class="lineno"> 8865</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>; i++) {</div><div class="line"><a name="l08866"></a><span class="lineno"> 8866</span>&#160;    <span class="keywordflow">if</span> (ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a494e67aed78b918eb5be3e9bffdc29d0">vertex_buffers</a>[i].<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l08867"></a><span class="lineno"> 8867</span>&#160;      SOKOL_VALIDATE(pip-&gt;vertex_layout_valid[i], _SG_VALIDATE_ADS_VBS);</div><div class="line"><a name="l08868"></a><span class="lineno"> 8868</span>&#160;      <span class="comment">/* buffers in vertex-buffer-slots must be of type SG_BUFFERTYPE_VERTEXBUFFER */</span></div><div class="line"><a name="l08869"></a><span class="lineno"> 8869</span>&#160;      <span class="keyword">const</span> _sg_buffer* buf = _sg_lookup_buffer(&amp;_sg.pools, ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a494e67aed78b918eb5be3e9bffdc29d0">vertex_buffers</a>[i].<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>);</div><div class="line"><a name="l08870"></a><span class="lineno"> 8870</span>&#160;      SOKOL_ASSERT(buf);</div><div class="line"><a name="l08871"></a><span class="lineno"> 8871</span>&#160;      <span class="keywordflow">if</span> (buf-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l08872"></a><span class="lineno"> 8872</span>&#160;        SOKOL_VALIDATE(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fa1052a9f00ec6b8a3e914db754c0c64e2">SG_BUFFERTYPE_VERTEXBUFFER</a> == buf-&gt;type, _SG_VALIDATE_ADS_VB_TYPE);</div><div class="line"><a name="l08873"></a><span class="lineno"> 8873</span>&#160;      }</div><div class="line"><a name="l08874"></a><span class="lineno"> 8874</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08875"></a><span class="lineno"> 8875</span>&#160;      <span class="comment">/* vertex buffer provided in a slot which has no vertex layout in pipeline */</span></div><div class="line"><a name="l08876"></a><span class="lineno"> 8876</span>&#160;      SOKOL_VALIDATE(!pip-&gt;vertex_layout_valid[i], _SG_VALIDATE_ADS_VBS);</div><div class="line"><a name="l08877"></a><span class="lineno"> 8877</span>&#160;    }</div><div class="line"><a name="l08878"></a><span class="lineno"> 8878</span>&#160;  }</div><div class="line"><a name="l08879"></a><span class="lineno"> 8879</span>&#160;</div><div class="line"><a name="l08880"></a><span class="lineno"> 8880</span>&#160;  <span class="comment">/* index buffer expected or not, and index buffer still exists */</span></div><div class="line"><a name="l08881"></a><span class="lineno"> 8881</span>&#160;  <span class="keywordflow">if</span> (pip-&gt;index_type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a>) {</div><div class="line"><a name="l08882"></a><span class="lineno"> 8882</span>&#160;    <span class="comment">/* pipeline defines non-indexed rendering, but index buffer provided */</span></div><div class="line"><a name="l08883"></a><span class="lineno"> 8883</span>&#160;    SOKOL_VALIDATE(ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a312bc4ad2e0fb34b0d4ee9c9517b713e">index_buffer</a>.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>, _SG_VALIDATE_ADS_IB);</div><div class="line"><a name="l08884"></a><span class="lineno"> 8884</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08885"></a><span class="lineno"> 8885</span>&#160;    <span class="comment">/* pipeline defines indexed rendering, but no index buffer provided */</span></div><div class="line"><a name="l08886"></a><span class="lineno"> 8886</span>&#160;    SOKOL_VALIDATE(ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a312bc4ad2e0fb34b0d4ee9c9517b713e">index_buffer</a>.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>, _SG_VALIDATE_ADS_NO_IB);</div><div class="line"><a name="l08887"></a><span class="lineno"> 8887</span>&#160;  }</div><div class="line"><a name="l08888"></a><span class="lineno"> 8888</span>&#160;  <span class="keywordflow">if</span> (ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a312bc4ad2e0fb34b0d4ee9c9517b713e">index_buffer</a>.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l08889"></a><span class="lineno"> 8889</span>&#160;    <span class="comment">/* buffer in index-buffer-slot must be of type SG_BUFFERTYPE_INDEXBUFFER */</span></div><div class="line"><a name="l08890"></a><span class="lineno"> 8890</span>&#160;    <span class="keyword">const</span> _sg_buffer* buf = _sg_lookup_buffer(&amp;_sg.pools, ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a312bc4ad2e0fb34b0d4ee9c9517b713e">index_buffer</a>.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>);</div><div class="line"><a name="l08891"></a><span class="lineno"> 8891</span>&#160;    SOKOL_ASSERT(buf);</div><div class="line"><a name="l08892"></a><span class="lineno"> 8892</span>&#160;    <span class="keywordflow">if</span> (buf-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l08893"></a><span class="lineno"> 8893</span>&#160;      SOKOL_VALIDATE(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8faef8b56cec34dee3ebcb7e6d5810bb8bd">SG_BUFFERTYPE_INDEXBUFFER</a> == buf-&gt;type, _SG_VALIDATE_ADS_IB_TYPE);</div><div class="line"><a name="l08894"></a><span class="lineno"> 8894</span>&#160;    }</div><div class="line"><a name="l08895"></a><span class="lineno"> 8895</span>&#160;  }</div><div class="line"><a name="l08896"></a><span class="lineno"> 8896</span>&#160;</div><div class="line"><a name="l08897"></a><span class="lineno"> 8897</span>&#160;  <span class="comment">/* has expected vertex shader images */</span></div><div class="line"><a name="l08898"></a><span class="lineno"> 8898</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>; i++) {</div><div class="line"><a name="l08899"></a><span class="lineno"> 8899</span>&#160;    _sg_shader_stage* stage = &amp;pip-&gt;shader-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>];</div><div class="line"><a name="l08900"></a><span class="lineno"> 8900</span>&#160;    <span class="keywordflow">if</span> (ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a9f49930ca8ebd54ff4eb88cf8c5c7bb6">vs_images</a>[i].<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l08901"></a><span class="lineno"> 8901</span>&#160;      SOKOL_VALIDATE(i &lt; stage-&gt;num_images, _SG_VALIDATE_ADS_VS_IMGS);</div><div class="line"><a name="l08902"></a><span class="lineno"> 8902</span>&#160;      <span class="keyword">const</span> _sg_image* img = _sg_lookup_image(&amp;_sg.pools, ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a9f49930ca8ebd54ff4eb88cf8c5c7bb6">vs_images</a>[i].<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l08903"></a><span class="lineno"> 8903</span>&#160;      SOKOL_ASSERT(img);</div><div class="line"><a name="l08904"></a><span class="lineno"> 8904</span>&#160;      <span class="keywordflow">if</span> (img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l08905"></a><span class="lineno"> 8905</span>&#160;        SOKOL_VALIDATE(img-&gt;type == stage-&gt;images[i].type, _SG_VALIDATE_ADS_VS_IMG_TYPES);</div><div class="line"><a name="l08906"></a><span class="lineno"> 8906</span>&#160;      }</div><div class="line"><a name="l08907"></a><span class="lineno"> 8907</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08908"></a><span class="lineno"> 8908</span>&#160;      SOKOL_VALIDATE(i &gt;= stage-&gt;num_images, _SG_VALIDATE_ADS_VS_IMGS);</div><div class="line"><a name="l08909"></a><span class="lineno"> 8909</span>&#160;    }</div><div class="line"><a name="l08910"></a><span class="lineno"> 8910</span>&#160;  }</div><div class="line"><a name="l08911"></a><span class="lineno"> 8911</span>&#160;</div><div class="line"><a name="l08912"></a><span class="lineno"> 8912</span>&#160;  <span class="comment">/* has expected fragment shader images */</span></div><div class="line"><a name="l08913"></a><span class="lineno"> 8913</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>; i++) {</div><div class="line"><a name="l08914"></a><span class="lineno"> 8914</span>&#160;    _sg_shader_stage* stage = &amp;pip-&gt;shader-&gt;stage[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>];</div><div class="line"><a name="l08915"></a><span class="lineno"> 8915</span>&#160;    <span class="keywordflow">if</span> (ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a0e306492a3df075c8a3231651b0c004d">fs_images</a>[i].<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l08916"></a><span class="lineno"> 8916</span>&#160;      SOKOL_VALIDATE(i &lt; stage-&gt;num_images, _SG_VALIDATE_ADS_FS_IMGS);</div><div class="line"><a name="l08917"></a><span class="lineno"> 8917</span>&#160;      <span class="keyword">const</span> _sg_image* img = _sg_lookup_image(&amp;_sg.pools, ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a0e306492a3df075c8a3231651b0c004d">fs_images</a>[i].<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l08918"></a><span class="lineno"> 8918</span>&#160;      SOKOL_ASSERT(img);</div><div class="line"><a name="l08919"></a><span class="lineno"> 8919</span>&#160;      <span class="keywordflow">if</span> (img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) {</div><div class="line"><a name="l08920"></a><span class="lineno"> 8920</span>&#160;        SOKOL_VALIDATE(img-&gt;type == stage-&gt;images[i].type, _SG_VALIDATE_ADS_FS_IMG_TYPES);</div><div class="line"><a name="l08921"></a><span class="lineno"> 8921</span>&#160;      }</div><div class="line"><a name="l08922"></a><span class="lineno"> 8922</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08923"></a><span class="lineno"> 8923</span>&#160;      SOKOL_VALIDATE(i &gt;= stage-&gt;num_images, _SG_VALIDATE_ADS_FS_IMGS);</div><div class="line"><a name="l08924"></a><span class="lineno"> 8924</span>&#160;    }</div><div class="line"><a name="l08925"></a><span class="lineno"> 8925</span>&#160;  }</div><div class="line"><a name="l08926"></a><span class="lineno"> 8926</span>&#160;</div><div class="line"><a name="l08927"></a><span class="lineno"> 8927</span>&#160;  <span class="comment">/* check that pipeline attributes match current pass attributes */</span></div><div class="line"><a name="l08928"></a><span class="lineno"> 8928</span>&#160;  <span class="keyword">const</span> _sg_pass* pass = _sg_lookup_pass(&amp;_sg.pools, _sg.cur_pass.id);</div><div class="line"><a name="l08929"></a><span class="lineno"> 8929</span>&#160;  <span class="keywordflow">if</span> (pass) {</div><div class="line"><a name="l08930"></a><span class="lineno"> 8930</span>&#160;    <span class="comment">/* an offscreen pass */</span></div><div class="line"><a name="l08931"></a><span class="lineno"> 8931</span>&#160;    SOKOL_VALIDATE(pip-&gt;color_attachment_count == pass-&gt;num_color_atts, _SG_VALIDATE_ADS_ATT_COUNT);</div><div class="line"><a name="l08932"></a><span class="lineno"> 8932</span>&#160;    SOKOL_VALIDATE(pip-&gt;color_format == pass-&gt;color_atts[0].image-&gt;pixel_format, _SG_VALIDATE_ADS_COLOR_FORMAT);</div><div class="line"><a name="l08933"></a><span class="lineno"> 8933</span>&#160;    SOKOL_VALIDATE(pip-&gt;sample_count == pass-&gt;color_atts[0].image-&gt;sample_count, _SG_VALIDATE_ADS_SAMPLE_COUNT);</div><div class="line"><a name="l08934"></a><span class="lineno"> 8934</span>&#160;    <span class="keywordflow">if</span> (pass-&gt;ds_att.image) {</div><div class="line"><a name="l08935"></a><span class="lineno"> 8935</span>&#160;      SOKOL_VALIDATE(pip-&gt;depth_format == pass-&gt;ds_att.image-&gt;pixel_format, _SG_VALIDATE_ADS_DEPTH_FORMAT);</div><div class="line"><a name="l08936"></a><span class="lineno"> 8936</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08937"></a><span class="lineno"> 8937</span>&#160;      SOKOL_VALIDATE(pip-&gt;depth_format == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abd35ac81800ef42e025231cf6e10956c">SG_PIXELFORMAT_NONE</a>, _SG_VALIDATE_ADS_DEPTH_FORMAT);</div><div class="line"><a name="l08938"></a><span class="lineno"> 8938</span>&#160;    }</div><div class="line"><a name="l08939"></a><span class="lineno"> 8939</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08940"></a><span class="lineno"> 8940</span>&#160;    <span class="comment">/* default pass */</span></div><div class="line"><a name="l08941"></a><span class="lineno"> 8941</span>&#160;    SOKOL_VALIDATE(pip-&gt;color_attachment_count == 1, _SG_VALIDATE_ADS_ATT_COUNT);</div><div class="line"><a name="l08942"></a><span class="lineno"> 8942</span>&#160;    SOKOL_VALIDATE(pip-&gt;color_format == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a>, _SG_VALIDATE_ADS_COLOR_FORMAT);</div><div class="line"><a name="l08943"></a><span class="lineno"> 8943</span>&#160;    SOKOL_VALIDATE(pip-&gt;depth_format == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a>, _SG_VALIDATE_ADS_DEPTH_FORMAT);</div><div class="line"><a name="l08944"></a><span class="lineno"> 8944</span>&#160;    <span class="comment">/* FIXME: hmm, we don&#39;t know if the default framebuffer is multisampled here */</span></div><div class="line"><a name="l08945"></a><span class="lineno"> 8945</span>&#160;  }</div><div class="line"><a name="l08946"></a><span class="lineno"> 8946</span>&#160;  <span class="keywordflow">return</span> SOKOL_VALIDATE_END();</div><div class="line"><a name="l08947"></a><span class="lineno"> 8947</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08948"></a><span class="lineno"> 8948</span>&#160;}</div><div class="line"><a name="l08949"></a><span class="lineno"> 8949</span>&#160;</div><div class="line"><a name="l08950"></a><span class="lineno"> 8950</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_validate_apply_uniform_block(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343">sg_shader_stage</a> stage_index, <span class="keywordtype">int</span> ub_index, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> num_bytes)</div><div class="line"><a name="l08951"></a><span class="lineno"> 8951</span>&#160;{</div><div class="line"><a name="l08952"></a><span class="lineno"> 8952</span>&#160;  _SOKOL_UNUSED(data);</div><div class="line"><a name="l08953"></a><span class="lineno"> 8953</span>&#160;<span class="preprocessor">#if !defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08954"></a><span class="lineno"> 8954</span>&#160;  _SOKOL_UNUSED(stage_index);</div><div class="line"><a name="l08955"></a><span class="lineno"> 8955</span>&#160;  _SOKOL_UNUSED(ub_index);</div><div class="line"><a name="l08956"></a><span class="lineno"> 8956</span>&#160;  _SOKOL_UNUSED(num_bytes);</div><div class="line"><a name="l08957"></a><span class="lineno"> 8957</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l08958"></a><span class="lineno"> 8958</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l08959"></a><span class="lineno"> 8959</span>&#160;  SOKOL_ASSERT((stage_index == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>) || (stage_index == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>));</div><div class="line"><a name="l08960"></a><span class="lineno"> 8960</span>&#160;  SOKOL_ASSERT((ub_index &gt;= 0) &amp;&amp; (ub_index &lt; SG_MAX_SHADERSTAGE_UBS));</div><div class="line"><a name="l08961"></a><span class="lineno"> 8961</span>&#160;  SOKOL_VALIDATE_BEGIN();</div><div class="line"><a name="l08962"></a><span class="lineno"> 8962</span>&#160;  SOKOL_VALIDATE(_sg.cur_pipeline.id != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>, _SG_VALIDATE_AUB_NO_PIPELINE);</div><div class="line"><a name="l08963"></a><span class="lineno"> 8963</span>&#160;  <span class="keyword">const</span> _sg_pipeline* pip = _sg_lookup_pipeline(&amp;_sg.pools, _sg.cur_pipeline.id);</div><div class="line"><a name="l08964"></a><span class="lineno"> 8964</span>&#160;  SOKOL_ASSERT(pip &amp;&amp; (pip-&gt;slot.id == _sg.cur_pipeline.id));</div><div class="line"><a name="l08965"></a><span class="lineno"> 8965</span>&#160;  SOKOL_ASSERT(pip-&gt;shader &amp;&amp; (pip-&gt;shader-&gt;slot.id == pip-&gt;shader_id.id));</div><div class="line"><a name="l08966"></a><span class="lineno"> 8966</span>&#160;</div><div class="line"><a name="l08967"></a><span class="lineno"> 8967</span>&#160;  <span class="comment">/* check that there is a uniform block at &#39;stage&#39; and &#39;ub_index&#39; */</span></div><div class="line"><a name="l08968"></a><span class="lineno"> 8968</span>&#160;  <span class="keyword">const</span> _sg_shader_stage* stage = &amp;pip-&gt;shader-&gt;stage[stage_index];</div><div class="line"><a name="l08969"></a><span class="lineno"> 8969</span>&#160;  SOKOL_VALIDATE(ub_index &lt; stage-&gt;num_uniform_blocks, _SG_VALIDATE_AUB_NO_UB_AT_SLOT);</div><div class="line"><a name="l08970"></a><span class="lineno"> 8970</span>&#160;</div><div class="line"><a name="l08971"></a><span class="lineno"> 8971</span>&#160;  <span class="comment">/* check that the provided data size doesn&#39;t exceed the uniform block size */</span></div><div class="line"><a name="l08972"></a><span class="lineno"> 8972</span>&#160;  SOKOL_VALIDATE(num_bytes &lt;= stage-&gt;uniform_blocks[ub_index].size, _SG_VALIDATE_AUB_SIZE);</div><div class="line"><a name="l08973"></a><span class="lineno"> 8973</span>&#160;</div><div class="line"><a name="l08974"></a><span class="lineno"> 8974</span>&#160;  <span class="keywordflow">return</span> SOKOL_VALIDATE_END();</div><div class="line"><a name="l08975"></a><span class="lineno"> 8975</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08976"></a><span class="lineno"> 8976</span>&#160;}</div><div class="line"><a name="l08977"></a><span class="lineno"> 8977</span>&#160;</div><div class="line"><a name="l08978"></a><span class="lineno"> 8978</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_validate_update_buffer(<span class="keyword">const</span> _sg_buffer* buf, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> size)</div><div class="line"><a name="l08979"></a><span class="lineno"> 8979</span>&#160;{</div><div class="line"><a name="l08980"></a><span class="lineno"> 8980</span>&#160;<span class="preprocessor">#if !defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08981"></a><span class="lineno"> 8981</span>&#160;  _SOKOL_UNUSED(buf);</div><div class="line"><a name="l08982"></a><span class="lineno"> 8982</span>&#160;  _SOKOL_UNUSED(data);</div><div class="line"><a name="l08983"></a><span class="lineno"> 8983</span>&#160;  _SOKOL_UNUSED(size);</div><div class="line"><a name="l08984"></a><span class="lineno"> 8984</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l08985"></a><span class="lineno"> 8985</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l08986"></a><span class="lineno"> 8986</span>&#160;  SOKOL_ASSERT(buf &amp;&amp; data);</div><div class="line"><a name="l08987"></a><span class="lineno"> 8987</span>&#160;  SOKOL_VALIDATE_BEGIN();</div><div class="line"><a name="l08988"></a><span class="lineno"> 8988</span>&#160;  SOKOL_VALIDATE(buf-&gt;usage != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>, _SG_VALIDATE_UPDBUF_USAGE);</div><div class="line"><a name="l08989"></a><span class="lineno"> 8989</span>&#160;  SOKOL_VALIDATE(buf-&gt;size &gt;= size, _SG_VALIDATE_UPDBUF_SIZE);</div><div class="line"><a name="l08990"></a><span class="lineno"> 8990</span>&#160;  SOKOL_VALIDATE(buf-&gt;upd_frame_index != _sg.frame_index, _SG_VALIDATE_UPDBUF_ONCE);</div><div class="line"><a name="l08991"></a><span class="lineno"> 8991</span>&#160;  <span class="keywordflow">return</span> SOKOL_VALIDATE_END();</div><div class="line"><a name="l08992"></a><span class="lineno"> 8992</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l08993"></a><span class="lineno"> 8993</span>&#160;}</div><div class="line"><a name="l08994"></a><span class="lineno"> 8994</span>&#160;</div><div class="line"><a name="l08995"></a><span class="lineno"> 8995</span>&#160;_SOKOL_PRIVATE <span class="keywordtype">bool</span> _sg_validate_update_image(<span class="keyword">const</span> _sg_image* img, <span class="keyword">const</span> <a class="code" href="../../dd/d44/structsg__image__content.html">sg_image_content</a>* data)</div><div class="line"><a name="l08996"></a><span class="lineno"> 8996</span>&#160;{</div><div class="line"><a name="l08997"></a><span class="lineno"> 8997</span>&#160;<span class="preprocessor">#if !defined(SOKOL_DEBUG)</span></div><div class="line"><a name="l08998"></a><span class="lineno"> 8998</span>&#160;  _SOKOL_UNUSED(img);</div><div class="line"><a name="l08999"></a><span class="lineno"> 8999</span>&#160;  _SOKOL_UNUSED(data);</div><div class="line"><a name="l09000"></a><span class="lineno"> 9000</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l09001"></a><span class="lineno"> 9001</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l09002"></a><span class="lineno"> 9002</span>&#160;  SOKOL_ASSERT(img &amp;&amp; data);</div><div class="line"><a name="l09003"></a><span class="lineno"> 9003</span>&#160;  SOKOL_VALIDATE_BEGIN();</div><div class="line"><a name="l09004"></a><span class="lineno"> 9004</span>&#160;  SOKOL_VALIDATE(img-&gt;usage != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a>, _SG_VALIDATE_UPDIMG_USAGE);</div><div class="line"><a name="l09005"></a><span class="lineno"> 9005</span>&#160;  SOKOL_VALIDATE(img-&gt;upd_frame_index != _sg.frame_index, _SG_VALIDATE_UPDIMG_ONCE);</div><div class="line"><a name="l09006"></a><span class="lineno"> 9006</span>&#160;  SOKOL_VALIDATE(!_sg_is_compressed_pixel_format(img-&gt;pixel_format), _SG_VALIDATE_UPDIMG_COMPRESSED);</div><div class="line"><a name="l09007"></a><span class="lineno"> 9007</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> num_faces = (img-&gt;type == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a>) ? 6 : 1;</div><div class="line"><a name="l09008"></a><span class="lineno"> 9008</span>&#160;  <span class="keyword">const</span> <span class="keywordtype">int</span> num_mips = img-&gt;num_mipmaps;</div><div class="line"><a name="l09009"></a><span class="lineno"> 9009</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> face_index = 0; face_index &lt; num_faces; face_index++) {</div><div class="line"><a name="l09010"></a><span class="lineno"> 9010</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> mip_index = 0; mip_index &lt; num_mips; mip_index++) {</div><div class="line"><a name="l09011"></a><span class="lineno"> 9011</span>&#160;      SOKOL_VALIDATE(0 != data-&gt;<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c">ptr</a>, _SG_VALIDATE_UPDIMG_NOTENOUGHDATA);</div><div class="line"><a name="l09012"></a><span class="lineno"> 9012</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> mip_width = _sg_max(img-&gt;width &gt;&gt; mip_index, 1);</div><div class="line"><a name="l09013"></a><span class="lineno"> 9013</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> mip_height = _sg_max(img-&gt;height &gt;&gt; mip_index, 1);</div><div class="line"><a name="l09014"></a><span class="lineno"> 9014</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> bytes_per_slice = _sg_surface_pitch(img-&gt;pixel_format, mip_width, mip_height);</div><div class="line"><a name="l09015"></a><span class="lineno"> 9015</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">int</span> expected_size = bytes_per_slice * img-&gt;depth;</div><div class="line"><a name="l09016"></a><span class="lineno"> 9016</span>&#160;      SOKOL_VALIDATE(data-&gt;<a class="code" href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">subimage</a>[face_index][mip_index].<a class="code" href="../../d1/d35/structsg__subimage__content.html#ad5cf41c09de0390218aaa479aa2e58db">size</a> &lt;= expected_size, _SG_VALIDATE_UPDIMG_SIZE);</div><div class="line"><a name="l09017"></a><span class="lineno"> 9017</span>&#160;    }</div><div class="line"><a name="l09018"></a><span class="lineno"> 9018</span>&#160;  }</div><div class="line"><a name="l09019"></a><span class="lineno"> 9019</span>&#160;  <span class="keywordflow">return</span> SOKOL_VALIDATE_END();</div><div class="line"><a name="l09020"></a><span class="lineno"> 9020</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09021"></a><span class="lineno"> 9021</span>&#160;}</div><div class="line"><a name="l09022"></a><span class="lineno"> 9022</span>&#160;</div><div class="line"><a name="l09023"></a><span class="lineno"> 9023</span>&#160;<span class="comment">/*== PUBLIC API FUNCTIONS ====================================================*/</span></div><div class="line"><a name="l09024"></a><span class="lineno"> 9024</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ad56b640c0528e80c782edcf7a0af6dec">sg_setup</a>(<span class="keyword">const</span> <a class="code" href="../../dc/d0e/structsg__desc.html">sg_desc</a>* desc)</div><div class="line"><a name="l09025"></a><span class="lineno"> 9025</span>&#160;{</div><div class="line"><a name="l09026"></a><span class="lineno"> 9026</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l09027"></a><span class="lineno"> 9027</span>&#160;  SOKOL_ASSERT((desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a0fc23e80acc387fa0248c4af0edae780">_start_canary</a> == 0) &amp;&amp; (desc-&gt;<a class="code" href="../../dc/d0e/structsg__desc.html#a3842693617938076fff77ee1a99a67b9">_end_canary</a> == 0));</div><div class="line"><a name="l09028"></a><span class="lineno"> 9028</span>&#160;  memset(&amp;_sg, 0, <span class="keyword">sizeof</span>(_sg));</div><div class="line"><a name="l09029"></a><span class="lineno"> 9029</span>&#160;  _sg_setup_pools(&amp;_sg.pools, desc);</div><div class="line"><a name="l09030"></a><span class="lineno"> 9030</span>&#160;  _sg.frame_index = 1;</div><div class="line"><a name="l09031"></a><span class="lineno"> 9031</span>&#160;  _sg.next_draw_valid = <span class="keyword">false</span>;</div><div class="line"><a name="l09032"></a><span class="lineno"> 9032</span>&#160;  _sg_setup_backend(desc);</div><div class="line"><a name="l09033"></a><span class="lineno"> 9033</span>&#160;  <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a87b7df71baeaadbe638496d16ebe8776">sg_setup_context</a>();</div><div class="line"><a name="l09034"></a><span class="lineno"> 9034</span>&#160;  _sg.valid = <span class="keyword">true</span>;</div><div class="line"><a name="l09035"></a><span class="lineno"> 9035</span>&#160;}</div><div class="line"><a name="l09036"></a><span class="lineno"> 9036</span>&#160;</div><div class="line"><a name="l09037"></a><span class="lineno"> 9037</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a87d2df69dbdf4769f5897dc74a6112e3">sg_shutdown</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l09038"></a><span class="lineno"> 9038</span>&#160;{</div><div class="line"><a name="l09039"></a><span class="lineno"> 9039</span>&#160;  <span class="comment">/* can only delete resources for the currently set context here, if multiple</span></div><div class="line"><a name="l09040"></a><span class="lineno"> 9040</span>&#160;<span class="comment">    contexts are used, the app code must take care of properly releasing them</span></div><div class="line"><a name="l09041"></a><span class="lineno"> 9041</span>&#160;<span class="comment">    (since only the app code can switch between 3D-API contexts)</span></div><div class="line"><a name="l09042"></a><span class="lineno"> 9042</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l09043"></a><span class="lineno"> 9043</span>&#160;  <span class="keywordflow">if</span> (_sg.active_context.id != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09044"></a><span class="lineno"> 9044</span>&#160;    _sg_context* ctx = _sg_lookup_context(&amp;_sg.pools, _sg.active_context.id);</div><div class="line"><a name="l09045"></a><span class="lineno"> 9045</span>&#160;    <span class="keywordflow">if</span> (ctx) {</div><div class="line"><a name="l09046"></a><span class="lineno"> 9046</span>&#160;      _sg_destroy_all_resources(&amp;_sg.pools, _sg.active_context.id);</div><div class="line"><a name="l09047"></a><span class="lineno"> 9047</span>&#160;      _sg_destroy_context(ctx);</div><div class="line"><a name="l09048"></a><span class="lineno"> 9048</span>&#160;    }</div><div class="line"><a name="l09049"></a><span class="lineno"> 9049</span>&#160;  }</div><div class="line"><a name="l09050"></a><span class="lineno"> 9050</span>&#160;  _sg_discard_backend();</div><div class="line"><a name="l09051"></a><span class="lineno"> 9051</span>&#160;  _sg_discard_pools(&amp;_sg.pools);</div><div class="line"><a name="l09052"></a><span class="lineno"> 9052</span>&#160;  _sg.valid = <span class="keyword">false</span>;</div><div class="line"><a name="l09053"></a><span class="lineno"> 9053</span>&#160;}</div><div class="line"><a name="l09054"></a><span class="lineno"> 9054</span>&#160;</div><div class="line"><a name="l09055"></a><span class="lineno"> 9055</span>&#160;SOKOL_API_IMPL <span class="keywordtype">bool</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a3624f0a3b097e7fd4c78feeee7673616">sg_isvalid</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l09056"></a><span class="lineno"> 9056</span>&#160;{</div><div class="line"><a name="l09057"></a><span class="lineno"> 9057</span>&#160;  <span class="keywordflow">return</span> _sg.valid;</div><div class="line"><a name="l09058"></a><span class="lineno"> 9058</span>&#160;}</div><div class="line"><a name="l09059"></a><span class="lineno"> 9059</span>&#160;</div><div class="line"><a name="l09060"></a><span class="lineno"> 9060</span>&#160;SOKOL_API_IMPL <span class="keywordtype">bool</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af74608f3ba41af079b7757da79c4ddb5">sg_query_feature</a>(sg_feature f)</div><div class="line"><a name="l09061"></a><span class="lineno"> 9061</span>&#160;{</div><div class="line"><a name="l09062"></a><span class="lineno"> 9062</span>&#160;  <span class="keywordflow">return</span> _sg_query_feature(f);</div><div class="line"><a name="l09063"></a><span class="lineno"> 9063</span>&#160;}</div><div class="line"><a name="l09064"></a><span class="lineno"> 9064</span>&#160;</div><div class="line"><a name="l09065"></a><span class="lineno"> 9065</span>&#160;SOKOL_API_IMPL <a class="code" href="../../d2/d13/structsg__context.html">sg_context</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a87b7df71baeaadbe638496d16ebe8776">sg_setup_context</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l09066"></a><span class="lineno"> 9066</span>&#160;{</div><div class="line"><a name="l09067"></a><span class="lineno"> 9067</span>&#160;  <a class="code" href="../../d2/d13/structsg__context.html">sg_context</a> res;</div><div class="line"><a name="l09068"></a><span class="lineno"> 9068</span>&#160;  res.<a class="code" href="../../d2/d13/structsg__context.html#a9ea43d1c0d05c84ca8d1bedbb97f17ca">id</a> = _sg_pool_alloc_id(&amp;_sg.pools.context_pool);</div><div class="line"><a name="l09069"></a><span class="lineno"> 9069</span>&#160;  <span class="keywordflow">if</span> (res.<a class="code" href="../../d2/d13/structsg__context.html#a9ea43d1c0d05c84ca8d1bedbb97f17ca">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09070"></a><span class="lineno"> 9070</span>&#160;    _sg_context* ctx = _sg_context_at(&amp;_sg.pools, res.<a class="code" href="../../d2/d13/structsg__context.html#a9ea43d1c0d05c84ca8d1bedbb97f17ca">id</a>);</div><div class="line"><a name="l09071"></a><span class="lineno"> 9071</span>&#160;    SOKOL_ASSERT(ctx);</div><div class="line"><a name="l09072"></a><span class="lineno"> 9072</span>&#160;    ctx-&gt;slot.id = res.<a class="code" href="../../d2/d13/structsg__context.html#a9ea43d1c0d05c84ca8d1bedbb97f17ca">id</a>;</div><div class="line"><a name="l09073"></a><span class="lineno"> 9073</span>&#160;    ctx-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>;</div><div class="line"><a name="l09074"></a><span class="lineno"> 9074</span>&#160;    _sg_create_context(ctx);</div><div class="line"><a name="l09075"></a><span class="lineno"> 9075</span>&#160;    SOKOL_ASSERT(ctx-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>);</div><div class="line"><a name="l09076"></a><span class="lineno"> 9076</span>&#160;    _sg_activate_context(ctx);</div><div class="line"><a name="l09077"></a><span class="lineno"> 9077</span>&#160;  }</div><div class="line"><a name="l09078"></a><span class="lineno"> 9078</span>&#160;  _sg.active_context = res;</div><div class="line"><a name="l09079"></a><span class="lineno"> 9079</span>&#160;  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l09080"></a><span class="lineno"> 9080</span>&#160;}</div><div class="line"><a name="l09081"></a><span class="lineno"> 9081</span>&#160;</div><div class="line"><a name="l09082"></a><span class="lineno"> 9082</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aaf9c04cd7687218cb7fcc091f0a81e20">sg_discard_context</a>(<a class="code" href="../../d2/d13/structsg__context.html">sg_context</a> ctx_id)</div><div class="line"><a name="l09083"></a><span class="lineno"> 9083</span>&#160;{</div><div class="line"><a name="l09084"></a><span class="lineno"> 9084</span>&#160;  _sg_destroy_all_resources(&amp;_sg.pools, ctx_id.<a class="code" href="../../d2/d13/structsg__context.html#a9ea43d1c0d05c84ca8d1bedbb97f17ca">id</a>);</div><div class="line"><a name="l09085"></a><span class="lineno"> 9085</span>&#160;  _sg_context* ctx = _sg_lookup_context(&amp;_sg.pools, ctx_id.<a class="code" href="../../d2/d13/structsg__context.html#a9ea43d1c0d05c84ca8d1bedbb97f17ca">id</a>);</div><div class="line"><a name="l09086"></a><span class="lineno"> 9086</span>&#160;  <span class="keywordflow">if</span> (ctx) {</div><div class="line"><a name="l09087"></a><span class="lineno"> 9087</span>&#160;    _sg_destroy_context(ctx);</div><div class="line"><a name="l09088"></a><span class="lineno"> 9088</span>&#160;    _sg_pool_free_id(&amp;_sg.pools.context_pool, ctx_id.<a class="code" href="../../d2/d13/structsg__context.html#a9ea43d1c0d05c84ca8d1bedbb97f17ca">id</a>);</div><div class="line"><a name="l09089"></a><span class="lineno"> 9089</span>&#160;  }</div><div class="line"><a name="l09090"></a><span class="lineno"> 9090</span>&#160;  _sg.active_context.id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l09091"></a><span class="lineno"> 9091</span>&#160;  _sg_activate_context(<span class="keyword">nullptr</span>);</div><div class="line"><a name="l09092"></a><span class="lineno"> 9092</span>&#160;}</div><div class="line"><a name="l09093"></a><span class="lineno"> 9093</span>&#160;</div><div class="line"><a name="l09094"></a><span class="lineno"> 9094</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a4f814c06a8a5de60ced94301615d629a">sg_activate_context</a>(<a class="code" href="../../d2/d13/structsg__context.html">sg_context</a> ctx_id)</div><div class="line"><a name="l09095"></a><span class="lineno"> 9095</span>&#160;{</div><div class="line"><a name="l09096"></a><span class="lineno"> 9096</span>&#160;  _sg.active_context = ctx_id;</div><div class="line"><a name="l09097"></a><span class="lineno"> 9097</span>&#160;  _sg_context* ctx = _sg_lookup_context(&amp;_sg.pools, ctx_id.<a class="code" href="../../d2/d13/structsg__context.html#a9ea43d1c0d05c84ca8d1bedbb97f17ca">id</a>);</div><div class="line"><a name="l09098"></a><span class="lineno"> 9098</span>&#160;  <span class="comment">/* NOTE: ctx can be 0 here if the context is no longer valid */</span></div><div class="line"><a name="l09099"></a><span class="lineno"> 9099</span>&#160;  _sg_activate_context(ctx);</div><div class="line"><a name="l09100"></a><span class="lineno"> 9100</span>&#160;}</div><div class="line"><a name="l09101"></a><span class="lineno"> 9101</span>&#160;</div><div class="line"><a name="l09102"></a><span class="lineno"> 9102</span>&#160;<span class="comment">/*-- allocate resource id ----------------------------------------------------*/</span></div><div class="line"><a name="l09103"></a><span class="lineno"> 9103</span>&#160;SOKOL_API_IMPL <a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#adcbc29769a4f9abfc06235a16902a07e">sg_alloc_buffer</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l09104"></a><span class="lineno"> 9104</span>&#160;{</div><div class="line"><a name="l09105"></a><span class="lineno"> 9105</span>&#160;  <a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> res;</div><div class="line"><a name="l09106"></a><span class="lineno"> 9106</span>&#160;  res.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> = _sg_pool_alloc_id(&amp;_sg.pools.buffer_pool);</div><div class="line"><a name="l09107"></a><span class="lineno"> 9107</span>&#160;  <span class="keywordflow">if</span> (res.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09108"></a><span class="lineno"> 9108</span>&#160;    _sg_buffer* buf = _sg_buffer_at(&amp;_sg.pools, res.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>);</div><div class="line"><a name="l09109"></a><span class="lineno"> 9109</span>&#160;    SOKOL_ASSERT(buf &amp;&amp; (buf-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ab50103fecd9e58aada2d5a8fccea86f5">SG_RESOURCESTATE_INITIAL</a>) &amp;&amp; (buf-&gt;slot.id == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>));</div><div class="line"><a name="l09110"></a><span class="lineno"> 9110</span>&#160;    buf-&gt;slot.id = res.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>;</div><div class="line"><a name="l09111"></a><span class="lineno"> 9111</span>&#160;    buf-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>;</div><div class="line"><a name="l09112"></a><span class="lineno"> 9112</span>&#160;  }</div><div class="line"><a name="l09113"></a><span class="lineno"> 9113</span>&#160;  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l09114"></a><span class="lineno"> 9114</span>&#160;}</div><div class="line"><a name="l09115"></a><span class="lineno"> 9115</span>&#160;</div><div class="line"><a name="l09116"></a><span class="lineno"> 9116</span>&#160;SOKOL_API_IMPL <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a282ef9adee0ba6c7c44fb2eb30d2cb42">sg_alloc_image</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l09117"></a><span class="lineno"> 9117</span>&#160;{</div><div class="line"><a name="l09118"></a><span class="lineno"> 9118</span>&#160;  <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> res;</div><div class="line"><a name="l09119"></a><span class="lineno"> 9119</span>&#160;  res.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> = _sg_pool_alloc_id(&amp;_sg.pools.image_pool);</div><div class="line"><a name="l09120"></a><span class="lineno"> 9120</span>&#160;  <span class="keywordflow">if</span> (res.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09121"></a><span class="lineno"> 9121</span>&#160;    _sg_image* img = _sg_image_at(&amp;_sg.pools, res.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l09122"></a><span class="lineno"> 9122</span>&#160;    SOKOL_ASSERT(img &amp;&amp; (img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ab50103fecd9e58aada2d5a8fccea86f5">SG_RESOURCESTATE_INITIAL</a>) &amp;&amp; (img-&gt;slot.id == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>));</div><div class="line"><a name="l09123"></a><span class="lineno"> 9123</span>&#160;    img-&gt;slot.id = res.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>;</div><div class="line"><a name="l09124"></a><span class="lineno"> 9124</span>&#160;    img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>;</div><div class="line"><a name="l09125"></a><span class="lineno"> 9125</span>&#160;  }</div><div class="line"><a name="l09126"></a><span class="lineno"> 9126</span>&#160;  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l09127"></a><span class="lineno"> 9127</span>&#160;}</div><div class="line"><a name="l09128"></a><span class="lineno"> 9128</span>&#160;</div><div class="line"><a name="l09129"></a><span class="lineno"> 9129</span>&#160;SOKOL_API_IMPL <a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ad25f2a76b929e2f2d609c0eda9e925f9">sg_alloc_shader</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l09130"></a><span class="lineno"> 9130</span>&#160;{</div><div class="line"><a name="l09131"></a><span class="lineno"> 9131</span>&#160;  <a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> res;</div><div class="line"><a name="l09132"></a><span class="lineno"> 9132</span>&#160;  res.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a> = _sg_pool_alloc_id(&amp;_sg.pools.shader_pool);</div><div class="line"><a name="l09133"></a><span class="lineno"> 9133</span>&#160;  <span class="keywordflow">if</span> (res.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09134"></a><span class="lineno"> 9134</span>&#160;    _sg_shader* shd = _sg_shader_at(&amp;_sg.pools, res.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a>);</div><div class="line"><a name="l09135"></a><span class="lineno"> 9135</span>&#160;    SOKOL_ASSERT(shd &amp;&amp; (shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ab50103fecd9e58aada2d5a8fccea86f5">SG_RESOURCESTATE_INITIAL</a>) &amp;&amp; (shd-&gt;slot.id == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>));</div><div class="line"><a name="l09136"></a><span class="lineno"> 9136</span>&#160;    shd-&gt;slot.id = res.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a>;</div><div class="line"><a name="l09137"></a><span class="lineno"> 9137</span>&#160;    shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>;</div><div class="line"><a name="l09138"></a><span class="lineno"> 9138</span>&#160;  }</div><div class="line"><a name="l09139"></a><span class="lineno"> 9139</span>&#160;  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l09140"></a><span class="lineno"> 9140</span>&#160;}</div><div class="line"><a name="l09141"></a><span class="lineno"> 9141</span>&#160;</div><div class="line"><a name="l09142"></a><span class="lineno"> 9142</span>&#160;SOKOL_API_IMPL <a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a9a4eca382eeb05642ef2d63d16b20a22">sg_alloc_pipeline</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l09143"></a><span class="lineno"> 9143</span>&#160;{</div><div class="line"><a name="l09144"></a><span class="lineno"> 9144</span>&#160;  <a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> res;</div><div class="line"><a name="l09145"></a><span class="lineno"> 9145</span>&#160;  res.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a> = _sg_pool_alloc_id(&amp;_sg.pools.pipeline_pool);</div><div class="line"><a name="l09146"></a><span class="lineno"> 9146</span>&#160;  <span class="keywordflow">if</span> (res.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09147"></a><span class="lineno"> 9147</span>&#160;    _sg_pipeline* pip = _sg_pipeline_at(&amp;_sg.pools, res.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a>);</div><div class="line"><a name="l09148"></a><span class="lineno"> 9148</span>&#160;    SOKOL_ASSERT(pip &amp;&amp; (pip-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ab50103fecd9e58aada2d5a8fccea86f5">SG_RESOURCESTATE_INITIAL</a>) &amp;&amp; (pip-&gt;slot.id == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>));</div><div class="line"><a name="l09149"></a><span class="lineno"> 9149</span>&#160;    pip-&gt;slot.id = res.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a>;</div><div class="line"><a name="l09150"></a><span class="lineno"> 9150</span>&#160;    pip-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>;</div><div class="line"><a name="l09151"></a><span class="lineno"> 9151</span>&#160;  }</div><div class="line"><a name="l09152"></a><span class="lineno"> 9152</span>&#160;  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l09153"></a><span class="lineno"> 9153</span>&#160;}</div><div class="line"><a name="l09154"></a><span class="lineno"> 9154</span>&#160;</div><div class="line"><a name="l09155"></a><span class="lineno"> 9155</span>&#160;SOKOL_API_IMPL <a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0190a413736517d46f7d0a126dfb674c">sg_alloc_pass</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l09156"></a><span class="lineno"> 9156</span>&#160;{</div><div class="line"><a name="l09157"></a><span class="lineno"> 9157</span>&#160;  <a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> res;</div><div class="line"><a name="l09158"></a><span class="lineno"> 9158</span>&#160;  res.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a> = _sg_pool_alloc_id(&amp;_sg.pools.pass_pool);</div><div class="line"><a name="l09159"></a><span class="lineno"> 9159</span>&#160;  <span class="keywordflow">if</span> (res.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09160"></a><span class="lineno"> 9160</span>&#160;    _sg_pass* pass = _sg_pass_at(&amp;_sg.pools, res.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a>);</div><div class="line"><a name="l09161"></a><span class="lineno"> 9161</span>&#160;    SOKOL_ASSERT(pass &amp;&amp; (pass-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ab50103fecd9e58aada2d5a8fccea86f5">SG_RESOURCESTATE_INITIAL</a>) &amp;&amp; (pass-&gt;slot.id == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>));</div><div class="line"><a name="l09162"></a><span class="lineno"> 9162</span>&#160;    pass-&gt;slot.id = res.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a>;</div><div class="line"><a name="l09163"></a><span class="lineno"> 9163</span>&#160;    pass-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>;</div><div class="line"><a name="l09164"></a><span class="lineno"> 9164</span>&#160;  }</div><div class="line"><a name="l09165"></a><span class="lineno"> 9165</span>&#160;  <span class="keywordflow">return</span> res;</div><div class="line"><a name="l09166"></a><span class="lineno"> 9166</span>&#160;}</div><div class="line"><a name="l09167"></a><span class="lineno"> 9167</span>&#160;</div><div class="line"><a name="l09168"></a><span class="lineno"> 9168</span>&#160;<span class="comment">/*-- initialize an allocated resource ----------------------------------------*/</span></div><div class="line"><a name="l09169"></a><span class="lineno"> 9169</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7ae692e7a55659e9c78839484831d999">sg_init_buffer</a>(<a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> buf_id, <span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__buffer__desc.html">sg_buffer_desc</a>* desc)</div><div class="line"><a name="l09170"></a><span class="lineno"> 9170</span>&#160;{</div><div class="line"><a name="l09171"></a><span class="lineno"> 9171</span>&#160;  SOKOL_ASSERT(buf_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> &amp;&amp; desc);</div><div class="line"><a name="l09172"></a><span class="lineno"> 9172</span>&#160;  _sg_buffer* buf = _sg_lookup_buffer(&amp;_sg.pools, buf_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>);</div><div class="line"><a name="l09173"></a><span class="lineno"> 9173</span>&#160;  SOKOL_ASSERT(buf &amp;&amp; buf-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l09174"></a><span class="lineno"> 9174</span>&#160;  <span class="keywordflow">if</span> (_sg_validate_buffer_desc(desc)) {</div><div class="line"><a name="l09175"></a><span class="lineno"> 9175</span>&#160;    _sg_create_buffer(buf, desc);</div><div class="line"><a name="l09176"></a><span class="lineno"> 9176</span>&#160;    buf-&gt;slot.ctx_id = _sg.active_context.id;</div><div class="line"><a name="l09177"></a><span class="lineno"> 9177</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09178"></a><span class="lineno"> 9178</span>&#160;    buf-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l09179"></a><span class="lineno"> 9179</span>&#160;  }</div><div class="line"><a name="l09180"></a><span class="lineno"> 9180</span>&#160;  SOKOL_ASSERT((buf-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) || (buf-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>));</div><div class="line"><a name="l09181"></a><span class="lineno"> 9181</span>&#160;}</div><div class="line"><a name="l09182"></a><span class="lineno"> 9182</span>&#160;</div><div class="line"><a name="l09183"></a><span class="lineno"> 9183</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7a4124dfd55240178e380c17cce7fcd9">sg_init_image</a>(<a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> img_id, <span class="keyword">const</span> <a class="code" href="../../d4/d94/structsg__image__desc.html">sg_image_desc</a>* desc)</div><div class="line"><a name="l09184"></a><span class="lineno"> 9184</span>&#160;{</div><div class="line"><a name="l09185"></a><span class="lineno"> 9185</span>&#160;  SOKOL_ASSERT(img_id.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> &amp;&amp; desc);</div><div class="line"><a name="l09186"></a><span class="lineno"> 9186</span>&#160;  _sg_image* img = _sg_lookup_image(&amp;_sg.pools, img_id.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l09187"></a><span class="lineno"> 9187</span>&#160;  SOKOL_ASSERT(img &amp;&amp; img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l09188"></a><span class="lineno"> 9188</span>&#160;  <span class="keywordflow">if</span> (_sg_validate_image_desc(desc)) {</div><div class="line"><a name="l09189"></a><span class="lineno"> 9189</span>&#160;    _sg_create_image(img, desc);</div><div class="line"><a name="l09190"></a><span class="lineno"> 9190</span>&#160;    img-&gt;slot.ctx_id = _sg.active_context.id;</div><div class="line"><a name="l09191"></a><span class="lineno"> 9191</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09192"></a><span class="lineno"> 9192</span>&#160;    img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l09193"></a><span class="lineno"> 9193</span>&#160;  }</div><div class="line"><a name="l09194"></a><span class="lineno"> 9194</span>&#160;  SOKOL_ASSERT((img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) || (img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>));</div><div class="line"><a name="l09195"></a><span class="lineno"> 9195</span>&#160;}</div><div class="line"><a name="l09196"></a><span class="lineno"> 9196</span>&#160;</div><div class="line"><a name="l09197"></a><span class="lineno"> 9197</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a45da2d6b2b42e34771f6ac3748eb5945">sg_init_shader</a>(<a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> shd_id, <span class="keyword">const</span> <a class="code" href="../../df/d17/structsg__shader__desc.html">sg_shader_desc</a>* desc)</div><div class="line"><a name="l09198"></a><span class="lineno"> 9198</span>&#160;{</div><div class="line"><a name="l09199"></a><span class="lineno"> 9199</span>&#160;  SOKOL_ASSERT(shd_id.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> &amp;&amp; desc);</div><div class="line"><a name="l09200"></a><span class="lineno"> 9200</span>&#160;  _sg_shader* shd = _sg_lookup_shader(&amp;_sg.pools, shd_id.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a>);</div><div class="line"><a name="l09201"></a><span class="lineno"> 9201</span>&#160;  SOKOL_ASSERT(shd &amp;&amp; shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l09202"></a><span class="lineno"> 9202</span>&#160;  <span class="keywordflow">if</span> (_sg_validate_shader_desc(desc)) {</div><div class="line"><a name="l09203"></a><span class="lineno"> 9203</span>&#160;    _sg_create_shader(shd, desc);</div><div class="line"><a name="l09204"></a><span class="lineno"> 9204</span>&#160;    shd-&gt;slot.ctx_id = _sg.active_context.id;</div><div class="line"><a name="l09205"></a><span class="lineno"> 9205</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09206"></a><span class="lineno"> 9206</span>&#160;    shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l09207"></a><span class="lineno"> 9207</span>&#160;  }</div><div class="line"><a name="l09208"></a><span class="lineno"> 9208</span>&#160;  SOKOL_ASSERT((shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) || (shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>));</div><div class="line"><a name="l09209"></a><span class="lineno"> 9209</span>&#160;}</div><div class="line"><a name="l09210"></a><span class="lineno"> 9210</span>&#160;</div><div class="line"><a name="l09211"></a><span class="lineno"> 9211</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a61cf21a700ef8c1535a3400a0ed0439d">sg_init_pipeline</a>(<a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> pip_id, <span class="keyword">const</span> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html">sg_pipeline_desc</a>* desc)</div><div class="line"><a name="l09212"></a><span class="lineno"> 9212</span>&#160;{</div><div class="line"><a name="l09213"></a><span class="lineno"> 9213</span>&#160;  SOKOL_ASSERT(pip_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> &amp;&amp; desc);</div><div class="line"><a name="l09214"></a><span class="lineno"> 9214</span>&#160;  _sg_pipeline* pip = _sg_lookup_pipeline(&amp;_sg.pools, pip_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a>);</div><div class="line"><a name="l09215"></a><span class="lineno"> 9215</span>&#160;  SOKOL_ASSERT(pip &amp;&amp; pip-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l09216"></a><span class="lineno"> 9216</span>&#160;  <span class="keywordflow">if</span> (_sg_validate_pipeline_desc(desc)) {</div><div class="line"><a name="l09217"></a><span class="lineno"> 9217</span>&#160;    _sg_shader* shd = _sg_lookup_shader(&amp;_sg.pools, desc-&gt;<a class="code" href="../../d5/db3/structsg__pipeline__desc.html#ae193421a3ac922d89a9cbf55788ede65">shader</a>.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a>);</div><div class="line"><a name="l09218"></a><span class="lineno"> 9218</span>&#160;    SOKOL_ASSERT(shd &amp;&amp; shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>);</div><div class="line"><a name="l09219"></a><span class="lineno"> 9219</span>&#160;    _sg_create_pipeline(pip, shd, desc);</div><div class="line"><a name="l09220"></a><span class="lineno"> 9220</span>&#160;    pip-&gt;slot.ctx_id = _sg.active_context.id;</div><div class="line"><a name="l09221"></a><span class="lineno"> 9221</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09222"></a><span class="lineno"> 9222</span>&#160;    pip-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l09223"></a><span class="lineno"> 9223</span>&#160;  }</div><div class="line"><a name="l09224"></a><span class="lineno"> 9224</span>&#160;  SOKOL_ASSERT((pip-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) || (pip-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>));</div><div class="line"><a name="l09225"></a><span class="lineno"> 9225</span>&#160;}</div><div class="line"><a name="l09226"></a><span class="lineno"> 9226</span>&#160;</div><div class="line"><a name="l09227"></a><span class="lineno"> 9227</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae1495ec8896a5f48f769a59fdbaeb022">sg_init_pass</a>(<a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> pass_id, <span class="keyword">const</span> <a class="code" href="../../d4/d2b/structsg__pass__desc.html">sg_pass_desc</a>* desc)</div><div class="line"><a name="l09228"></a><span class="lineno"> 9228</span>&#160;{</div><div class="line"><a name="l09229"></a><span class="lineno"> 9229</span>&#160;  SOKOL_ASSERT(pass_id.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a> &amp;&amp; desc);</div><div class="line"><a name="l09230"></a><span class="lineno"> 9230</span>&#160;  _sg_pass* pass = _sg_lookup_pass(&amp;_sg.pools, pass_id.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a>);</div><div class="line"><a name="l09231"></a><span class="lineno"> 9231</span>&#160;  SOKOL_ASSERT(pass &amp;&amp; pass-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l09232"></a><span class="lineno"> 9232</span>&#160;  <span class="keywordflow">if</span> (_sg_validate_pass_desc(desc)) {</div><div class="line"><a name="l09233"></a><span class="lineno"> 9233</span>&#160;    <span class="comment">/* lookup pass attachment image pointers */</span></div><div class="line"><a name="l09234"></a><span class="lineno"> 9234</span>&#160;    _sg_image* att_imgs[SG_MAX_COLOR_ATTACHMENTS + 1];</div><div class="line"><a name="l09235"></a><span class="lineno"> 9235</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>; i++) {</div><div class="line"><a name="l09236"></a><span class="lineno"> 9236</span>&#160;      <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a0671a1bca34513d50f88c551408643d5">color_attachments</a>[i].<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>) {</div><div class="line"><a name="l09237"></a><span class="lineno"> 9237</span>&#160;        att_imgs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = _sg_lookup_image(&amp;_sg.pools, desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a0671a1bca34513d50f88c551408643d5">color_attachments</a>[i].<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l09238"></a><span class="lineno"> 9238</span>&#160;        SOKOL_ASSERT(att_imgs[i] &amp;&amp; att_imgs[i]-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>);</div><div class="line"><a name="l09239"></a><span class="lineno"> 9239</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09240"></a><span class="lineno"> 9240</span>&#160;        att_imgs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l09241"></a><span class="lineno"> 9241</span>&#160;      }</div><div class="line"><a name="l09242"></a><span class="lineno"> 9242</span>&#160;    }</div><div class="line"><a name="l09243"></a><span class="lineno"> 9243</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> ds_att_index = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a>;</div><div class="line"><a name="l09244"></a><span class="lineno"> 9244</span>&#160;    <span class="keywordflow">if</span> (desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a75a23624c5d16d675a70e62f6ce9ba70">depth_stencil_attachment</a>.<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>) {</div><div class="line"><a name="l09245"></a><span class="lineno"> 9245</span>&#160;      att_imgs[ds_att_index] = _sg_lookup_image(&amp;_sg.pools, desc-&gt;<a class="code" href="../../d4/d2b/structsg__pass__desc.html#a75a23624c5d16d675a70e62f6ce9ba70">depth_stencil_attachment</a>.<a class="code" href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">image</a>.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l09246"></a><span class="lineno"> 9246</span>&#160;      SOKOL_ASSERT(att_imgs[ds_att_index] &amp;&amp; att_imgs[ds_att_index]-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>);</div><div class="line"><a name="l09247"></a><span class="lineno"> 9247</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09248"></a><span class="lineno"> 9248</span>&#160;      att_imgs[ds_att_index] = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l09249"></a><span class="lineno"> 9249</span>&#160;    }</div><div class="line"><a name="l09250"></a><span class="lineno"> 9250</span>&#160;    _sg_create_pass(pass, att_imgs, desc);</div><div class="line"><a name="l09251"></a><span class="lineno"> 9251</span>&#160;    pass-&gt;slot.ctx_id = _sg.active_context.id;</div><div class="line"><a name="l09252"></a><span class="lineno"> 9252</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09253"></a><span class="lineno"> 9253</span>&#160;    pass-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l09254"></a><span class="lineno"> 9254</span>&#160;  }</div><div class="line"><a name="l09255"></a><span class="lineno"> 9255</span>&#160;  SOKOL_ASSERT((pass-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>) || (pass-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>));</div><div class="line"><a name="l09256"></a><span class="lineno"> 9256</span>&#160;}</div><div class="line"><a name="l09257"></a><span class="lineno"> 9257</span>&#160;</div><div class="line"><a name="l09258"></a><span class="lineno"> 9258</span>&#160;<span class="comment">/*-- set allocated resource to failed state ----------------------------------*/</span></div><div class="line"><a name="l09259"></a><span class="lineno"> 9259</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a38dcbb45dd8697d8fe43e1ab549a591a">sg_fail_buffer</a>(<a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> buf_id)</div><div class="line"><a name="l09260"></a><span class="lineno"> 9260</span>&#160;{</div><div class="line"><a name="l09261"></a><span class="lineno"> 9261</span>&#160;  SOKOL_ASSERT(buf_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>);</div><div class="line"><a name="l09262"></a><span class="lineno"> 9262</span>&#160;  _sg_buffer* buf = _sg_lookup_buffer(&amp;_sg.pools, buf_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>);</div><div class="line"><a name="l09263"></a><span class="lineno"> 9263</span>&#160;  SOKOL_ASSERT(buf &amp;&amp; buf-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l09264"></a><span class="lineno"> 9264</span>&#160;  buf-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l09265"></a><span class="lineno"> 9265</span>&#160;}</div><div class="line"><a name="l09266"></a><span class="lineno"> 9266</span>&#160;</div><div class="line"><a name="l09267"></a><span class="lineno"> 9267</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af3724d6a8207077435d3052f3142c3c5">sg_fail_image</a>(<a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> img_id)</div><div class="line"><a name="l09268"></a><span class="lineno"> 9268</span>&#160;{</div><div class="line"><a name="l09269"></a><span class="lineno"> 9269</span>&#160;  SOKOL_ASSERT(img_id.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>);</div><div class="line"><a name="l09270"></a><span class="lineno"> 9270</span>&#160;  _sg_image* img = _sg_lookup_image(&amp;_sg.pools, img_id.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l09271"></a><span class="lineno"> 9271</span>&#160;  SOKOL_ASSERT(img &amp;&amp; img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l09272"></a><span class="lineno"> 9272</span>&#160;  img-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l09273"></a><span class="lineno"> 9273</span>&#160;}</div><div class="line"><a name="l09274"></a><span class="lineno"> 9274</span>&#160;</div><div class="line"><a name="l09275"></a><span class="lineno"> 9275</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ad2057c7d8e728715f2a819d82cf29440">sg_fail_shader</a>(<a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> shd_id)</div><div class="line"><a name="l09276"></a><span class="lineno"> 9276</span>&#160;{</div><div class="line"><a name="l09277"></a><span class="lineno"> 9277</span>&#160;  SOKOL_ASSERT(shd_id.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>);</div><div class="line"><a name="l09278"></a><span class="lineno"> 9278</span>&#160;  _sg_shader* shd = _sg_lookup_shader(&amp;_sg.pools, shd_id.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a>);</div><div class="line"><a name="l09279"></a><span class="lineno"> 9279</span>&#160;  SOKOL_ASSERT(shd &amp;&amp; shd-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l09280"></a><span class="lineno"> 9280</span>&#160;  shd-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l09281"></a><span class="lineno"> 9281</span>&#160;}</div><div class="line"><a name="l09282"></a><span class="lineno"> 9282</span>&#160;</div><div class="line"><a name="l09283"></a><span class="lineno"> 9283</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a9909edd371cdb8cbf6b5580843a06643">sg_fail_pipeline</a>(<a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> pip_id)</div><div class="line"><a name="l09284"></a><span class="lineno"> 9284</span>&#160;{</div><div class="line"><a name="l09285"></a><span class="lineno"> 9285</span>&#160;  SOKOL_ASSERT(pip_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>);</div><div class="line"><a name="l09286"></a><span class="lineno"> 9286</span>&#160;  _sg_pipeline* pip = _sg_lookup_pipeline(&amp;_sg.pools, pip_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a>);</div><div class="line"><a name="l09287"></a><span class="lineno"> 9287</span>&#160;  SOKOL_ASSERT(pip &amp;&amp; pip-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l09288"></a><span class="lineno"> 9288</span>&#160;  pip-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l09289"></a><span class="lineno"> 9289</span>&#160;}</div><div class="line"><a name="l09290"></a><span class="lineno"> 9290</span>&#160;</div><div class="line"><a name="l09291"></a><span class="lineno"> 9291</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a64063d3c15a6b0420ce8849e28cab4e8">sg_fail_pass</a>(<a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> pass_id)</div><div class="line"><a name="l09292"></a><span class="lineno"> 9292</span>&#160;{</div><div class="line"><a name="l09293"></a><span class="lineno"> 9293</span>&#160;  SOKOL_ASSERT(pass_id.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>);</div><div class="line"><a name="l09294"></a><span class="lineno"> 9294</span>&#160;  _sg_pass* pass = _sg_lookup_pass(&amp;_sg.pools, pass_id.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a>);</div><div class="line"><a name="l09295"></a><span class="lineno"> 9295</span>&#160;  SOKOL_ASSERT(pass &amp;&amp; pass-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a>);</div><div class="line"><a name="l09296"></a><span class="lineno"> 9296</span>&#160;  pass-&gt;slot.state = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a>;</div><div class="line"><a name="l09297"></a><span class="lineno"> 9297</span>&#160;}</div><div class="line"><a name="l09298"></a><span class="lineno"> 9298</span>&#160;</div><div class="line"><a name="l09299"></a><span class="lineno"> 9299</span>&#160;<span class="comment">/*-- get resource state */</span></div><div class="line"><a name="l09300"></a><span class="lineno"> 9300</span>&#160;SOKOL_API_IMPL <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2490c2fd9d80a2abe82cfb6d7a3c0498">sg_query_buffer_state</a>(<a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> buf_id)</div><div class="line"><a name="l09301"></a><span class="lineno"> 9301</span>&#160;{</div><div class="line"><a name="l09302"></a><span class="lineno"> 9302</span>&#160;  <span class="keywordflow">if</span> (buf_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09303"></a><span class="lineno"> 9303</span>&#160;    _sg_buffer* buf = _sg_lookup_buffer(&amp;_sg.pools, buf_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>);</div><div class="line"><a name="l09304"></a><span class="lineno"> 9304</span>&#160;    <span class="keywordflow">if</span> (buf) {</div><div class="line"><a name="l09305"></a><span class="lineno"> 9305</span>&#160;      <span class="keywordflow">return</span> buf-&gt;slot.state;</div><div class="line"><a name="l09306"></a><span class="lineno"> 9306</span>&#160;    }</div><div class="line"><a name="l09307"></a><span class="lineno"> 9307</span>&#160;  }</div><div class="line"><a name="l09308"></a><span class="lineno"> 9308</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a2438cce88c4df9a035b4b7cd91e18b69">SG_RESOURCESTATE_INVALID</a>;</div><div class="line"><a name="l09309"></a><span class="lineno"> 9309</span>&#160;}</div><div class="line"><a name="l09310"></a><span class="lineno"> 9310</span>&#160;</div><div class="line"><a name="l09311"></a><span class="lineno"> 9311</span>&#160;SOKOL_API_IMPL <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a951bf62df0f17f0bdc819d3377595a80">sg_query_image_state</a>(<a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> img_id)</div><div class="line"><a name="l09312"></a><span class="lineno"> 9312</span>&#160;{</div><div class="line"><a name="l09313"></a><span class="lineno"> 9313</span>&#160;  <span class="keywordflow">if</span> (img_id.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09314"></a><span class="lineno"> 9314</span>&#160;    _sg_image* img = _sg_lookup_image(&amp;_sg.pools, img_id.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l09315"></a><span class="lineno"> 9315</span>&#160;    <span class="keywordflow">if</span> (img) {</div><div class="line"><a name="l09316"></a><span class="lineno"> 9316</span>&#160;      <span class="keywordflow">return</span> img-&gt;slot.state;</div><div class="line"><a name="l09317"></a><span class="lineno"> 9317</span>&#160;    }</div><div class="line"><a name="l09318"></a><span class="lineno"> 9318</span>&#160;  }</div><div class="line"><a name="l09319"></a><span class="lineno"> 9319</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a2438cce88c4df9a035b4b7cd91e18b69">SG_RESOURCESTATE_INVALID</a>;</div><div class="line"><a name="l09320"></a><span class="lineno"> 9320</span>&#160;}</div><div class="line"><a name="l09321"></a><span class="lineno"> 9321</span>&#160;</div><div class="line"><a name="l09322"></a><span class="lineno"> 9322</span>&#160;SOKOL_API_IMPL <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a09de967fe30a0761245cdbd8e23ece9e">sg_query_shader_state</a>(<a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> shd_id)</div><div class="line"><a name="l09323"></a><span class="lineno"> 9323</span>&#160;{</div><div class="line"><a name="l09324"></a><span class="lineno"> 9324</span>&#160;  <span class="keywordflow">if</span> (shd_id.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09325"></a><span class="lineno"> 9325</span>&#160;    _sg_shader* shd = _sg_lookup_shader(&amp;_sg.pools, shd_id.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a>);</div><div class="line"><a name="l09326"></a><span class="lineno"> 9326</span>&#160;    <span class="keywordflow">if</span> (shd) {</div><div class="line"><a name="l09327"></a><span class="lineno"> 9327</span>&#160;      <span class="keywordflow">return</span> shd-&gt;slot.state;</div><div class="line"><a name="l09328"></a><span class="lineno"> 9328</span>&#160;    }</div><div class="line"><a name="l09329"></a><span class="lineno"> 9329</span>&#160;  }</div><div class="line"><a name="l09330"></a><span class="lineno"> 9330</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a2438cce88c4df9a035b4b7cd91e18b69">SG_RESOURCESTATE_INVALID</a>;</div><div class="line"><a name="l09331"></a><span class="lineno"> 9331</span>&#160;}</div><div class="line"><a name="l09332"></a><span class="lineno"> 9332</span>&#160;</div><div class="line"><a name="l09333"></a><span class="lineno"> 9333</span>&#160;SOKOL_API_IMPL <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#acfc58ab7b45d663c8ea09b16160e8868">sg_query_pipeline_state</a>(<a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> pip_id)</div><div class="line"><a name="l09334"></a><span class="lineno"> 9334</span>&#160;{</div><div class="line"><a name="l09335"></a><span class="lineno"> 9335</span>&#160;  <span class="keywordflow">if</span> (pip_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09336"></a><span class="lineno"> 9336</span>&#160;    _sg_pipeline* pip = _sg_lookup_pipeline(&amp;_sg.pools, pip_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a>);</div><div class="line"><a name="l09337"></a><span class="lineno"> 9337</span>&#160;    <span class="keywordflow">if</span> (pip) {</div><div class="line"><a name="l09338"></a><span class="lineno"> 9338</span>&#160;      <span class="keywordflow">return</span> pip-&gt;slot.state;</div><div class="line"><a name="l09339"></a><span class="lineno"> 9339</span>&#160;    }</div><div class="line"><a name="l09340"></a><span class="lineno"> 9340</span>&#160;  }</div><div class="line"><a name="l09341"></a><span class="lineno"> 9341</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a2438cce88c4df9a035b4b7cd91e18b69">SG_RESOURCESTATE_INVALID</a>;</div><div class="line"><a name="l09342"></a><span class="lineno"> 9342</span>&#160;}</div><div class="line"><a name="l09343"></a><span class="lineno"> 9343</span>&#160;</div><div class="line"><a name="l09344"></a><span class="lineno"> 9344</span>&#160;SOKOL_API_IMPL <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ac8c013f199cef85c5b296cfd8440ad96">sg_query_pass_state</a>(<a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> pass_id)</div><div class="line"><a name="l09345"></a><span class="lineno"> 9345</span>&#160;{</div><div class="line"><a name="l09346"></a><span class="lineno"> 9346</span>&#160;  <span class="keywordflow">if</span> (pass_id.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09347"></a><span class="lineno"> 9347</span>&#160;    _sg_pass* pass = _sg_lookup_pass(&amp;_sg.pools, pass_id.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a>);</div><div class="line"><a name="l09348"></a><span class="lineno"> 9348</span>&#160;    <span class="keywordflow">if</span> (pass) {</div><div class="line"><a name="l09349"></a><span class="lineno"> 9349</span>&#160;      <span class="keywordflow">return</span> pass-&gt;slot.state;</div><div class="line"><a name="l09350"></a><span class="lineno"> 9350</span>&#160;    }</div><div class="line"><a name="l09351"></a><span class="lineno"> 9351</span>&#160;  }</div><div class="line"><a name="l09352"></a><span class="lineno"> 9352</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a2438cce88c4df9a035b4b7cd91e18b69">SG_RESOURCESTATE_INVALID</a>;</div><div class="line"><a name="l09353"></a><span class="lineno"> 9353</span>&#160;}</div><div class="line"><a name="l09354"></a><span class="lineno"> 9354</span>&#160;</div><div class="line"><a name="l09355"></a><span class="lineno"> 9355</span>&#160;<span class="comment">/*-- allocate and initialize resource ----------------------------------------*/</span></div><div class="line"><a name="l09356"></a><span class="lineno"> 9356</span>&#160;SOKOL_API_IMPL <a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab2c0f2d30c0de344f2c437b0eccfec12">sg_make_buffer</a>(<span class="keyword">const</span> <a class="code" href="../../d6/d2c/structsg__buffer__desc.html">sg_buffer_desc</a>* desc)</div><div class="line"><a name="l09357"></a><span class="lineno"> 9357</span>&#160;{</div><div class="line"><a name="l09358"></a><span class="lineno"> 9358</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l09359"></a><span class="lineno"> 9359</span>&#160;  <a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> buf_id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#adcbc29769a4f9abfc06235a16902a07e">sg_alloc_buffer</a>();</div><div class="line"><a name="l09360"></a><span class="lineno"> 9360</span>&#160;  <span class="keywordflow">if</span> (buf_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09361"></a><span class="lineno"> 9361</span>&#160;    <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7ae692e7a55659e9c78839484831d999">sg_init_buffer</a>(buf_id, desc);</div><div class="line"><a name="l09362"></a><span class="lineno"> 9362</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09363"></a><span class="lineno"> 9363</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;buffer pool exhausted!&quot;</span>);</div><div class="line"><a name="l09364"></a><span class="lineno"> 9364</span>&#160;  }</div><div class="line"><a name="l09365"></a><span class="lineno"> 9365</span>&#160;  <span class="keywordflow">return</span> buf_id;</div><div class="line"><a name="l09366"></a><span class="lineno"> 9366</span>&#160;}</div><div class="line"><a name="l09367"></a><span class="lineno"> 9367</span>&#160;</div><div class="line"><a name="l09368"></a><span class="lineno"> 9368</span>&#160;SOKOL_API_IMPL <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a75e522049ecbe2ae946e2433f655fc6e">sg_make_image</a>(<span class="keyword">const</span> <a class="code" href="../../d4/d94/structsg__image__desc.html">sg_image_desc</a>* desc)</div><div class="line"><a name="l09369"></a><span class="lineno"> 9369</span>&#160;{</div><div class="line"><a name="l09370"></a><span class="lineno"> 9370</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l09371"></a><span class="lineno"> 9371</span>&#160;  <a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> img_id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a282ef9adee0ba6c7c44fb2eb30d2cb42">sg_alloc_image</a>();</div><div class="line"><a name="l09372"></a><span class="lineno"> 9372</span>&#160;  <span class="keywordflow">if</span> (img_id.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09373"></a><span class="lineno"> 9373</span>&#160;    <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7a4124dfd55240178e380c17cce7fcd9">sg_init_image</a>(img_id, desc);</div><div class="line"><a name="l09374"></a><span class="lineno"> 9374</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09375"></a><span class="lineno"> 9375</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;image pool exhausted!&quot;</span>);</div><div class="line"><a name="l09376"></a><span class="lineno"> 9376</span>&#160;  }</div><div class="line"><a name="l09377"></a><span class="lineno"> 9377</span>&#160;  <span class="keywordflow">return</span> img_id;</div><div class="line"><a name="l09378"></a><span class="lineno"> 9378</span>&#160;}</div><div class="line"><a name="l09379"></a><span class="lineno"> 9379</span>&#160;</div><div class="line"><a name="l09380"></a><span class="lineno"> 9380</span>&#160;SOKOL_API_IMPL <a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ad803c79a54b89b33f27b9717b1a817a3">sg_make_shader</a>(<span class="keyword">const</span> <a class="code" href="../../df/d17/structsg__shader__desc.html">sg_shader_desc</a>* desc)</div><div class="line"><a name="l09381"></a><span class="lineno"> 9381</span>&#160;{</div><div class="line"><a name="l09382"></a><span class="lineno"> 9382</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l09383"></a><span class="lineno"> 9383</span>&#160;  <a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> shd_id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ad25f2a76b929e2f2d609c0eda9e925f9">sg_alloc_shader</a>();</div><div class="line"><a name="l09384"></a><span class="lineno"> 9384</span>&#160;  <span class="keywordflow">if</span> (shd_id.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09385"></a><span class="lineno"> 9385</span>&#160;    <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a45da2d6b2b42e34771f6ac3748eb5945">sg_init_shader</a>(shd_id, desc);</div><div class="line"><a name="l09386"></a><span class="lineno"> 9386</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09387"></a><span class="lineno"> 9387</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;shader pool exhausted!&quot;</span>);</div><div class="line"><a name="l09388"></a><span class="lineno"> 9388</span>&#160;  }</div><div class="line"><a name="l09389"></a><span class="lineno"> 9389</span>&#160;  <span class="keywordflow">return</span> shd_id;</div><div class="line"><a name="l09390"></a><span class="lineno"> 9390</span>&#160;}</div><div class="line"><a name="l09391"></a><span class="lineno"> 9391</span>&#160;</div><div class="line"><a name="l09392"></a><span class="lineno"> 9392</span>&#160;SOKOL_API_IMPL <a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a2e25513d07365f01407f6da163e56400">sg_make_pipeline</a>(<span class="keyword">const</span> <a class="code" href="../../d5/db3/structsg__pipeline__desc.html">sg_pipeline_desc</a>* desc)</div><div class="line"><a name="l09393"></a><span class="lineno"> 9393</span>&#160;{</div><div class="line"><a name="l09394"></a><span class="lineno"> 9394</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l09395"></a><span class="lineno"> 9395</span>&#160;  <a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> pip_id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a9a4eca382eeb05642ef2d63d16b20a22">sg_alloc_pipeline</a>();</div><div class="line"><a name="l09396"></a><span class="lineno"> 9396</span>&#160;  <span class="keywordflow">if</span> (pip_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09397"></a><span class="lineno"> 9397</span>&#160;    <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a61cf21a700ef8c1535a3400a0ed0439d">sg_init_pipeline</a>(pip_id, desc);</div><div class="line"><a name="l09398"></a><span class="lineno"> 9398</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09399"></a><span class="lineno"> 9399</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;pipeline pool exhausted!&quot;</span>);</div><div class="line"><a name="l09400"></a><span class="lineno"> 9400</span>&#160;  }</div><div class="line"><a name="l09401"></a><span class="lineno"> 9401</span>&#160;  <span class="keywordflow">return</span> pip_id;</div><div class="line"><a name="l09402"></a><span class="lineno"> 9402</span>&#160;}</div><div class="line"><a name="l09403"></a><span class="lineno"> 9403</span>&#160;</div><div class="line"><a name="l09404"></a><span class="lineno"> 9404</span>&#160;SOKOL_API_IMPL <a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a5503739fcb046dbd4cce8e2902b9ef9b">sg_make_pass</a>(<span class="keyword">const</span> <a class="code" href="../../d4/d2b/structsg__pass__desc.html">sg_pass_desc</a>* desc)</div><div class="line"><a name="l09405"></a><span class="lineno"> 9405</span>&#160;{</div><div class="line"><a name="l09406"></a><span class="lineno"> 9406</span>&#160;  SOKOL_ASSERT(desc);</div><div class="line"><a name="l09407"></a><span class="lineno"> 9407</span>&#160;  <a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> pass_id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0190a413736517d46f7d0a126dfb674c">sg_alloc_pass</a>();</div><div class="line"><a name="l09408"></a><span class="lineno"> 9408</span>&#160;  <span class="keywordflow">if</span> (pass_id.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a> != <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>) {</div><div class="line"><a name="l09409"></a><span class="lineno"> 9409</span>&#160;    <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ae1495ec8896a5f48f769a59fdbaeb022">sg_init_pass</a>(pass_id, desc);</div><div class="line"><a name="l09410"></a><span class="lineno"> 9410</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09411"></a><span class="lineno"> 9411</span>&#160;    SOKOL_LOG(<span class="stringliteral">&quot;pass pool exhausted!&quot;</span>);</div><div class="line"><a name="l09412"></a><span class="lineno"> 9412</span>&#160;  }</div><div class="line"><a name="l09413"></a><span class="lineno"> 9413</span>&#160;  <span class="keywordflow">return</span> pass_id;</div><div class="line"><a name="l09414"></a><span class="lineno"> 9414</span>&#160;}</div><div class="line"><a name="l09415"></a><span class="lineno"> 9415</span>&#160;</div><div class="line"><a name="l09416"></a><span class="lineno"> 9416</span>&#160;<span class="comment">/*-- destroy resource --------------------------------------------------------*/</span></div><div class="line"><a name="l09417"></a><span class="lineno"> 9417</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7a89080b6721517f05551debfec2ea8">sg_destroy_buffer</a>(<a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> buf_id)</div><div class="line"><a name="l09418"></a><span class="lineno"> 9418</span>&#160;{</div><div class="line"><a name="l09419"></a><span class="lineno"> 9419</span>&#160;  _sg_buffer* buf = _sg_lookup_buffer(&amp;_sg.pools, buf_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>);</div><div class="line"><a name="l09420"></a><span class="lineno"> 9420</span>&#160;  <span class="keywordflow">if</span> (buf) {</div><div class="line"><a name="l09421"></a><span class="lineno"> 9421</span>&#160;    <span class="keywordflow">if</span> (buf-&gt;slot.ctx_id == _sg.active_context.id) {</div><div class="line"><a name="l09422"></a><span class="lineno"> 9422</span>&#160;      _sg_destroy_buffer(buf);</div><div class="line"><a name="l09423"></a><span class="lineno"> 9423</span>&#160;      _sg_pool_free_id(&amp;_sg.pools.buffer_pool, buf_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>);</div><div class="line"><a name="l09424"></a><span class="lineno"> 9424</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09425"></a><span class="lineno"> 9425</span>&#160;      SOKOL_LOG(<span class="stringliteral">&quot;sg_destroy_buffer: active context mismatch (must be same as for creation)&quot;</span>);</div><div class="line"><a name="l09426"></a><span class="lineno"> 9426</span>&#160;    }</div><div class="line"><a name="l09427"></a><span class="lineno"> 9427</span>&#160;  }</div><div class="line"><a name="l09428"></a><span class="lineno"> 9428</span>&#160;}</div><div class="line"><a name="l09429"></a><span class="lineno"> 9429</span>&#160;</div><div class="line"><a name="l09430"></a><span class="lineno"> 9430</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af4654d2759a13c49ffa3cf9378cab61b">sg_destroy_image</a>(<a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> img_id)</div><div class="line"><a name="l09431"></a><span class="lineno"> 9431</span>&#160;{</div><div class="line"><a name="l09432"></a><span class="lineno"> 9432</span>&#160;  _sg_image* img = _sg_lookup_image(&amp;_sg.pools, img_id.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l09433"></a><span class="lineno"> 9433</span>&#160;  <span class="keywordflow">if</span> (img) {</div><div class="line"><a name="l09434"></a><span class="lineno"> 9434</span>&#160;    <span class="keywordflow">if</span> (img-&gt;slot.ctx_id == _sg.active_context.id) {</div><div class="line"><a name="l09435"></a><span class="lineno"> 9435</span>&#160;      _sg_destroy_image(img);</div><div class="line"><a name="l09436"></a><span class="lineno"> 9436</span>&#160;      _sg_pool_free_id(&amp;_sg.pools.image_pool, img_id.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l09437"></a><span class="lineno"> 9437</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09438"></a><span class="lineno"> 9438</span>&#160;      SOKOL_LOG(<span class="stringliteral">&quot;sg_destroy_image: active context mismatch (must be same as for creation)&quot;</span>);</div><div class="line"><a name="l09439"></a><span class="lineno"> 9439</span>&#160;    }</div><div class="line"><a name="l09440"></a><span class="lineno"> 9440</span>&#160;  }</div><div class="line"><a name="l09441"></a><span class="lineno"> 9441</span>&#160;}</div><div class="line"><a name="l09442"></a><span class="lineno"> 9442</span>&#160;</div><div class="line"><a name="l09443"></a><span class="lineno"> 9443</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a4a00caaf242917010341f4022fbb3b8f">sg_destroy_shader</a>(<a class="code" href="../../da/d75/structsg__shader.html">sg_shader</a> shd_id)</div><div class="line"><a name="l09444"></a><span class="lineno"> 9444</span>&#160;{</div><div class="line"><a name="l09445"></a><span class="lineno"> 9445</span>&#160;  _sg_shader* shd = _sg_lookup_shader(&amp;_sg.pools, shd_id.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a>);</div><div class="line"><a name="l09446"></a><span class="lineno"> 9446</span>&#160;  <span class="keywordflow">if</span> (shd) {</div><div class="line"><a name="l09447"></a><span class="lineno"> 9447</span>&#160;    <span class="keywordflow">if</span> (shd-&gt;slot.ctx_id == _sg.active_context.id) {</div><div class="line"><a name="l09448"></a><span class="lineno"> 9448</span>&#160;      _sg_destroy_shader(shd);</div><div class="line"><a name="l09449"></a><span class="lineno"> 9449</span>&#160;      _sg_pool_free_id(&amp;_sg.pools.shader_pool, shd_id.<a class="code" href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">id</a>);</div><div class="line"><a name="l09450"></a><span class="lineno"> 9450</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09451"></a><span class="lineno"> 9451</span>&#160;      SOKOL_LOG(<span class="stringliteral">&quot;sg_destroy_shader: active context mismatch (must be same as for creation)&quot;</span>);</div><div class="line"><a name="l09452"></a><span class="lineno"> 9452</span>&#160;    }</div><div class="line"><a name="l09453"></a><span class="lineno"> 9453</span>&#160;  }</div><div class="line"><a name="l09454"></a><span class="lineno"> 9454</span>&#160;}</div><div class="line"><a name="l09455"></a><span class="lineno"> 9455</span>&#160;</div><div class="line"><a name="l09456"></a><span class="lineno"> 9456</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a04c754eb981c690bb66677cbedd5ec4b">sg_destroy_pipeline</a>(<a class="code" href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a> pip_id)</div><div class="line"><a name="l09457"></a><span class="lineno"> 9457</span>&#160;{</div><div class="line"><a name="l09458"></a><span class="lineno"> 9458</span>&#160;  _sg_pipeline* pip = _sg_lookup_pipeline(&amp;_sg.pools, pip_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a>);</div><div class="line"><a name="l09459"></a><span class="lineno"> 9459</span>&#160;  <span class="keywordflow">if</span> (pip) {</div><div class="line"><a name="l09460"></a><span class="lineno"> 9460</span>&#160;    <span class="keywordflow">if</span> (pip-&gt;slot.ctx_id == _sg.active_context.id) {</div><div class="line"><a name="l09461"></a><span class="lineno"> 9461</span>&#160;      _sg_destroy_pipeline(pip);</div><div class="line"><a name="l09462"></a><span class="lineno"> 9462</span>&#160;      _sg_pool_free_id(&amp;_sg.pools.pipeline_pool, pip_id.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a>);</div><div class="line"><a name="l09463"></a><span class="lineno"> 9463</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09464"></a><span class="lineno"> 9464</span>&#160;      SOKOL_LOG(<span class="stringliteral">&quot;sg_destroy_pipeline: active context mismatch (must be same as for creation)&quot;</span>);</div><div class="line"><a name="l09465"></a><span class="lineno"> 9465</span>&#160;    }</div><div class="line"><a name="l09466"></a><span class="lineno"> 9466</span>&#160;  }</div><div class="line"><a name="l09467"></a><span class="lineno"> 9467</span>&#160;}</div><div class="line"><a name="l09468"></a><span class="lineno"> 9468</span>&#160;</div><div class="line"><a name="l09469"></a><span class="lineno"> 9469</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af0e5c18f1f5649a4641562d91254181a">sg_destroy_pass</a>(<a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> pass_id)</div><div class="line"><a name="l09470"></a><span class="lineno"> 9470</span>&#160;{</div><div class="line"><a name="l09471"></a><span class="lineno"> 9471</span>&#160;  _sg_pass* pass = _sg_lookup_pass(&amp;_sg.pools, pass_id.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a>);</div><div class="line"><a name="l09472"></a><span class="lineno"> 9472</span>&#160;  <span class="keywordflow">if</span> (pass) {</div><div class="line"><a name="l09473"></a><span class="lineno"> 9473</span>&#160;    <span class="keywordflow">if</span> (pass-&gt;slot.ctx_id == _sg.active_context.id) {</div><div class="line"><a name="l09474"></a><span class="lineno"> 9474</span>&#160;      _sg_destroy_pass(pass);</div><div class="line"><a name="l09475"></a><span class="lineno"> 9475</span>&#160;      _sg_pool_free_id(&amp;_sg.pools.pass_pool, pass_id.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a>);</div><div class="line"><a name="l09476"></a><span class="lineno"> 9476</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09477"></a><span class="lineno"> 9477</span>&#160;      SOKOL_LOG(<span class="stringliteral">&quot;sg_destroy_pass: active context mismatch (must be same as for creation)&quot;</span>);</div><div class="line"><a name="l09478"></a><span class="lineno"> 9478</span>&#160;    }</div><div class="line"><a name="l09479"></a><span class="lineno"> 9479</span>&#160;  }</div><div class="line"><a name="l09480"></a><span class="lineno"> 9480</span>&#160;}</div><div class="line"><a name="l09481"></a><span class="lineno"> 9481</span>&#160;</div><div class="line"><a name="l09482"></a><span class="lineno"> 9482</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a9cef9ed3715d583330d7445daa25f1bf">sg_begin_default_pass</a>(<span class="keyword">const</span> <a class="code" href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a>* pass_action, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height)</div><div class="line"><a name="l09483"></a><span class="lineno"> 9483</span>&#160;{</div><div class="line"><a name="l09484"></a><span class="lineno"> 9484</span>&#160;  SOKOL_ASSERT(pass_action);</div><div class="line"><a name="l09485"></a><span class="lineno"> 9485</span>&#160;  SOKOL_ASSERT((pass_action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#ae001a0dd4c3e5fcf699f325963997ec5">_start_canary</a> == 0) &amp;&amp; (pass_action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#acf2549f347b865e76f6138b0dd8e7a9a">_end_canary</a> == 0));</div><div class="line"><a name="l09486"></a><span class="lineno"> 9486</span>&#160;  <a class="code" href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a> pa;</div><div class="line"><a name="l09487"></a><span class="lineno"> 9487</span>&#160;  _sg_resolve_default_pass_action(pass_action, &amp;pa);</div><div class="line"><a name="l09488"></a><span class="lineno"> 9488</span>&#160;  _sg.cur_pass.id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l09489"></a><span class="lineno"> 9489</span>&#160;  _sg.pass_valid = <span class="keyword">true</span>;</div><div class="line"><a name="l09490"></a><span class="lineno"> 9490</span>&#160;  _sg_begin_pass(<span class="keyword">nullptr</span>, &amp;pa, width, height);</div><div class="line"><a name="l09491"></a><span class="lineno"> 9491</span>&#160;}</div><div class="line"><a name="l09492"></a><span class="lineno"> 9492</span>&#160;</div><div class="line"><a name="l09493"></a><span class="lineno"> 9493</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#af30b7eacdf6fe6765e24d64a78acc7f0">sg_begin_pass</a>(<a class="code" href="../../dc/de5/structsg__pass.html">sg_pass</a> pass_id, <span class="keyword">const</span> <a class="code" href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a>* pass_action)</div><div class="line"><a name="l09494"></a><span class="lineno"> 9494</span>&#160;{</div><div class="line"><a name="l09495"></a><span class="lineno"> 9495</span>&#160;  SOKOL_ASSERT(pass_action);</div><div class="line"><a name="l09496"></a><span class="lineno"> 9496</span>&#160;  SOKOL_ASSERT((pass_action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#ae001a0dd4c3e5fcf699f325963997ec5">_start_canary</a> == 0) &amp;&amp; (pass_action-&gt;<a class="code" href="../../d3/dbc/structsg__pass__action.html#acf2549f347b865e76f6138b0dd8e7a9a">_end_canary</a> == 0));</div><div class="line"><a name="l09497"></a><span class="lineno"> 9497</span>&#160;  _sg.cur_pass = pass_id;</div><div class="line"><a name="l09498"></a><span class="lineno"> 9498</span>&#160;  _sg_pass* pass = _sg_lookup_pass(&amp;_sg.pools, pass_id.<a class="code" href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">id</a>);</div><div class="line"><a name="l09499"></a><span class="lineno"> 9499</span>&#160;  <span class="keywordflow">if</span> (pass &amp;&amp; _sg_validate_begin_pass(pass)) {</div><div class="line"><a name="l09500"></a><span class="lineno"> 9500</span>&#160;    _sg.pass_valid = <span class="keyword">true</span>;</div><div class="line"><a name="l09501"></a><span class="lineno"> 9501</span>&#160;    <a class="code" href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a> pa;</div><div class="line"><a name="l09502"></a><span class="lineno"> 9502</span>&#160;    _sg_resolve_default_pass_action(pass_action, &amp;pa);</div><div class="line"><a name="l09503"></a><span class="lineno"> 9503</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> w = pass-&gt;color_atts[0].image-&gt;width;</div><div class="line"><a name="l09504"></a><span class="lineno"> 9504</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">int</span> h = pass-&gt;color_atts[0].image-&gt;height;</div><div class="line"><a name="l09505"></a><span class="lineno"> 9505</span>&#160;    _sg_begin_pass(pass, &amp;pa, w, h);</div><div class="line"><a name="l09506"></a><span class="lineno"> 9506</span>&#160;  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09507"></a><span class="lineno"> 9507</span>&#160;    _sg.pass_valid = <span class="keyword">false</span>;</div><div class="line"><a name="l09508"></a><span class="lineno"> 9508</span>&#160;  }</div><div class="line"><a name="l09509"></a><span class="lineno"> 9509</span>&#160;}</div><div class="line"><a name="l09510"></a><span class="lineno"> 9510</span>&#160;</div><div class="line"><a name="l09511"></a><span class="lineno"> 9511</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8579dfd47dae6c05ccf4699eeb88e26a">sg_apply_viewport</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <span class="keywordtype">bool</span> origin_top_left)</div><div class="line"><a name="l09512"></a><span class="lineno"> 9512</span>&#160;{</div><div class="line"><a name="l09513"></a><span class="lineno"> 9513</span>&#160;  <span class="keywordflow">if</span> (!_sg.pass_valid) {</div><div class="line"><a name="l09514"></a><span class="lineno"> 9514</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l09515"></a><span class="lineno"> 9515</span>&#160;  }</div><div class="line"><a name="l09516"></a><span class="lineno"> 9516</span>&#160;  _sg_apply_viewport(x, y, width, height, origin_top_left);</div><div class="line"><a name="l09517"></a><span class="lineno"> 9517</span>&#160;}</div><div class="line"><a name="l09518"></a><span class="lineno"> 9518</span>&#160;</div><div class="line"><a name="l09519"></a><span class="lineno"> 9519</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#aa3431cc18622492f90ce688f42f6b40a">sg_apply_scissor_rect</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, <span class="keywordtype">int</span> width, <span class="keywordtype">int</span> height, <span class="keywordtype">bool</span> origin_top_left)</div><div class="line"><a name="l09520"></a><span class="lineno"> 9520</span>&#160;{</div><div class="line"><a name="l09521"></a><span class="lineno"> 9521</span>&#160;  <span class="keywordflow">if</span> (!_sg.pass_valid) {</div><div class="line"><a name="l09522"></a><span class="lineno"> 9522</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l09523"></a><span class="lineno"> 9523</span>&#160;  }</div><div class="line"><a name="l09524"></a><span class="lineno"> 9524</span>&#160;  _sg_apply_scissor_rect(x, y, width, height, origin_top_left);</div><div class="line"><a name="l09525"></a><span class="lineno"> 9525</span>&#160;}</div><div class="line"><a name="l09526"></a><span class="lineno"> 9526</span>&#160;</div><div class="line"><a name="l09527"></a><span class="lineno"> 9527</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a646e4856f8bdf0774941aa3e478ab89a">sg_apply_draw_state</a>(<span class="keyword">const</span> <a class="code" href="../../d5/d1e/structsg__draw__state.html">sg_draw_state</a>* ds)</div><div class="line"><a name="l09528"></a><span class="lineno"> 9528</span>&#160;{</div><div class="line"><a name="l09529"></a><span class="lineno"> 9529</span>&#160;  SOKOL_ASSERT(ds);</div><div class="line"><a name="l09530"></a><span class="lineno"> 9530</span>&#160;  SOKOL_ASSERT((ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#abe01088c56c8be7250b5cf3c3aa147b0">_start_canary</a> == 0) &amp;&amp; (ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a5fb9cce7b6c84e94102ba0f4a6a387b2">_end_canary</a> == 0));</div><div class="line"><a name="l09531"></a><span class="lineno"> 9531</span>&#160;  <span class="keywordflow">if</span> (!_sg_validate_draw_state(ds)) {</div><div class="line"><a name="l09532"></a><span class="lineno"> 9532</span>&#160;    _sg.next_draw_valid = <span class="keyword">false</span>;</div><div class="line"><a name="l09533"></a><span class="lineno"> 9533</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l09534"></a><span class="lineno"> 9534</span>&#160;  }</div><div class="line"><a name="l09535"></a><span class="lineno"> 9535</span>&#160;  <span class="keywordflow">if</span> (!_sg.pass_valid) {</div><div class="line"><a name="l09536"></a><span class="lineno"> 9536</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l09537"></a><span class="lineno"> 9537</span>&#160;  }</div><div class="line"><a name="l09538"></a><span class="lineno"> 9538</span>&#160;  _sg.next_draw_valid = <span class="keyword">true</span>;</div><div class="line"><a name="l09539"></a><span class="lineno"> 9539</span>&#160;  _sg.cur_pipeline = ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#af1a5b81461b7f6774b90d5718d255ae9">pipeline</a>;</div><div class="line"><a name="l09540"></a><span class="lineno"> 9540</span>&#160;</div><div class="line"><a name="l09541"></a><span class="lineno"> 9541</span>&#160;  <span class="comment">/* lookup resource pointers, resources which are not in SG_RESOURCESTATE_VALID</span></div><div class="line"><a name="l09542"></a><span class="lineno"> 9542</span>&#160;<span class="comment">       are not a fatal error, but suppress the following drawcalls, this is to</span></div><div class="line"><a name="l09543"></a><span class="lineno"> 9543</span>&#160;<span class="comment">       allow for simple asynchronous resource setup</span></div><div class="line"><a name="l09544"></a><span class="lineno"> 9544</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l09545"></a><span class="lineno"> 9545</span>&#160;  _sg_pipeline* pip = _sg_lookup_pipeline(&amp;_sg.pools, ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#af1a5b81461b7f6774b90d5718d255ae9">pipeline</a>.<a class="code" href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">id</a>);</div><div class="line"><a name="l09546"></a><span class="lineno"> 9546</span>&#160;  SOKOL_ASSERT(pip);</div><div class="line"><a name="l09547"></a><span class="lineno"> 9547</span>&#160;  _sg.next_draw_valid &amp;= (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a> == pip-&gt;slot.state);</div><div class="line"><a name="l09548"></a><span class="lineno"> 9548</span>&#160;  SOKOL_ASSERT(pip-&gt;shader &amp;&amp; (pip-&gt;shader-&gt;slot.id == pip-&gt;shader_id.id));</div><div class="line"><a name="l09549"></a><span class="lineno"> 9549</span>&#160;</div><div class="line"><a name="l09550"></a><span class="lineno"> 9550</span>&#160;  _sg_buffer* vbs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>] = {<span class="keyword">nullptr</span>};</div><div class="line"><a name="l09551"></a><span class="lineno"> 9551</span>&#160;  <span class="keywordtype">int</span> num_vbs = 0;</div><div class="line"><a name="l09552"></a><span class="lineno"> 9552</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a>; i++, num_vbs++) {</div><div class="line"><a name="l09553"></a><span class="lineno"> 9553</span>&#160;    <span class="keywordflow">if</span> (ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a494e67aed78b918eb5be3e9bffdc29d0">vertex_buffers</a>[i].<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>) {</div><div class="line"><a name="l09554"></a><span class="lineno"> 9554</span>&#160;      vbs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = _sg_lookup_buffer(&amp;_sg.pools, ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a494e67aed78b918eb5be3e9bffdc29d0">vertex_buffers</a>[i].<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>);</div><div class="line"><a name="l09555"></a><span class="lineno"> 9555</span>&#160;      SOKOL_ASSERT(vbs[i]);</div><div class="line"><a name="l09556"></a><span class="lineno"> 9556</span>&#160;      _sg.next_draw_valid &amp;= (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a> == vbs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;slot.state);</div><div class="line"><a name="l09557"></a><span class="lineno"> 9557</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09558"></a><span class="lineno"> 9558</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09559"></a><span class="lineno"> 9559</span>&#160;    }</div><div class="line"><a name="l09560"></a><span class="lineno"> 9560</span>&#160;  }</div><div class="line"><a name="l09561"></a><span class="lineno"> 9561</span>&#160;</div><div class="line"><a name="l09562"></a><span class="lineno"> 9562</span>&#160;  _sg_buffer* ib = <span class="keyword">nullptr</span>;</div><div class="line"><a name="l09563"></a><span class="lineno"> 9563</span>&#160;  <span class="keywordflow">if</span> (ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a312bc4ad2e0fb34b0d4ee9c9517b713e">index_buffer</a>.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>) {</div><div class="line"><a name="l09564"></a><span class="lineno"> 9564</span>&#160;    ib = _sg_lookup_buffer(&amp;_sg.pools, ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a312bc4ad2e0fb34b0d4ee9c9517b713e">index_buffer</a>.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>);</div><div class="line"><a name="l09565"></a><span class="lineno"> 9565</span>&#160;    SOKOL_ASSERT(ib);</div><div class="line"><a name="l09566"></a><span class="lineno"> 9566</span>&#160;    _sg.next_draw_valid &amp;= (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a> == ib-&gt;slot.state);</div><div class="line"><a name="l09567"></a><span class="lineno"> 9567</span>&#160;  }</div><div class="line"><a name="l09568"></a><span class="lineno"> 9568</span>&#160;</div><div class="line"><a name="l09569"></a><span class="lineno"> 9569</span>&#160;  _sg_image* vs_imgs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>] = {<span class="keyword">nullptr</span>};</div><div class="line"><a name="l09570"></a><span class="lineno"> 9570</span>&#160;  <span class="keywordtype">int</span> num_vs_imgs = 0;</div><div class="line"><a name="l09571"></a><span class="lineno"> 9571</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>; i++, num_vs_imgs++) {</div><div class="line"><a name="l09572"></a><span class="lineno"> 9572</span>&#160;    <span class="keywordflow">if</span> (ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a9f49930ca8ebd54ff4eb88cf8c5c7bb6">vs_images</a>[i].<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>) {</div><div class="line"><a name="l09573"></a><span class="lineno"> 9573</span>&#160;      vs_imgs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = _sg_lookup_image(&amp;_sg.pools, ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a9f49930ca8ebd54ff4eb88cf8c5c7bb6">vs_images</a>[i].<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l09574"></a><span class="lineno"> 9574</span>&#160;      SOKOL_ASSERT(vs_imgs[i]);</div><div class="line"><a name="l09575"></a><span class="lineno"> 9575</span>&#160;      _sg.next_draw_valid &amp;= (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a> == vs_imgs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;slot.state);</div><div class="line"><a name="l09576"></a><span class="lineno"> 9576</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09577"></a><span class="lineno"> 9577</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09578"></a><span class="lineno"> 9578</span>&#160;    }</div><div class="line"><a name="l09579"></a><span class="lineno"> 9579</span>&#160;  }</div><div class="line"><a name="l09580"></a><span class="lineno"> 9580</span>&#160;</div><div class="line"><a name="l09581"></a><span class="lineno"> 9581</span>&#160;  _sg_image* fs_imgs[<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>] = {<span class="keyword">nullptr</span>};</div><div class="line"><a name="l09582"></a><span class="lineno"> 9582</span>&#160;  <span class="keywordtype">int</span> num_fs_imgs = 0;</div><div class="line"><a name="l09583"></a><span class="lineno"> 9583</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a>; i++, num_fs_imgs++) {</div><div class="line"><a name="l09584"></a><span class="lineno"> 9584</span>&#160;    <span class="keywordflow">if</span> (ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a0e306492a3df075c8a3231651b0c004d">fs_images</a>[i].<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>) {</div><div class="line"><a name="l09585"></a><span class="lineno"> 9585</span>&#160;      fs_imgs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>] = _sg_lookup_image(&amp;_sg.pools, ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a0e306492a3df075c8a3231651b0c004d">fs_images</a>[i].<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l09586"></a><span class="lineno"> 9586</span>&#160;      SOKOL_ASSERT(fs_imgs[i]);</div><div class="line"><a name="l09587"></a><span class="lineno"> 9587</span>&#160;      _sg.next_draw_valid &amp;= (<a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a> == fs_imgs[<a class="code" href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;slot.state);</div><div class="line"><a name="l09588"></a><span class="lineno"> 9588</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l09589"></a><span class="lineno"> 9589</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09590"></a><span class="lineno"> 9590</span>&#160;    }</div><div class="line"><a name="l09591"></a><span class="lineno"> 9591</span>&#160;  }</div><div class="line"><a name="l09592"></a><span class="lineno"> 9592</span>&#160;  <span class="keywordflow">if</span> (_sg.next_draw_valid) {</div><div class="line"><a name="l09593"></a><span class="lineno"> 9593</span>&#160;    <span class="keyword">const</span> uint32_t* vb_offsets = ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a7beb92cc4c87779d43a98e68e25806e9">vertex_buffer_offsets</a>;</div><div class="line"><a name="l09594"></a><span class="lineno"> 9594</span>&#160;    uint32_t ib_offset = ds-&gt;<a class="code" href="../../d5/d1e/structsg__draw__state.html#a95f9400336ccf0b4cbccfeaa10e635c5">index_buffer_offset</a>;</div><div class="line"><a name="l09595"></a><span class="lineno"> 9595</span>&#160;    _sg_apply_draw_state(pip, vbs, vb_offsets, num_vbs, ib, ib_offset, vs_imgs, num_vs_imgs, fs_imgs, num_fs_imgs);</div><div class="line"><a name="l09596"></a><span class="lineno"> 9596</span>&#160;  }</div><div class="line"><a name="l09597"></a><span class="lineno"> 9597</span>&#160;}</div><div class="line"><a name="l09598"></a><span class="lineno"> 9598</span>&#160;</div><div class="line"><a name="l09599"></a><span class="lineno"> 9599</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0c473ed991f6ac9c3e6f158d9e978341">sg_apply_uniform_block</a>(<a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343">sg_shader_stage</a> stage, <span class="keywordtype">int</span> ub_index, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> num_bytes)</div><div class="line"><a name="l09600"></a><span class="lineno"> 9600</span>&#160;{</div><div class="line"><a name="l09601"></a><span class="lineno"> 9601</span>&#160;  SOKOL_ASSERT((stage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a>) || (stage == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a>));</div><div class="line"><a name="l09602"></a><span class="lineno"> 9602</span>&#160;  SOKOL_ASSERT((ub_index &gt;= 0) &amp;&amp; (ub_index &lt; SG_MAX_SHADERSTAGE_UBS));</div><div class="line"><a name="l09603"></a><span class="lineno"> 9603</span>&#160;  SOKOL_ASSERT(data &amp;&amp; (num_bytes &gt; 0));</div><div class="line"><a name="l09604"></a><span class="lineno"> 9604</span>&#160;  <span class="keywordflow">if</span> (!_sg_validate_apply_uniform_block(stage, ub_index, data, num_bytes)) {</div><div class="line"><a name="l09605"></a><span class="lineno"> 9605</span>&#160;    _sg.next_draw_valid = <span class="keyword">false</span>;</div><div class="line"><a name="l09606"></a><span class="lineno"> 9606</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l09607"></a><span class="lineno"> 9607</span>&#160;  }</div><div class="line"><a name="l09608"></a><span class="lineno"> 9608</span>&#160;  <span class="keywordflow">if</span> (!(_sg.pass_valid &amp;&amp; _sg.next_draw_valid)) {</div><div class="line"><a name="l09609"></a><span class="lineno"> 9609</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l09610"></a><span class="lineno"> 9610</span>&#160;  }</div><div class="line"><a name="l09611"></a><span class="lineno"> 9611</span>&#160;  _sg_apply_uniform_block(stage, ub_index, data, num_bytes);</div><div class="line"><a name="l09612"></a><span class="lineno"> 9612</span>&#160;}</div><div class="line"><a name="l09613"></a><span class="lineno"> 9613</span>&#160;</div><div class="line"><a name="l09614"></a><span class="lineno"> 9614</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a7a6bed991e8cd50486c8b11e827a21ca">sg_draw</a>(<span class="keywordtype">int</span> base_element, <span class="keywordtype">int</span> num_elements, <span class="keywordtype">int</span> num_instances)</div><div class="line"><a name="l09615"></a><span class="lineno"> 9615</span>&#160;{</div><div class="line"><a name="l09616"></a><span class="lineno"> 9616</span>&#160;  <span class="keywordflow">if</span> (!(_sg.pass_valid &amp;&amp; _sg.next_draw_valid)) {</div><div class="line"><a name="l09617"></a><span class="lineno"> 9617</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l09618"></a><span class="lineno"> 9618</span>&#160;  }</div><div class="line"><a name="l09619"></a><span class="lineno"> 9619</span>&#160;  _sg_draw(base_element, num_elements, num_instances);</div><div class="line"><a name="l09620"></a><span class="lineno"> 9620</span>&#160;}</div><div class="line"><a name="l09621"></a><span class="lineno"> 9621</span>&#160;</div><div class="line"><a name="l09622"></a><span class="lineno"> 9622</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a4b2c9e5f83582336dbdf850cf2bb6c46">sg_end_pass</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l09623"></a><span class="lineno"> 9623</span>&#160;{</div><div class="line"><a name="l09624"></a><span class="lineno"> 9624</span>&#160;  <span class="keywordflow">if</span> (!_sg.pass_valid) {</div><div class="line"><a name="l09625"></a><span class="lineno"> 9625</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l09626"></a><span class="lineno"> 9626</span>&#160;  }</div><div class="line"><a name="l09627"></a><span class="lineno"> 9627</span>&#160;  _sg_end_pass();</div><div class="line"><a name="l09628"></a><span class="lineno"> 9628</span>&#160;  _sg.cur_pass.id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l09629"></a><span class="lineno"> 9629</span>&#160;  _sg.cur_pipeline.id = <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a>;</div><div class="line"><a name="l09630"></a><span class="lineno"> 9630</span>&#160;  _sg.pass_valid = <span class="keyword">false</span>;</div><div class="line"><a name="l09631"></a><span class="lineno"> 9631</span>&#160;}</div><div class="line"><a name="l09632"></a><span class="lineno"> 9632</span>&#160;</div><div class="line"><a name="l09633"></a><span class="lineno"> 9633</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a6c8d2e5abcd1c1f0edda555382cd269a">sg_commit</a>()</div><div class="line"><a name="l09634"></a><span class="lineno"> 9634</span>&#160;{</div><div class="line"><a name="l09635"></a><span class="lineno"> 9635</span>&#160;  _sg_commit();</div><div class="line"><a name="l09636"></a><span class="lineno"> 9636</span>&#160;  _sg.frame_index++;</div><div class="line"><a name="l09637"></a><span class="lineno"> 9637</span>&#160;}</div><div class="line"><a name="l09638"></a><span class="lineno"> 9638</span>&#160;</div><div class="line"><a name="l09639"></a><span class="lineno"> 9639</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab33e587bf39ff061f302ead66918a8a4">sg_reset_state_cache</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l09640"></a><span class="lineno"> 9640</span>&#160;{</div><div class="line"><a name="l09641"></a><span class="lineno"> 9641</span>&#160;  _sg_reset_state_cache();</div><div class="line"><a name="l09642"></a><span class="lineno"> 9642</span>&#160;}</div><div class="line"><a name="l09643"></a><span class="lineno"> 9643</span>&#160;</div><div class="line"><a name="l09644"></a><span class="lineno"> 9644</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#adc374778695c2259489197c501ee1f29">sg_update_buffer</a>(<a class="code" href="../../d9/dee/structsg__buffer.html">sg_buffer</a> buf_id, <span class="keyword">const</span> <span class="keywordtype">void</span>* data, <span class="keywordtype">int</span> num_bytes)</div><div class="line"><a name="l09645"></a><span class="lineno"> 9645</span>&#160;{</div><div class="line"><a name="l09646"></a><span class="lineno"> 9646</span>&#160;  <span class="keywordflow">if</span> (num_bytes == 0) {</div><div class="line"><a name="l09647"></a><span class="lineno"> 9647</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l09648"></a><span class="lineno"> 9648</span>&#160;  }</div><div class="line"><a name="l09649"></a><span class="lineno"> 9649</span>&#160;  _sg_buffer* buf = _sg_lookup_buffer(&amp;_sg.pools, buf_id.<a class="code" href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">id</a>);</div><div class="line"><a name="l09650"></a><span class="lineno"> 9650</span>&#160;  <span class="keywordflow">if</span> (!(buf &amp;&amp; buf-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>)) {</div><div class="line"><a name="l09651"></a><span class="lineno"> 9651</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l09652"></a><span class="lineno"> 9652</span>&#160;  }</div><div class="line"><a name="l09653"></a><span class="lineno"> 9653</span>&#160;  <span class="keywordflow">if</span> (_sg_validate_update_buffer(buf, data, num_bytes)) {</div><div class="line"><a name="l09654"></a><span class="lineno"> 9654</span>&#160;    SOKOL_ASSERT(buf-&gt;upd_frame_index != _sg.frame_index);</div><div class="line"><a name="l09655"></a><span class="lineno"> 9655</span>&#160;    _sg_update_buffer(buf, data, num_bytes);</div><div class="line"><a name="l09656"></a><span class="lineno"> 9656</span>&#160;    buf-&gt;upd_frame_index = _sg.frame_index;</div><div class="line"><a name="l09657"></a><span class="lineno"> 9657</span>&#160;  }</div><div class="line"><a name="l09658"></a><span class="lineno"> 9658</span>&#160;}</div><div class="line"><a name="l09659"></a><span class="lineno"> 9659</span>&#160;</div><div class="line"><a name="l09660"></a><span class="lineno"> 9660</span>&#160;SOKOL_API_IMPL <span class="keywordtype">void</span> <a class="code" href="../../d3/da9/sokol__gfx_8h.html#a8d0364be84a366bb82d39ffefda1a9a9">sg_update_image</a>(<a class="code" href="../../d5/de5/structsg__image.html">sg_image</a> img_id, <span class="keyword">const</span> <a class="code" href="../../dd/d44/structsg__image__content.html">sg_image_content</a>* data)</div><div class="line"><a name="l09661"></a><span class="lineno"> 9661</span>&#160;{</div><div class="line"><a name="l09662"></a><span class="lineno"> 9662</span>&#160;  _sg_image* img = _sg_lookup_image(&amp;_sg.pools, img_id.<a class="code" href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">id</a>);</div><div class="line"><a name="l09663"></a><span class="lineno"> 9663</span>&#160;  <span class="keywordflow">if</span> (!(img &amp;&amp; img-&gt;slot.state == <a class="code" href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a>)) {</div><div class="line"><a name="l09664"></a><span class="lineno"> 9664</span>&#160;    <span class="keywordflow">return</span>;</div><div class="line"><a name="l09665"></a><span class="lineno"> 9665</span>&#160;  }</div><div class="line"><a name="l09666"></a><span class="lineno"> 9666</span>&#160;  <span class="keywordflow">if</span> (_sg_validate_update_image(img, data)) {</div><div class="line"><a name="l09667"></a><span class="lineno"> 9667</span>&#160;    SOKOL_ASSERT(img-&gt;upd_frame_index != _sg.frame_index);</div><div class="line"><a name="l09668"></a><span class="lineno"> 9668</span>&#160;    _sg_update_image(img, data);</div><div class="line"><a name="l09669"></a><span class="lineno"> 9669</span>&#160;    img-&gt;upd_frame_index = _sg.frame_index;</div><div class="line"><a name="l09670"></a><span class="lineno"> 9670</span>&#160;  }</div><div class="line"><a name="l09671"></a><span class="lineno"> 9671</span>&#160;}</div><div class="line"><a name="l09672"></a><span class="lineno"> 9672</span>&#160;<span class="preprocessor">#ifdef _MSC_VER</span></div><div class="line"><a name="l09673"></a><span class="lineno"> 9673</span>&#160;<span class="preprocessor">#pragma warning(pop)</span></div><div class="line"><a name="l09674"></a><span class="lineno"> 9674</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l09675"></a><span class="lineno"> 9675</span>&#160;</div><div class="line"><a name="l09676"></a><span class="lineno"> 9676</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* SOKOL_IMPL */</span><span class="preprocessor"></span></div><div class="ttc" id="structsg__desc_html"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html">sg_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01081">sokol_gfx.h:1081</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aea61abcc5cf090318ff1139f08689ce6"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6">sg_vertex_step</a></div><div class="ttdeci">sg_vertex_step</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00706">sokol_gfx.h:706</a></div></div>
<div class="ttc" id="structsg__image__desc_html_aed8145e728a2593423ab83d28efceb49"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#aed8145e728a2593423ab83d28efceb49">sg_image_desc::layers</a></div><div class="ttdeci">int layers</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01245">sokol_gfx.h:1245</a></div></div>
<div class="ttc" id="structsg__pass__action_html"><div class="ttname"><a href="../../d3/dbc/structsg__pass__action.html">sg_pass_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00972">sokol_gfx.h:972</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a15cb970a541969b11409d0adec3b331faaa4aae35b0695932b261357428ca413c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faaa4aae35b0695932b261357428ca413c">SG_FACEWINDING_CW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00762">sokol_gfx.h:762</a></div></div>
<div class="ttc" id="gl3w_8h_html_adc37c7810a40666881e50e11cb01d066"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#adc37c7810a40666881e50e11cb01d066">glClearBufferfi</a></div><div class="ttdeci">#define glClearBufferfi</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00765">gl3w.h:765</a></div></div>
<div class="ttc" id="structsg__pipeline__desc_html_ad9ee6ba045cb445d556d64baa93ae6bf"><div class="ttname"><a href="../../d5/db3/structsg__pipeline__desc.html#ad9ee6ba045cb445d556d64baa93ae6bf">sg_pipeline_desc::_end_canary</a></div><div class="ttdeci">uint32_t _end_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01454">sokol_gfx.h:1454</a></div></div>
<div class="ttc" id="structsg__buffer__layout__desc_html_a31db96a851271a5c840fbd63ba461577"><div class="ttname"><a href="../../dc/da3/structsg__buffer__layout__desc.html#a31db96a851271a5c840fbd63ba461577">sg_buffer_layout_desc::step_func</a></div><div class="ttdeci">sg_vertex_step step_func</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01384">sokol_gfx.h:1384</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08fa6ba93ce02391f49c626baa5e6f7234b2"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6ba93ce02391f49c626baa5e6f7234b2">SG_VERTEXFORMAT_FLOAT3</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00680">sokol_gfx.h:680</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab79db5277fcbe695243c6d68332cbf4ca8a9a7015046cf047f0534dfe86bc7545"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca8a9a7015046cf047f0534dfe86bc7545">SG_MAX_MIPMAPS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00387">sokol_gfx.h:387</a></div></div>
<div class="ttc" id="structsg__depth__stencil__state_html_aa2b77083112d8be99c7c8d33b294aca3"><div class="ttname"><a href="../../d5/d6c/structsg__depth__stencil__state.html#aa2b77083112d8be99c7c8d33b294aca3">sg_depth_stencil_state::stencil_enabled</a></div><div class="ttdeci">bool stencil_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01414">sokol_gfx.h:1414</a></div></div>
<div class="ttc" id="gl3w_8h_html_a10106e4be90a66213839645cf12770f9"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a10106e4be90a66213839645cf12770f9">glGetUniformLocation</a></div><div class="ttdeci">#define glGetUniformLocation</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01004">gl3w.h:1004</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08fa6115bbd19f17c016a55102c485b7658c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6115bbd19f17c016a55102c485b7658c">SG_VERTEXFORMAT_FLOAT4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00681">sokol_gfx.h:681</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a40dc9e4aef0d370a75493b650378654dabe2a7753eb676cf598a48bc4da2af03c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654dabe2a7753eb676cf598a48bc4da2af03c">_SG_WRAP_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00667">sokol_gfx.h:667</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a57ec87baf4c081042b8cdac17c26ce93"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a57ec87baf4c081042b8cdac17c26ce93">GL_RGB5_A1</a></div><div class="ttdeci">#define GL_RGB5_A1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00394">glcorearb.h:394</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ac307a4772e1d3decd5b6f36192113ab6"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac307a4772e1d3decd5b6f36192113ab6">GL_TEXTURE_WRAP_T</a></div><div class="ttdeci">#define GL_TEXTURE_WRAP_T</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00263">glcorearb.h:263</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a5c1d86e7259c30e71a0345564ce133e5"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5c1d86e7259c30e71a0345564ce133e5">SG_PIXELFORMAT_PVRTC2_RGB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00601">sokol_gfx.h:601</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7a6bed991e8cd50486c8b11e827a21ca"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7a6bed991e8cd50486c8b11e827a21ca">sg_draw</a></div><div class="ttdeci">SOKOL_API_DECL void sg_draw(int base_element, int num_elements, int num_instances)</div></div>
<div class="ttc" id="glcorearb_8h_html_ae644ef6b281c9378fa49d9b1ccefaf31"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae644ef6b281c9378fa49d9b1ccefaf31">GL_LINK_STATUS</a></div><div class="ttdeci">#define GL_LINK_STATUS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00759">glcorearb.h:759</a></div></div>
<div class="ttc" id="structsg__rasterizer__state_html_ab1cf2132aacf4df72f511a2c10e75148"><div class="ttname"><a href="../../d9/dbf/structsg__rasterizer__state.html#ab1cf2132aacf4df72f511a2c10e75148">sg_rasterizer_state::alpha_to_coverage_enabled</a></div><div class="ttdeci">bool alpha_to_coverage_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01436">sokol_gfx.h:1436</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa8372ab9e2dc37332d28ecc5bf4508392">SG_STENCILOP_KEEP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00818">sokol_gfx.h:818</a></div></div>
<div class="ttc" id="structsg__blend__state_html_ae8c00c0009bd5fad3b419dadcfebe6c3"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html#ae8c00c0009bd5fad3b419dadcfebe6c3">sg_blend_state::dst_factor_rgb</a></div><div class="ttdeci">sg_blend_factor dst_factor_rgb</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01423">sokol_gfx.h:1423</a></div></div>
<div class="ttc" id="structsg__shader__desc_html_a98ef9f9b20488c2ede05a75901f1d66a"><div class="ttname"><a href="../../df/d17/structsg__shader__desc.html#a98ef9f9b20488c2ede05a75901f1d66a">sg_shader_desc::fs</a></div><div class="ttdeci">sg_shader_stage_desc fs</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01305">sokol_gfx.h:1305</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08fa498741f607f4f10e6b9672dcb9a9c6ac"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa498741f607f4f10e6b9672dcb9a9c6ac">SG_VERTEXFORMAT_FLOAT2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00679">sokol_gfx.h:679</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da672785f059686de7b71ef3444a4bdf46">SG_WRAP_REPEAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00663">sokol_gfx.h:663</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aa7173509aeeb22c24e5f272c3d695641aa1fc6c42a98486bb652164eb9bd3a768"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641aa1fc6c42a98486bb652164eb9bd3a768">_SG_INDEXTYPE_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00511">sokol_gfx.h:511</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a31aeedaeef29442c9c015ab355c8f5ab"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a31aeedaeef29442c9c015ab355c8f5ab">GLfloat</a></div><div class="ttdeci">float GLfloat</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00084">glcorearb.h:84</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af3724d6a8207077435d3052f3142c3c5"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af3724d6a8207077435d3052f3142c3c5">sg_fail_image</a></div><div class="ttdeci">SOKOL_API_DECL void sg_fail_image(sg_image img_id)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08f">sg_vertex_format</a></div><div class="ttdeci">sg_vertex_format</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00676">sokol_gfx.h:676</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2b3da1bbe9c384305496a19de407488aa02f24dee22dfe00513a57620bef88e10"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa02f24dee22dfe00513a57620bef88e10">SG_STENCILOP_INVERT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00823">sokol_gfx.h:823</a></div></div>
<div class="ttc" id="gl3w_8h_html_acf7a528ef1ef237d2a7676dcb0f22473"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#acf7a528ef1ef237d2a7676dcb0f22473">glCompileShader</a></div><div class="ttdeci">#define glCompileShader</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00785">gl3w.h:785</a></div></div>
<div class="ttc" id="namespacenlohmann_1_1detail_html_a1ed8fc6239da25abcaf681d30ace4985a37a6259cc0c1dae299a7866489dff0bd"><div class="ttname"><a href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985a37a6259cc0c1dae299a7866489dff0bd">nlohmann::detail::value_t::null</a></div><div class="ttdoc">null value </div></div>
<div class="ttc" id="glcorearb_8h_html_aa290e8f9ee6f6862778355aa22bb0b13"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa290e8f9ee6f6862778355aa22bb0b13">GL_BLEND</a></div><div class="ttdeci">#define GL_BLEND</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00171">glcorearb.h:171</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a282ef9adee0ba6c7c44fb2eb30d2cb42"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a282ef9adee0ba6c7c44fb2eb30d2cb42">sg_alloc_image</a></div><div class="ttdeci">SOKOL_API_DECL sg_image sg_alloc_image(void)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a4b2c9e5f83582336dbdf850cf2bb6c46"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a4b2c9e5f83582336dbdf850cf2bb6c46">sg_end_pass</a></div><div class="ttdeci">SOKOL_API_DECL void sg_end_pass(void)</div></div>
<div class="ttc" id="glcorearb_8h_html_a5df9ef909394266c939ee408f172b169"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5df9ef909394266c939ee408f172b169">GL_RGB8</a></div><div class="ttdeci">#define GL_RGB8</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00388">glcorearb.h:388</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a5707e92aad083b7e905f1cef363a736a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5707e92aad083b7e905f1cef363a736a">SG_PIXELFORMAT_DXT5</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00598">sokol_gfx.h:598</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aa7173509aeeb22c24e5f272c3d695641af2db5a51a476ced67a09acbf097bfdaf"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641af2db5a51a476ced67a09acbf097bfdaf">_SG_INDEXTYPE_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00515">sokol_gfx.h:515</a></div></div>
<div class="ttc" id="structsg__buffer__desc_html_a409e6cb69174e210981627d0a356bf65"><div class="ttname"><a href="../../d6/d2c/structsg__buffer__desc.html#a409e6cb69174e210981627d0a356bf65">sg_buffer_desc::content</a></div><div class="ttdeci">const void * content</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01150">sokol_gfx.h:1150</a></div></div>
<div class="ttc" id="structsg__rasterizer__state_html_a15a60b827b6583f861bb79ff86a8383b"><div class="ttname"><a href="../../d9/dbf/structsg__rasterizer__state.html#a15a60b827b6583f861bb79ff86a8383b">sg_rasterizer_state::depth_bias_clamp</a></div><div class="ttdeci">float depth_bias_clamp</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01442">sokol_gfx.h:1442</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a94ae715eebfc1eb65456c0ab9b97f1e9"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a94ae715eebfc1eb65456c0ab9b97f1e9">indices</a></div><div class="ttdeci">GLsizei GLenum const void * indices</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00401">glcorearb.h:401</a></div></div>
<div class="ttc" id="structsg__depth__stencil__state_html_aa56df1e37358dcc30cb8d95c1051d805"><div class="ttname"><a href="../../d5/d6c/structsg__depth__stencil__state.html#aa56df1e37358dcc30cb8d95c1051d805">sg_depth_stencil_state::stencil_write_mask</a></div><div class="ttdeci">uint8_t stencil_write_mask</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01416">sokol_gfx.h:1416</a></div></div>
<div class="ttc" id="structsg__layout__desc_html"><div class="ttname"><a href="../../d1/d64/structsg__layout__desc.html">sg_layout_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01397">sokol_gfx.h:1397</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a83dfd180c0229d2b8771f3acd446c5a2afef650993104605060041d526b983e43"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2afef650993104605060041d526b983e43">_SG_UNIFORMTYPE_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00728">sokol_gfx.h:728</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad4de17abefa73fa2ef53379f73b734be"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad4de17abefa73fa2ef53379f73b734be">GL_TEXTURE_2D</a></div><div class="ttdeci">#define GL_TEXTURE_2D</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00199">glcorearb.h:199</a></div></div>
<div class="ttc" id="structsg__pass__action_html_a7936287512ce12fc9a9bdc4c90ef1a75"><div class="ttname"><a href="../../d3/dbc/structsg__pass__action.html#a7936287512ce12fc9a9bdc4c90ef1a75">sg_pass_action::stencil</a></div><div class="ttdeci">sg_stencil_attachment_action stencil</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00976">sokol_gfx.h:976</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a5503739fcb046dbd4cce8e2902b9ef9b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a5503739fcb046dbd4cce8e2902b9ef9b">sg_make_pass</a></div><div class="ttdeci">SOKOL_API_DECL sg_pass sg_make_pass(const sg_pass_desc *desc)</div></div>
<div class="ttc" id="glcorearb_8h_html_a7ec02582a9b1c390908a2230c8e26c0b"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7ec02582a9b1c390908a2230c8e26c0b">GL_NEAREST</a></div><div class="ttdeci">#define GL_NEAREST</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00254">glcorearb.h:254</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897">sg_feature</a></div><div class="ttdeci">sg_feature</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00397">sokol_gfx.h:397</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a9f2854f4a91a0d83d2d54cb8110bfca4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9f2854f4a91a0d83d2d54cb8110bfca4">GL_RGBA</a></div><div class="ttdeci">#define GL_RGBA</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00242">glcorearb.h:242</a></div></div>
<div class="ttc" id="glcorearb_8h_html_acebcc1c5663f14ebde1d16831e5fed94"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#acebcc1c5663f14ebde1d16831e5fed94">GLint</a></div><div class="ttdeci">int GLint</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00085">glcorearb.h:85</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a5c56d586c7b2588c4f0413e1a92fd181"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5c56d586c7b2588c4f0413e1a92fd181">commit</a></div><div class="ttdeci">GLintptr GLsizeiptr GLboolean commit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l03597">glcorearb.h:3597</a></div></div>
<div class="ttc" id="structsg__vertex__attr__desc_html_a987b32666e62b0aa825701c0ac03484e"><div class="ttname"><a href="../../d5/d83/structsg__vertex__attr__desc.html#a987b32666e62b0aa825701c0ac03484e">sg_vertex_attr_desc::offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01393">sokol_gfx.h:1393</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a68c4714e43d8e827d80759f9cb864f3c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a68c4714e43d8e827d80759f9cb864f3c">GLuint</a></div><div class="ttdeci">unsigned int GLuint</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00089">glcorearb.h:89</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897afd60e8098c18e6a67973d66e173742d8"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897afd60e8098c18e6a67973d66e173742d8">SG_FEATURE_TEXTURE_FLOAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00403">sokol_gfx.h:403</a></div></div>
<div class="ttc" id="structsg__shader__uniform__block__desc_html_aefa157133ba3547c4d2eee4a42f6e483"><div class="ttname"><a href="../../dd/d14/structsg__shader__uniform__block__desc.html#aefa157133ba3547c4d2eee4a42f6e483">sg_shader_uniform_block_desc::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01284">sokol_gfx.h:1284</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08fa5bb6681394fe029a0ca1fa0e00e85da9"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5bb6681394fe029a0ca1fa0e00e85da9">SG_VERTEXFORMAT_BYTE4N</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00683">sokol_gfx.h:683</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a7a2b436e565363c81b22611b8392a341"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7a2b436e565363c81b22611b8392a341">GL_SHORT</a></div><div class="ttdeci">#define GL_SHORT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00208">glcorearb.h:208</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a13e611dd4ec10121133e67c09b41ec64af7100f1ce552616065bb07bb9b989219"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af7100f1ce552616065bb07bb9b989219">_SG_COMPAREFUNC_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00783">sokol_gfx.h:783</a></div></div>
<div class="ttc" id="structsg__depth__attachment__action_html_afd874c73b9eeb2251453c66f88d620f9"><div class="ttname"><a href="../../d3/dd4/structsg__depth__attachment__action.html#afd874c73b9eeb2251453c66f88d620f9">sg_depth_attachment_action::action</a></div><div class="ttdeci">sg_action action</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00963">sokol_gfx.h:963</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad38e94a1120d6688fce6fc805a5b998d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad38e94a1120d6688fce6fc805a5b998d">GL_TRIANGLE_STRIP</a></div><div class="ttdeci">#define GL_TRIANGLE_STRIP</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00102">glcorearb.h:102</a></div></div>
<div class="ttc" id="structsg__attachment__desc_html_a75e122aeb68f7e8e2ab0665643730638"><div class="ttname"><a href="../../d1/da2/structsg__attachment__desc.html#a75e122aeb68f7e8e2ab0665643730638">sg_attachment_desc::layer</a></div><div class="ttdeci">int layer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01485">sokol_gfx.h:1485</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daea6ab3f114b3e947f9d6e12016ffe18b">SG_IMAGETYPE_ARRAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00534">sokol_gfx.h:534</a></div></div>
<div class="ttc" id="glcorearb_8h_html_abd92661d757c8e8c0e50c1b9c3ce496e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#abd92661d757c8e8c0e50c1b9c3ce496e">clamp</a></div><div class="ttdeci">GLenum clamp</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01247">glcorearb.h:1247</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a7175b4e16310c573ebd6d4c278815b1a"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7175b4e16310c573ebd6d4c278815b1a">GL_RGB565</a></div><div class="ttdeci">#define GL_RGB565</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01918">glcorearb.h:1918</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343a28db92aff2b5ac394031f23c3a5028fd">SG_SHADERSTAGE_VS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00568">sokol_gfx.h:568</a></div></div>
<div class="ttc" id="structsg__pass__desc_html_a75a23624c5d16d675a70e62f6ce9ba70"><div class="ttname"><a href="../../d4/d2b/structsg__pass__desc.html#a75a23624c5d16d675a70e62f6ce9ba70">sg_pass_desc::depth_stencil_attachment</a></div><div class="ttdeci">sg_attachment_desc depth_stencil_attachment</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01493">sokol_gfx.h:1493</a></div></div>
<div class="ttc" id="gl3w_8h_html_a4d3447ff3caf454bc686968fbe5f04bf"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a4d3447ff3caf454bc686968fbe5f04bf">glCreateShader</a></div><div class="ttdeci">#define glCreateShader</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00813">gl3w.h:813</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a66babbe2e30a6fed6c6c60eae6453391"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a66babbe2e30a6fed6c6c60eae6453391">GL_COLOR_ATTACHMENT2</a></div><div class="ttdeci">#define GL_COLOR_ATTACHMENT2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01151">glcorearb.h:1151</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08faa1eac19f3f2048bed0f6b71f844e9bdb"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa1eac19f3f2048bed0f6b71f844e9bdb">SG_VERTEXFORMAT_UBYTE4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00684">sokol_gfx.h:684</a></div></div>
<div class="ttc" id="structsg__pipeline_html"><div class="ttname"><a href="../../d5/d97/structsg__pipeline.html">sg_pipeline</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00361">sokol_gfx.h:361</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4abd35ac81800ef42e025231cf6e10956c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abd35ac81800ef42e025231cf6e10956c">SG_PIXELFORMAT_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00584">sokol_gfx.h:584</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4ad9b9e06c0f4c4576ddaa64de29903aa8"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ad9b9e06c0f4c4576ddaa64de29903aa8">SG_PIXELFORMAT_DEPTH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00599">sokol_gfx.h:599</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98aeb1ae23d2d8136f7fc0a453dc48ce3a0"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98aeb1ae23d2d8136f7fc0a453dc48ce3a0">SG_BLENDFACTOR_BLEND_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00861">sokol_gfx.h:861</a></div></div>
<div class="ttc" id="structsg__desc_html_a04b19d54bf3b446715faac7ee895a6ad"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#a04b19d54bf3b446715faac7ee895a6ad">sg_desc::buffer_pool_size</a></div><div class="ttdeci">int buffer_pool_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01083">sokol_gfx.h:1083</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ad803c79a54b89b33f27b9717b1a817a3"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ad803c79a54b89b33f27b9717b1a817a3">sg_make_shader</a></div><div class="ttdeci">SOKOL_API_DECL sg_shader sg_make_shader(const sg_shader_desc *desc)</div></div>
<div class="ttc" id="gl3w_8h_html_a71a2d01a12606fc26c1a28dba23dfce2"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a71a2d01a12606fc26c1a28dba23dfce2">glGenVertexArrays</a></div><div class="ttdeci">#define glGenVertexArrays</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00895">gl3w.h:895</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a7cc28a336de67a2fee6a39c0a4cb3eb6"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a7cc28a336de67a2fee6a39c0a4cb3eb6">sg_image_desc::mag_filter</a></div><div class="ttdeci">sg_filter mag_filter</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01252">sokol_gfx.h:1252</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a13e611dd4ec10121133e67c09b41ec64af86c478058edd323bd609ff4bf2e848d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af86c478058edd323bd609ff4bf2e848d">SG_COMPAREFUNC_GREATER_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00790">sokol_gfx.h:790</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a13e611dd4ec10121133e67c09b41ec64a508dd2aada97b6358f31c4425fe84c82"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a508dd2aada97b6358f31c4425fe84c82">SG_COMPAREFUNC_GREATER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00788">sokol_gfx.h:788</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af96fe6904f2e8551526ab1c6cf082f6a">SG_RESOURCESTATE_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00438">sokol_gfx.h:438</a></div></div>
<div class="ttc" id="gl3w_8h_html_a70ad6a21033347a0478dad517dd2bb83"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a70ad6a21033347a0478dad517dd2bb83">glGetIntegerv</a></div><div class="ttdeci">#define glGetIntegerv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00933">gl3w.h:933</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a44a85282cd9022542edd9b29b44b4221"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a44a85282cd9022542edd9b29b44b4221">GL_CONSTANT_COLOR</a></div><div class="ttdeci">#define GL_CONSTANT_COLOR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00588">glcorearb.h:588</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a70f6468f185f15b25019554f4207c0ccafa387c8c45104f25a8e2a68486ae620c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0ccafa387c8c45104f25a8e2a68486ae620c">SG_USAGE_STREAM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00479">sokol_gfx.h:479</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a65deea510785efb62849e55b84193263"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a65deea510785efb62849e55b84193263">sg_image_desc::min_lod</a></div><div class="ttdeci">float min_lod</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01257">sokol_gfx.h:1257</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8d2e8004bbf5d91de9c0e3184a665d1c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8d2e8004bbf5d91de9c0e3184a665d1c">GL_GEQUAL</a></div><div class="ttdeci">#define GL_GEQUAL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00111">glcorearb.h:111</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a370d423f9ed51188d2bffdad4f5f8230"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a370d423f9ed51188d2bffdad4f5f8230">GL_PROGRAM_POINT_SIZE</a></div><div class="ttdeci">#define GL_PROGRAM_POINT_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01548">glcorearb.h:1548</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aaeed69f7c55e377901d9ff6d00463efa"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aaeed69f7c55e377901d9ff6d00463efa">GL_COMPRESSED_RGBA_S3TC_DXT1_EXT</a></div><div class="ttdeci">#define GL_COMPRESSED_RGBA_S3TC_DXT1_EXT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l04556">glcorearb.h:4556</a></div></div>
<div class="ttc" id="structsg__stencil__attachment__action_html"><div class="ttname"><a href="../../d3/d48/structsg__stencil__attachment__action.html">sg_stencil_attachment_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00967">sokol_gfx.h:967</a></div></div>
<div class="ttc" id="structsg__shader__uniform__desc_html_a09493618d985e76c5160c8611624da4e"><div class="ttname"><a href="../../d2/d67/structsg__shader__uniform__desc.html#a09493618d985e76c5160c8611624da4e">sg_shader_uniform_desc::type</a></div><div class="ttdeci">sg_uniform_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01279">sokol_gfx.h:1279</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a6e9e9f45468754a0b59bf3406d3b5009"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6e9e9f45468754a0b59bf3406d3b5009">GL_UNSIGNED_INT_24_8</a></div><div class="ttdeci">#define GL_UNSIGNED_INT_24_8</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01121">glcorearb.h:1121</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a05bc3a1fdd98251d126a8946a10f9dc8"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a05bc3a1fdd98251d126a8946a10f9dc8">GL_MIRRORED_REPEAT</a></div><div class="ttdeci">#define GL_MIRRORED_REPEAT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00575">glcorearb.h:575</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a72086daeeb80e5eb5788f42a4eea050e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a72086daeeb80e5eb5788f42a4eea050e">GL_ZERO</a></div><div class="ttdeci">#define GL_ZERO</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00113">glcorearb.h:113</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_a08a5eaaa645e878bd69d4ab93f41e87c"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#a08a5eaaa645e878bd69d4ab93f41e87c">int</a></div><div class="ttdeci">Visualize clusters only Timeframe settings Average distance in cm of events merged into Randomize distance around average distance of merged events int</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00025">qconfigoptions.h:25</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ae90f81f48642444b4ba7fa5cacf40569"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae90f81f48642444b4ba7fa5cacf40569">GL_CLAMP_TO_EDGE</a></div><div class="ttdeci">#define GL_CLAMP_TO_EDGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00460">glcorearb.h:460</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ae1495ec8896a5f48f769a59fdbaeb022"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ae1495ec8896a5f48f769a59fdbaeb022">sg_init_pass</a></div><div class="ttdeci">SOKOL_API_DECL void sg_init_pass(sg_pass pass_id, const sg_pass_desc *desc)</div></div>
<div class="ttc" id="glcorearb_8h_html_aecefebb35dbd5ba89022d6588c42de81"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aecefebb35dbd5ba89022d6588c42de81">GL_STENCIL_ATTACHMENT</a></div><div class="ttdeci">#define GL_STENCIL_ATTACHMENT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01182">glcorearb.h:1182</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8bdcfddea25084e36bde4357057071d4"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4">sg_primitive_type</a></div><div class="ttdeci">sg_primitive_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00620">sokol_gfx.h:620</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a83dfd180c0229d2b8771f3acd446c5a2adf763c6ae4deffca464f45c3401761f6"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2adf763c6ae4deffca464f45c3401761f6">SG_UNIFORMTYPE_FLOAT3</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00725">sokol_gfx.h:725</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897a4ea76b74c925bb54348d8d8d21977e05"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a4ea76b74c925bb54348d8d8d21977e05">SG_NUM_FEATURES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00413">sokol_gfx.h:413</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a40dc9e4aef0d370a75493b650378654daa970e343704dddd57115f2d834241b78"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654daa970e343704dddd57115f2d834241b78">SG_WRAP_CLAMP_TO_EDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00664">sokol_gfx.h:664</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aac16527902deb1ddf6b84a9ce3da6e84"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aac16527902deb1ddf6b84a9ce3da6e84">GL_DEPTH_COMPONENT</a></div><div class="ttdeci">#define GL_DEPTH_COMPONENT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00236">glcorearb.h:236</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a7e0d5c7130c32b489e509a6bcfd9904a"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a7e0d5c7130c32b489e509a6bcfd9904a">sg_image_desc::sample_count</a></div><div class="ttdeci">int sample_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01250">sokol_gfx.h:1250</a></div></div>
<div class="ttc" id="gl3w_8h_html_afa884c4d2bb798b2161823f81ad56bce"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#afa884c4d2bb798b2161823f81ad56bce">glGenFramebuffers</a></div><div class="ttdeci">#define glGenFramebuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00888">gl3w.h:888</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7c3779d838681f3083729a9f80ea6ab2a1c86758e08ef3870ba966a2f83289407"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a1c86758e08ef3870ba966a2f83289407">SG_COLORMASK_R</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00902">sokol_gfx.h:902</a></div></div>
<div class="ttc" id="structsg__attachment__desc_html_a0b824f5ffdb6667abbac67ff16a03aec"><div class="ttname"><a href="../../d1/da2/structsg__attachment__desc.html#a0b824f5ffdb6667abbac67ff16a03aec">sg_attachment_desc::image</a></div><div class="ttdeci">sg_image image</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01481">sokol_gfx.h:1481</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a16cc91096144fc7048b45e2add14915b"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a16cc91096144fc7048b45e2add14915b">GL_TEXTURE0</a></div><div class="ttdeci">#define GL_TEXTURE0</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00484">glcorearb.h:484</a></div></div>
<div class="ttc" id="namespaceo2_1_1mid_html_ace6b84ba8e24525ead602cbda42f1bfb"><div class="ttname"><a href="../../df/d18/namespaceo2_1_1mid.html#ace6b84ba8e24525ead602cbda42f1bfb">o2::mid::if</a></div><div class="ttdeci">if(clusterizer.getClusters().size()&lt; minNcl)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dee/testClusterizer_8cxx_source.html#l00190">testClusterizer.cxx:190</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a950fc91edb4504f62f1c577bf4727c29"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a950fc91edb4504f62f1c577bf4727c29">void</a></div><div class="ttdeci">typedef void(APIENTRYP PFNGLCULLFACEPROC)(GLenum mode)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab109e8cf001661ba22543b63063f7b42"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42">sg_filter</a></div><div class="ttdeci">sg_filter</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00640">sokol_gfx.h:640</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a6c8d2e5abcd1c1f0edda555382cd269a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a6c8d2e5abcd1c1f0edda555382cd269a">sg_commit</a></div><div class="ttdeci">SOKOL_API_DECL void sg_commit(void)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a04c754eb981c690bb66677cbedd5ec4b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a04c754eb981c690bb66677cbedd5ec4b">sg_destroy_pipeline</a></div><div class="ttdeci">SOKOL_API_DECL void sg_destroy_pipeline(sg_pipeline pip)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0190a413736517d46f7d0a126dfb674c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0190a413736517d46f7d0a126dfb674c">sg_alloc_pass</a></div><div class="ttdeci">SOKOL_API_DECL sg_pass sg_alloc_pass(void)</div></div>
<div class="ttc" id="namespaceo2_1_1algorithm_1_1pageparser_html_afcb584be9f28324176c0d92fcbd32c99"><div class="ttname"><a href="../../da/de3/namespaceo2_1_1algorithm_1_1pageparser.html#afcb584be9f28324176c0d92fcbd32c99">o2::algorithm::pageparser::alloc</a></div><div class="ttdeci">T * alloc()</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d34/PageParser_8h_source.html#l00069">PageParser.h:69</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a206bf908ad986430c63d819f06c4a91a"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a206bf908ad986430c63d819f06c4a91a">sg_image_desc::type</a></div><div class="ttdeci">sg_image_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01239">sokol_gfx.h:1239</a></div></div>
<div class="ttc" id="structsg__rasterizer__state_html_a29748e6a44d9d76121f636c97270fdb3"><div class="ttname"><a href="../../d9/dbf/structsg__rasterizer__state.html#a29748e6a44d9d76121f636c97270fdb3">sg_rasterizer_state::depth_bias</a></div><div class="ttdeci">float depth_bias</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01440">sokol_gfx.h:1440</a></div></div>
<div class="ttc" id="structsg__draw__state_html_a7beb92cc4c87779d43a98e68e25806e9"><div class="ttname"><a href="../../d5/d1e/structsg__draw__state.html#a7beb92cc4c87779d43a98e68e25806e9">sg_draw_state::vertex_buffer_offsets</a></div><div class="ttdeci">uint32_t vertex_buffer_offsets[SG_MAX_SHADERSTAGE_BUFFERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01008">sokol_gfx.h:1008</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7c3779d838681f3083729a9f80ea6ab2af61dc51ca3ada44f11e59503180a47c6"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2af61dc51ca3ada44f11e59503180a47c6">SG_COLORMASK_G</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00903">sokol_gfx.h:903</a></div></div>
<div class="ttc" id="structsg__desc_html_a811ae5a1b522ea26a6c06318273fc6bc"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#a811ae5a1b522ea26a6c06318273fc6bc">sg_desc::d3d11_device_context</a></div><div class="ttdeci">const void * d3d11_device_context</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01099">sokol_gfx.h:1099</a></div></div>
<div class="ttc" id="glcorearb_8h_html_abca6d43f43fae31f49dcb883b2f301f6"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#abca6d43f43fae31f49dcb883b2f301f6">GL_FALSE</a></div><div class="ttdeci">#define GL_FALSE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00095">glcorearb.h:95</a></div></div>
<div class="ttc" id="structsg__rasterizer__state_html_a519de2d2dad71575afd9fda106ced012"><div class="ttname"><a href="../../d9/dbf/structsg__rasterizer__state.html#a519de2d2dad71575afd9fda106ced012">sg_rasterizer_state::cull_mode</a></div><div class="ttdeci">sg_cull_mode cull_mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01437">sokol_gfx.h:1437</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a58c38522b49861282c82498b7ea85a1b">SG_PIXELFORMAT_RGBA8</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00585">sokol_gfx.h:585</a></div></div>
<div class="ttc" id="structsg__shader__image__desc_html_a3a5f4c70b2a3e45eb29c7b8920f1e4e4"><div class="ttname"><a href="../../dd/d8f/structsg__shader__image__desc.html#a3a5f4c70b2a3e45eb29c7b8920f1e4e4">sg_shader_image_desc::type</a></div><div class="ttdeci">sg_image_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01290">sokol_gfx.h:1290</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aea61abcc5cf090318ff1139f08689ce6a2fde2841a93c42a631ed4d5a428e9599"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a2fde2841a93c42a631ed4d5a428e9599">_SG_VERTEXSTEP_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00710">sokol_gfx.h:710</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aefaf553edc188af69b624b40bbecc380"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aefaf553edc188af69b624b40bbecc380">GL_UNSIGNED_INT_2_10_10_10_REV</a></div><div class="ttdeci">#define GL_UNSIGNED_INT_2_10_10_10_REV</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00455">glcorearb.h:455</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a7695a13f8c89798a34cbe627f876cd40"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7695a13f8c89798a34cbe627f876cd40">GL_COLOR_ATTACHMENT3</a></div><div class="ttdeci">#define GL_COLOR_ATTACHMENT3</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01152">glcorearb.h:1152</a></div></div>
<div class="ttc" id="structsg__image__content_html"><div class="ttname"><a href="../../dd/d44/structsg__image__content.html">sg_image_content</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01185">sokol_gfx.h:1185</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a6c865f303c89ec764158e0016e50d4a8"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6c865f303c89ec764158e0016e50d4a8">GL_TEXTURE_3D</a></div><div class="ttdeci">#define GL_TEXTURE_3D</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00444">glcorearb.h:444</a></div></div>
<div class="ttc" id="gl3w_8h_html_aa0817ce66934d545ee41b57c21675453"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aa0817ce66934d545ee41b57c21675453">glTexSubImage3D</a></div><div class="ttdeci">#define glTexSubImage3D</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01195">gl3w.h:1195</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4ab16b5755ede91f6c2d9ac0b95b939755"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab16b5755ede91f6c2d9ac0b95b939755">SG_PIXELFORMAT_DXT1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00596">sokol_gfx.h:596</a></div></div>
<div class="ttc" id="gl3w_8h_html_a7a28e4c732415129acb357af17c469f6"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a7a28e4c732415129acb357af17c469f6">glColorMask</a></div><div class="ttdeci">#define glColorMask</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00783">gl3w.h:783</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08fafec5d9fb7cb12489ea4be3637c746efa"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fafec5d9fb7cb12489ea4be3637c746efa">SG_VERTEXFORMAT_SHORT2N</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00687">sokol_gfx.h:687</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a2575e80dffb63df73b18f044342a74e8"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a2575e80dffb63df73b18f044342a74e8">_SG_PIXELFORMAT_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00607">sokol_gfx.h:607</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad2b4c60c1e4d3d18801478cf7a7ad2b7"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad2b4c60c1e4d3d18801478cf7a7ad2b7">GL_TEXTURE_2D_ARRAY</a></div><div class="ttdeci">#define GL_TEXTURE_2D_ARRAY</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01034">glcorearb.h:1034</a></div></div>
<div class="ttc" id="structsg__vertex__attr__desc_html_a8d1f1db110d27b2bc17b1d625f04894d"><div class="ttname"><a href="../../d5/d83/structsg__vertex__attr__desc.html#a8d1f1db110d27b2bc17b1d625f04894d">sg_vertex_attr_desc::sem_index</a></div><div class="ttdeci">int sem_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01391">sokol_gfx.h:1391</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cabcb4d9c73625258deeb1e6102631405f">SG_MAX_SHADERSTAGE_UBS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00384">sokol_gfx.h:384</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aa7173509aeeb22c24e5f272c3d695641a403d944131bfa46d2866033e183d481b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a403d944131bfa46d2866033e183d481b">_SG_INDEXTYPE_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00516">sokol_gfx.h:516</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aa7173509aeeb22c24e5f272c3d695641a351dd7105c6dd3e47dabb9ee6dff643a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a351dd7105c6dd3e47dabb9ee6dff643a">SG_INDEXTYPE_UINT32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00514">sokol_gfx.h:514</a></div></div>
<div class="ttc" id="gl3w_8h_html_a5489df792b3263170eea381093ee6111"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a5489df792b3263170eea381093ee6111">glDepthFunc</a></div><div class="ttdeci">#define glDepthFunc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00834">gl3w.h:834</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aea1419aa8aec5854bd9807b45171029d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aea1419aa8aec5854bd9807b45171029d">GLboolean</a></div><div class="ttdeci">unsigned char GLboolean</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00090">glcorearb.h:90</a></div></div>
<div class="ttc" id="glcorearb_8h_html_acb47a41b5963d44826f44b7370bccc26"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#acb47a41b5963d44826f44b7370bccc26">GL_TEXTURE_MAG_FILTER</a></div><div class="ttdeci">#define GL_TEXTURE_MAG_FILTER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00260">glcorearb.h:260</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a0653e80837f6ffa9477a62e627fad170"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a0653e80837f6ffa9477a62e627fad170">sg_image_desc::num_mipmaps</a></div><div class="ttdeci">int num_mipmaps</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01247">sokol_gfx.h:1247</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa3926eb5e008f14829baa8d72435215f"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa3926eb5e008f14829baa8d72435215f">GL_ONE_MINUS_SRC_ALPHA</a></div><div class="ttdeci">#define GL_ONE_MINUS_SRC_ALPHA</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00118">glcorearb.h:118</a></div></div>
<div class="ttc" id="structsg__depth__attachment__action_html_ae78551ad85b038b6431f32d1c1916ccb"><div class="ttname"><a href="../../d3/dd4/structsg__depth__attachment__action.html#ae78551ad85b038b6431f32d1c1916ccb">sg_depth_attachment_action::val</a></div><div class="ttdeci">float val</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00964">sokol_gfx.h:964</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da0b772c7e1750259a6787f9dbe0c830b9">SG_IMAGETYPE_2D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00531">sokol_gfx.h:531</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a3baf5912805ee447d82e6e99943323e0">SG_FILTER_NEAREST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00642">sokol_gfx.h:642</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897ac7c094127fe7cd4de810406b6a6c9c68"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ac7c094127fe7cd4de810406b6a6c9c68">SG_FEATURE_ORIGIN_TOP_LEFT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00406">sokol_gfx.h:406</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ac8729153468b5dcf13f971b21d84d4e5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac8729153468b5dcf13f971b21d84d4e5">a</a></div><div class="ttdeci">GLboolean GLboolean GLboolean GLboolean a</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01235">glcorearb.h:1235</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a24fd6df84f189657c672835f616e9c21"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a24fd6df84f189657c672835f616e9c21">SG_PIXELFORMAT_ETC2_SRGB8</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00606">sokol_gfx.h:606</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab7c5971606f2b7513272dc6a2c8b6987af3c2392017e324458dd06c4ded84c20f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987af3c2392017e324458dd06c4ded84c20f">_SG_RESOURCESTATE_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00440">sokol_gfx.h:440</a></div></div>
<div class="ttc" id="gl3w_8h_html_aa915643d0b21023b01d4dc82f69e5646"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aa915643d0b21023b01d4dc82f69e5646">glFramebufferRenderbuffer</a></div><div class="ttdeci">#define glFramebufferRenderbuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00880">gl3w.h:880</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a13e611dd4ec10121133e67c09b41ec64a84c50a9a2ed60d733f149440eb55fb78"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a84c50a9a2ed60d733f149440eb55fb78">_SG_COMPAREFUNC_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00793">sokol_gfx.h:793</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a9fba5da0aafd194b7eb2fcd359511622"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9fba5da0aafd194b7eb2fcd359511622">GL_LINEAR_MIPMAP_NEAREST</a></div><div class="ttdeci">#define GL_LINEAR_MIPMAP_NEAREST</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00257">glcorearb.h:257</a></div></div>
<div class="ttc" id="gl3w_8h_html_a94c0e17529ebff9ddffdf7715b2341cc"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a94c0e17529ebff9ddffdf7715b2341cc">glDeleteProgram</a></div><div class="ttdeci">#define glDeleteProgram</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00824">gl3w.h:824</a></div></div>
<div class="ttc" id="bench__Clusterizer_8cxx_html_af656038045ce6448240b3767491787da"><div class="ttname"><a href="../../d2/d12/bench__Clusterizer_8cxx.html#af656038045ce6448240b3767491787da">num</a></div><div class="ttdeci">double num</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d12/bench__Clusterizer_8cxx_source.html#l00122">bench_Clusterizer.cxx:122</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a2d568ba9541df33fb21dc5bacbe7b4a3"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a2d568ba9541df33fb21dc5bacbe7b4a3">GL_TEXTURE_CUBE_MAP_NEGATIVE_Z</a></div><div class="ttdeci">#define GL_TEXTURE_CUBE_MAP_NEGATIVE_Z</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00532">glcorearb.h:532</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897a99594e9f1b7e5ca8dfaf37b742abb0aa"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a99594e9f1b7e5ca8dfaf37b742abb0aa">SG_FEATURE_ORIGIN_BOTTOM_LEFT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00405">sokol_gfx.h:405</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a6d19915d4237cb559505bd3e5dcfcf3c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6d19915d4237cb559505bd3e5dcfcf3c">GL_FLOAT</a></div><div class="ttdeci">#define GL_FLOAT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00212">glcorearb.h:212</a></div></div>
<div class="ttc" id="structsg__pass__action_html_a54c01f746d1b4325b79143a08201fe7e"><div class="ttname"><a href="../../d3/dbc/structsg__pass__action.html#a54c01f746d1b4325b79143a08201fe7e">sg_pass_action::colors</a></div><div class="ttdeci">sg_color_attachment_action colors[SG_MAX_COLOR_ATTACHMENTS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00974">sokol_gfx.h:974</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a1b69ad7ea841f21165a25e58411b6bab"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a1b69ad7ea841f21165a25e58411b6bab">GL_TEXTURE_WRAP_R</a></div><div class="ttdeci">#define GL_TEXTURE_WRAP_R</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00447">glcorearb.h:447</a></div></div>
<div class="ttc" id="gl3w_8h_html_a55652a3f087bb13267a5481b6ff1fe19"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a55652a3f087bb13267a5481b6ff1fe19">glDeleteBuffers</a></div><div class="ttdeci">#define glDeleteBuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00822">gl3w.h:822</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ae394492c09563af8f82764c864d77864"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae394492c09563af8f82764c864d77864">GL_DECR_WRAP</a></div><div class="ttdeci">#define GL_DECR_WRAP</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00579">glcorearb.h:579</a></div></div>
<div class="ttc" id="structsg__desc_html_ae8900a940c09b074efd6afc4cd87dc4f"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#ae8900a940c09b074efd6afc4cd87dc4f">sg_desc::context_pool_size</a></div><div class="ttdeci">int context_pool_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01088">sokol_gfx.h:1088</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2b3da1bbe9c384305496a19de407488aa9402760295c8c6212305175d5f24b50d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa9402760295c8c6212305175d5f24b50d">_SG_STENCILOP_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00817">sokol_gfx.h:817</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a83dfd180c0229d2b8771f3acd446c5a2af0f0af9d38739d489a7422d6417fa958"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2af0f0af9d38739d489a7422d6417fa958">SG_UNIFORMTYPE_MAT4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00727">sokol_gfx.h:727</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a5cb2828a02272406f980c520016d6eba"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a5cb2828a02272406f980c520016d6eba">_SG_PIXELFORMAT_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00608">sokol_gfx.h:608</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a9e626474ad3066f31b46293d535b009f"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9e626474ad3066f31b46293d535b009f">GL_FRAMEBUFFER</a></div><div class="ttdeci">#define GL_FRAMEBUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01183">glcorearb.h:1183</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a646e4856f8bdf0774941aa3e478ab89a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a646e4856f8bdf0774941aa3e478ab89a">sg_apply_draw_state</a></div><div class="ttdeci">SOKOL_API_DECL void sg_apply_draw_state(const sg_draw_state *ds)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2b3da1bbe9c384305496a19de407488aac7f2b2dfb1c5340579c27f255a320569"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aac7f2b2dfb1c5340579c27f255a320569">SG_STENCILOP_INCR_WRAP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00824">sokol_gfx.h:824</a></div></div>
<div class="ttc" id="structsg__vertex__attr__desc_html_a300495aa1542131ca1376536d28b7ad5"><div class="ttname"><a href="../../d5/d83/structsg__vertex__attr__desc.html#a300495aa1542131ca1376536d28b7ad5">sg_vertex_attr_desc::sem_name</a></div><div class="ttdeci">const char * sem_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01390">sokol_gfx.h:1390</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ac1915ebc9c952b9e7140f4bcc78319a6"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac1915ebc9c952b9e7140f4bcc78319a6">GL_DYNAMIC_DRAW</a></div><div class="ttdeci">#define GL_DYNAMIC_DRAW</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00644">glcorearb.h:644</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a947db9ff944c4b78e652144c3dd1060c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a947db9ff944c4b78e652144c3dd1060c">GL_COLOR_BUFFER_BIT</a></div><div class="ttdeci">#define GL_COLOR_BUFFER_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00094">glcorearb.h:94</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a5503b40ecf2c211fde3b10c95863f8e6ae58d280dda29d0b3f7120937fe9c6742"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6ae58d280dda29d0b3f7120937fe9c6742">SG_ACTION_LOAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00932">sokol_gfx.h:932</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a51e6c75d54b3a9fb93fbc880463c212c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a51e6c75d54b3a9fb93fbc880463c212c">GL_SRC_ALPHA</a></div><div class="ttdeci">#define GL_SRC_ALPHA</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00117">glcorearb.h:117</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897ab44ce51d78809d456207d70f230d8d7f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ab44ce51d78809d456207d70f230d8d7f">SG_FEATURE_TEXTURE_COMPRESSION_ETC2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00402">sokol_gfx.h:402</a></div></div>
<div class="ttc" id="structsg__draw__state_html_a0e306492a3df075c8a3231651b0c004d"><div class="ttname"><a href="../../d5/d1e/structsg__draw__state.html#a0e306492a3df075c8a3231651b0c004d">sg_draw_state::fs_images</a></div><div class="ttdeci">sg_image fs_images[SG_MAX_SHADERSTAGE_IMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01012">sokol_gfx.h:1012</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a2633c4fbe9b2d427d840cb95aa37b150">SG_ACTION_CLEAR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00931">sokol_gfx.h:931</a></div></div>
<div class="ttc" id="gl3w_8h_html_a90520731d99d69c72294c595d47385f2"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a90520731d99d69c72294c595d47385f2">glTexSubImage2D</a></div><div class="ttdeci">#define glTexSubImage2D</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01194">gl3w.h:1194</a></div></div>
<div class="ttc" id="structsg__image__desc_html_ad92e8d7c8fc89dea7db54d569982f57d"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#ad92e8d7c8fc89dea7db54d569982f57d">sg_image_desc::wrap_v</a></div><div class="ttdeci">sg_wrap wrap_v</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01254">sokol_gfx.h:1254</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aaab0960233739efbd5d1ae2b2fb919cd"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aaab0960233739efbd5d1ae2b2fb919cd">GL_STREAM_DRAW</a></div><div class="ttdeci">#define GL_STREAM_DRAW</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00638">glcorearb.h:638</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a15cb970a541969b11409d0adec3b331faf38bc68fe5e9f58617153ec303ff207c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faf38bc68fe5e9f58617153ec303ff207c">_SG_FACEWINDING_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00763">sokol_gfx.h:763</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8bdcfddea25084e36bde4357057071d4ab0b91b82494a494db2f5e57c8b7356a7"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ab0b91b82494a494db2f5e57c8b7356a7">SG_PRIMITIVETYPE_TRIANGLE_STRIP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00626">sokol_gfx.h:626</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a974e3d03b26a60757018116abc99455f"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a974e3d03b26a60757018116abc99455f">GL_SAMPLE_ALPHA_TO_COVERAGE</a></div><div class="ttdeci">#define GL_SAMPLE_ALPHA_TO_COVERAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00518">glcorearb.h:518</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a13e611dd4ec10121133e67c09b41ec64a09cc7ce2105a69548dc807425c9f662d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a09cc7ce2105a69548dc807425c9f662d">_SG_COMPAREFUNC_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00792">sokol_gfx.h:792</a></div></div>
<div class="ttc" id="structsg__depth__stencil__state_html_aca25ebcd8dc2c3155ea0eb28b4a67a74"><div class="ttname"><a href="../../d5/d6c/structsg__depth__stencil__state.html#aca25ebcd8dc2c3155ea0eb28b4a67a74">sg_depth_stencil_state::depth_compare_func</a></div><div class="ttdeci">sg_compare_func depth_compare_func</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01412">sokol_gfx.h:1412</a></div></div>
<div class="ttc" id="structsg__buffer__desc_html"><div class="ttname"><a href="../../d6/d2c/structsg__buffer__desc.html">sg_buffer_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01145">sokol_gfx.h:1145</a></div></div>
<div class="ttc" id="structsg__blend__state_html_a57d6fbff48849826899c02b69588ba5f"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html#a57d6fbff48849826899c02b69588ba5f">sg_blend_state::src_factor_alpha</a></div><div class="ttdeci">sg_blend_factor src_factor_alpha</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01425">sokol_gfx.h:1425</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a09de967fe30a0761245cdbd8e23ece9e"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a09de967fe30a0761245cdbd8e23ece9e">sg_query_shader_state</a></div><div class="ttdeci">SOKOL_API_DECL sg_resource_state sg_query_shader_state(sg_shader shd)</div></div>
<div class="ttc" id="structsg__pipeline__desc_html_a73baf5d809ebc995e5d7a5de291d3840"><div class="ttname"><a href="../../d5/db3/structsg__pipeline__desc.html#a73baf5d809ebc995e5d7a5de291d3840">sg_pipeline_desc::rasterizer</a></div><div class="ttdeci">sg_rasterizer_state rasterizer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01453">sokol_gfx.h:1453</a></div></div>
<div class="ttc" id="structsg__pipeline__desc_html_a4b0c1aafe838c8fe962f25f112e5d436"><div class="ttname"><a href="../../d5/db3/structsg__pipeline__desc.html#a4b0c1aafe838c8fe962f25f112e5d436">sg_pipeline_desc::layout</a></div><div class="ttdeci">sg_layout_desc layout</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01447">sokol_gfx.h:1447</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab109e8cf001661ba22543b63063f7b42a43ee1544f89472122571d8a4dcbb3224"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a43ee1544f89472122571d8a4dcbb3224">_SG_FILTER_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00641">sokol_gfx.h:641</a></div></div>
<div class="ttc" id="structsg__context_html_a9ea43d1c0d05c84ca8d1bedbb97f17ca"><div class="ttname"><a href="../../d2/d13/structsg__context.html#a9ea43d1c0d05c84ca8d1bedbb97f17ca">sg_context::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00368">sokol_gfx.h:368</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0f4596ead70a745674e2a5efcbf4ef9dae006b5445cb0f3b9c939d8074980805e"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dae006b5445cb0f3b9c939d8074980805e">_SG_IMAGETYPE_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00530">sokol_gfx.h:530</a></div></div>
<div class="ttc" id="gl3w_8h_html_a0aac05c6a9cb27add42d6e1e4970d9cb"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a0aac05c6a9cb27add42d6e1e4970d9cb">glGetError</a></div><div class="ttdeci">#define glGetError</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00922">gl3w.h:922</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897acd4385efaeceb7f3bb64817dbf0d5acf"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897acd4385efaeceb7f3bb64817dbf0d5acf">SG_FEATURE_MULTIPLE_RENDER_TARGET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00409">sokol_gfx.h:409</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a15cb970a541969b11409d0adec3b331f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331f">sg_face_winding</a></div><div class="ttdeci">sg_face_winding</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00759">sokol_gfx.h:759</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab109e8cf001661ba22543b63063f7b42a930130deba471dcd078125a193cdf96b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a930130deba471dcd078125a193cdf96b">_SG_FILTER_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00648">sokol_gfx.h:648</a></div></div>
<div class="ttc" id="glcorearb_8h_html_af541c15d841e8064600dec789ab4727e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#af541c15d841e8064600dec789ab4727e">GL_NUM_EXTENSIONS</a></div><div class="ttdeci">#define GL_NUM_EXTENSIONS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01016">glcorearb.h:1016</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af74608f3ba41af079b7757da79c4ddb5"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af74608f3ba41af079b7757da79c4ddb5">sg_query_feature</a></div><div class="ttdeci">SOKOL_API_DECL bool sg_query_feature(sg_feature feature)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_ae526e64e80adafdb9898bfaaa37cf522ae607f2481dc9fb802d9045f235fa0a29"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522ae607f2481dc9fb802d9045f235fa0a29">SG_CUBEFACE_POS_X</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00546">sokol_gfx.h:546</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aaec6f87dc3b72b3175f3e127062cfc5b"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aaec6f87dc3b72b3175f3e127062cfc5b">GL_DEPTH_STENCIL</a></div><div class="ttdeci">#define GL_DEPTH_STENCIL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01120">glcorearb.h:1120</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a316d4feb613d04854aba437a278add28"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a316d4feb613d04854aba437a278add28">GL_ONE_MINUS_CONSTANT_ALPHA</a></div><div class="ttdeci">#define GL_ONE_MINUS_CONSTANT_ALPHA</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00591">glcorearb.h:591</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a40dc9e4aef0d370a75493b650378654da56ee8cb85a823d979d9759180679a079"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da56ee8cb85a823d979d9759180679a079">_SG_WRAP_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00662">sokol_gfx.h:662</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab7c5971606f2b7513272dc6a2c8b6987ab50103fecd9e58aada2d5a8fccea86f5"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ab50103fecd9e58aada2d5a8fccea86f5">SG_RESOURCESTATE_INITIAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00435">sokol_gfx.h:435</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a2e4b00a98ef858050e7ce85444f8399a"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a2e4b00a98ef858050e7ce85444f8399a">pipelines</a></div><div class="ttdeci">const GLuint * pipelines</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01950">glcorearb.h:1950</a></div></div>
<div class="ttc" id="gl3w_8h_html_a9419a03f5c46e2758f884e9c56d92b6a"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a9419a03f5c46e2758f884e9c56d92b6a">glBufferData</a></div><div class="ttdeci">#define glBufferData</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00756">gl3w.h:756</a></div></div>
<div class="ttc" id="structsg__subimage__content_html_a169a87eb28f5a518790866dfd447774c"><div class="ttname"><a href="../../d1/d35/structsg__subimage__content.html#a169a87eb28f5a518790866dfd447774c">sg_subimage_content::ptr</a></div><div class="ttdeci">const void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01173">sokol_gfx.h:1173</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af1e088621fb524138961cd0d650a5a8f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8f">sg_buffer_type</a></div><div class="ttdeci">sg_buffer_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00492">sokol_gfx.h:492</a></div></div>
<div class="ttc" id="glcorearb_8h_html_afb17f37d44cc79ab4d5ef6ff51c3a2e0"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#afb17f37d44cc79ab4d5ef6ff51c3a2e0">GL_RGBA4</a></div><div class="ttdeci">#define GL_RGBA4</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00393">glcorearb.h:393</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4f0fd22afde7215e4412dafa5e522097"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4f0fd22afde7215e4412dafa5e522097">GL_STENCIL_TEST</a></div><div class="ttdeci">#define GL_STENCIL_TEST</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00158">glcorearb.h:158</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a7180045dcb52b22af2cd0366026bc3ed"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7180045dcb52b22af2cd0366026bc3ed">GL_ARRAY_BUFFER</a></div><div class="ttdeci">#define GL_ARRAY_BUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00627">glcorearb.h:627</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a3624f0a3b097e7fd4c78feeee7673616"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a3624f0a3b097e7fd4c78feeee7673616">sg_isvalid</a></div><div class="ttdeci">SOKOL_API_DECL bool sg_isvalid(void)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cac853f4ea32d221894665d2755290240c">SG_MAX_VERTEX_ATTRIBUTES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00386">sokol_gfx.h:386</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4ecc64682046ef517e86a18d9acbed1e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4ecc64682046ef517e86a18d9acbed1e">GL_LINE_STRIP</a></div><div class="ttdeci">#define GL_LINE_STRIP</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00100">glcorearb.h:100</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ac7e31d38a911bc31cf698281fdd9007ba93d9e180184164cc5ec6d42cb5eda6bb"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba93d9e180184164cc5ec6d42cb5eda6bb">_SG_BLENDOP_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00882">sokol_gfx.h:882</a></div></div>
<div class="ttc" id="gl3w_8h_html_a30e6afc4637e2ed6beaae367851c03d1"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a30e6afc4637e2ed6beaae367851c03d1">glDrawArraysInstanced</a></div><div class="ttdeci">#define glDrawArraysInstanced</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00849">gl3w.h:849</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da15dbe10508815f60e6036b1f42fbf43d">SG_IMAGETYPE_CUBE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00532">sokol_gfx.h:532</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08fa5c3facf45a0c01162b348286571e4cbc"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa5c3facf45a0c01162b348286571e4cbc">SG_VERTEXFORMAT_BYTE4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00682">sokol_gfx.h:682</a></div></div>
<div class="ttc" id="structsg__image__desc_html_ada2a41a3d05f322bc67e6441dbeb64d3"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#ada2a41a3d05f322bc67e6441dbeb64d3">sg_image_desc::content</a></div><div class="ttdeci">sg_image_content content</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01259">sokol_gfx.h:1259</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8bdcfddea25084e36bde4357057071d4a64763b2f58505f8353981fa3a7d33b3d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a64763b2f58505f8353981fa3a7d33b3d">SG_PRIMITIVETYPE_LINES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00623">sokol_gfx.h:623</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a9879296e103b9180a4ad0369d859da1a"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9879296e103b9180a4ad0369d859da1a">GL_RGB10_A2</a></div><div class="ttdeci">#define GL_RGB10_A2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00396">glcorearb.h:396</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98a72b1df3612951c57703d3cf0279f750e"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a72b1df3612951c57703d3cf0279f750e">SG_BLENDFACTOR_ONE_MINUS_DST_COLOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00855">sokol_gfx.h:855</a></div></div>
<div class="ttc" id="structsg__rasterizer__state_html_a1c17f2ad7757117fce48d04d3d6b9802"><div class="ttname"><a href="../../d9/dbf/structsg__rasterizer__state.html#a1c17f2ad7757117fce48d04d3d6b9802">sg_rasterizer_state::sample_count</a></div><div class="ttdeci">int sample_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01439">sokol_gfx.h:1439</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab109e8cf001661ba22543b63063f7b42a21116fc969ac2da818c6f70ce6f04f01"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a21116fc969ac2da818c6f70ce6f04f01">SG_FILTER_NEAREST_MIPMAP_LINEAR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00645">sokol_gfx.h:645</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aababc4e27a4845063f8d1b7b91c20b2e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aababc4e27a4845063f8d1b7b91c20b2e">GL_COMPRESSED_RGBA_S3TC_DXT3_EXT</a></div><div class="ttdeci">#define GL_COMPRESSED_RGBA_S3TC_DXT3_EXT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l04557">glcorearb.h:4557</a></div></div>
<div class="ttc" id="structsg__image__desc_html_af56aa1ad4802c4377f32a3656cc00540"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#af56aa1ad4802c4377f32a3656cc00540">sg_image_desc::wrap_u</a></div><div class="ttdeci">sg_wrap wrap_u</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01253">sokol_gfx.h:1253</a></div></div>
<div class="ttc" id="structsg__shader_html_ae37292e0c2fbd8cf1bf2f1beb0a7065c"><div class="ttname"><a href="../../da/d75/structsg__shader.html#ae37292e0c2fbd8cf1bf2f1beb0a7065c">sg_shader::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00359">sokol_gfx.h:359</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0a4e76565722cfe393cacfbd04b2e343"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343">sg_shader_stage</a></div><div class="ttdeci">sg_shader_stage</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00567">sokol_gfx.h:567</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ada3c99cc89e14622e4c62b911fda24fd"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ada3c99cc89e14622e4c62b911fda24fd">GL_UNSIGNED_SHORT_4_4_4_4</a></div><div class="ttdeci">#define GL_UNSIGNED_SHORT_4_4_4_4</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00435">glcorearb.h:435</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4acd416b883c484b0a30194f1a06f18f9d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4acd416b883c484b0a30194f1a06f18f9d">SG_PIXELFORMAT_R16F</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00594">sokol_gfx.h:594</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4f60aaa1367dea8d8c7e288d912d58df"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4f60aaa1367dea8d8c7e288d912d58df">GL_COLOR_ATTACHMENT0</a></div><div class="ttdeci">#define GL_COLOR_ATTACHMENT0</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01149">glcorearb.h:1149</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a84814ca499dc312708e8aa22324f1d78"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a84814ca499dc312708e8aa22324f1d78">GL_CCW</a></div><div class="ttdeci">#define GL_CCW</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00140">glcorearb.h:140</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a3ee631814361db6d24e7ebc5988877ab"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a3ee631814361db6d24e7ebc5988877ab">GL_POLYGON_OFFSET_FILL</a></div><div class="ttdeci">#define GL_POLYGON_OFFSET_FILL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00373">glcorearb.h:373</a></div></div>
<div class="ttc" id="structsg__color__attachment__action_html"><div class="ttname"><a href="../../db/dc9/structsg__color__attachment__action.html">sg_color_attachment_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00957">sokol_gfx.h:957</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a04850ba275b382d256d9a66c44f4cf8a"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a04850ba275b382d256d9a66c44f4cf8a">GL_NEVER</a></div><div class="ttdeci">#define GL_NEVER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00105">glcorearb.h:105</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a83dfd180c0229d2b8771f3acd446c5a2af8aebe8a309e634eee586278af628f8f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2af8aebe8a309e634eee586278af628f8f">_SG_UNIFORMTYPE_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00729">sokol_gfx.h:729</a></div></div>
<div class="ttc" id="structsg__stencil__attachment__action_html_a5d4b67c71980cd17fb1ac7f0978b222f"><div class="ttname"><a href="../../d3/d48/structsg__stencil__attachment__action.html#a5d4b67c71980cd17fb1ac7f0978b222f">sg_stencil_attachment_action::val</a></div><div class="ttdeci">uint8_t val</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00969">sokol_gfx.h:969</a></div></div>
<div class="ttc" id="structsg__desc_html_a3842693617938076fff77ee1a99a67b9"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#a3842693617938076fff77ee1a99a67b9">sg_desc::_end_canary</a></div><div class="ttdeci">uint32_t _end_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01102">sokol_gfx.h:1102</a></div></div>
<div class="ttc" id="structsg__desc_html_a5fa12c0b28ca943f898f8a0d6f1978fc"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#a5fa12c0b28ca943f898f8a0d6f1978fc">sg_desc::d3d11_depth_stencil_view_cb</a></div><div class="ttdeci">const void *(* d3d11_depth_stencil_view_cb)()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01101">sokol_gfx.h:1101</a></div></div>
<div class="ttc" id="structsg__buffer__layout__desc_html"><div class="ttname"><a href="../../dc/da3/structsg__buffer__layout__desc.html">sg_buffer_layout_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01382">sokol_gfx.h:1382</a></div></div>
<div class="ttc" id="structsg__draw__state_html_abe01088c56c8be7250b5cf3c3aa147b0"><div class="ttname"><a href="../../d5/d1e/structsg__draw__state.html#abe01088c56c8be7250b5cf3c3aa147b0">sg_draw_state::_start_canary</a></div><div class="ttdeci">uint32_t _start_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01005">sokol_gfx.h:1005</a></div></div>
<div class="ttc" id="gl3w_8h_html_a89377449aceadc060b577926b5413bd2"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a89377449aceadc060b577926b5413bd2">glDrawArrays</a></div><div class="ttdeci">#define glDrawArrays</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00847">gl3w.h:847</a></div></div>
<div class="ttc" id="structsg__desc_html_a11079fb6fa66d884e04819998b1eb3f4"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#a11079fb6fa66d884e04819998b1eb3f4">sg_desc::d3d11_render_target_view_cb</a></div><div class="ttdeci">const void *(* d3d11_render_target_view_cb)()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01100">sokol_gfx.h:1100</a></div></div>
<div class="ttc" id="gl3w_8h_html_a8ddffb52ed169e47b870ae61c079e856"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a8ddffb52ed169e47b870ae61c079e856">glClearDepthf</a></div><div class="ttdeci">#define glClearDepthf</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00771">gl3w.h:771</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a3d1e3edfcf61ca2d831883e1afbad89e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a3d1e3edfcf61ca2d831883e1afbad89e">size</a></div><div class="ttdeci">GLsizeiptr size</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00661">glcorearb.h:661</a></div></div>
<div class="ttc" id="gl3w_8h_html_a514c77ac5c52216d1318b2afc72df793"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a514c77ac5c52216d1318b2afc72df793">glRenderbufferStorageMultisample</a></div><div class="ttdeci">#define glRenderbufferStorageMultisample</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01152">gl3w.h:1152</a></div></div>
<div class="ttc" id="structsg__stencil__state_html_af89daebf9f0cc01450bf7a67bbef1034"><div class="ttname"><a href="../../d6/d2c/structsg__stencil__state.html#af89daebf9f0cc01450bf7a67bbef1034">sg_stencil_state::fail_op</a></div><div class="ttdeci">sg_stencil_op fail_op</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01403">sokol_gfx.h:1403</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ae52362b10d585638f5b96140e90f1b7a"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae52362b10d585638f5b96140e90f1b7a">id</a></div><div class="ttdeci">GLuint id</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00652">glcorearb.h:652</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a9c63e51b23baa3e2abc01cc0c892a111"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9c63e51b23baa3e2abc01cc0c892a111">GL_TEXTURE_CUBE_MAP_POSITIVE_Z</a></div><div class="ttdeci">#define GL_TEXTURE_CUBE_MAP_POSITIVE_Z</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00531">glcorearb.h:531</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca780f2e0eeefe2adddfa4f4208573b3e5">SG_INVALID_ID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00378">sokol_gfx.h:378</a></div></div>
<div class="ttc" id="gl3w_8h_html_acd5fc46c59e53fdab78011888f7b1d8f"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#acd5fc46c59e53fdab78011888f7b1d8f">glStencilMask</a></div><div class="ttdeci">#define glStencilMask</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01171">gl3w.h:1171</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a2996a4c3a26a442ded6349434b49170a">SG_BLENDFACTOR_ONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00849">sokol_gfx.h:849</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a13e611dd4ec10121133e67c09b41ec64a1a8096a774c667c26ccde72d9ef4bd7a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a1a8096a774c667c26ccde72d9ef4bd7a">SG_COMPAREFUNC_LESS_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00787">sokol_gfx.h:787</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a773692cafbd5e3853fc6990aa4aaebf4af645d117b0ec8517b04bc827ae0e4baf"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4af645d117b0ec8517b04bc827ae0e4baf">SG_CULLMODE_BACK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00745">sokol_gfx.h:745</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a83dfd180c0229d2b8771f3acd446c5a2a2ac46d5ec84b41e58a2ab09257a01129"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2a2ac46d5ec84b41e58a2ab09257a01129">SG_UNIFORMTYPE_FLOAT2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00724">sokol_gfx.h:724</a></div></div>
<div class="ttc" id="gl3w_8h_html_a3b3a3f8200f094b781e9f61e2f19fc50"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a3b3a3f8200f094b781e9f61e2f19fc50">glBindBuffer</a></div><div class="ttdeci">#define glBindBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00724">gl3w.h:724</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8d0364be84a366bb82d39ffefda1a9a9"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8d0364be84a366bb82d39ffefda1a9a9">sg_update_image</a></div><div class="ttdeci">SOKOL_API_DECL void sg_update_image(sg_image img, const sg_image_content *data)</div></div>
<div class="ttc" id="structsg__buffer__layout__desc_html_a459ba52adfdcd699fdf29ecd13a702b4"><div class="ttname"><a href="../../dc/da3/structsg__buffer__layout__desc.html#a459ba52adfdcd699fdf29ecd13a702b4">sg_buffer_layout_desc::step_rate</a></div><div class="ttdeci">int step_rate</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01385">sokol_gfx.h:1385</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a5f70831ab0735b4ed4292888578477d4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5f70831ab0735b4ed4292888578477d4">GL_STENCIL</a></div><div class="ttdeci">#define GL_STENCIL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00234">glcorearb.h:234</a></div></div>
<div class="ttc" id="structsg__buffer_html_a2a1583a071bbcc80d8c2c55f37f9aca3"><div class="ttname"><a href="../../d9/dee/structsg__buffer.html#a2a1583a071bbcc80d8c2c55f37f9aca3">sg_buffer::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00353">sokol_gfx.h:353</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa402fcab9f814ff88b2b19ca2823a594"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa402fcab9f814ff88b2b19ca2823a594">GL_REPEAT</a></div><div class="ttdeci">#define GL_REPEAT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00264">glcorearb.h:264</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08faafa9a30c6992cc63134b5e14cdd3162b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faafa9a30c6992cc63134b5e14cdd3162b">SG_VERTEXFORMAT_UINT10_N2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00690">sokol_gfx.h:690</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a3f7140ec7c333f21243ab73a1591c3b4"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a3f7140ec7c333f21243ab73a1591c3b4">SG_PIXELFORMAT_PVRTC4_RGBA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00604">sokol_gfx.h:604</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8c4f153ed20a741aaae952650fec46f0"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8c4f153ed20a741aaae952650fec46f0">GL_CULL_FACE</a></div><div class="ttdeci">#define GL_CULL_FACE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00150">glcorearb.h:150</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab2fc7d11690bc1e7a8800aef2a175a6c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab2fc7d11690bc1e7a8800aef2a175a6c">GL_FRAMEBUFFER_BINDING</a></div><div class="ttdeci">#define GL_FRAMEBUFFER_BINDING</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01130">glcorearb.h:1130</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ae9efa4d7622ad01999c4c29081218943"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae9efa4d7622ad01999c4c29081218943">GL_INCR_WRAP</a></div><div class="ttdeci">#define GL_INCR_WRAP</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00578">glcorearb.h:578</a></div></div>
<div class="ttc" id="gl3w_8h_html_a82ac4415f852b8b5bfe7356202ca934e"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a82ac4415f852b8b5bfe7356202ca934e">glGenTextures</a></div><div class="ttdeci">#define glGenTextures</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00893">gl3w.h:893</a></div></div>
<div class="ttc" id="gl3w_8h_html_ae17ed43d9958b23226176a98e992fc04"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ae17ed43d9958b23226176a98e992fc04">glTexImage3D</a></div><div class="ttdeci">#define glTexImage3D</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01180">gl3w.h:1180</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a1e5eb1ac5e47603cc80ab58338b92393"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a1e5eb1ac5e47603cc80ab58338b92393">GLvoid</a></div><div class="ttdeci">void GLvoid</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00082">glcorearb.h:82</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ae91bd1b84257c4be0f6255e2be107acf"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae91bd1b84257c4be0f6255e2be107acf">GL_REPLACE</a></div><div class="ttdeci">#define GL_REPLACE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00247">glcorearb.h:247</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a70f6468f185f15b25019554f4207c0ccaedbf463e763fb166990baf20427d0952"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0ccaedbf463e763fb166990baf20427d0952">_SG_USAGE_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00476">sokol_gfx.h:476</a></div></div>
<div class="ttc" id="gl3w_8h_html_a4c13098a615d32e7f04aa4105149564f"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a4c13098a615d32e7f04aa4105149564f">glBindVertexArray</a></div><div class="ttdeci">#define glBindVertexArray</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00742">gl3w.h:742</a></div></div>
<div class="ttc" id="structsg__draw__state_html_af1a5b81461b7f6774b90d5718d255ae9"><div class="ttname"><a href="../../d5/d1e/structsg__draw__state.html#af1a5b81461b7f6774b90d5718d255ae9">sg_draw_state::pipeline</a></div><div class="ttdeci">sg_pipeline pipeline</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01006">sokol_gfx.h:1006</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aea61abcc5cf090318ff1139f08689ce6a20f6cf1a89efe9c3129cf71910e71709"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a20f6cf1a89efe9c3129cf71910e71709">SG_VERTEXSTEP_PER_INSTANCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00709">sokol_gfx.h:709</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a80175365c540f912492e50a5a8b362e7"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a80175365c540f912492e50a5a8b362e7">sg_image_desc::height</a></div><div class="ttdeci">int height</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01242">sokol_gfx.h:1242</a></div></div>
<div class="ttc" id="structsg__depth__stencil__state_html_a28ce155156b38f16e894aa724ece3091"><div class="ttname"><a href="../../d5/d6c/structsg__depth__stencil__state.html#a28ce155156b38f16e894aa724ece3091">sg_depth_stencil_state::stencil_back</a></div><div class="ttdeci">sg_stencil_state stencil_back</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01411">sokol_gfx.h:1411</a></div></div>
<div class="ttc" id="structsg__attachment__desc_html"><div class="ttname"><a href="../../d1/da2/structsg__attachment__desc.html">sg_attachment_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01480">sokol_gfx.h:1480</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ae526e64e80adafdb9898bfaaa37cf522a5e6838ff680c0fc1ec2931b35f004d20"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522a5e6838ff680c0fc1ec2931b35f004d20">SG_CUBEFACE_POS_Y</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00548">sokol_gfx.h:548</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a6a8efad2e332fcd916bde9e19ddef215"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6a8efad2e332fcd916bde9e19ddef215">f</a></div><div class="ttdeci">GLfloat f</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01941">glcorearb.h:1941</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98a21090202218e6bfd6cd4e32857771d5d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a21090202218e6bfd6cd4e32857771d5d">_SG_BLENDFACTOR_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00863">sokol_gfx.h:863</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4aff9e597d6ba26ce24ee763c57de6b20c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aff9e597d6ba26ce24ee763c57de6b20c">SG_PIXELFORMAT_PVRTC4_RGB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00602">sokol_gfx.h:602</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a5665daac108402324f1db7b89006c0b6"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5665daac108402324f1db7b89006c0b6">GL_NEAREST_MIPMAP_LINEAR</a></div><div class="ttdeci">#define GL_NEAREST_MIPMAP_LINEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00258">glcorearb.h:258</a></div></div>
<div class="ttc" id="structsg__pipeline__desc_html_a0b8abba9fc917e307571c89b8e8c3394"><div class="ttname"><a href="../../d5/db3/structsg__pipeline__desc.html#a0b8abba9fc917e307571c89b8e8c3394">sg_pipeline_desc::depth_stencil</a></div><div class="ttdeci">sg_depth_stencil_state depth_stencil</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01451">sokol_gfx.h:1451</a></div></div>
<div class="ttc" id="gl3w_8h_html_a7da97095b562f67f161b50104776a66d"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a7da97095b562f67f161b50104776a66d">glTexImage2D</a></div><div class="ttdeci">#define glTexImage2D</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01178">gl3w.h:1178</a></div></div>
<div class="ttc" id="structsg__buffer__desc_html_a1b3954477f336313d9a5a1c989cabce4"><div class="ttname"><a href="../../d6/d2c/structsg__buffer__desc.html#a1b3954477f336313d9a5a1c989cabce4">sg_buffer_desc::d3d11_buffer</a></div><div class="ttdeci">const void * d3d11_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01156">sokol_gfx.h:1156</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8ac689a8905a064025cbe41d4cf8fcf5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8ac689a8905a064025cbe41d4cf8fcf5">GL_RENDERBUFFER</a></div><div class="ttdeci">#define GL_RENDERBUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01184">glcorearb.h:1184</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa8bd8cf1eef34712fdb6ad58b540a2ee"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa8bd8cf1eef34712fdb6ad58b540a2ee">depth</a></div><div class="ttdeci">GLint GLint GLsizei GLsizei GLsizei depth</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00471">glcorearb.h:471</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ae526e64e80adafdb9898bfaaa37cf522afc65fb7f825bbf195d84411c14d5bdda"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522afc65fb7f825bbf195d84411c14d5bdda">SG_CUBEFACE_NEG_Y</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00549">sokol_gfx.h:549</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a38fc920bede90cc2821cfde675ce10e2"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a38fc920bede90cc2821cfde675ce10e2">GL_RGBA16F</a></div><div class="ttdeci">#define GL_RGBA16F</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01023">glcorearb.h:1023</a></div></div>
<div class="ttc" id="gl3w_8h_html_a5e730f2f937dd3ff1acf2cac8671fa39"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a5e730f2f937dd3ff1acf2cac8671fa39">glClearDepth</a></div><div class="ttdeci">#define glClearDepth</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00770">gl3w.h:770</a></div></div>
<div class="ttc" id="structsg__blend__state_html_a55eb9abccc64a54ff95cbbcc55e3e26d"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html#a55eb9abccc64a54ff95cbbcc55e3e26d">sg_blend_state::enabled</a></div><div class="ttdeci">bool enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01421">sokol_gfx.h:1421</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98ac4a882a9f00214238fbb2d0e354ccdb1"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ac4a882a9f00214238fbb2d0e354ccdb1">SG_BLENDFACTOR_SRC_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00852">sokol_gfx.h:852</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8439350af7b66d0115f23d27a6511917"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8439350af7b66d0115f23d27a6511917">GL_FUNC_REVERSE_SUBTRACT</a></div><div class="ttdeci">#define GL_FUNC_REVERSE_SUBTRACT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00585">glcorearb.h:585</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a83dfd180c0229d2b8771f3acd446c5a2aebd4e667ec034abd1b1b5f935113fdad"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2aebd4e667ec034abd1b1b5f935113fdad">SG_UNIFORMTYPE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00722">sokol_gfx.h:722</a></div></div>
<div class="ttc" id="structsg__blend__state_html"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html">sg_blend_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01420">sokol_gfx.h:1420</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad26c63125c72cbf0347b589d51676e6a"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad26c63125c72cbf0347b589d51676e6a">GL_ELEMENT_ARRAY_BUFFER</a></div><div class="ttdeci">#define GL_ELEMENT_ARRAY_BUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00628">glcorearb.h:628</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98">sg_blend_factor</a></div><div class="ttdeci">sg_blend_factor</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00846">sokol_gfx.h:846</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab4dcc8a1804d164d5f4dbba427b5672c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab4dcc8a1804d164d5f4dbba427b5672c">GL_DST_ALPHA</a></div><div class="ttdeci">#define GL_DST_ALPHA</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00119">glcorearb.h:119</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ad56b640c0528e80c782edcf7a0af6dec"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ad56b640c0528e80c782edcf7a0af6dec">sg_setup</a></div><div class="ttdeci">SOKOL_API_DECL void sg_setup(const sg_desc *desc)</div></div>
<div class="ttc" id="structsg__rasterizer__state_html_a29f6135aa291ef42e24a9a6738573da0"><div class="ttname"><a href="../../d9/dbf/structsg__rasterizer__state.html#a29f6135aa291ef42e24a9a6738573da0">sg_rasterizer_state::face_winding</a></div><div class="ttdeci">sg_face_winding face_winding</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01438">sokol_gfx.h:1438</a></div></div>
<div class="ttc" id="structsg__blend__state_html_ad669b6201aacf1ec560fd1d824b76446"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html#ad669b6201aacf1ec560fd1d824b76446">sg_blend_state::color_write_mask</a></div><div class="ttdeci">uint8_t color_write_mask</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01428">sokol_gfx.h:1428</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab7c5971606f2b7513272dc6a2c8b6987"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987">sg_resource_state</a></div><div class="ttdeci">sg_resource_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00434">sokol_gfx.h:434</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a991495bc19f64c176dd83a350b8b1c88"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a991495bc19f64c176dd83a350b8b1c88">normalized</a></div><div class="ttdeci">GLint GLenum GLboolean normalized</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00869">glcorearb.h:869</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4af7bc0102f3facd2246ad04aa42236dc6"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4af7bc0102f3facd2246ad04aa42236dc6">SG_PIXELFORMAT_R5G6B5</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00588">sokol_gfx.h:588</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a532ed3612eae8eaed8a7a53ecd7a28f3"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a532ed3612eae8eaed8a7a53ecd7a28f3">GL_LINES</a></div><div class="ttdeci">#define GL_LINES</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00098">glcorearb.h:98</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4cab4e3a249eadb53af0bd097388c1e5ea1">SG_NUM_INFLIGHT_FRAMES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00380">sokol_gfx.h:380</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af1e088621fb524138961cd0d650a5a8fad7448d503ebf8d39a8c548c8b78e7315"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fad7448d503ebf8d39a8c548c8b78e7315">_SG_BUFFERTYPE_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00496">sokol_gfx.h:496</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8579dfd47dae6c05ccf4699eeb88e26a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8579dfd47dae6c05ccf4699eeb88e26a">sg_apply_viewport</a></div><div class="ttdeci">SOKOL_API_DECL void sg_apply_viewport(int x, int y, int width, int height, bool origin_top_left)</div></div>
<div class="ttc" id="structsg__shader__uniform__desc_html_a13e9085423f4faf73f68ca2567a168ea"><div class="ttname"><a href="../../d2/d67/structsg__shader__uniform__desc.html#a13e9085423f4faf73f68ca2567a168ea">sg_shader_uniform_desc::array_count</a></div><div class="ttdeci">int array_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01280">sokol_gfx.h:1280</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a5d1dc8f875b466f348a189f9befae920"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5d1dc8f875b466f348a189f9befae920">GL_COMPRESSED_SRGB8_ETC2</a></div><div class="ttdeci">#define GL_COMPRESSED_SRGB8_ETC2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l02266">glcorearb.h:2266</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a6a865805a7bd7c250ae590dd7c73d288">SG_PIXELFORMAT_RGBA32F</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00591">sokol_gfx.h:591</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a5b40aca7a9682963dd00a8f5aef0a901"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5b40aca7a9682963dd00a8f5aef0a901">count</a></div><div class="ttdeci">GLint GLsizei count</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00400">glcorearb.h:400</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a12362c03120e951c8de3953e86a2462e">SG_PIXELFORMAT_DEPTHSTENCIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00600">sokol_gfx.h:600</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab7dffdc215fbbe75b6ccacfecfc14648"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab7dffdc215fbbe75b6ccacfecfc14648">GL_STATIC_DRAW</a></div><div class="ttdeci">#define GL_STATIC_DRAW</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00641">glcorearb.h:641</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a87d2df69dbdf4769f5897dc74a6112e3"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a87d2df69dbdf4769f5897dc74a6112e3">sg_shutdown</a></div><div class="ttdeci">SOKOL_API_DECL void sg_shutdown(void)</div></div>
<div class="ttc" id="gl3w_8h_html_a0248c7c634420ac6b01adb353da1e35f"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a0248c7c634420ac6b01adb353da1e35f">glClearBufferuiv</a></div><div class="ttdeci">#define glClearBufferuiv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00768">gl3w.h:768</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_aa4c73b6416f57a94408b0334e6fc1ff0"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#aa4c73b6416f57a94408b0334e6fc1ff0">t</a></div><div class="ttdeci">Visualize clusters only t</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00020">qconfigoptions.h:20</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a335877d7ab34f0272e089159fc5833bc"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a335877d7ab34f0272e089159fc5833bc">GL_RGBA8</a></div><div class="ttdeci">#define GL_RGBA8</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00395">glcorearb.h:395</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a773692cafbd5e3853fc6990aa4aaebf4a384e2c1d24c7c03468f93419cc48971c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a384e2c1d24c7c03468f93419cc48971c">SG_CULLMODE_FRONT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00744">sokol_gfx.h:744</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab109e8cf001661ba22543b63063f7b42a7f78c11a24799bfc6115afff391bc864"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a7f78c11a24799bfc6115afff391bc864">SG_FILTER_LINEAR_MIPMAP_LINEAR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00647">sokol_gfx.h:647</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641a770b89118a33db1e06e34b071052c417">SG_INDEXTYPE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00512">sokol_gfx.h:512</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2b3da1bbe9c384305496a19de407488aa5833cf06326cae250c675cfb227d7783"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa5833cf06326cae250c675cfb227d7783">SG_STENCILOP_DECR_CLAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00822">sokol_gfx.h:822</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a40dc9e4aef0d370a75493b650378654da2d6a059f14a7330186f072c1d30d0a1c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da2d6a059f14a7330186f072c1d30d0a1c">SG_WRAP_MIRRORED_REPEAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00665">sokol_gfx.h:665</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_acfc58ab7b45d663c8ea09b16160e8868"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#acfc58ab7b45d663c8ea09b16160e8868">sg_query_pipeline_state</a></div><div class="ttdeci">SOKOL_API_DECL sg_resource_state sg_query_pipeline_state(sg_pipeline pip)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7c3779d838681f3083729a9f80ea6ab2a6e762320d94f45741939d705166a17a2"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a6e762320d94f45741939d705166a17a2">SG_COLORMASK_RGBA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00907">sokol_gfx.h:907</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a4f814c06a8a5de60ced94301615d629a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a4f814c06a8a5de60ced94301615d629a">sg_activate_context</a></div><div class="ttdeci">SOKOL_API_DECL void sg_activate_context(sg_context ctx_id)</div></div>
<div class="ttc" id="structsg__buffer__desc_html_a3fa569faec49b1252c05dd1210a85b10"><div class="ttname"><a href="../../d6/d2c/structsg__buffer__desc.html#a3fa569faec49b1252c05dd1210a85b10">sg_buffer_desc::usage</a></div><div class="ttdeci">sg_usage usage</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01149">sokol_gfx.h:1149</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a318a0c53e89e0bc5fdd162a405f77a9d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a318a0c53e89e0bc5fdd162a405f77a9d">GL_NEAREST_MIPMAP_NEAREST</a></div><div class="ttdeci">#define GL_NEAREST_MIPMAP_NEAREST</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00256">glcorearb.h:256</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a83dfd180c0229d2b8771f3acd446c5a2ac0a6c0647e323a639609490981b963fc"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2ac0a6c0647e323a639609490981b963fc">SG_UNIFORMTYPE_FLOAT4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00726">sokol_gfx.h:726</a></div></div>
<div class="ttc" id="structsg__pipeline_html_a42e47bab8dbfedf08b3e6cc007159032"><div class="ttname"><a href="../../d5/d97/structsg__pipeline.html#a42e47bab8dbfedf08b3e6cc007159032">sg_pipeline::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00362">sokol_gfx.h:362</a></div></div>
<div class="ttc" id="classfloat_html"><div class="ttname"><a href="../../d4/dc3/classfloat.html">float</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98ad219a9d23d6b3b19d2539ece4a0a71d3"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ad219a9d23d6b3b19d2539ece4a0a71d3">SG_BLENDFACTOR_ONE_MINUS_DST_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00857">sokol_gfx.h:857</a></div></div>
<div class="ttc" id="structsg__blend__state_html_aad5418b27eace35bda553a2b371f81e3"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html#aad5418b27eace35bda553a2b371f81e3">sg_blend_state::depth_format</a></div><div class="ttdeci">sg_pixel_format depth_format</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01431">sokol_gfx.h:1431</a></div></div>
<div class="ttc" id="structsg__shader__stage__desc_html_ab4a4c8aacc932d2bcd3c174a8178249b"><div class="ttname"><a href="../../d9/d32/structsg__shader__stage__desc.html#ab4a4c8aacc932d2bcd3c174a8178249b">sg_shader_stage_desc::byte_code_size</a></div><div class="ttdeci">int byte_code_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01296">sokol_gfx.h:1296</a></div></div>
<div class="ttc" id="structsg__pipeline__desc_html"><div class="ttname"><a href="../../d5/db3/structsg__pipeline__desc.html">sg_pipeline_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01445">sokol_gfx.h:1445</a></div></div>
<div class="ttc" id="gl3w_8h_html_a8f68825b5857a0eab9387a49ba2cae3c"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a8f68825b5857a0eab9387a49ba2cae3c">glUniform2fv</a></div><div class="ttdeci">#define glUniform2fv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01228">gl3w.h:1228</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a5d5233918a454ad3975c620a69ac5f0b"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5d5233918a454ad3975c620a69ac5f0b">GLenum</a></div><div class="ttdeci">unsigned int GLenum</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00083">glcorearb.h:83</a></div></div>
<div class="ttc" id="structsg__pass__action_html_acf2549f347b865e76f6138b0dd8e7a9a"><div class="ttname"><a href="../../d3/dbc/structsg__pass__action.html#acf2549f347b865e76f6138b0dd8e7a9a">sg_pass_action::_end_canary</a></div><div class="ttdeci">uint32_t _end_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00977">sokol_gfx.h:977</a></div></div>
<div class="ttc" id="gl3w_8h_html_a369ec108462c247e3028edc9070117a0"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a369ec108462c247e3028edc9070117a0">glShaderSource</a></div><div class="ttdeci">#define glShaderSource</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01167">gl3w.h:1167</a></div></div>
<div class="ttc" id="structsg__desc_html_ae0a2df5024eb8857323b7d30d465f546"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#ae0a2df5024eb8857323b7d30d465f546">sg_desc::mtl_sampler_cache_size</a></div><div class="ttdeci">int mtl_sampler_cache_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01096">sokol_gfx.h:1096</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aea61abcc5cf090318ff1139f08689ce6a8e72cce7d5c127dff3cc94dd6a6ceef5"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a8e72cce7d5c127dff3cc94dd6a6ceef5">_SG_VERTEXSTEP_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00707">sokol_gfx.h:707</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a4a00caaf242917010341f4022fbb3b8f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a4a00caaf242917010341f4022fbb3b8f">sg_destroy_shader</a></div><div class="ttdeci">SOKOL_API_DECL void sg_destroy_shader(sg_shader shd)</div></div>
<div class="ttc" id="glcorearb_8h_html_a688ad6fbf908a39f7197da6d4e4dd083"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a688ad6fbf908a39f7197da6d4e4dd083">GL_BACK</a></div><div class="ttdeci">#define GL_BACK</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00130">glcorearb.h:130</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ace8155682f86789a9af13e7026df4615"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ace8155682f86789a9af13e7026df4615">GL_RGBA32F</a></div><div class="ttdeci">#define GL_RGBA32F</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01021">glcorearb.h:1021</a></div></div>
<div class="ttc" id="gl3w_8h_html_a3058fd84744eb41e33773ad2b1a8c184"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a3058fd84744eb41e33773ad2b1a8c184">glGetShaderInfoLog</a></div><div class="ttdeci">#define glGetShaderInfoLog</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00974">gl3w.h:974</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7c3779d838681f3083729a9f80ea6ab2a072e65e21856ed2801874122723ab20d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a072e65e21856ed2801874122723ab20d">SG_COLORMASK_B</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00904">sokol_gfx.h:904</a></div></div>
<div class="ttc" id="structsg__subimage__content_html_ad5cf41c09de0390218aaa479aa2e58db"><div class="ttname"><a href="../../d1/d35/structsg__subimage__content.html#ad5cf41c09de0390218aaa479aa2e58db">sg_subimage_content::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01174">sokol_gfx.h:1174</a></div></div>
<div class="ttc" id="structsg__layout__desc_html_a19f830b45bc4289d997fd51604a5e4f1"><div class="ttname"><a href="../../d1/d64/structsg__layout__desc.html#a19f830b45bc4289d997fd51604a5e4f1">sg_layout_desc::attrs</a></div><div class="ttdeci">sg_vertex_attr_desc attrs[SG_MAX_VERTEX_ATTRIBUTES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01399">sokol_gfx.h:1399</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab7a89080b6721517f05551debfec2ea8"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab7a89080b6721517f05551debfec2ea8">sg_destroy_buffer</a></div><div class="ttdeci">SOKOL_API_DECL void sg_destroy_buffer(sg_buffer buf)</div></div>
<div class="ttc" id="glcorearb_8h_html_a6f0a4fa89d82b4517520f643406a2a37"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6f0a4fa89d82b4517520f643406a2a37">GL_COLOR_ATTACHMENT1</a></div><div class="ttdeci">#define GL_COLOR_ATTACHMENT1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01150">glcorearb.h:1150</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a75e522049ecbe2ae946e2433f655fc6e"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a75e522049ecbe2ae946e2433f655fc6e">sg_make_image</a></div><div class="ttdeci">SOKOL_API_DECL sg_image sg_make_image(const sg_image_desc *desc)</div></div>
<div class="ttc" id="structsg__blend__state_html_aef4624a1a4ef6da70a6ec6af5b285d36"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html#aef4624a1a4ef6da70a6ec6af5b285d36">sg_blend_state::color_format</a></div><div class="ttdeci">sg_pixel_format color_format</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01430">sokol_gfx.h:1430</a></div></div>
<div class="ttc" id="gl3w_8h_html_a214386aefdc30034088a21a6bccfbcbd"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a214386aefdc30034088a21a6bccfbcbd">glDeleteVertexArrays</a></div><div class="ttdeci">#define glDeleteVertexArrays</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00833">gl3w.h:833</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a07ce05ddf423b45fb74375b384dc1f14"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a07ce05ddf423b45fb74375b384dc1f14">sg_image_desc::pixel_format</a></div><div class="ttdeci">sg_pixel_format pixel_format</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01249">sokol_gfx.h:1249</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4ab178a54fe3afec07062f05138608e559"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ab178a54fe3afec07062f05138608e559">SG_PIXELFORMAT_ETC2_RGB8</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00605">sokol_gfx.h:605</a></div></div>
<div class="ttc" id="structsg__pipeline__desc_html_a1422173396d3a421d7bf7170a410f775"><div class="ttname"><a href="../../d5/db3/structsg__pipeline__desc.html#a1422173396d3a421d7bf7170a410f775">sg_pipeline_desc::_start_canary</a></div><div class="ttdeci">uint32_t _start_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01446">sokol_gfx.h:1446</a></div></div>
<div class="ttc" id="structsg__attachment__desc_html_a91d437e248352612f03c15cf47b2dd35"><div class="ttname"><a href="../../d1/da2/structsg__attachment__desc.html#a91d437e248352612f03c15cf47b2dd35">sg_attachment_desc::slice</a></div><div class="ttdeci">int slice</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01486">sokol_gfx.h:1486</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897a3b2fbf1b80817df6f45664c192aa1183"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a3b2fbf1b80817df6f45664c192aa1183">SG_FEATURE_IMAGETYPE_ARRAY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00411">sokol_gfx.h:411</a></div></div>
<div class="ttc" id="structsg__shader__stage__desc_html_aa2d7cf33e2169c4ad61de94b4b61b367"><div class="ttname"><a href="../../d9/d32/structsg__shader__stage__desc.html#aa2d7cf33e2169c4ad61de94b4b61b367">sg_shader_stage_desc::source</a></div><div class="ttdeci">const char * source</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01294">sokol_gfx.h:1294</a></div></div>
<div class="ttc" id="gl3w_8h_html_a2196ee41f55215dd32571970c7be9a0a"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a2196ee41f55215dd32571970c7be9a0a">glBlitFramebuffer</a></div><div class="ttdeci">#define glBlitFramebuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00754">gl3w.h:754</a></div></div>
<div class="ttc" id="gl3w_8h_html_a20d4a8491c6ca041d21096f7567fed20"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a20d4a8491c6ca041d21096f7567fed20">glCullFace</a></div><div class="ttdeci">#define glCullFace</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00818">gl3w.h:818</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8c24a16d303b4d935f81c240a2cd88b8"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8c24a16d303b4d935f81c240a2cd88b8">GL_POINTS</a></div><div class="ttdeci">#define GL_POINTS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00097">glcorearb.h:97</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a26e189fe84285eb8fae26721662dbe8c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a26e189fe84285eb8fae26721662dbe8c">GL_TEXTURE_CUBE_MAP</a></div><div class="ttdeci">#define GL_TEXTURE_CUBE_MAP</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00525">glcorearb.h:525</a></div></div>
<div class="ttc" id="structsg__blend__state_html_a59803f860bd53ff824a5ba6b45ad1884"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html#a59803f860bd53ff824a5ba6b45ad1884">sg_blend_state::op_rgb</a></div><div class="ttdeci">sg_blend_op op_rgb</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01424">sokol_gfx.h:1424</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08fa598e60ae2c550a825145e20e377d7f19"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa598e60ae2c550a825145e20e377d7f19">SG_VERTEXFORMAT_UBYTE4N</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00685">sokol_gfx.h:685</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad66599a87de5c80f8c174da72080a811"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad66599a87de5c80f8c174da72080a811">GL_FRONT</a></div><div class="ttdeci">#define GL_FRONT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00129">glcorearb.h:129</a></div></div>
<div class="ttc" id="gl3w_8h_html_ab275ed802ac5db3e6b97973aab9d48e2"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ab275ed802ac5db3e6b97973aab9d48e2">glBufferSubData</a></div><div class="ttdeci">#define glBufferSubData</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00758">gl3w.h:758</a></div></div>
<div class="ttc" id="structsg__color__attachment__action_html_ae5313aebc0025fd61a3f22c4acdcf3fd"><div class="ttname"><a href="../../db/dc9/structsg__color__attachment__action.html#ae5313aebc0025fd61a3f22c4acdcf3fd">sg_color_attachment_action::action</a></div><div class="ttdeci">sg_action action</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00958">sokol_gfx.h:958</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a1a089f083f252031ab280db020f5a841"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a1a089f083f252031ab280db020f5a841">_SG_PIXELFORMAT_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00583">sokol_gfx.h:583</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a5503b40ecf2c211fde3b10c95863f8e6afb228a696b37599bb35cc176bdd8a48e"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6afb228a696b37599bb35cc176bdd8a48e">_SG_ACTION_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00934">sokol_gfx.h:934</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a41a8247b39e9cdb744299c3331ca3453"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a41a8247b39e9cdb744299c3331ca3453">data</a></div><div class="ttdeci">GLboolean * data</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00299">glcorearb.h:299</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a654599021b9e26bd6feb4c7cd001ef7f"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a654599021b9e26bd6feb4c7cd001ef7f">GL_UNSIGNED_SHORT_5_5_5_1</a></div><div class="ttdeci">#define GL_UNSIGNED_SHORT_5_5_5_1</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00436">glcorearb.h:436</a></div></div>
<div class="ttc" id="gl3w_8h_html_a20f33502cbda8885498352fcdbf71fe8"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a20f33502cbda8885498352fcdbf71fe8">glGetAttribLocation</a></div><div class="ttdeci">#define glGetAttribLocation</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00909">gl3w.h:909</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ae526e64e80adafdb9898bfaaa37cf522ab2ace91f8cd0c0b7880c8328c312335b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522ab2ace91f8cd0c0b7880c8328c312335b">SG_CUBEFACE_NEG_X</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00547">sokol_gfx.h:547</a></div></div>
<div class="ttc" id="structsg__image__desc_html_aeb5ea1efacf1fcbe702491bd6417df70"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#aeb5ea1efacf1fcbe702491bd6417df70">sg_image_desc::render_target</a></div><div class="ttdeci">bool render_target</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01240">sokol_gfx.h:1240</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab79db5277fcbe695243c6d68332cbf4caaf24e90f94788e5300a2149564f3c5c2"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caaf24e90f94788e5300a2149564f3c5c2">SG_MAX_TEXTUREARRAY_LAYERS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00388">sokol_gfx.h:388</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9dad4d5a564cacf5bc9cf75560ad9f06d57">SG_IMAGETYPE_3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00533">sokol_gfx.h:533</a></div></div>
<div class="ttc" id="structsg__draw__state_html_a9f49930ca8ebd54ff4eb88cf8c5c7bb6"><div class="ttname"><a href="../../d5/d1e/structsg__draw__state.html#a9f49930ca8ebd54ff4eb88cf8c5c7bb6">sg_draw_state::vs_images</a></div><div class="ttdeci">sg_image vs_images[SG_MAX_SHADERSTAGE_IMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01011">sokol_gfx.h:1011</a></div></div>
<div class="ttc" id="structsg__shader__stage__desc_html_aa5ad88030a0aa4a7c8aedc31729c6c3c"><div class="ttname"><a href="../../d9/d32/structsg__shader__stage__desc.html#aa5ad88030a0aa4a7c8aedc31729c6c3c">sg_shader_stage_desc::images</a></div><div class="ttdeci">sg_shader_image_desc images[SG_MAX_SHADERSTAGE_IMAGES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01299">sokol_gfx.h:1299</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa92fae02a274fe856dad3362144f84dd"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa92fae02a274fe856dad3362144f84dd">GL_ONE</a></div><div class="ttdeci">#define GL_ONE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00114">glcorearb.h:114</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af1e088621fb524138961cd0d650a5a8faf3da405e2b1751288cb78c867fd57371"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8faf3da405e2b1751288cb78c867fd57371">_SG_BUFFERTYPE_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00497">sokol_gfx.h:497</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca078ab388cc4d85212604fc50e0798878">SG_MAX_SHADERSTAGE_BUFFERS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00382">sokol_gfx.h:382</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a9a4eca382eeb05642ef2d63d16b20a22"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a9a4eca382eeb05642ef2d63d16b20a22">sg_alloc_pipeline</a></div><div class="ttdeci">SOKOL_API_DECL sg_pipeline sg_alloc_pipeline(void)</div></div>
<div class="ttc" id="structsg__draw__state_html_a312bc4ad2e0fb34b0d4ee9c9517b713e"><div class="ttname"><a href="../../d5/d1e/structsg__draw__state.html#a312bc4ad2e0fb34b0d4ee9c9517b713e">sg_draw_state::index_buffer</a></div><div class="ttdeci">sg_buffer index_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01009">sokol_gfx.h:1009</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab54b4b110b532b903bf44599fd6a1b2c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab54b4b110b532b903bf44599fd6a1b2c">GL_READ_FRAMEBUFFER</a></div><div class="ttdeci">#define GL_READ_FRAMEBUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01133">glcorearb.h:1133</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ae3c158c6a713b4faa2e8616292368f36"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae3c158c6a713b4faa2e8616292368f36">GL_TEXTURE_MIN_LOD</a></div><div class="ttdeci">#define GL_TEXTURE_MIN_LOD</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00461">glcorearb.h:461</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a40dc9e4aef0d370a75493b650378654da329d3d18c57ad9a3dfa881d77f77cbd3"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654da329d3d18c57ad9a3dfa881d77f77cbd3">_SG_WRAP_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00666">sokol_gfx.h:666</a></div></div>
<div class="ttc" id="glcorearb_8h_html_af9d0cbbbeb7414e786c41899e5a856d7"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#af9d0cbbbeb7414e786c41899e5a856d7">target</a></div><div class="ttdeci">GLenum target</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01682">glcorearb.h:1682</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a76aaa5c50746272e7d2de9aece921757"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a76aaa5c50746272e7d2de9aece921757">width</a></div><div class="ttdeci">GLint GLsizei width</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00271">glcorearb.h:271</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af1e088621fb524138961cd0d650a5a8fa1052a9f00ec6b8a3e914db754c0c64e2"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fa1052a9f00ec6b8a3e914db754c0c64e2">SG_BUFFERTYPE_VERTEXBUFFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00494">sokol_gfx.h:494</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2b3da1bbe9c384305496a19de407488aad5adc3a401f0ebcc100fe91f45e7b628"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aad5adc3a401f0ebcc100fe91f45e7b628">SG_STENCILOP_REPLACE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00820">sokol_gfx.h:820</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98a8c69759d579abc2330763accf53e22c6"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a8c69759d579abc2330763accf53e22c6">SG_BLENDFACTOR_SRC_COLOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00850">sokol_gfx.h:850</a></div></div>
<div class="ttc" id="gl3w_8h_html_aa0c1477a0e3a1833f625029c628ad0e0"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aa0c1477a0e3a1833f625029c628ad0e0">glDrawElementsInstanced</a></div><div class="ttdeci">#define glDrawElementsInstanced</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00856">gl3w.h:856</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a41dd3137d362319dcf68b387b2eb9866"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a41dd3137d362319dcf68b387b2eb9866">GL_ONE_MINUS_DST_ALPHA</a></div><div class="ttdeci">#define GL_ONE_MINUS_DST_ALPHA</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00120">glcorearb.h:120</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a090ebe65994a3ee4bb60ae3472abffc5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a090ebe65994a3ee4bb60ae3472abffc5">alpha</a></div><div class="ttdeci">GLfloat GLfloat GLfloat alpha</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00280">glcorearb.h:280</a></div></div>
<div class="ttc" id="structsg__image_html"><div class="ttname"><a href="../../d5/de5/structsg__image.html">sg_image</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00355">sokol_gfx.h:355</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a173a2b2453322dd8d613df6cf2e72480"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a173a2b2453322dd8d613df6cf2e72480">GL_TEXTURE_MIN_FILTER</a></div><div class="ttdeci">#define GL_TEXTURE_MIN_FILTER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00261">glcorearb.h:261</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a9909edd371cdb8cbf6b5580843a06643"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a9909edd371cdb8cbf6b5580843a06643">sg_fail_pipeline</a></div><div class="ttdeci">SOKOL_API_DECL void sg_fail_pipeline(sg_pipeline pip_id)</div></div>
<div class="ttc" id="structsg__shader__uniform__block__desc_html"><div class="ttname"><a href="../../dd/d14/structsg__shader__uniform__block__desc.html">sg_shader_uniform_block_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01283">sokol_gfx.h:1283</a></div></div>
<div class="ttc" id="structsg__stencil__attachment__action_html_a322952eff6dc16d2ac27d6f98973a579"><div class="ttname"><a href="../../d3/d48/structsg__stencil__attachment__action.html#a322952eff6dc16d2ac27d6f98973a579">sg_stencil_attachment_action::action</a></div><div class="ttdeci">sg_action action</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00968">sokol_gfx.h:968</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa2b6486ff7ecee8bf04e3371f197527a"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa2b6486ff7ecee8bf04e3371f197527a">GL_MULTISAMPLE</a></div><div class="ttdeci">#define GL_MULTISAMPLE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00517">glcorearb.h:517</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0f4596ead70a745674e2a5efcbf4ef9d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9d">sg_image_type</a></div><div class="ttdeci">sg_image_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00529">sokol_gfx.h:529</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a70f6468f185f15b25019554f4207c0cc"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cc">sg_usage</a></div><div class="ttdeci">sg_usage</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00475">sokol_gfx.h:475</a></div></div>
<div class="ttc" id="gl3w_8h_html_a93d8da71f9a009043f304be589ed00db"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a93d8da71f9a009043f304be589ed00db">glDepthMask</a></div><div class="ttdeci">#define glDepthMask</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00835">gl3w.h:835</a></div></div>
<div class="ttc" id="structsg__pipeline__desc_html_a79b4b5aec590c5cbc1c1472661419bb5"><div class="ttname"><a href="../../d5/db3/structsg__pipeline__desc.html#a79b4b5aec590c5cbc1c1472661419bb5">sg_pipeline_desc::primitive_type</a></div><div class="ttdeci">sg_primitive_type primitive_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01449">sokol_gfx.h:1449</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4af4fbff7e4f93998f5bf914b19bd1dc"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4af4fbff7e4f93998f5bf914b19bd1dc">GL_ONE_MINUS_DST_COLOR</a></div><div class="ttdeci">#define GL_ONE_MINUS_DST_COLOR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00122">glcorearb.h:122</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7c3779d838681f3083729a9f80ea6ab2a4cc7a0eddd983514fe77db21569264d4"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a4cc7a0eddd983514fe77db21569264d4">_SG_COLORMASK_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00908">sokol_gfx.h:908</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a70f6468f185f15b25019554f4207c0cca38c2a7730739e0e0ed461915d44e2dd8"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca38c2a7730739e0e0ed461915d44e2dd8">SG_USAGE_DYNAMIC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00478">sokol_gfx.h:478</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a5f6e032bc5f877d09491c9a8ed191571"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a5f6e032bc5f877d09491c9a8ed191571">GL_COMPRESSED_RGBA_S3TC_DXT5_EXT</a></div><div class="ttdeci">#define GL_COMPRESSED_RGBA_S3TC_DXT5_EXT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l04558">glcorearb.h:4558</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a38dcbb45dd8697d8fe43e1ab549a591a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a38dcbb45dd8697d8fe43e1ab549a591a">sg_fail_buffer</a></div><div class="ttdeci">SOKOL_API_DECL void sg_fail_buffer(sg_buffer buf_id)</div></div>
<div class="ttc" id="glcorearb_8h_html_a7eb77863e36c241e7fa96f05f933da18"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7eb77863e36c241e7fa96f05f933da18">GL_RED</a></div><div class="ttdeci">#define GL_RED</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00237">glcorearb.h:237</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aa7173509aeeb22c24e5f272c3d695641"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641">sg_index_type</a></div><div class="ttdeci">sg_index_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00510">sokol_gfx.h:510</a></div></div>
<div class="ttc" id="gl3w_8h_html_a987aecafceffb9afaef11412d42e605b"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a987aecafceffb9afaef11412d42e605b">glBindTexture</a></div><div class="ttdeci">#define glBindTexture</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00738">gl3w.h:738</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a2308c4ffa71335adb12ba6db2d937c7f"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a2308c4ffa71335adb12ba6db2d937c7f">GL_DEPTH24_STENCIL8</a></div><div class="ttdeci">#define GL_DEPTH24_STENCIL8</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01122">glcorearb.h:1122</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4">sg_pixel_format</a></div><div class="ttdeci">sg_pixel_format</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00582">sokol_gfx.h:582</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a13e611dd4ec10121133e67c09b41ec64a3c097f346c501db92d57775e7ab51157"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a3c097f346c501db92d57775e7ab51157">SG_COMPAREFUNC_NEVER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00784">sokol_gfx.h:784</a></div></div>
<div class="ttc" id="gl3w_8h_html_a1b33d322b89d94ad4938461db0a0424a"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a1b33d322b89d94ad4938461db0a0424a">glGenBuffers</a></div><div class="ttdeci">#define glGenBuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00887">gl3w.h:887</a></div></div>
<div class="ttc" id="gl3w_8h_html_adbbb0a7d41b44182b74a9d4f62ca8a63"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#adbbb0a7d41b44182b74a9d4f62ca8a63">glDisable</a></div><div class="ttdeci">#define glDisable</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00841">gl3w.h:841</a></div></div>
<div class="ttc" id="structsg__shader__image__desc_html_ada7a7a8884528b37079f4c7055e15df0"><div class="ttname"><a href="../../dd/d8f/structsg__shader__image__desc.html#ada7a7a8884528b37079f4c7055e15df0">sg_shader_image_desc::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01289">sokol_gfx.h:1289</a></div></div>
<div class="ttc" id="structsg__depth__attachment__action_html"><div class="ttname"><a href="../../d3/dd4/structsg__depth__attachment__action.html">sg_depth_attachment_action</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00962">sokol_gfx.h:962</a></div></div>
<div class="ttc" id="structsg__image__desc_html"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html">sg_image_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01237">sokol_gfx.h:1237</a></div></div>
<div class="ttc" id="structsg__attachment__desc_html_a1e3dd38b9ecbc86ff8c5338cbb52fe34"><div class="ttname"><a href="../../d1/da2/structsg__attachment__desc.html#a1e3dd38b9ecbc86ff8c5338cbb52fe34">sg_attachment_desc::mip_level</a></div><div class="ttdeci">int mip_level</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01482">sokol_gfx.h:1482</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4ac09ec30fb99ef631fe1afd23b8ebbc56"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4ac09ec30fb99ef631fe1afd23b8ebbc56">SG_PIXELFORMAT_L8</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00595">sokol_gfx.h:595</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a87b7df71baeaadbe638496d16ebe8776"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a87b7df71baeaadbe638496d16ebe8776">sg_setup_context</a></div><div class="ttdeci">SOKOL_API_DECL sg_context sg_setup_context(void)</div></div>
<div class="ttc" id="glcorearb_8h_html_a3455aaa12cecc35ac4a42a9bf1273da8"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a3455aaa12cecc35ac4a42a9bf1273da8">img</a></div><div class="ttdeci">GLint void * img</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00551">glcorearb.h:551</a></div></div>
<div class="ttc" id="structsg__shader__desc_html_aa7f3617850909bec39ac109c92c98c3d"><div class="ttname"><a href="../../df/d17/structsg__shader__desc.html#aa7f3617850909bec39ac109c92c98c3d">sg_shader_desc::_start_canary</a></div><div class="ttdeci">uint32_t _start_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01303">sokol_gfx.h:1303</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa9fd0672b1352e0a68a7cf268df3734e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa9fd0672b1352e0a68a7cf268df3734e">GL_ONE_MINUS_CONSTANT_COLOR</a></div><div class="ttdeci">#define GL_ONE_MINUS_CONSTANT_COLOR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00589">glcorearb.h:589</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a9ef40b8b66ee2f657225b989845b9a19"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9ef40b8b66ee2f657225b989845b9a19">shaders</a></div><div class="ttdeci">GLsizei GLsizei GLuint * shaders</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00794">glcorearb.h:794</a></div></div>
<div class="ttc" id="gl3w_8h_html_aa19401138cf27b24bb610dea3ef633ec"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aa19401138cf27b24bb610dea3ef633ec">glFrontFace</a></div><div class="ttdeci">#define glFrontFace</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00886">gl3w.h:886</a></div></div>
<div class="ttc" id="gl3w_8h_html_a54d7419c70c2cec0db1594e23c90e546"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a54d7419c70c2cec0db1594e23c90e546">glVertexAttribDivisor</a></div><div class="ttdeci">#define glVertexAttribDivisor</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01320">gl3w.h:1320</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ac7e31d38a911bc31cf698281fdd9007bafe44c904a6db19f96766c815ff903e93"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007bafe44c904a6db19f96766c815ff903e93">SG_BLENDOP_REVERSE_SUBTRACT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00885">sokol_gfx.h:885</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2b3da1bbe9c384305496a19de407488a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488a">sg_stencil_op</a></div><div class="ttdeci">sg_stencil_op</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00816">sokol_gfx.h:816</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897ad368978a4331e32ddf2715bbc6c6aa10"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad368978a4331e32ddf2715bbc6c6aa10">SG_FEATURE_PACKED_VERTEX_FORMAT_10_2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00408">sokol_gfx.h:408</a></div></div>
<div class="ttc" id="structsg__desc_html_aeccf0b76760ad2fb16dd73cbfe880870"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#aeccf0b76760ad2fb16dd73cbfe880870">sg_desc::mtl_global_uniform_buffer_size</a></div><div class="ttdeci">int mtl_global_uniform_buffer_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01095">sokol_gfx.h:1095</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0a4e76565722cfe393cacfbd04b2e343acde507fdac18e2759ba06db131ec1d14"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343acde507fdac18e2759ba06db131ec1d14">_SG_SHADERSTAGE_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00570">sokol_gfx.h:570</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aceb29bc16e885f956eb9e351a7dd6276"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aceb29bc16e885f956eb9e351a7dd6276">GL_VERTEX_SHADER</a></div><div class="ttdeci">#define GL_VERTEX_SHADER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00731">glcorearb.h:731</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8bdcfddea25084e36bde4357057071d4ad1f85b8ca0a8c1eaaa850e35076511dc"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ad1f85b8ca0a8c1eaaa850e35076511dc">_SG_PRIMITIVETYPE_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00628">sokol_gfx.h:628</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08faa2537db7b2956137a3fbe5a8929c01f5"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faa2537db7b2956137a3fbe5a8929c01f5">SG_VERTEXFORMAT_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00677">sokol_gfx.h:677</a></div></div>
<div class="ttc" id="gl3w_8h_html_afa6bde0b30e12701fb47e1de1615ff52"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#afa6bde0b30e12701fb47e1de1615ff52">glCompressedTexImage2D</a></div><div class="ttdeci">#define glCompressedTexImage2D</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00787">gl3w.h:787</a></div></div>
<div class="ttc" id="gl3w_8h_html_a5817fa85137822142b4951eacd0154e7"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a5817fa85137822142b4951eacd0154e7">glTexParameteri</a></div><div class="ttdeci">#define glTexParameteri</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01186">gl3w.h:1186</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a3ed9d2a2bb8daffceaecad60241cbd93"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a3ed9d2a2bb8daffceaecad60241cbd93">GL_SRC_ALPHA_SATURATE</a></div><div class="ttdeci">#define GL_SRC_ALPHA_SATURATE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00123">glcorearb.h:123</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8bdcfddea25084e36bde4357057071d4ac6adf96be338781a927207580110a0b6"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ac6adf96be338781a927207580110a0b6">SG_PRIMITIVETYPE_LINE_STRIP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00624">sokol_gfx.h:624</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a3f1e1951ac224b0f42929facb17e983f"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a3f1e1951ac224b0f42929facb17e983f">GL_NOTEQUAL</a></div><div class="ttdeci">#define GL_NOTEQUAL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00110">glcorearb.h:110</a></div></div>
<div class="ttc" id="gl3w_8h_html_a81cf4a101af4a4dba6544c8017b5f75e"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a81cf4a101af4a4dba6544c8017b5f75e">glDrawElements</a></div><div class="ttdeci">#define glDrawElements</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00853">gl3w.h:853</a></div></div>
<div class="ttc" id="gl3w_8h_html_aaf5c676d6310526bd8b372ead70237c7"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aaf5c676d6310526bd8b372ead70237c7">glClearStencil</a></div><div class="ttdeci">#define glClearStencil</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00778">gl3w.h:778</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a457ed7b98ffce90d5cb6b70e2cc4027d"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a457ed7b98ffce90d5cb6b70e2cc4027d">sg_image_desc::wrap_w</a></div><div class="ttdeci">sg_wrap wrap_w</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01255">sokol_gfx.h:1255</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa7be33062263597ec5446b302febb2d8"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa7be33062263597ec5446b302febb2d8">GL_EXTENSIONS</a></div><div class="ttdeci">#define GL_EXTENSIONS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00253">glcorearb.h:253</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aea61abcc5cf090318ff1139f08689ce6a95ce69e2693e9f3abdd1af8b657d907b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a95ce69e2693e9f3abdd1af8b657d907b">_SG_VERTEXSTEP_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00711">sokol_gfx.h:711</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08fad322d7d119c90fe3a711d3782a381047"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fad322d7d119c90fe3a711d3782a381047">_SG_VERTEXFORMAT_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00691">sokol_gfx.h:691</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2490c2fd9d80a2abe82cfb6d7a3c0498"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2490c2fd9d80a2abe82cfb6d7a3c0498">sg_query_buffer_state</a></div><div class="ttdeci">SOKOL_API_DECL sg_resource_state sg_query_buffer_state(sg_buffer buf)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab2c0f2d30c0de344f2c437b0eccfec12"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab2c0f2d30c0de344f2c437b0eccfec12">sg_make_buffer</a></div><div class="ttdeci">SOKOL_API_DECL sg_buffer sg_make_buffer(const sg_buffer_desc *desc)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_ad25f2a76b929e2f2d609c0eda9e925f9"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ad25f2a76b929e2f2d609c0eda9e925f9">sg_alloc_shader</a></div><div class="ttdeci">SOKOL_API_DECL sg_shader sg_alloc_shader(void)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a40dc9e4aef0d370a75493b650378654d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a40dc9e4aef0d370a75493b650378654d">sg_wrap</a></div><div class="ttdeci">sg_wrap</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00661">sokol_gfx.h:661</a></div></div>
<div class="ttc" id="gl3w_8h_html_a70008734d7c535e7f41e5283b3c2091b"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a70008734d7c535e7f41e5283b3c2091b">glStencilFuncSeparate</a></div><div class="ttdeci">#define glStencilFuncSeparate</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01170">gl3w.h:1170</a></div></div>
<div class="ttc" id="structsg__stencil__state_html"><div class="ttname"><a href="../../d6/d2c/structsg__stencil__state.html">sg_stencil_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01402">sokol_gfx.h:1402</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2b3da1bbe9c384305496a19de407488aa703bf305ed3f7826dab340a3b42f58e0"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa703bf305ed3f7826dab340a3b42f58e0">SG_STENCILOP_ZERO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00819">sokol_gfx.h:819</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a67a335dbe0283343395cac2700042a1b"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a67a335dbe0283343395cac2700042a1b">GL_R32F</a></div><div class="ttdeci">#define GL_R32F</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01219">glcorearb.h:1219</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab109e8cf001661ba22543b63063f7b42a48f5bd6ec5073d2eec58e7af5b07375f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a48f5bd6ec5073d2eec58e7af5b07375f">SG_FILTER_LINEAR_MIPMAP_NEAREST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00646">sokol_gfx.h:646</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7c3779d838681f3083729a9f80ea6ab2afe48bf8d45364cbe94ba7e3de50696e1"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2afe48bf8d45364cbe94ba7e3de50696e1">_SG_COLORMASK_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00900">sokol_gfx.h:900</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a5503b40ecf2c211fde3b10c95863f8e6a300a4cbdf62c8a2936fbeea5349f3581"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a300a4cbdf62c8a2936fbeea5349f3581">_SG_ACTION_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00930">sokol_gfx.h:930</a></div></div>
<div class="ttc" id="structsg__layout__desc_html_a956d4bf59180e48cdfb5bcc00b0c7012"><div class="ttname"><a href="../../d1/d64/structsg__layout__desc.html#a956d4bf59180e48cdfb5bcc00b0c7012">sg_layout_desc::buffers</a></div><div class="ttdeci">sg_buffer_layout_desc buffers[SG_MAX_SHADERSTAGE_BUFFERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01398">sokol_gfx.h:1398</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ac4dc812a285640570b56acc55822dffe"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac4dc812a285640570b56acc55822dffe">GL_DEPTH_ATTACHMENT</a></div><div class="ttdeci">#define GL_DEPTH_ATTACHMENT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01181">glcorearb.h:1181</a></div></div>
<div class="ttc" id="structsg__depth__stencil__state_html_ad698879849d1e77dcbbda963cd45ef79"><div class="ttname"><a href="../../d5/d6c/structsg__depth__stencil__state.html#ad698879849d1e77dcbbda963cd45ef79">sg_depth_stencil_state::stencil_front</a></div><div class="ttdeci">sg_stencil_state stencil_front</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01410">sokol_gfx.h:1410</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7c3779d838681f3083729a9f80ea6ab2aad6d3c02e809981298ad53caef933bcd"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2aad6d3c02e809981298ad53caef933bcd">SG_COLORMASK_RGB</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00906">sokol_gfx.h:906</a></div></div>
<div class="ttc" id="structsg__stencil__state_html_affb5cf6e644ac11be8db5e3ac8803b20"><div class="ttname"><a href="../../d6/d2c/structsg__stencil__state.html#affb5cf6e644ac11be8db5e3ac8803b20">sg_stencil_state::pass_op</a></div><div class="ttdeci">sg_stencil_op pass_op</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01405">sokol_gfx.h:1405</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a1a0294662b50921555cae95fb20740d4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a1a0294662b50921555cae95fb20740d4">GL_FRAGMENT_SHADER</a></div><div class="ttdeci">#define GL_FRAGMENT_SHADER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00730">glcorearb.h:730</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af30b7eacdf6fe6765e24d64a78acc7f0"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af30b7eacdf6fe6765e24d64a78acc7f0">sg_begin_pass</a></div><div class="ttdeci">SOKOL_API_DECL void sg_begin_pass(sg_pass pass, const sg_pass_action *pass_action)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98a641887d49c50dcaadab00c5457074894"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a641887d49c50dcaadab00c5457074894">SG_BLENDFACTOR_ONE_MINUS_SRC_COLOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00851">sokol_gfx.h:851</a></div></div>
<div class="ttc" id="structsg__desc_html_ab56f235f260ba5c0a5f0d2bd470e854d"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#ab56f235f260ba5c0a5f0d2bd470e854d">sg_desc::pass_pool_size</a></div><div class="ttdeci">int pass_pool_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01087">sokol_gfx.h:1087</a></div></div>
<div class="ttc" id="gl3w_8h_html_ab54b002beb984f066acd0dd7fff469dc"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ab54b002beb984f066acd0dd7fff469dc">glViewport</a></div><div class="ttdeci">#define glViewport</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01364">gl3w.h:1364</a></div></div>
<div class="ttc" id="structsg__shader__uniform__desc_html"><div class="ttname"><a href="../../d2/d67/structsg__shader__uniform__desc.html">sg_shader_uniform_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01277">sokol_gfx.h:1277</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ac7e31d38a911bc31cf698281fdd9007ba39bb8326504a0479b26cd513622425de"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba39bb8326504a0479b26cd513622425de">SG_BLENDOP_SUBTRACT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00884">sokol_gfx.h:884</a></div></div>
<div class="ttc" id="gl3w_8h_html_a6e8ee482001ee8fb9b3d4851116779b4"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a6e8ee482001ee8fb9b3d4851116779b4">glEnableVertexAttribArray</a></div><div class="ttdeci">#define glEnableVertexAttribArray</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00868">gl3w.h:868</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a80a33c79f69417372d65d2a65ca36d49"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a80a33c79f69417372d65d2a65ca36d49">GL_UNSIGNED_BYTE</a></div><div class="ttdeci">#define GL_UNSIGNED_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00207">glcorearb.h:207</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08fab7cb79d6441e89b46f35bd113febdb44"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fab7cb79d6441e89b46f35bd113febdb44">_SG_VERTEXFORMAT_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00692">sokol_gfx.h:692</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897a70fd29544a81d7bb37f26af9b263ded6"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a70fd29544a81d7bb37f26af9b263ded6">SG_FEATURE_TEXTURE_COMPRESSION_ATC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00401">sokol_gfx.h:401</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a228daac3459d79ef70db9c3f77b1d987"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a228daac3459d79ef70db9c3f77b1d987">sg_image_desc::_end_canary</a></div><div class="ttdeci">uint32_t _end_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01266">sokol_gfx.h:1266</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2b3da1bbe9c384305496a19de407488aa2aafda06dbb6c5f6436d9f89d28a9cd7"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa2aafda06dbb6c5f6436d9f89d28a9cd7">_SG_STENCILOP_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00826">sokol_gfx.h:826</a></div></div>
<div class="ttc" id="structsg__shader__uniform__block__desc_html_a995bb1ddede542251b268a3457ff89d1"><div class="ttname"><a href="../../dd/d14/structsg__shader__uniform__block__desc.html#a995bb1ddede542251b268a3457ff89d1">sg_shader_uniform_block_desc::uniforms</a></div><div class="ttdeci">sg_shader_uniform_desc uniforms[SG_MAX_UB_MEMBERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01285">sokol_gfx.h:1285</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a205fafb8e91cc1249e481378b7bac888"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a205fafb8e91cc1249e481378b7bac888">sg_image_desc::depth</a></div><div class="ttdeci">int depth</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01244">sokol_gfx.h:1244</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad8a8baf08bc0399738960c9259571911"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad8a8baf08bc0399738960c9259571911">buf</a></div><div class="ttdeci">GLenum GLuint GLenum GLsizei const GLchar * buf</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l02555">glcorearb.h:2555</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aa3431cc18622492f90ce688f42f6b40a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aa3431cc18622492f90ce688f42f6b40a">sg_apply_scissor_rect</a></div><div class="ttdeci">SOKOL_API_DECL void sg_apply_scissor_rect(int x, int y, int width, int height, bool origin_top_left)</div></div>
<div class="ttc" id="gl3w_8h_html_a6c44d3915453f83f6ac83c10ea82303d"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a6c44d3915453f83f6ac83c10ea82303d">glStencilOp</a></div><div class="ttdeci">#define glStencilOp</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01173">gl3w.h:1173</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ae77c1e831fd164e9ac6c1a9cdb697ce5"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae77c1e831fd164e9ac6c1a9cdb697ce5">GL_INFO_LOG_LENGTH</a></div><div class="ttdeci">#define GL_INFO_LOG_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00761">glcorearb.h:761</a></div></div>
<div class="ttc" id="structsg__blend__state_html_a4e583154ea74b802d760f3df0c4f429a"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html#a4e583154ea74b802d760f3df0c4f429a">sg_blend_state::color_attachment_count</a></div><div class="ttdeci">int color_attachment_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01429">sokol_gfx.h:1429</a></div></div>
<div class="ttc" id="glcorearb_8h_html_af545b4458d07f53f6ffebc73b38814cb"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#af545b4458d07f53f6ffebc73b38814cb">buffers</a></div><div class="ttdeci">const GLuint * buffers</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00658">glcorearb.h:658</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ac71bf5145721bbb6c3286c70834f4394"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ac71bf5145721bbb6c3286c70834f4394">GL_EQUAL</a></div><div class="ttdeci">#define GL_EQUAL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00107">glcorearb.h:107</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af4654d2759a13c49ffa3cf9378cab61b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af4654d2759a13c49ffa3cf9378cab61b">sg_destroy_image</a></div><div class="ttdeci">SOKOL_API_DECL void sg_destroy_image(sg_image img)</div></div>
<div class="ttc" id="structsg__image_html_abf76923fb732aaafd4039d6777a6ee75"><div class="ttname"><a href="../../d5/de5/structsg__image.html#abf76923fb732aaafd4039d6777a6ee75">sg_image::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00356">sokol_gfx.h:356</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a2852616fac46bf1d405b822ac612e94a"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a2852616fac46bf1d405b822ac612e94a">sg_image_desc::width</a></div><div class="ttdeci">int width</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01241">sokol_gfx.h:1241</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad0017e5c11a6be44b705d87053607fca"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad0017e5c11a6be44b705d87053607fca">GL_FUNC_SUBTRACT</a></div><div class="ttdeci">#define GL_FUNC_SUBTRACT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00584">glcorearb.h:584</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a3c53e8eb1b923c16486332e76a09a60d">SG_RESOURCESTATE_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00437">sokol_gfx.h:437</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897a9ca2b37fa43fcd46f8d6e537064e3e9b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a9ca2b37fa43fcd46f8d6e537064e3e9b">SG_FEATURE_TEXTURE_COMPRESSION_DXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00399">sokol_gfx.h:399</a></div></div>
<div class="ttc" id="gl3w_8h_html_a07307444475d1fa7124466278618ed55"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a07307444475d1fa7124466278618ed55">glBlendColor</a></div><div class="ttdeci">#define glBlendColor</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00745">gl3w.h:745</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4caed7a28f278383269b680fd7caa2db27a">SG_NUM_SHADER_STAGES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00379">sokol_gfx.h:379</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a83dfd180c0229d2b8771f3acd446c5a2"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2">sg_uniform_type</a></div><div class="ttdeci">sg_uniform_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00721">sokol_gfx.h:721</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a5503b40ecf2c211fde3b10c95863f8e6a92f57692b49d7ccdd51f70b546cea601"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a92f57692b49d7ccdd51f70b546cea601">_SG_ACTION_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00935">sokol_gfx.h:935</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a773692cafbd5e3853fc6990aa4aaebf4a131d819b6c0fe42072f7db0677941b5d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a131d819b6c0fe42072f7db0677941b5d">SG_CULLMODE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00743">sokol_gfx.h:743</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a15cb970a541969b11409d0adec3b331faa52943c18ba7c0545d647b4bcf4c598b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331faa52943c18ba7c0545d647b4bcf4c598b">_SG_FACEWINDING_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00760">sokol_gfx.h:760</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa3bfa1f454ff5072bc1b64e7d30e9584"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa3bfa1f454ff5072bc1b64e7d30e9584">GL_GREATER</a></div><div class="ttdeci">#define GL_GREATER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00109">glcorearb.h:109</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8bdcfddea25084e36bde4357057071d4a56f0068a3381a2f910b646b15bbdad7c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a56f0068a3381a2f910b646b15bbdad7c">SG_PRIMITIVETYPE_POINTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00622">sokol_gfx.h:622</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a921fa83f7755f0139c84ba1831417a2e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a921fa83f7755f0139c84ba1831417a2e">length</a></div><div class="ttdeci">GLuint GLsizei GLsizei * length</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00792">glcorearb.h:792</a></div></div>
<div class="ttc" id="structsg__vertex__attr__desc_html_a0b2bb26de80e5d21e5c877e5d953b558"><div class="ttname"><a href="../../d5/d83/structsg__vertex__attr__desc.html#a0b2bb26de80e5d21e5c877e5d953b558">sg_vertex_attr_desc::format</a></div><div class="ttdeci">sg_vertex_format format</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01394">sokol_gfx.h:1394</a></div></div>
<div class="ttc" id="structsg__pass__desc_html_a60895ff91f318d528793dd786b5c9aa0"><div class="ttname"><a href="../../d4/d2b/structsg__pass__desc.html#a60895ff91f318d528793dd786b5c9aa0">sg_pass_desc::_end_canary</a></div><div class="ttdeci">uint32_t _end_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01494">sokol_gfx.h:1494</a></div></div>
<div class="ttc" id="structsg__buffer_html"><div class="ttname"><a href="../../d9/dee/structsg__buffer.html">sg_buffer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00352">sokol_gfx.h:352</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a773692cafbd5e3853fc6990aa4aaebf4a066a84228771706495e956054b11c73d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a066a84228771706495e956054b11c73d">_SG_CULLMODE_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00746">sokol_gfx.h:746</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aea61abcc5cf090318ff1139f08689ce6a84ea40a12ba85ca0542460d0624b88b5"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aea61abcc5cf090318ff1139f08689ce6a84ea40a12ba85ca0542460d0624b88b5">SG_VERTEXSTEP_PER_VERTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00708">sokol_gfx.h:708</a></div></div>
<div class="ttc" id="structsg__image__content_html_a58cb449f1e42c6fef33be4f2a400d8a3"><div class="ttname"><a href="../../dd/d44/structsg__image__content.html#a58cb449f1e42c6fef33be4f2a400d8a3">sg_image_content::subimage</a></div><div class="ttdeci">sg_subimage_content subimage[SG_CUBEFACE_NUM][SG_MAX_MIPMAPS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01186">sokol_gfx.h:1186</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a69f1c49996aca30177171c7b086cfb34"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a69f1c49996aca30177171c7b086cfb34">GL_RGB</a></div><div class="ttdeci">#define GL_RGB</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00241">glcorearb.h:241</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab81054a092f44d2ce010b3c46e3a7ff3"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab81054a092f44d2ce010b3c46e3a7ff3">offset</a></div><div class="ttdeci">GLintptr offset</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00662">glcorearb.h:662</a></div></div>
<div class="ttc" id="structsg__buffer__desc_html_ad4f2b240c65b7ee8d8b2fa39208cb9a5"><div class="ttname"><a href="../../d6/d2c/structsg__buffer__desc.html#ad4f2b240c65b7ee8d8b2fa39208cb9a5">sg_buffer_desc::mtl_buffers</a></div><div class="ttdeci">const void * mtl_buffers[SG_NUM_INFLIGHT_FRAMES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01154">sokol_gfx.h:1154</a></div></div>
<div class="ttc" id="glcorearb_8h_html_afa0fb1b5e976920c0abeff2dca3ed774"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#afa0fb1b5e976920c0abeff2dca3ed774">h</a></div><div class="ttdeci">GLfloat GLfloat GLfloat GLfloat h</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l02017">glcorearb.h:2017</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a85e59cd56e10d0a7f49ab199f277d486"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a85e59cd56e10d0a7f49ab199f277d486">dst</a></div><div class="ttdeci">GLenum GLenum dst</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01808">glcorearb.h:1808</a></div></div>
<div class="ttc" id="structsg__context_html"><div class="ttname"><a href="../../d2/d13/structsg__context.html">sg_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00367">sokol_gfx.h:367</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_adc374778695c2259489197c501ee1f29"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#adc374778695c2259489197c501ee1f29">sg_update_buffer</a></div><div class="ttdeci">SOKOL_API_DECL void sg_update_buffer(sg_buffer buf, const void *data_ptr, int data_size)</div></div>
<div class="ttc" id="structsg__draw__state_html_a95f9400336ccf0b4cbccfeaa10e635c5"><div class="ttname"><a href="../../d5/d1e/structsg__draw__state.html#a95f9400336ccf0b4cbccfeaa10e635c5">sg_draw_state::index_buffer_offset</a></div><div class="ttdeci">uint32_t index_buffer_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01010">sokol_gfx.h:1010</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a617cd5e827095cba86efa54435e3ec3f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a617cd5e827095cba86efa54435e3ec3f">SG_PIXELFORMAT_RGBA4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00587">sokol_gfx.h:587</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a57b2a96adb1d51204909a82d861e395e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a57b2a96adb1d51204909a82d861e395e">shader</a></div><div class="ttdeci">GLuint shader</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00782">glcorearb.h:782</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897a1afe1718136ca6a21672b44eacb70b8e"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a1afe1718136ca6a21672b44eacb70b8e">SG_FEATURE_TEXTURE_HALF_FLOAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00404">sokol_gfx.h:404</a></div></div>
<div class="ttc" id="gl3w_8h_html_a511181ed70d9d4cf7463a0ffe39f836d"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a511181ed70d9d4cf7463a0ffe39f836d">glGetProgramiv</a></div><div class="ttdeci">#define glGetProgramiv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00958">gl3w.h:958</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af0e5c18f1f5649a4641562d91254181a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af0e5c18f1f5649a4641562d91254181a">sg_destroy_pass</a></div><div class="ttdeci">SOKOL_API_DECL void sg_destroy_pass(sg_pass pass)</div></div>
<div class="ttc" id="glcorearb_8h_html_a59bce1439c94ef9da87f83508eabb20a"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a59bce1439c94ef9da87f83508eabb20a">GL_COLOR</a></div><div class="ttdeci">#define GL_COLOR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00232">glcorearb.h:232</a></div></div>
<div class="ttc" id="glcorearb_8h_html_afb85c5d9b1bce96aa3b530d581194d1a"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#afb85c5d9b1bce96aa3b530d581194d1a">usage</a></div><div class="ttdeci">GLsizeiptr const void GLenum usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00661">glcorearb.h:661</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aaf9c04cd7687218cb7fcc091f0a81e20"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aaf9c04cd7687218cb7fcc091f0a81e20">sg_discard_context</a></div><div class="ttdeci">SOKOL_API_DECL void sg_discard_context(sg_context ctx_id)</div></div>
<div class="ttc" id="structsg__draw__state_html"><div class="ttname"><a href="../../d5/d1e/structsg__draw__state.html">sg_draw_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01004">sokol_gfx.h:1004</a></div></div>
<div class="ttc" id="structsg__desc_html_aae61c7e1c17c10737bf286b98fdbcb6d"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#aae61c7e1c17c10737bf286b98fdbcb6d">sg_desc::mtl_device</a></div><div class="ttdeci">const void * mtl_device</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01092">sokol_gfx.h:1092</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a773692cafbd5e3853fc6990aa4aaebf4aeb2fdbf9e21f68dbd21c3e55209d20e2"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4aeb2fdbf9e21f68dbd21c3e55209d20e2">_SG_CULLMODE_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00747">sokol_gfx.h:747</a></div></div>
<div class="ttc" id="gl3w_8h_html_a8afadc1fe36886688a02097cc63a17cb"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a8afadc1fe36886688a02097cc63a17cb">glVertexAttribPointer</a></div><div class="ttdeci">#define glVertexAttribPointer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01362">gl3w.h:1362</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0c473ed991f6ac9c3e6f158d9e978341"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0c473ed991f6ac9c3e6f158d9e978341">sg_apply_uniform_block</a></div><div class="ttdeci">SOKOL_API_DECL void sg_apply_uniform_block(sg_shader_stage stage, int ub_index, const void *data, int num_bytes)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0f4596ead70a745674e2a5efcbf4ef9da4ae5b415ba25c02189dc6b2aa6bcb10f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9da4ae5b415ba25c02189dc6b2aa6bcb10f">_SG_IMAGETYPE_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00536">sokol_gfx.h:536</a></div></div>
<div class="ttc" id="structsg__desc_html_a3b9a260dd404099b2ed9c8f697fe8599"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#a3b9a260dd404099b2ed9c8f697fe8599">sg_desc::mtl_drawable_cb</a></div><div class="ttdeci">const void *(* mtl_drawable_cb)()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01094">sokol_gfx.h:1094</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca73c357cf61a66104a00d49d8c1a439a5">SG_USAGE_IMMUTABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00477">sokol_gfx.h:477</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a47e61275e3ceb70db43107ff8074f025"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a47e61275e3ceb70db43107ff8074f025">GL_RGB5</a></div><div class="ttdeci">#define GL_RGB5</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00387">glcorearb.h:387</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa8e645785d8215f658c2576d90df1e5d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa8e645785d8215f658c2576d90df1e5d">GL_CONSTANT_ALPHA</a></div><div class="ttdeci">#define GL_CONSTANT_ALPHA</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00590">glcorearb.h:590</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ac7e31d38a911bc31cf698281fdd9007ba3d6aa8c0ae2c6d38d7a0de2f9df35c27"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba3d6aa8c0ae2c6d38d7a0de2f9df35c27">_SG_BLENDOP_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00886">sokol_gfx.h:886</a></div></div>
<div class="ttc" id="structsg__shader__image__desc_html"><div class="ttname"><a href="../../dd/d8f/structsg__shader__image__desc.html">sg_shader_image_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01288">sokol_gfx.h:1288</a></div></div>
<div class="ttc" id="gl3w_8h_html_ad9d72969a26069958dea3598cfecb687"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ad9d72969a26069958dea3598cfecb687">glRenderbufferStorage</a></div><div class="ttdeci">#define glRenderbufferStorage</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01151">gl3w.h:1151</a></div></div>
<div class="ttc" id="structsg__shader__stage__desc_html_a27b2cc1c0ca15c1696f2f0de7798ff1b"><div class="ttname"><a href="../../d9/d32/structsg__shader__stage__desc.html#a27b2cc1c0ca15c1696f2f0de7798ff1b">sg_shader_stage_desc::entry</a></div><div class="ttdeci">const char * entry</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01297">sokol_gfx.h:1297</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8f5475f6f7d0a74fdf1a2391422dfcdb"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8f5475f6f7d0a74fdf1a2391422dfcdb">GL_R16F</a></div><div class="ttdeci">#define GL_R16F</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01218">glcorearb.h:1218</a></div></div>
<div class="ttc" id="structsg__shader__stage__desc_html"><div class="ttname"><a href="../../d9/d32/structsg__shader__stage__desc.html">sg_shader_stage_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01293">sokol_gfx.h:1293</a></div></div>
<div class="ttc" id="gl3w_8h_html_a24f4f4542ac907e9c4e89e689966890f"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a24f4f4542ac907e9c4e89e689966890f">glStencilOpSeparate</a></div><div class="ttdeci">#define glStencilOpSeparate</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01174">gl3w.h:1174</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a69b1c02ba0bd93c643c6d82e0c16eb99"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a69b1c02ba0bd93c643c6d82e0c16eb99">GL_UNSIGNED_INT</a></div><div class="ttdeci">#define GL_UNSIGNED_INT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00211">glcorearb.h:211</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a45b92fce386fe7eab13bcdfea7bc6c55"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a45b92fce386fe7eab13bcdfea7bc6c55">SG_PIXELFORMAT_R5G5B5A1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00589">sokol_gfx.h:589</a></div></div>
<div class="ttc" id="structsg__shader__stage__desc_html_a6f2101b90334c1afcc03265b42873d6a"><div class="ttname"><a href="../../d9/d32/structsg__shader__stage__desc.html#a6f2101b90334c1afcc03265b42873d6a">sg_shader_stage_desc::byte_code</a></div><div class="ttdeci">const uint8_t * byte_code</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01295">sokol_gfx.h:1295</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0a4e76565722cfe393cacfbd04b2e343ab26f2b558d5794cdddc1f2e954867a6d">SG_SHADERSTAGE_FS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00569">sokol_gfx.h:569</a></div></div>
<div class="ttc" id="structsg__stencil__state_html_a5e873afc96c7760cf193bdb6dfd08c88"><div class="ttname"><a href="../../d6/d2c/structsg__stencil__state.html#a5e873afc96c7760cf193bdb6dfd08c88">sg_stencil_state::compare_func</a></div><div class="ttdeci">sg_compare_func compare_func</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01406">sokol_gfx.h:1406</a></div></div>
<div class="ttc" id="structsg__shader_html"><div class="ttname"><a href="../../da/d75/structsg__shader.html">sg_shader</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00358">sokol_gfx.h:358</a></div></div>
<div class="ttc" id="structsg__shader__desc_html"><div class="ttname"><a href="../../df/d17/structsg__shader__desc.html">sg_shader_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01302">sokol_gfx.h:1302</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4c5d89dc1a4ba5669af56d43ad6d26e8"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4c5d89dc1a4ba5669af56d43ad6d26e8">GL_CW</a></div><div class="ttdeci">#define GL_CW</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00139">glcorearb.h:139</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4aee9de87145ed1e5f8129bd39501a164b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aee9de87145ed1e5f8129bd39501a164b">SG_PIXELFORMAT_R10G10B10A2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00590">sokol_gfx.h:590</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ae526e64e80adafdb9898bfaaa37cf522"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522">sg_cube_face</a></div><div class="ttdeci">sg_cube_face</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00545">sokol_gfx.h:545</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a4610a2c95a3f97c99390ec4e08caa1ca"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a4610a2c95a3f97c99390ec4e08caa1ca">sg_image_desc::usage</a></div><div class="ttdeci">sg_usage usage</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01248">sokol_gfx.h:1248</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a065314e6648fa794d9cf5872ebb9d776"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a065314e6648fa794d9cf5872ebb9d776">GL_ALWAYS</a></div><div class="ttdeci">#define GL_ALWAYS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00112">glcorearb.h:112</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aecec622a15619219f88d13271b5fd581"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aecec622a15619219f88d13271b5fd581">GL_UNSIGNED_SHORT_5_6_5</a></div><div class="ttdeci">#define GL_UNSIGNED_SHORT_5_6_5</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00450">glcorearb.h:450</a></div></div>
<div class="ttc" id="gl3w_8h_html_ad0eeab6a26c94a0b78c04aac628e5ab5"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ad0eeab6a26c94a0b78c04aac628e5ab5">glGetProgramInfoLog</a></div><div class="ttdeci">#define glGetProgramInfoLog</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00948">gl3w.h:948</a></div></div>
<div class="ttc" id="structsg__draw__state_html_a5fb9cce7b6c84e94102ba0f4a6a387b2"><div class="ttname"><a href="../../d5/d1e/structsg__draw__state.html#a5fb9cce7b6c84e94102ba0f4a6a387b2">sg_draw_state::_end_canary</a></div><div class="ttdeci">uint32_t _end_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01013">sokol_gfx.h:1013</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab33e587bf39ff061f302ead66918a8a4"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab33e587bf39ff061f302ead66918a8a4">sg_reset_state_cache</a></div><div class="ttdeci">SOKOL_API_DECL void sg_reset_state_cache(void)</div></div>
<div class="ttc" id="glcorearb_8h_html_a66f452ef2a3d3a1f92e38d9fd6e3f8ec"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a66f452ef2a3d3a1f92e38d9fd6e3f8ec">GL_BYTE</a></div><div class="ttdeci">#define GL_BYTE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00206">glcorearb.h:206</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab109e8cf001661ba22543b63063f7b42ae140126edd40b41a54abfaeac4cd4e29"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42ae140126edd40b41a54abfaeac4cd4e29">_SG_FILTER_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00649">sokol_gfx.h:649</a></div></div>
<div class="ttc" id="gl3w_8h_html_a2f24b3425eec94391cbfbb638466c65b"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a2f24b3425eec94391cbfbb638466c65b">glUniform4fv</a></div><div class="ttdeci">#define glUniform4fv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01244">gl3w.h:1244</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ac7e31d38a911bc31cf698281fdd9007ba2855b1c2fdd50951764f3d89f225ee00"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007ba2855b1c2fdd50951764f3d89f225ee00">_SG_BLENDOP_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00887">sokol_gfx.h:887</a></div></div>
<div class="ttc" id="structsg__desc_html_a15b47daeb207aa0fb560b043904e33e1"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#a15b47daeb207aa0fb560b043904e33e1">sg_desc::pipeline_pool_size</a></div><div class="ttdeci">int pipeline_pool_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01086">sokol_gfx.h:1086</a></div></div>
<div class="ttc" id="structsg__pass__desc_html"><div class="ttname"><a href="../../d4/d2b/structsg__pass__desc.html">sg_pass_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01490">sokol_gfx.h:1490</a></div></div>
<div class="ttc" id="gl3w_8h_html_af07e9596f4c8bb748c5e64d1cff6ca35"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#af07e9596f4c8bb748c5e64d1cff6ca35">glBlendEquationSeparate</a></div><div class="ttdeci">#define glBlendEquationSeparate</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00747">gl3w.h:747</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a9cef9ed3715d583330d7445daa25f1bf"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a9cef9ed3715d583330d7445daa25f1bf">sg_begin_default_pass</a></div><div class="ttdeci">SOKOL_API_DECL void sg_begin_default_pass(const sg_pass_action *pass_action, int width, int height)</div></div>
<div class="ttc" id="glcorearb_8h_html_a4ccf1dc093190cc3798b9abea3655f98"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4ccf1dc093190cc3798b9abea3655f98">GL_DEPTH_TEST</a></div><div class="ttdeci">#define GL_DEPTH_TEST</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00154">glcorearb.h:154</a></div></div>
<div class="ttc" id="structsg__pass_html_a38aa55fd534865ef1a2e4ce7c0777660"><div class="ttname"><a href="../../dc/de5/structsg__pass.html#a38aa55fd534865ef1a2e4ce7c0777660">sg_pass::id</a></div><div class="ttdeci">uint32_t id</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00365">sokol_gfx.h:365</a></div></div>
<div class="ttc" id="structsg__vertex__attr__desc_html_a357b733993ec8e744fe6dc6bd2a3d060"><div class="ttname"><a href="../../d5/d83/structsg__vertex__attr__desc.html#a357b733993ec8e744fe6dc6bd2a3d060">sg_vertex_attr_desc::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01389">sokol_gfx.h:1389</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8d31f977b3490eb05832ecc261313462"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8d31f977b3490eb05832ecc261313462">GL_TEXTURE_CUBE_MAP_NEGATIVE_Y</a></div><div class="ttdeci">#define GL_TEXTURE_CUBE_MAP_NEGATIVE_Y</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00530">glcorearb.h:530</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4f6d54698e61290f310b55ce3505dcb1"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4f6d54698e61290f310b55ce3505dcb1">GL_DECR</a></div><div class="ttdeci">#define GL_DECR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00249">glcorearb.h:249</a></div></div>
<div class="ttc" id="gl3w_8h_html_a21f7fd667bd8822adaf1a45cc1c1a116"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a21f7fd667bd8822adaf1a45cc1c1a116">glBlendFuncSeparate</a></div><div class="ttdeci">#define glBlendFuncSeparate</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00751">gl3w.h:751</a></div></div>
<div class="ttc" id="gl3w_8h_html_ad8e40c882d63c4671dea2ca2dfcf3046"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ad8e40c882d63c4671dea2ca2dfcf3046">glUseProgram</a></div><div class="ttdeci">#define glUseProgram</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01271">gl3w.h:1271</a></div></div>
<div class="ttc" id="structsg__draw__state_html_a494e67aed78b918eb5be3e9bffdc29d0"><div class="ttname"><a href="../../d5/d1e/structsg__draw__state.html#a494e67aed78b918eb5be3e9bffdc29d0">sg_draw_state::vertex_buffers</a></div><div class="ttdeci">sg_buffer vertex_buffers[SG_MAX_SHADERSTAGE_BUFFERS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01007">sokol_gfx.h:1007</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a951bf62df0f17f0bdc819d3377595a80"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a951bf62df0f17f0bdc819d3377595a80">sg_query_image_state</a></div><div class="ttdeci">SOKOL_API_DECL sg_resource_state sg_query_image_state(sg_image img)</div></div>
<div class="ttc" id="glcorearb_8h_html_a6adf6cffd6e7fc49298982128155b8dd"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6adf6cffd6e7fc49298982128155b8dd">GL_SRC_COLOR</a></div><div class="ttdeci">#define GL_SRC_COLOR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00115">glcorearb.h:115</a></div></div>
<div class="ttc" id="glcorearb_8h_html_af152705dd1f6504e96a2cdec832eb4e9"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#af152705dd1f6504e96a2cdec832eb4e9">GL_INVERT</a></div><div class="ttdeci">#define GL_INVERT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00225">glcorearb.h:225</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a23a0bc2909cc2f79fe7287aaa044e880"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a23a0bc2909cc2f79fe7287aaa044e880">GL_TEXTURE_WRAP_S</a></div><div class="ttdeci">#define GL_TEXTURE_WRAP_S</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00262">glcorearb.h:262</a></div></div>
<div class="ttc" id="structsg__pass_html"><div class="ttname"><a href="../../dc/de5/structsg__pass.html">sg_pass</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00364">sokol_gfx.h:364</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7a4124dfd55240178e380c17cce7fcd9"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7a4124dfd55240178e380c17cce7fcd9">sg_init_image</a></div><div class="ttdeci">SOKOL_API_DECL void sg_init_image(sg_image img_id, const sg_image_desc *desc)</div></div>
<div class="ttc" id="gl3w_8h_html_a3f7fa0df22505dd09a24a4e1e74eca09"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a3f7fa0df22505dd09a24a4e1e74eca09">glEnable</a></div><div class="ttdeci">#define glEnable</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00866">gl3w.h:866</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab7c5971606f2b7513272dc6a2c8b6987a2438cce88c4df9a035b4b7cd91e18b69"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987a2438cce88c4df9a035b4b7cd91e18b69">SG_RESOURCESTATE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00439">sokol_gfx.h:439</a></div></div>
<div class="ttc" id="gl3w_8h_html_a65e19bfeb1feac01b9f4df7d5fdb5202"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a65e19bfeb1feac01b9f4df7d5fdb5202">glFramebufferTextureLayer</a></div><div class="ttdeci">#define glFramebufferTextureLayer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00885">gl3w.h:885</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a4e682f218130b98b27a1e33fa7325080"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a4e682f218130b98b27a1e33fa7325080">GL_LINEAR</a></div><div class="ttdeci">#define GL_LINEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00255">glcorearb.h:255</a></div></div>
<div class="ttc" id="feature__tests_8cxx_html_a1582568e32f689337602a16bf8a5bff0"><div class="ttname"><a href="../../dd/d6e/feature__tests_8cxx.html#a1582568e32f689337602a16bf8a5bff0">features</a></div><div class="ttdeci">const char features[]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d6e/feature__tests_8cxx_source.html#l00002">feature_tests.cxx:2</a></div></div>
<div class="ttc" id="gl3w_8h_html_a8b800cc6117d08d5ec34b32421563799"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a8b800cc6117d08d5ec34b32421563799">glGenRenderbuffers</a></div><div class="ttdeci">#define glGenRenderbuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00891">gl3w.h:891</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_af50954f6efd5209b2328d33cd185f87e"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#af50954f6efd5209b2328d33cd185f87e">c</a></div><div class="ttdeci">Visualize clusters only Timeframe settings Average distance in cm of events merged into Randomize distance around average distance of merged events Simulate correct bunch interactions instead of placing only the average number of events A value[n] sets TFlen for[n] collisions in Number of bunches per train Number of bunch trains Instantaneous interaction rate Do not simulate border Total number of collisions to be placed in the interior of all time Do not select random but walk over array of events in stride steps h QA settings const char Legend entries for data from comparison histogram files const char Store histograms in output root Do not run but just create PDFs from input root files Set cut for Q Compute the efficiency including impure tracks with fake contamination Maxmimum Create resolution histograms in the native fit Filter for Filter for Particle Store mc labels to file for later matching Minimum Pt of a matched track to be displayed Compare QA QAonly Event generator settings h Reconstruction settings Enable TRD processing Enable TPC Compression Mask to disable certain attachment steps during refit Pt threshold to reject clusters of TPC tracks Sort order of TPC Force early TPC transformation also for continuous Forward TPC digits as h Processing settings Run tracklet constructor in pipeline Bitmask for RecoSteps h configStandalone c</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00099">qconfigoptions.h:99</a></div></div>
<div class="ttc" id="structsg__pass__desc_html_a0671a1bca34513d50f88c551408643d5"><div class="ttname"><a href="../../d4/d2b/structsg__pass__desc.html#a0671a1bca34513d50f88c551408643d5">sg_pass_desc::color_attachments</a></div><div class="ttdeci">sg_attachment_desc color_attachments[SG_MAX_COLOR_ATTACHMENTS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01492">sokol_gfx.h:1492</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8b14cf3c9445c50aabe5c7d21b31d215"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8b14cf3c9445c50aabe5c7d21b31d215">GL_COMPILE_STATUS</a></div><div class="ttdeci">#define GL_COMPILE_STATUS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00758">glcorearb.h:758</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a13e611dd4ec10121133e67c09b41ec64"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64">sg_compare_func</a></div><div class="ttdeci">sg_compare_func</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00782">sokol_gfx.h:782</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a0cdec8e97a75ee9458b23d152bf962d4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a0cdec8e97a75ee9458b23d152bf962d4">x</a></div><div class="ttdeci">GLint GLenum GLint x</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00404">glcorearb.h:404</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8868c96a8632a9a5b2af712c62dfd36a"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8868c96a8632a9a5b2af712c62dfd36a">GL_NO_ERROR</a></div><div class="ttdeci">#define GL_NO_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00134">glcorearb.h:134</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08faf321d1eb262dfb3db56fb43f76d9898a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08faf321d1eb262dfb3db56fb43f76d9898a">SG_VERTEXFORMAT_SHORT4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00688">sokol_gfx.h:688</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98a057316e7b0eb4cf1b36f8dd1f13cb01b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a057316e7b0eb4cf1b36f8dd1f13cb01b">SG_BLENDFACTOR_ONE_MINUS_SRC_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00853">sokol_gfx.h:853</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa857b95cc76669c2a9109239ef40a47c"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa857b95cc76669c2a9109239ef40a47c">val</a></div><div class="ttdeci">GLuint GLfloat * val</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01623">glcorearb.h:1623</a></div></div>
<div class="ttc" id="structsg__rasterizer__state_html_a6090bc19c761ac3c98e4929e1b73e0a1"><div class="ttname"><a href="../../d9/dbf/structsg__rasterizer__state.html#a6090bc19c761ac3c98e4929e1b73e0a1">sg_rasterizer_state::depth_bias_slope_scale</a></div><div class="ttdeci">float depth_bias_slope_scale</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01441">sokol_gfx.h:1441</a></div></div>
<div class="ttc" id="gl3w_8h_html_a12060509af7dc9c8353810eb8b7f145c"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a12060509af7dc9c8353810eb8b7f145c">glClearColor</a></div><div class="ttdeci">#define glClearColor</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00769">gl3w.h:769</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2b3da1bbe9c384305496a19de407488aa7e637920879b45544dbb742adc74b277"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa7e637920879b45544dbb742adc74b277">_SG_STENCILOP_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00827">sokol_gfx.h:827</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aaa37f45604d20d8984672d908e608c5e"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aaa37f45604d20d8984672d908e608c5e">GL_TEXTURE_MAX_LOD</a></div><div class="ttdeci">#define GL_TEXTURE_MAX_LOD</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00462">glcorearb.h:462</a></div></div>
<div class="ttc" id="structsg__pipeline__desc_html_ae29d14788aac5a3ed83e0cfa9d6a323f"><div class="ttname"><a href="../../d5/db3/structsg__pipeline__desc.html#ae29d14788aac5a3ed83e0cfa9d6a323f">sg_pipeline_desc::blend</a></div><div class="ttdeci">sg_blend_state blend</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01452">sokol_gfx.h:1452</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a36c3f955599ab92217a70cce8a22e11f"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a36c3f955599ab92217a70cce8a22e11f">GL_UNSIGNED_SHORT</a></div><div class="ttdeci">#define GL_UNSIGNED_SHORT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00209">glcorearb.h:209</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a09eb7207f75e8ad1a8e49335b5da0a0f"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a09eb7207f75e8ad1a8e49335b5da0a0f">sg_image_desc::min_filter</a></div><div class="ttdeci">sg_filter min_filter</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01251">sokol_gfx.h:1251</a></div></div>
<div class="ttc" id="structsg__stencil__state_html_a9eb45fef9136cefb11bc532b52faf46f"><div class="ttname"><a href="../../d6/d2c/structsg__stencil__state.html#a9eb45fef9136cefb11bc532b52faf46f">sg_stencil_state::depth_fail_op</a></div><div class="ttdeci">sg_stencil_op depth_fail_op</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01404">sokol_gfx.h:1404</a></div></div>
<div class="ttc" id="structsg__vertex__attr__desc_html_a87e58a9f4d9bf2673110f1f20e9ba068"><div class="ttname"><a href="../../d5/d83/structsg__vertex__attr__desc.html#a87e58a9f4d9bf2673110f1f20e9ba068">sg_vertex_attr_desc::buffer_index</a></div><div class="ttdeci">int buffer_index</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01392">sokol_gfx.h:1392</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a7ebcdfa478fe099b5ab4a5399fe37ddb"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7ebcdfa478fe099b5ab4a5399fe37ddb">GL_DRAW_FRAMEBUFFER</a></div><div class="ttdeci">#define GL_DRAW_FRAMEBUFFER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01134">glcorearb.h:1134</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897ad1dfae75c20df6c665d9af775fabb7b4">SG_FEATURE_INSTANCING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00398">sokol_gfx.h:398</a></div></div>
<div class="ttc" id="structsg__desc_html_a73bccc3454c2baa27e5ff9b1941c654d"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#a73bccc3454c2baa27e5ff9b1941c654d">sg_desc::shader_pool_size</a></div><div class="ttdeci">int shader_pool_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01085">sokol_gfx.h:1085</a></div></div>
<div class="ttc" id="glcorearb_8h_html_abe3e281237b175db178879e0988f5a78"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#abe3e281237b175db178879e0988f5a78">GL_STENCIL_BUFFER_BIT</a></div><div class="ttdeci">#define GL_STENCIL_BUFFER_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00093">glcorearb.h:93</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a11dbae33206841b3d524ae88b622fda6"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a11dbae33206841b3d524ae88b622fda6">GL_COMPRESSED_RGB8_ETC2</a></div><div class="ttdeci">#define GL_COMPRESSED_RGB8_ETC2</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l02265">glcorearb.h:2265</a></div></div>
<div class="ttc" id="structsg__buffer__layout__desc_html_aab7f169abb46eecbecaec8e9d0d2f6f5"><div class="ttname"><a href="../../dc/da3/structsg__buffer__layout__desc.html#aab7f169abb46eecbecaec8e9d0d2f6f5">sg_buffer_layout_desc::stride</a></div><div class="ttdeci">int stride</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01383">sokol_gfx.h:1383</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab109e8cf001661ba22543b63063f7b42a71e72d5047072e13ecbe4717d7cb4f32"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a71e72d5047072e13ecbe4717d7cb4f32">SG_FILTER_LINEAR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00643">sokol_gfx.h:643</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a74d80fd479c0f6d0153c709949a089ef"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a74d80fd479c0f6d0153c709949a089ef">y</a></div><div class="ttdeci">GLint y</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00271">glcorearb.h:271</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897a8a9131b5aa4d596ee5caaf5c738dd90f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a8a9131b5aa4d596ee5caaf5c738dd90f">SG_FEATURE_IMAGETYPE_3D</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00410">sokol_gfx.h:410</a></div></div>
<div class="ttc" id="structsg__shader__desc_html_a33c73320daf3e0aea4149bf05c84563b"><div class="ttname"><a href="../../df/d17/structsg__shader__desc.html#a33c73320daf3e0aea4149bf05c84563b">sg_shader_desc::vs</a></div><div class="ttdeci">sg_shader_stage_desc vs</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01304">sokol_gfx.h:1304</a></div></div>
<div class="ttc" id="gl3w_8h_html_a264e119325884947733141031ec9ff68"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a264e119325884947733141031ec9ff68">glUniform3fv</a></div><div class="ttdeci">#define glUniform3fv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01236">gl3w.h:1236</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4abbb0a172c1df88c75823f220f076ea1e"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abbb0a172c1df88c75823f220f076ea1e">SG_PIXELFORMAT_RGB8</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00586">sokol_gfx.h:586</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a5503b40ecf2c211fde3b10c95863f8e6"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6">sg_action</a></div><div class="ttdeci">sg_action</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00929">sokol_gfx.h:929</a></div></div>
<div class="ttc" id="gl3w_8h_html_a1cd4c6b9e1fb6b4eb927ab0997de48ef"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a1cd4c6b9e1fb6b4eb927ab0997de48ef">glUniformMatrix4fv</a></div><div class="ttdeci">#define glUniformMatrix4fv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01263">gl3w.h:1263</a></div></div>
<div class="ttc" id="gl3w_8h_html_adb00133bd8755da072d5af25a006d3b7"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#adb00133bd8755da072d5af25a006d3b7">glClearBufferfv</a></div><div class="ttdeci">#define glClearBufferfv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00766">gl3w.h:766</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aad590dd79075659a5625dcad04e13331"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aad590dd79075659a5625dcad04e13331">GL_INCR</a></div><div class="ttdeci">#define GL_INCR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00248">glcorearb.h:248</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98afc45559f439a13f45979be73e994f17c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98afc45559f439a13f45979be73e994f17c">_SG_BLENDFACTOR_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00864">sokol_gfx.h:864</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a982341cb30016caa07a4e46228a71ffa"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a982341cb30016caa07a4e46228a71ffa">GL_DEPTH</a></div><div class="ttdeci">#define GL_DEPTH</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00233">glcorearb.h:233</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ae526e64e80adafdb9898bfaaa37cf522ada2da8e90f019778053c7307b6d9d118"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522ada2da8e90f019778053c7307b6d9d118">SG_CUBEFACE_NEG_Z</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00551">sokol_gfx.h:551</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_adcbc29769a4f9abfc06235a16902a07e"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#adcbc29769a4f9abfc06235a16902a07e">sg_alloc_buffer</a></div><div class="ttdeci">SOKOL_API_DECL sg_buffer sg_alloc_buffer(void)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08fa29b1e94ae9985fe1463d36e301916d29"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa29b1e94ae9985fe1463d36e301916d29">SG_VERTEXFORMAT_FLOAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00678">sokol_gfx.h:678</a></div></div>
<div class="ttc" id="gl3w_8h_html_af15266b67de988f5ddf442bbbdd1b3fc"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#af15266b67de988f5ddf442bbbdd1b3fc">glActiveTexture</a></div><div class="ttdeci">#define glActiveTexture</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00717">gl3w.h:717</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca04febe64cbcc19f13754cdb11f82a445">SG_MAX_SHADERSTAGE_IMAGES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00383">sokol_gfx.h:383</a></div></div>
<div class="ttc" id="gl3w_8h_html_aa7c5c636d1f609455e73ceee2eed8ba1"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aa7c5c636d1f609455e73ceee2eed8ba1">glDeleteFramebuffers</a></div><div class="ttdeci">#define glDeleteFramebuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00823">gl3w.h:823</a></div></div>
<div class="ttc" id="structsg__pass__desc_html_ac2620e3d5c3b7b8a122bacdf7408e424"><div class="ttname"><a href="../../d4/d2b/structsg__pass__desc.html#ac2620e3d5c3b7b8a122bacdf7408e424">sg_pass_desc::_start_canary</a></div><div class="ttdeci">uint32_t _start_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01491">sokol_gfx.h:1491</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a70f6468f185f15b25019554f4207c0cca792a5d7430633327189873e181a1d277"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca792a5d7430633327189873e181a1d277">_SG_USAGE_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00481">sokol_gfx.h:481</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a773692cafbd5e3853fc6990aa4aaebf4"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4">sg_cull_mode</a></div><div class="ttdeci">sg_cull_mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00741">sokol_gfx.h:741</a></div></div>
<div class="ttc" id="gl3w_8h_html_a59fda0798af5145c920422ba0bd28bac"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a59fda0798af5145c920422ba0bd28bac">glScissor</a></div><div class="ttdeci">#define glScissor</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01162">gl3w.h:1162</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a83dfd180c0229d2b8771f3acd446c5a2afebe7f7c92eea0a9d1886eb30566f87c"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a83dfd180c0229d2b8771f3acd446c5a2afebe7f7c92eea0a9d1886eb30566f87c">SG_UNIFORMTYPE_FLOAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00723">sokol_gfx.h:723</a></div></div>
<div class="ttc" id="structsg__image__desc_html_acaa521ee4257b203252d89c0f4d299a9"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#acaa521ee4257b203252d89c0f4d299a9">sg_image_desc::mtl_textures</a></div><div class="ttdeci">const void * mtl_textures[SG_NUM_INFLIGHT_FRAMES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01263">sokol_gfx.h:1263</a></div></div>
<div class="ttc" id="structsg__color__attachment__action_html_af2c2a030aa781f28b469a109d60c5db7"><div class="ttname"><a href="../../db/dc9/structsg__color__attachment__action.html#af2c2a030aa781f28b469a109d60c5db7">sg_color_attachment_action::val</a></div><div class="ttdeci">float val[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00959">sokol_gfx.h:959</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a5ebf4bc451aec34856ded477e4dcbe48"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a5ebf4bc451aec34856ded477e4dcbe48">SOKOL_API_DECL</a></div><div class="ttdeci">#define SOKOL_API_DECL</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00318">sokol_gfx.h:318</a></div></div>
<div class="ttc" id="structsg__buffer__desc_html_aed03d70712027dc18902bfab4a6559f3"><div class="ttname"><a href="../../d6/d2c/structsg__buffer__desc.html#aed03d70712027dc18902bfab4a6559f3">sg_buffer_desc::type</a></div><div class="ttdeci">sg_buffer_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01148">sokol_gfx.h:1148</a></div></div>
<div class="ttc" id="structsg__shader__uniform__desc_html_ae5acb2f7605843de918b252ce4db5d26"><div class="ttname"><a href="../../d2/d67/structsg__shader__uniform__desc.html#ae5acb2f7605843de918b252ce4db5d26">sg_shader_uniform_desc::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01278">sokol_gfx.h:1278</a></div></div>
<div class="ttc" id="structsg__buffer__desc_html_aba112cb79e353714cdac9aa411db481b"><div class="ttname"><a href="../../d6/d2c/structsg__buffer__desc.html#aba112cb79e353714cdac9aa411db481b">sg_buffer_desc::_start_canary</a></div><div class="ttdeci">uint32_t _start_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01146">sokol_gfx.h:1146</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a7a18fff9a92408dc0b1b472e188a7293"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7a18fff9a92408dc0b1b472e188a7293">SG_PIXELFORMAT_PVRTC2_RGBA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00603">sokol_gfx.h:603</a></div></div>
<div class="ttc" id="gl3w_8h_html_a766db4e4de8f98981e53ea03bd47a004"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a766db4e4de8f98981e53ea03bd47a004">glGetString</a></div><div class="ttdeci">#define glGetString</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00978">gl3w.h:978</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4aa34fa8eee56aee8cd7ceca606b5de6c9">SG_PIXELFORMAT_RGBA16F</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00592">sokol_gfx.h:592</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a7d05960f4f1c1b11f3177dc963a45d86"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a></div><div class="ttdeci">GLint GLint GLsizei GLint GLenum GLenum type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00276">glcorearb.h:276</a></div></div>
<div class="ttc" id="structsg__depth__stencil__state_html_af86eafd92942028d13fc4178a9f5554f"><div class="ttname"><a href="../../d5/d6c/structsg__depth__stencil__state.html#af86eafd92942028d13fc4178a9f5554f">sg_depth_stencil_state::stencil_ref</a></div><div class="ttdeci">uint8_t stencil_ref</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01417">sokol_gfx.h:1417</a></div></div>
<div class="ttc" id="structsg__shader__stage__desc_html_a62b1801dc0c45820abd59ac49504a318"><div class="ttname"><a href="../../d9/d32/structsg__shader__stage__desc.html#a62b1801dc0c45820abd59ac49504a318">sg_shader_stage_desc::uniform_blocks</a></div><div class="ttdeci">sg_shader_uniform_block_desc uniform_blocks[SG_MAX_SHADERSTAGE_UBS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01298">sokol_gfx.h:1298</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a06316bc3c17db78ce93419fb208945ba"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a06316bc3c17db78ce93419fb208945ba">GL_TRUE</a></div><div class="ttdeci">#define GL_TRUE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00096">glcorearb.h:96</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab83eb56dce8e1f7900585d35016abf39"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab83eb56dce8e1f7900585d35016abf39">GL_TEXTURE_CUBE_MAP_POSITIVE_X</a></div><div class="ttdeci">#define GL_TEXTURE_CUBE_MAP_POSITIVE_X</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00527">glcorearb.h:527</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_aa7173509aeeb22c24e5f272c3d695641aa12a337c61bc9a140d5a9ec1db91baae"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#aa7173509aeeb22c24e5f272c3d695641aa12a337c61bc9a140d5a9ec1db91baae">SG_INDEXTYPE_UINT16</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00513">sokol_gfx.h:513</a></div></div>
<div class="ttc" id="glcorearb_8h_html_af5f2970e5b32df02694116f821264893"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#af5f2970e5b32df02694116f821264893">GL_KEEP</a></div><div class="ttdeci">#define GL_KEEP</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00246">glcorearb.h:246</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7ae692e7a55659e9c78839484831d999"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7ae692e7a55659e9c78839484831d999">sg_init_buffer</a></div><div class="ttdeci">SOKOL_API_DECL void sg_init_buffer(sg_buffer buf_id, const sg_buffer_desc *desc)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8bdcfddea25084e36bde4357057071d4ae87cf63c21d11fdf752e7c91d0f46a3a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4ae87cf63c21d11fdf752e7c91d0f46a3a">_SG_PRIMITIVETYPE_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00621">sokol_gfx.h:621</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a15cb970a541969b11409d0adec3b331fa0194ddbe669a71dffef2f78b0230bbfc"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331fa0194ddbe669a71dffef2f78b0230bbfc">_SG_FACEWINDING_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00764">sokol_gfx.h:764</a></div></div>
<div class="ttc" id="gl3w_8h_html_abf9380e68d38f458f86a54870846026e"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#abf9380e68d38f458f86a54870846026e">glUniform1i</a></div><div class="ttdeci">#define glUniform1i</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01221">gl3w.h:1221</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897a06f42e3be3662f69b106bba1d47e92ef"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a06f42e3be3662f69b106bba1d47e92ef">SG_FEATURE_TEXTURE_COMPRESSION_PVRTC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00400">sokol_gfx.h:400</a></div></div>
<div class="ttc" id="glcorearb_8h_html_adb12a0d439f32ca388b2c806150cc54d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#adb12a0d439f32ca388b2c806150cc54d">w</a></div><div class="ttdeci">GLubyte GLubyte GLubyte GLubyte w</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00854">glcorearb.h:854</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a70f6468f185f15b25019554f4207c0cca22d36960dc9dde171d91975ba29dc166"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a70f6468f185f15b25019554f4207c0cca22d36960dc9dde171d91975ba29dc166">_SG_USAGE_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00480">sokol_gfx.h:480</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ae23e72c69f79d0aa647aa7929ef3f232"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae23e72c69f79d0aa647aa7929ef3f232">height</a></div><div class="ttdeci">GLint GLsizei GLsizei height</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00271">glcorearb.h:271</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a13e611dd4ec10121133e67c09b41ec64af164b871f09d6f7b671a2a611e6d570d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64af164b871f09d6f7b671a2a611e6d570d">SG_COMPAREFUNC_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00786">sokol_gfx.h:786</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a724edc4d9d6f3c1770ff3688f0747acb"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a724edc4d9d6f3c1770ff3688f0747acb">GL_LINEAR_MIPMAP_LINEAR</a></div><div class="ttdeci">#define GL_LINEAR_MIPMAP_LINEAR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00259">glcorearb.h:259</a></div></div>
<div class="ttc" id="structsg__buffer__desc_html_a73cd8286ef49470f30f83c2118d2136d"><div class="ttname"><a href="../../d6/d2c/structsg__buffer__desc.html#a73cd8286ef49470f30f83c2118d2136d">sg_buffer_desc::size</a></div><div class="ttdeci">int size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01147">sokol_gfx.h:1147</a></div></div>
<div class="ttc" id="structsg__desc_html_a0fc23e80acc387fa0248c4af0edae780"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#a0fc23e80acc387fa0248c4af0edae780">sg_desc::_start_canary</a></div><div class="ttdeci">uint32_t _start_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01082">sokol_gfx.h:1082</a></div></div>
<div class="ttc" id="structsg__shader__desc_html_a87386b33905c8aefc6eccd477af43f99"><div class="ttname"><a href="../../df/d17/structsg__shader__desc.html#a87386b33905c8aefc6eccd477af43f99">sg_shader_desc::_end_canary</a></div><div class="ttdeci">uint32_t _end_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01306">sokol_gfx.h:1306</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a5503b40ecf2c211fde3b10c95863f8e6a975d1f5f4f58d6c75e9c2ee6ee9767e3"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a5503b40ecf2c211fde3b10c95863f8e6a975d1f5f4f58d6c75e9c2ee6ee9767e3">SG_ACTION_DONTCARE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00933">sokol_gfx.h:933</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2b3da1bbe9c384305496a19de407488aacd444f9c15d8563e1dda2fc913bfe349"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aacd444f9c15d8563e1dda2fc913bfe349">SG_STENCILOP_INCR_CLAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00821">sokol_gfx.h:821</a></div></div>
<div class="ttc" id="structsg__desc_html_a5d30d3fe2a70a0133fde16461d53fb39"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#a5d30d3fe2a70a0133fde16461d53fb39">sg_desc::mtl_renderpass_descriptor_cb</a></div><div class="ttdeci">const void *(* mtl_renderpass_descriptor_cb)()</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01093">sokol_gfx.h:1093</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ad2057c7d8e728715f2a819d82cf29440"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ad2057c7d8e728715f2a819d82cf29440">sg_fail_shader</a></div><div class="ttdeci">SOKOL_API_DECL void sg_fail_shader(sg_shader shd_id)</div></div>
<div class="ttc" id="glcorearb_8h_html_abe08814c2f72843fde4d8df41440d5a0"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#abe08814c2f72843fde4d8df41440d5a0">r</a></div><div class="ttdeci">GLboolean r</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01235">glcorearb.h:1235</a></div></div>
<div class="ttc" id="structsg__pipeline__desc_html_ae193421a3ac922d89a9cbf55788ede65"><div class="ttname"><a href="../../d5/db3/structsg__pipeline__desc.html#ae193421a3ac922d89a9cbf55788ede65">sg_pipeline_desc::shader</a></div><div class="ttdeci">sg_shader shader</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01448">sokol_gfx.h:1448</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a64063d3c15a6b0420ce8849e28cab4e8"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a64063d3c15a6b0420ce8849e28cab4e8">sg_fail_pass</a></div><div class="ttdeci">SOKOL_API_DECL void sg_fail_pass(sg_pass pass_id)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a13e611dd4ec10121133e67c09b41ec64a8394ed7a0362acafc13fce791f9d7344"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a8394ed7a0362acafc13fce791f9d7344">SG_COMPAREFUNC_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00789">sokol_gfx.h:789</a></div></div>
<div class="ttc" id="gl3w_8h_html_a2097cfa52d11568f886cf6d3cf888f1c"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a2097cfa52d11568f886cf6d3cf888f1c">glCheckFramebufferStatus</a></div><div class="ttdeci">#define glCheckFramebufferStatus</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00759">gl3w.h:759</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af1e088621fb524138961cd0d650a5a8faef8b56cec34dee3ebcb7e6d5810bb8bd"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8faef8b56cec34dee3ebcb7e6d5810bb8bd">SG_BUFFERTYPE_INDEXBUFFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00495">sokol_gfx.h:495</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a9d21c1b0530d07b637b5b71b969d7921"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a9d21c1b0530d07b637b5b71b969d7921">stride</a></div><div class="ttdeci">GLint GLenum GLboolean GLsizei stride</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00869">glcorearb.h:869</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a0fb936f29008789fb46b434319f68cc9"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a0fb936f29008789fb46b434319f68cc9">GLbitfield</a></div><div class="ttdeci">unsigned int GLbitfield</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00087">glcorearb.h:87</a></div></div>
<div class="ttc" id="gl3w_8h_html_a7ea2e382a408e6ffc692e9e6fbaf0c22"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a7ea2e382a408e6ffc692e9e6fbaf0c22">glBindFramebuffer</a></div><div class="ttdeci">#define glBindFramebuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00731">gl3w.h:731</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ab4fcc6ff520ae4d9de259c8468a5cd93"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ab4fcc6ff520ae4d9de259c8468a5cd93">blue</a></div><div class="ttdeci">GLfloat GLfloat blue</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00280">glcorearb.h:280</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a63e7eb312b3c1b70afcdae42ad67cbb2">SG_COMPAREFUNC_ALWAYS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00791">sokol_gfx.h:791</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a8b778a06f153b4d59ebc6aa1d0996191"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a8b778a06f153b4d59ebc6aa1d0996191">GL_LEQUAL</a></div><div class="ttdeci">#define GL_LEQUAL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00108">glcorearb.h:108</a></div></div>
<div class="ttc" id="structsg__depth__stencil__state_html_a52cf77a2ad347d389015a557b0563292"><div class="ttname"><a href="../../d5/d6c/structsg__depth__stencil__state.html#a52cf77a2ad347d389015a557b0563292">sg_depth_stencil_state::depth_write_enabled</a></div><div class="ttdeci">bool depth_write_enabled</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01413">sokol_gfx.h:1413</a></div></div>
<div class="ttc" id="GPUCommonAlgorithm_8h_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../../dd/d0b/GPUCommonAlgorithm_8h.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d0b/GPUCommonAlgorithm_8h_source.html#l00312">GPUCommonAlgorithm.h:312</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ae526e64e80adafdb9898bfaaa37cf522afc52f7da6686bb7a4c1f2087bffbfd26"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522afc52f7da6686bb7a4c1f2087bffbfd26">SG_CUBEFACE_POS_Z</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00550">sokol_gfx.h:550</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2e25513d07365f01407f6da163e56400"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2e25513d07365f01407f6da163e56400">sg_make_pipeline</a></div><div class="ttdeci">SOKOL_API_DECL sg_pipeline sg_make_pipeline(const sg_pipeline_desc *desc)</div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7c3779d838681f3083729a9f80ea6ab2"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2">sg_color_mask</a></div><div class="ttdeci">sg_color_mask</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00899">sokol_gfx.h:899</a></div></div>
<div class="ttc" id="structsg__blend__state_html_a58413f38be675a4baf3245c58508ba25"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html#a58413f38be675a4baf3245c58508ba25">sg_blend_state::blend_color</a></div><div class="ttdeci">float blend_color[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01432">sokol_gfx.h:1432</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8bdcfddea25084e36bde4357057071d4a7d0491c852c2a8488f0e5e42b3f82223"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4a7d0491c852c2a8488f0e5e42b3f82223">_SG_PRIMITIVETYPE_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00627">sokol_gfx.h:627</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4abc58007c8b3aea5d1d4f8003e1ebd015"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4abc58007c8b3aea5d1d4f8003e1ebd015">SG_PIXELFORMAT_DXT3</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00597">sokol_gfx.h:597</a></div></div>
<div class="ttc" id="gl3w_8h_html_a8871ec64aa386201d6f1d054c763d064"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a8871ec64aa386201d6f1d054c763d064">glStencilFunc</a></div><div class="ttdeci">#define glStencilFunc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01169">gl3w.h:1169</a></div></div>
<div class="ttc" id="structsg__desc_html_aae8ba84b9097e6321647193b2cf6e82a"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#aae8ba84b9097e6321647193b2cf6e82a">sg_desc::image_pool_size</a></div><div class="ttdeci">int image_pool_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01084">sokol_gfx.h:1084</a></div></div>
<div class="ttc" id="gl3w_8h_html_ae7002efbed794728b79205427b3ccc66"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ae7002efbed794728b79205427b3ccc66">glGetShaderiv</a></div><div class="ttdeci">#define glGetShaderiv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00977">gl3w.h:977</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a26b057c4fa415d8de41d43990828b0da"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a26b057c4fa415d8de41d43990828b0da">GL_DEPTH_COMPONENT16</a></div><div class="ttdeci">#define GL_DEPTH_COMPONENT16</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00572">glcorearb.h:572</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ac7e31d38a911bc31cf698281fdd9007b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007b">sg_blend_op</a></div><div class="ttdeci">sg_blend_op</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00881">sokol_gfx.h:881</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98a31651696629d4ccdb8e684c3ba02366b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a31651696629d4ccdb8e684c3ba02366b">SG_BLENDFACTOR_DST_COLOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00854">sokol_gfx.h:854</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a7a806235dc2a717e813e92583ad99b34"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7a806235dc2a717e813e92583ad99b34">GL_DITHER</a></div><div class="ttdeci">#define GL_DITHER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00168">glcorearb.h:168</a></div></div>
<div class="ttc" id="BenchCathodeSegmentation_8cxx_html_a2b95d32c08b7fd322b51d91e97f1b552"><div class="ttname"><a href="../../d8/df7/BenchCathodeSegmentation_8cxx.html#a2b95d32c08b7fd322b51d91e97f1b552">for</a></div><div class="ttdeci">for(auto _:state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df7/BenchCathodeSegmentation_8cxx_source.html#l00061">BenchCathodeSegmentation.cxx:61</a></div></div>
<div class="ttc" id="structsg__pass__action_html_ae001a0dd4c3e5fcf699f325963997ec5"><div class="ttname"><a href="../../d3/dbc/structsg__pass__action.html#ae001a0dd4c3e5fcf699f325963997ec5">sg_pass_action::_start_canary</a></div><div class="ttdeci">uint32_t _start_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00973">sokol_gfx.h:973</a></div></div>
<div class="ttc" id="gl3w_8h_html_aa25172732c3d88c7c23d93f9e7d672be"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aa25172732c3d88c7c23d93f9e7d672be">glBindRenderbuffer</a></div><div class="ttdeci">#define glBindRenderbuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00735">gl3w.h:735</a></div></div>
<div class="ttc" id="glcorearb_8h_html_afae62364eab2dc69c95b17363ba687f4"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#afae62364eab2dc69c95b17363ba687f4">GL_ONE_MINUS_SRC_COLOR</a></div><div class="ttdeci">#define GL_ONE_MINUS_SRC_COLOR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00116">glcorearb.h:116</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a435a6e2e71f190b00ef4666c83173572"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a435a6e2e71f190b00ef4666c83173572">sg_image_desc::max_lod</a></div><div class="ttdeci">float max_lod</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01258">sokol_gfx.h:1258</a></div></div>
<div class="ttc" id="gl3w_8h_html_ad2c7045354de0b7817406b1590f69efd"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ad2c7045354de0b7817406b1590f69efd">glDeleteRenderbuffers</a></div><div class="ttdeci">#define glDeleteRenderbuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00827">gl3w.h:827</a></div></div>
<div class="ttc" id="glcorearb_8h_html_abe1c2e1876841bc483127fd45d7ca3b1"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#abe1c2e1876841bc483127fd45d7ca3b1">GL_SCISSOR_TEST</a></div><div class="ttdeci">#define GL_SCISSOR_TEST</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00176">glcorearb.h:176</a></div></div>
<div class="ttc" id="structsg__desc_html_a388a3edd562774d081a32e0a88b4ee1f"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#a388a3edd562774d081a32e0a88b4ee1f">sg_desc::d3d11_device</a></div><div class="ttdeci">const void * d3d11_device</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01098">sokol_gfx.h:1098</a></div></div>
<div class="ttc" id="gl3w_8h_html_a5810aaf501d0a2a090f46a7f2121e4e7"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a5810aaf501d0a2a090f46a7f2121e4e7">glReadBuffer</a></div><div class="ttdeci">#define glReadBuffer</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01147">gl3w.h:1147</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ac7e31d38a911bc31cf698281fdd9007baa05d99fcd380170062e1b6905edd40c6">SG_BLENDOP_ADD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00883">sokol_gfx.h:883</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a374c5732738277aa4ed2d4c2e526c602"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a374c5732738277aa4ed2d4c2e526c602">divisor</a></div><div class="ttdeci">GLuint divisor</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01685">glcorearb.h:1685</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ae642ad8e3baa2512e2e27be2cf17373d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ae642ad8e3baa2512e2e27be2cf17373d">GL_TEXTURE_CUBE_MAP_NEGATIVE_X</a></div><div class="ttdeci">#define GL_TEXTURE_CUBE_MAP_NEGATIVE_X</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00528">glcorearb.h:528</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a7710b99d8f762ca5d3427aec45476ac8"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a7710b99d8f762ca5d3427aec45476ac8">sg_image_desc::_start_canary</a></div><div class="ttdeci">uint32_t _start_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01238">sokol_gfx.h:1238</a></div></div>
<div class="ttc" id="gl3w_8h_html_a7b834ab4b0d141e408001f708e1395ff"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a7b834ab4b0d141e408001f708e1395ff">glUniform1fv</a></div><div class="ttdeci">#define glUniform1fv</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01220">gl3w.h:1220</a></div></div>
<div class="ttc" id="gl3w_8h_html_a66a9a84822c245ee216264f5f31f7afb"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a66a9a84822c245ee216264f5f31f7afb">glGetStringi</a></div><div class="ttdeci">#define glGetStringi</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00979">gl3w.h:979</a></div></div>
<div class="ttc" id="glcorearb_8h_html_af477e4fa3e741406c0c3532cc5062758"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#af477e4fa3e741406c0c3532cc5062758">GL_FUNC_ADD</a></div><div class="ttdeci">#define GL_FUNC_ADD</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00583">glcorearb.h:583</a></div></div>
<div class="ttc" id="structsg__rasterizer__state_html"><div class="ttname"><a href="../../d9/dbf/structsg__rasterizer__state.html">sg_rasterizer_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01435">sokol_gfx.h:1435</a></div></div>
<div class="ttc" id="structsg__blend__state_html_a4c4e24336a27b27d3df7a53c1810f9e2"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html#a4c4e24336a27b27d3df7a53c1810f9e2">sg_blend_state::src_factor_rgb</a></div><div class="ttdeci">sg_blend_factor src_factor_rgb</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01422">sokol_gfx.h:1422</a></div></div>
<div class="ttc" id="gl3w_8h_html_a6ec921647b99c0224fc78d54f1798b2f"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a6ec921647b99c0224fc78d54f1798b2f">glTexParameterf</a></div><div class="ttdeci">#define glTexParameterf</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01184">gl3w.h:1184</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98a1f10da138f1962007019feb50c37ba7f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a1f10da138f1962007019feb50c37ba7f">SG_BLENDFACTOR_DST_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00856">sokol_gfx.h:856</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ac8c013f199cef85c5b296cfd8440ad96"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ac8c013f199cef85c5b296cfd8440ad96">sg_query_pass_state</a></div><div class="ttdeci">SOKOL_API_DECL sg_resource_state sg_query_pass_state(sg_pass pass)</div></div>
<div class="ttc" id="structsg__vertex__attr__desc_html"><div class="ttname"><a href="../../d5/d83/structsg__vertex__attr__desc.html">sg_vertex_attr_desc</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01388">sokol_gfx.h:1388</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a15cb970a541969b11409d0adec3b331fa0c22e6268eb10c1121177a9fbb1856ef"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a15cb970a541969b11409d0adec3b331fa0c22e6268eb10c1121177a9fbb1856ef">SG_FACEWINDING_CCW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00761">sokol_gfx.h:761</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98a62d9efdddbce46e11664b6daf160fff6"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a62d9efdddbce46e11664b6daf160fff6">SG_BLENDFACTOR_BLEND_COLOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00859">sokol_gfx.h:859</a></div></div>
<div class="ttc" id="structsg__buffer__desc_html_ae9fc3e2cb0fc7c169ef3fdde5ef66c80"><div class="ttname"><a href="../../d6/d2c/structsg__buffer__desc.html#ae9fc3e2cb0fc7c169ef3fdde5ef66c80">sg_buffer_desc::_end_canary</a></div><div class="ttdeci">uint32_t _end_canary</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01157">sokol_gfx.h:1157</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a13e611dd4ec10121133e67c09b41ec64a9bc40473fa1a7f1805e04826dcb1cc8f"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a13e611dd4ec10121133e67c09b41ec64a9bc40473fa1a7f1805e04826dcb1cc8f">SG_COMPAREFUNC_LESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00785">sokol_gfx.h:785</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aa3d4d84d7e1458e03145d5db96bde045"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aa3d4d84d7e1458e03145d5db96bde045">GL_HALF_FLOAT</a></div><div class="ttdeci">#define GL_HALF_FLOAT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01201">glcorearb.h:1201</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_adb1f4e88682fac0faac902578cad8b6c"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#adb1f4e88682fac0faac902578cad8b6c">s</a></div><div class="ttdeci">Visualize clusters only Timeframe settings Average distance in cm of events merged into Randomize distance around average distance of merged events Simulate correct bunch interactions instead of placing only the average number of events A value[n] sets TFlen for[n] collisions in Number of bunches per train Number of bunch trains Instantaneous interaction rate Do not simulate border Total number of collisions to be placed in the interior of all time Do not select random but walk over array of events in stride steps h QA settings const char Legend entries for data from comparison histogram files const char Store histograms in output root Do not run but just create PDFs from input root files Set cut for Q Compute the efficiency including impure tracks with fake contamination Maxmimum Create resolution histograms in the native fit Filter for Filter for Particle Store mc labels to file for later matching Minimum Pt of a matched track to be displayed Compare QA QAonly Event generator settings h Reconstruction settings Enable TRD processing Enable TPC Compression Mask to disable certain attachment steps during refit Pt threshold to reject clusters of TPC tracks Sort order of TPC Force early TPC transformation also for continuous Forward TPC digits as h Processing settings Run tracklet constructor in pipeline Bitmask for RecoSteps h configStandalone Use CPU for const char GPU Force usage of the specified GPU device no CPU fallback Allow only GPU as OpenCL device Do prompt for keypress before Continue processing after an error Use device timers instead of host based time measurement Clear debug output file when processing next event s</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/de9/qconfigoptions_8h_source.html#l00122">qconfigoptions.h:122</a></div></div>
<div class="ttc" id="structsg__blend__state_html_a22ad1770d2da6d4fc27635c8ccf8652c"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html#a22ad1770d2da6d4fc27635c8ccf8652c">sg_blend_state::op_alpha</a></div><div class="ttdeci">sg_blend_op op_alpha</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01427">sokol_gfx.h:1427</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a19d83affd8f0b06c09940cff7da428d2"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a19d83affd8f0b06c09940cff7da428d2">GL_LESS</a></div><div class="ttdeci">#define GL_LESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00106">glcorearb.h:106</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af015e758ce5060d4e8c2c5a36b74b6f4a7aebdb1f89ab56d5ac3e4101326ad5a7"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af015e758ce5060d4e8c2c5a36b74b6f4a7aebdb1f89ab56d5ac3e4101326ad5a7">SG_PIXELFORMAT_R32F</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00593">sokol_gfx.h:593</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98ac29f07005f4e09d33012c2ab1aa41ed4"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98ac29f07005f4e09d33012c2ab1aa41ed4">SG_BLENDFACTOR_ONE_MINUS_BLEND_COLOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00860">sokol_gfx.h:860</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_af1e088621fb524138961cd0d650a5a8fad173d15b4c2de18aa2c2dd2b238afb5b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#af1e088621fb524138961cd0d650a5a8fad173d15b4c2de18aa2c2dd2b238afb5b">_SG_BUFFERTYPE_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00493">sokol_gfx.h:493</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0f4596ead70a745674e2a5efcbf4ef9daab668543469e69649f4c7b711b294041"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0f4596ead70a745674e2a5efcbf4ef9daab668543469e69649f4c7b711b294041">_SG_IMAGETYPE_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00535">sokol_gfx.h:535</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab79db5277fcbe695243c6d68332cbf4ca746b50b205e4d09963f11f32b18c6cf9"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca746b50b205e4d09963f11f32b18c6cf9">SG_MAX_UB_MEMBERS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00385">sokol_gfx.h:385</a></div></div>
<div class="ttc" id="structsg__depth__stencil__state_html"><div class="ttname"><a href="../../d5/d6c/structsg__depth__stencil__state.html">sg_depth_stencil_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01409">sokol_gfx.h:1409</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a61cf21a700ef8c1535a3400a0ed0439d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a61cf21a700ef8c1535a3400a0ed0439d">sg_init_pipeline</a></div><div class="ttdeci">SOKOL_API_DECL void sg_init_pipeline(sg_pipeline pip_id, const sg_pipeline_desc *desc)</div></div>
<div class="ttc" id="gl3w_8h_html_aedf2546140e2c0f0e8d6f62e9998ae73"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#aedf2546140e2c0f0e8d6f62e9998ae73">glDeleteTextures</a></div><div class="ttdeci">#define glDeleteTextures</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00831">gl3w.h:831</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a1db73b1b6b31ac8dc14f0c2358057f87"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a1db73b1b6b31ac8dc14f0c2358057f87">sg_image_desc::max_anisotropy</a></div><div class="ttdeci">uint32_t max_anisotropy</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01256">sokol_gfx.h:1256</a></div></div>
<div class="ttc" id="glcorearb_8h_html_aef2a9e9a4b130bc4de57514327847b4f"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#aef2a9e9a4b130bc4de57514327847b4f">GL_DEPTH_BUFFER_BIT</a></div><div class="ttdeci">#define GL_DEPTH_BUFFER_BIT</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00092">glcorearb.h:92</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a3080489638f9a721982dbc926f6fca88"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a3080489638f9a721982dbc926f6fca88">GL_R8</a></div><div class="ttdeci">#define GL_R8</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01214">glcorearb.h:1214</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a6079e7a02a59adad65eb953d9482b1ed"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a6079e7a02a59adad65eb953d9482b1ed">GL_TRIANGLES</a></div><div class="ttdeci">#define GL_TRIANGLES</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00101">glcorearb.h:101</a></div></div>
<div class="ttc" id="gl3w_8h_html_acf9d728f2b2be42fbc2fe6dada8bcd2b"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#acf9d728f2b2be42fbc2fe6dada8bcd2b">glCreateProgram</a></div><div class="ttdeci">#define glCreateProgram</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00808">gl3w.h:808</a></div></div>
<div class="ttc" id="gl3w_8h_html_a0903ee19d8321a1e456bebb54a65ee2a"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a0903ee19d8321a1e456bebb54a65ee2a">glDisableVertexAttribArray</a></div><div class="ttdeci">#define glDisableVertexAttribArray</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00843">gl3w.h:843</a></div></div>
<div class="ttc" id="gl3w_8h_html_ac012d7614801ed69d643ad388dcfc768"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ac012d7614801ed69d643ad388dcfc768">glDeleteShader</a></div><div class="ttdeci">#define glDeleteShader</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00829">gl3w.h:829</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab79db5277fcbe695243c6d68332cbf4ca9a5324e266ea8a65406fa6c10582050b">SG_MAX_COLOR_ATTACHMENTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00381">sokol_gfx.h:381</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a0605d5ef41613665b34391f9ba398997"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a0605d5ef41613665b34391f9ba398997">GL_TEXTURE_CUBE_MAP_POSITIVE_Y</a></div><div class="ttdeci">#define GL_TEXTURE_CUBE_MAP_POSITIVE_Y</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00529">glcorearb.h:529</a></div></div>
<div class="ttc" id="gl3w_8h_html_ad241352c6eee6e79f09942ef0771db47"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ad241352c6eee6e79f09942ef0771db47">glLinkProgram</a></div><div class="ttdeci">#define glLinkProgram</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01050">gl3w.h:1050</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08fa6bfcbcd3a001760711189465343bd4e8"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa6bfcbcd3a001760711189465343bd4e8">SG_VERTEXFORMAT_SHORT4N</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00689">sokol_gfx.h:689</a></div></div>
<div class="ttc" id="structsg__desc_html_a6614c9bb4dbfa0c9583c59aa9d8735d1"><div class="ttname"><a href="../../dc/d0e/structsg__desc.html#a6614c9bb4dbfa0c9583c59aa9d8735d1">sg_desc::gl_force_gles2</a></div><div class="ttdeci">bool gl_force_gles2</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01090">sokol_gfx.h:1090</a></div></div>
<div class="ttc" id="gl3w_8h_html_a3d06b4b71bb393baee984ac2d81001a4"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a3d06b4b71bb393baee984ac2d81001a4">glCompressedTexImage3D</a></div><div class="ttdeci">#define glCompressedTexImage3D</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00788">gl3w.h:788</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7c3779d838681f3083729a9f80ea6ab2a3ede6e8ea8b3558000ccf7ee0e261692"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2a3ede6e8ea8b3558000ccf7ee0e261692">SG_COLORMASK_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00901">sokol_gfx.h:901</a></div></div>
<div class="ttc" id="gl3w_8h_html_a0cb06d612b3358bfaadbbefd7c51f1cc"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a0cb06d612b3358bfaadbbefd7c51f1cc">glAttachShader</a></div><div class="ttdeci">#define glAttachShader</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00718">gl3w.h:718</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a7c3779d838681f3083729a9f80ea6ab2adfb66631b5ff6d359c7cdc659b4f8e33"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a7c3779d838681f3083729a9f80ea6ab2adfb66631b5ff6d359c7cdc659b4f8e33">SG_COLORMASK_A</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00905">sokol_gfx.h:905</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a0374caf1f25a139da21f84d81f637c23"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a0374caf1f25a139da21f84d81f637c23">GLintptr</a></div><div class="ttdeci">ptrdiff_t GLintptr</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00620">glcorearb.h:620</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a93c97bea165b5f35958776e8fd31b08fa742f7d751f8dff04449a03428372810a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a93c97bea165b5f35958776e8fd31b08fa742f7d751f8dff04449a03428372810a">SG_VERTEXFORMAT_SHORT2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00686">sokol_gfx.h:686</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a45da2d6b2b42e34771f6ac3748eb5945"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a45da2d6b2b42e34771f6ac3748eb5945">sg_init_shader</a></div><div class="ttdeci">SOKOL_API_DECL void sg_init_shader(sg_shader shd_id, const sg_shader_desc *desc)</div></div>
<div class="ttc" id="structsg__blend__state_html_aae295cd7de1b4d639ae9c7ceb261d2ec"><div class="ttname"><a href="../../d9/dd6/structsg__blend__state.html#aae295cd7de1b4d639ae9c7ceb261d2ec">sg_blend_state::dst_factor_alpha</a></div><div class="ttdeci">sg_blend_factor dst_factor_alpha</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01426">sokol_gfx.h:1426</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a773692cafbd5e3853fc6990aa4aaebf4a9648b550562f21fc68296c769d0bf289"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a773692cafbd5e3853fc6990aa4aaebf4a9648b550562f21fc68296c769d0bf289">_SG_CULLMODE_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00742">sokol_gfx.h:742</a></div></div>
<div class="ttc" id="gl3w_8h_html_a3fb0b694bf693bcd13fae76b3213ba92"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a3fb0b694bf693bcd13fae76b3213ba92">glFramebufferTexture2D</a></div><div class="ttdeci">#define glFramebufferTexture2D</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00883">gl3w.h:883</a></div></div>
<div class="ttc" id="gl3w_8h_html_a3fb384e4fb282514a8c20afe6ecdb612"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#a3fb384e4fb282514a8c20afe6ecdb612">glPolygonOffset</a></div><div class="ttdeci">#define glPolygonOffset</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l01089">gl3w.h:1089</a></div></div>
<div class="ttc" id="glcorearb_8h_html_acd2abef6afceea16ef19a117ae7fc3eb"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#acd2abef6afceea16ef19a117ae7fc3eb">GL_DST_COLOR</a></div><div class="ttdeci">#define GL_DST_COLOR</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00121">glcorearb.h:121</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a47068f539f908275b14356da7666c869"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a47068f539f908275b14356da7666c869">sg_image_desc::d3d11_texture</a></div><div class="ttdeci">const void * d3d11_texture</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01265">sokol_gfx.h:1265</a></div></div>
<div class="ttc" id="structsg__image__desc_html_a099e099707ea148ef97aa81c526086bf"><div class="ttname"><a href="../../d4/d94/structsg__image__desc.html#a099e099707ea148ef97aa81c526086bf">sg_image_desc::gl_textures</a></div><div class="ttdeci">uint32_t gl_textures[SG_NUM_INFLIGHT_FRAMES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01261">sokol_gfx.h:1261</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ae526e64e80adafdb9898bfaaa37cf522aeb579c50d806e02e56139d56e0e41728"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522aeb579c50d806e02e56139d56e0e41728">SG_CUBEFACE_NUM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00552">sokol_gfx.h:552</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98aad544ad360157642c7fa8ab7ba22e48d"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98aad544ad360157642c7fa8ab7ba22e48d">SG_BLENDFACTOR_SRC_ALPHA_SATURATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00858">sokol_gfx.h:858</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98a69fa29d8ee4acdcf5e77c1c997ce2190"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98a69fa29d8ee4acdcf5e77c1c997ce2190">_SG_BLENDFACTOR_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00847">sokol_gfx.h:847</a></div></div>
<div class="ttc" id="structsg__subimage__content_html"><div class="ttname"><a href="../../d1/d35/structsg__subimage__content.html">sg_subimage_content</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01172">sokol_gfx.h:1172</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8bdcfddea25084e36bde4357057071d4aa8d428001b2200f78af617997a3be81b"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8bdcfddea25084e36bde4357057071d4aa8d428001b2200f78af617997a3be81b">SG_PRIMITIVETYPE_TRIANGLES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00625">sokol_gfx.h:625</a></div></div>
<div class="ttc" id="glcorearb_8h_html_af7575655ac056b187ea385966b95a22d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#af7575655ac056b187ea385966b95a22d">GLchar</a></div><div class="ttdeci">char GLchar</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00693">glcorearb.h:693</a></div></div>
<div class="ttc" id="structsg__depth__stencil__state_html_a77970ed9ed36c663c146234e49502420"><div class="ttname"><a href="../../d5/d6c/structsg__depth__stencil__state.html#a77970ed9ed36c663c146234e49502420">sg_depth_stencil_state::stencil_read_mask</a></div><div class="ttdeci">uint8_t stencil_read_mask</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01415">sokol_gfx.h:1415</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98af56378a9ce157db3a999f590489bb0f9"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af56378a9ce157db3a999f590489bb0f9">SG_BLENDFACTOR_ONE_MINUS_BLEND_ALPHA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00862">sokol_gfx.h:862</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a7a5ca562c069ca1294283df0c7d192ad"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7a5ca562c069ca1294283df0c7d192ad">GL_FRAMEBUFFER_COMPLETE</a></div><div class="ttdeci">#define GL_FRAMEBUFFER_COMPLETE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01142">glcorearb.h:1142</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a8615a0367252cf5c080d6ab20f6c2b98af6d1d055b3feda555776d8ca9432a666">SG_BLENDFACTOR_ZERO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00848">sokol_gfx.h:848</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab7c5971606f2b7513272dc6a2c8b6987ae7e9eb31b86f5d92f394719d4d8581ae">SG_RESOURCESTATE_ALLOC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00436">sokol_gfx.h:436</a></div></div>
<div class="ttc" id="structsg__attachment__desc_html_ad0208f4dba2779f88c66139199f467ca"><div class="ttname"><a href="../../d1/da2/structsg__attachment__desc.html#ad0208f4dba2779f88c66139199f467ca">sg_attachment_desc::face</a></div><div class="ttdeci">int face</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01484">sokol_gfx.h:1484</a></div></div>
<div class="ttc" id="gl3w_8h_html_afc250a2b6bf11f24bb73534a2f053c0d"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#afc250a2b6bf11f24bb73534a2f053c0d">glClear</a></div><div class="ttdeci">#define glClear</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00762">gl3w.h:762</a></div></div>
<div class="ttc" id="gl3w_8h_html_ae4f8384133dc7f9a68ffde907193ca68"><div class="ttname"><a href="../../db/d2b/gl3w_8h.html#ae4f8384133dc7f9a68ffde907193ca68">glDrawBuffers</a></div><div class="ttdeci">#define glDrawBuffers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2b/gl3w_8h_source.html#l00852">gl3w.h:852</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a2a98ddb6f79ec1048ff9e15cdd2422ba"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a2a98ddb6f79ec1048ff9e15cdd2422ba">src</a></div><div class="ttdeci">GLenum src</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l01808">glcorearb.h:1808</a></div></div>
<div class="ttc" id="structsg__buffer__desc_html_aaaa91111849a07716f2d9e840fa17c6e"><div class="ttname"><a href="../../d6/d2c/structsg__buffer__desc.html#aaaa91111849a07716f2d9e840fa17c6e">sg_buffer_desc::gl_buffers</a></div><div class="ttdeci">uint32_t gl_buffers[SG_NUM_INFLIGHT_FRAMES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01152">sokol_gfx.h:1152</a></div></div>
<div class="ttc" id="structsg__pass__action_html_a113673afe37e9c897f3b87b1ec3c2943"><div class="ttname"><a href="../../d3/dbc/structsg__pass__action.html#a113673afe37e9c897f3b87b1ec3c2943">sg_pass_action::depth</a></div><div class="ttdeci">sg_depth_attachment_action depth</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00975">sokol_gfx.h:975</a></div></div>
<div class="ttc" id="BenchCathodeSegmentation_8cxx_html_a7ff4fc3bbf305206c6f2b97d4e6681a0"><div class="ttname"><a href="../../d8/df7/BenchCathodeSegmentation_8cxx.html#a7ff4fc3bbf305206c6f2b97d4e6681a0">state</a></div><div class="ttdeci">benchmark::State &amp; state</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/df7/BenchCathodeSegmentation_8cxx_source.html#l00057">BenchCathodeSegmentation.cxx:57</a></div></div>
<div class="ttc" id="structsg__pipeline__desc_html_a7762d108e4ad271336c3006c84606a9f"><div class="ttname"><a href="../../d5/db3/structsg__pipeline__desc.html#a7762d108e4ad271336c3006c84606a9f">sg_pipeline_desc::index_type</a></div><div class="ttdeci">sg_index_type index_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l01450">sokol_gfx.h:1450</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ae526e64e80adafdb9898bfaaa37cf522a1520a69f073b2ce64d0c01fe94a9be45"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ae526e64e80adafdb9898bfaaa37cf522a1520a69f073b2ce64d0c01fe94a9be45">_SG_CUBEFACE_FORCE_U32</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00553">sokol_gfx.h:553</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a2b3da1bbe9c384305496a19de407488aa546103a62234093824399823dba02002"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a2b3da1bbe9c384305496a19de407488aa546103a62234093824399823dba02002">SG_STENCILOP_DECR_WRAP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00825">sokol_gfx.h:825</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_ab109e8cf001661ba22543b63063f7b42a84115e146ee19b60c763d0dfb1cd347a"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#ab109e8cf001661ba22543b63063f7b42a84115e146ee19b60c763d0dfb1cd347a">SG_FILTER_NEAREST_MIPMAP_NEAREST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00644">sokol_gfx.h:644</a></div></div>
<div class="ttc" id="sokol__gfx_8h_html_a0952a8dc7c636cb63d6b6a60c367a897a900e4644906ceec168a2ce44452e1a31"><div class="ttname"><a href="../../d3/da9/sokol__gfx_8h.html#a0952a8dc7c636cb63d6b6a60c367a897a900e4644906ceec168a2ce44452e1a31">SG_FEATURE_MSAA_RENDER_TARGETS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/da9/sokol__gfx_8h_source.html#l00407">sokol_gfx.h:407</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_bcbb2cf9a3d3d83e5515c82071a07177.html">Framework</a></li><li class="navelem"><a class="el" href="../../dir_f0af9df59806ed8bcb6931e6b1774828.html">DebugGUI</a></li><li class="navelem"><a class="el" href="../../dir_98f4601f151917f192e5caded93b8eca.html">src</a></li><li class="navelem"><a class="el" href="../../d3/da9/sokol__gfx_8h.html">sokol_gfx.h</a></li>
    <li class="footer">Generated on Wed Dec 11 2019 10:27:57 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
