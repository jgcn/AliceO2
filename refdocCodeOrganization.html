<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Project: Code Organization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('refdocCodeOrganization.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Code Organization </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Code organisation</h1>
<h2>Overview</h2>
<p>The AliceO2 repository is subdivided in a number of sub-modules. The <em>per detector</em> sub-modules are grouped under the Detectors directory. The <em>per function</em> are in the top directory or grouped, e.g. Utilites.</p>
<p><a class="el" href="d2/d88/classA.html">A</a> typical submodule looks like :</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;.</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;|-- Common</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;|   |-- CMakeLists.txt</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;|   |-- doc</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;|   |   `-- All documentation files</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;|   |-- include</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;|   |   `-- Common</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;|   |       `-- Factory.h</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;|   |-- src</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;|   |   |-- Internal.h</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;|   |   `-- Factory.cxx</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;|   `-- test</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;|       `-- TestFactory.cxx</div></div><!-- fragment --><p>Depending on the case, some subdirectories can be voluntarily left out or added. The headers go to the include directory if they are part of the interface, in the src otherwise.</p>
<h3>Other repositories in AliceO2Group</h3>
<p>Other repositories in the AliceO2Group follow the same structure.</p>
<h2>Principles</h2>
<p><a class="el" href="d2/d88/classA.html">A</a> number of principles were agreed on that resulted in the above code organisation :</p>
<ul>
<li><a class="el" href="d2/d88/classA.html">A</a> <em>module</em> is a set of code closely related sharing an interface that can result in one or more libraries.</li>
<li>Favour is given to extracting large common components(modules/projects) into their own repositories within AliceO2Group in github.</li>
<li>AliceO2 therefore becomes a thinner repo containing :<ul>
<li>Detector specific code (e.g. related to reconstruction, simulation, calibration or qc).</li>
<li>Commonalities (e.g. DataFormat, Steer-like), i.e. things other components depend on and that have not been extracted to their own repo.</li>
<li>Global algorithms (e.g. global tracking), i.e. things that depend on several detectors.</li>
</ul>
</li>
<li>The directory structure can be either per detector or per function or a mixture. The AliceO2 repository has a mixture of <em>per detector</em> and <em>per function</em> sub-modules with corresponding sub-structure.</li>
<li>Naming : camel-case<ul>
<li>What is repeated / structural starts with a lower case letter (e.g. src, include, test).</li>
<li>The rest (labels, unique names) start with an upper case letter (e.g. Common, Detectors).</li>
</ul>
</li>
<li>Why are headers in <code>MyModule/include/MyModule</code> and not directly in <code>MyModule/include ?</code><ul>
<li>The difficulty here is that we have a number of constraints. First the headers must be installed in a directory named after the module. Second the code which uses the headers must include <code>MyModule/xyz.h</code> and it must work whether it is inside AliceO2 or in a different repo, i.e. whether the headers are installed or they are internal. When evaluating the different options we ended up with this not-totally-perfect solution because all other solutions broke one of the constraints or required a massive hurdle of CMake magic. If someone comes up with a different working solution we would happily consider it. </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="refdoc.html">Documentation pages</a></li>
    <li class="footer">Generated on Wed Dec 11 2019 10:28:05 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
